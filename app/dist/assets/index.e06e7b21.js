(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const f of s)if(f.type==="childList")for(const v of f.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&a(v)}).observe(document,{childList:!0,subtree:!0});function r(s){const f={};return s.integrity&&(f.integrity=s.integrity),s.referrerpolicy&&(f.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?f.credentials="include":s.crossorigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(s){if(s.ep)return;s.ep=!0;const f=r(s);fetch(s.href,f)}})();const nr={};function eS(e){nr.context=e}const tS=(e,t)=>e===t,_n=Symbol("solid-proxy"),Ef=Symbol("solid-track"),_u={equals:tS};let qy=Ky;const Di=1,Du=2,Hy={owned:null,cleanups:null,context:null,owner:null};var $t=null;let Wi=null,Ht=null,pr=null,Gn=null,mh=0;function jo(e,t){const r=Ht,a=$t,s=e.length===0,f=s?Hy:{owned:null,cleanups:null,context:null,owner:t||a},v=s?e:()=>e(()=>Tr(()=>gh(f)));$t=f,Ht=null;try{return Ai(v,!0)}finally{Ht=r,$t=a}}function nt(e,t){t=t?Object.assign({},_u,t):_u;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},a=s=>(typeof s=="function"&&(s=s(r.value)),Xy(r,s));return[Yy.bind(r),a]}function Wt(e,t,r){const a=vh(e,t,!1,Di);ss(a)}function Ir(e,t,r){qy=uS;const a=vh(e,t,!1,Di);a.user=!0,Gn?Gn.push(a):ss(a)}function Re(e,t,r){r=r?Object.assign({},_u,r):_u;const a=vh(e,t,!0,0);return a.observers=null,a.observerSlots=null,a.comparator=r.equals||void 0,ss(a),Yy.bind(a)}function rS(e){return Ai(e,!1)}function Tr(e){const t=Ht;Ht=null;try{return e()}finally{Ht=t}}function Vy(e,t,r){const a=Array.isArray(e);let s,f=r&&r.defer;return v=>{let h;if(a){h=Array(e.length);for(let u=0;u<e.length;u++)h[u]=e[u]()}else h=e();if(f){f=!1;return}const n=Tr(()=>t(h,s,v));return s=h,n}}function Gy(e){Ir(()=>Tr(e))}function as(e){return $t===null||($t.cleanups===null?$t.cleanups=[e]:$t.cleanups.push(e)),e}function Wy(){return Ht}function nS(){return $t}function iS(e,t){const r=$t;$t=e;try{return Ai(t,!0)}finally{$t=r}}function aS(e){const t=Ht,r=$t;return Promise.resolve().then(()=>{Ht=t,$t=r;let a;return Ai(e,!1),Ht=$t=null,a?a.done:void 0})}function gl(e,t){const r=Symbol("context");return{id:r,Provider:cS(r),defaultValue:e}}function os(e){let t;return(t=Qy($t,e.id))!==void 0?t:e.defaultValue}function yl(e){const t=Re(e),r=Re(()=>_f(t()));return r.toArray=()=>{const a=r();return Array.isArray(a)?a:a!=null?[a]:[]},r}function Yy(){const e=Wi;if(this.sources&&(this.state||e))if(this.state===Di||e)ss(this);else{const t=pr;pr=null,Ai(()=>Nu(this),!1),pr=t}if(Ht){const t=this.observers?this.observers.length:0;Ht.sources?(Ht.sources.push(this),Ht.sourceSlots.push(t)):(Ht.sources=[this],Ht.sourceSlots=[t]),this.observers?(this.observers.push(Ht),this.observerSlots.push(Ht.sources.length-1)):(this.observers=[Ht],this.observerSlots=[Ht.sources.length-1])}return this.value}function Xy(e,t,r){let a=e.value;return(!e.comparator||!e.comparator(a,t))&&(e.value=t,e.observers&&e.observers.length&&Ai(()=>{for(let s=0;s<e.observers.length;s+=1){const f=e.observers[s],v=Wi&&Wi.running;v&&Wi.disposed.has(f),(v&&!f.tState||!v&&!f.state)&&(f.pure?pr.push(f):Gn.push(f),f.observers&&Jy(f)),v||(f.state=Di)}if(pr.length>1e6)throw pr=[],new Error},!1)),t}function ss(e){if(!e.fn)return;gh(e);const t=$t,r=Ht,a=mh;Ht=$t=e,oS(e,e.value,a),Ht=r,$t=t}function oS(e,t,r){let a;try{a=e.fn(t)}catch(s){e.pure&&(e.state=Di),Zy(s)}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?Xy(e,a):e.value=a,e.updatedAt=r)}function vh(e,t,r,a=Di,s){const f={fn:e,state:a,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:$t,context:null,pure:r};return $t===null||$t!==Hy&&($t.owned?$t.owned.push(f):$t.owned=[f]),f}function Au(e){const t=Wi;if(e.state===0||t)return;if(e.state===Du||t)return Nu(e);if(e.suspense&&Tr(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<mh);)(e.state||t)&&r.push(e);for(let a=r.length-1;a>=0;a--)if(e=r[a],e.state===Di||t)ss(e);else if(e.state===Du||t){const s=pr;pr=null,Ai(()=>Nu(e,r[0]),!1),pr=s}}function Ai(e,t){if(pr)return e();let r=!1;t||(pr=[]),Gn?r=!0:Gn=[],mh++;try{const a=e();return sS(r),a}catch(a){pr||(Gn=null),Zy(a)}}function sS(e){if(pr&&(Ky(pr),pr=null),e)return;const t=Gn;Gn=null,t.length&&Ai(()=>qy(t),!1)}function Ky(e){for(let t=0;t<e.length;t++)Au(e[t])}function uS(e){let t,r=0;for(t=0;t<e.length;t++){const a=e[t];a.user?e[r++]=a:Au(a)}for(nr.context&&eS(),t=0;t<r;t++)Au(e[t])}function Nu(e,t){const r=Wi;e.state=0;for(let a=0;a<e.sources.length;a+=1){const s=e.sources[a];s.sources&&(s.state===Di||r?s!==t&&Au(s):(s.state===Du||r)&&Nu(s,t))}}function Jy(e){const t=Wi;for(let r=0;r<e.observers.length;r+=1){const a=e.observers[r];(!a.state||t)&&(a.state=Du,a.pure?pr.push(a):Gn.push(a),a.observers&&Jy(a))}}function gh(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),a=e.sourceSlots.pop(),s=r.observers;if(s&&s.length){const f=s.pop(),v=r.observerSlots.pop();a<s.length&&(f.sourceSlots[v]=a,s[a]=f,r.observerSlots[a]=v)}}if(e.owned){for(t=0;t<e.owned.length;t++)gh(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function lS(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function Zy(e){throw e=lS(e),e}function Qy(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:Qy(e.owner,t):void 0}function _f(e){if(typeof e=="function"&&!e.length)return _f(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const a=_f(e[r]);Array.isArray(a)?t.push.apply(t,a):t.push(a)}return t}return e}function cS(e,t){return function(a){let s;return Wt(()=>s=Tr(()=>($t.context={[e]:a.value},yl(()=>a.children))),void 0),s}}const fS=Symbol("fallback");function Pd(e){for(let t=0;t<e.length;t++)e[t]()}function hS(e,t,r={}){let a=[],s=[],f=[],v=0,h=t.length>1?[]:null;return as(()=>Pd(f)),()=>{let n=e()||[],u,o;return n[Ef],Tr(()=>{let l=n.length,c,d,p,m,g,b,y,w,x;if(l===0)v!==0&&(Pd(f),f=[],a=[],s=[],v=0,h&&(h=[])),r.fallback&&(a=[fS],s[0]=jo(C=>(f[0]=C,r.fallback())),v=1);else if(v===0){for(s=new Array(l),o=0;o<l;o++)a[o]=n[o],s[o]=jo(i);v=l}else{for(p=new Array(l),m=new Array(l),h&&(g=new Array(l)),b=0,y=Math.min(v,l);b<y&&a[b]===n[b];b++);for(y=v-1,w=l-1;y>=b&&w>=b&&a[y]===n[w];y--,w--)p[w]=s[y],m[w]=f[y],h&&(g[w]=h[y]);for(c=new Map,d=new Array(w+1),o=w;o>=b;o--)x=n[o],u=c.get(x),d[o]=u===void 0?-1:u,c.set(x,o);for(u=b;u<=y;u++)x=a[u],o=c.get(x),o!==void 0&&o!==-1?(p[o]=s[u],m[o]=f[u],h&&(g[o]=h[u]),o=d[o],c.set(x,o)):f[u]();for(o=b;o<l;o++)o in p?(s[o]=p[o],f[o]=m[o],h&&(h[o]=g[o],h[o](o))):s[o]=jo(i);s=s.slice(0,v=l),a=n.slice(0)}return s});function i(l){if(f[o]=l,h){const[c,d]=nt(o);return h[o]=d,t(n[o],c)}return t(n[o])}}}function $(e,t){return Tr(()=>e(t||{}))}function ks(){return!0}const e1={get(e,t,r){return t===_n?r:e.get(t)},has(e,t){return e.has(t)},set:ks,deleteProperty:ks,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:ks,deleteProperty:ks}},ownKeys(e){return e.keys()}};function Pc(e){return(e=typeof e=="function"?e():e)?e:{}}function Ar(...e){if(e.some(r=>r&&(_n in r||typeof r=="function")))return new Proxy({get(r){for(let a=e.length-1;a>=0;a--){const s=Pc(e[a])[r];if(s!==void 0)return s}},has(r){for(let a=e.length-1;a>=0;a--)if(r in Pc(e[a]))return!0;return!1},keys(){const r=[];for(let a=0;a<e.length;a++)r.push(...Object.keys(Pc(e[a])));return[...new Set(r)]}},e1);const t={};for(let r=e.length-1;r>=0;r--)if(e[r]){const a=Object.getOwnPropertyDescriptors(e[r]);for(const s in a)s in t||Object.defineProperty(t,s,{enumerable:!0,get(){for(let f=e.length-1;f>=0;f--){const v=(e[f]||{})[s];if(v!==void 0)return v}}})}return t}function dS(e,...t){const r=new Set(t.flat()),a=Object.getOwnPropertyDescriptors(e),s=_n in e;s||t.push(Object.keys(a).filter(v=>!r.has(v)));const f=t.map(v=>{const h={};for(let n=0;n<v.length;n++){const u=v[n];!s&&!(u in e)||Object.defineProperty(h,u,a[u]?a[u]:{get(){return e[u]},set(){return!0},enumerable:!0})}return h});return s&&f.push(new Proxy({get(v){return r.has(v)?void 0:e[v]},has(v){return r.has(v)?!1:v in e},keys(){return Object.keys(e).filter(v=>!r.has(v))}},e1)),f}let pS=0;function bl(){const e=nr.context;return e?`${e.id}${e.count++}`:`cl-${pS++}`}function Kn(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Re(hS(()=>e.each,e.children,t||void 0))}function Wr(e){let t=!1;const r=e.keyed,a=Re(()=>e.when,void 0,{equals:(s,f)=>t?s===f:!s==!f});return Re(()=>{const s=a();if(s){const f=e.children,v=typeof f=="function"&&f.length>0;return t=r||v,v?Tr(()=>f(s)):f}return e.fallback})}function Or(e){let t=!1,r=!1;const a=yl(()=>e.children),s=Re(()=>{let f=a();Array.isArray(f)||(f=[f]);for(let v=0;v<f.length;v++){const h=f[v].when;if(h)return r=!!f[v].keyed,[v,h,f[v]]}return[-1]},void 0,{equals:(f,v)=>f[0]===v[0]&&(t?f[1]===v[1]:!f[1]==!v[1])&&f[2]===v[2]});return Re(()=>{const[f,v,h]=s();if(f<0)return e.fallback;const n=h.children,u=typeof n=="function"&&n.length>0;return t=r||u,u?Tr(()=>n(v)):n})}function Ot(e){return e}const mS=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],vS=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...mS]),gS=new Set(["innerHTML","textContent","innerText","children"]),yS=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Bd=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),bS=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),wS=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),xS={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function CS(e,t,r){let a=r.length,s=t.length,f=a,v=0,h=0,n=t[s-1].nextSibling,u=null;for(;v<s||h<f;){if(t[v]===r[h]){v++,h++;continue}for(;t[s-1]===r[f-1];)s--,f--;if(s===v){const o=f<a?h?r[h-1].nextSibling:r[f-h]:n;for(;h<f;)e.insertBefore(r[h++],o)}else if(f===h)for(;v<s;)(!u||!u.has(t[v]))&&t[v].remove(),v++;else if(t[v]===r[f-1]&&r[h]===t[s-1]){const o=t[--s].nextSibling;e.insertBefore(r[h++],t[v++].nextSibling),e.insertBefore(r[--f],o),t[s]=r[f]}else{if(!u){u=new Map;let i=h;for(;i<f;)u.set(r[i],i++)}const o=u.get(t[v]);if(o!=null)if(h<o&&o<f){let i=v,l=1,c;for(;++i<s&&i<f&&!((c=u.get(t[i]))==null||c!==o+l);)l++;if(l>o-h){const d=t[v];for(;h<o;)e.insertBefore(r[h++],d)}else e.replaceChild(r[h++],t[v++])}else v++;else t[v++].remove()}}}const Id="_$DX_DELEGATE";function SS(e,t,r,a={}){let s;return jo(f=>{s=f,t===document?e():Ve(t,e(),t.firstChild?null:void 0,r)},a.owner),()=>{s(),t.textContent=""}}function mt(e,t,r){const a=document.createElement("template");a.innerHTML=e;let s=a.content.firstChild;return r&&(s=s.firstChild),s}function fn(e,t=window.document){const r=t[Id]||(t[Id]=new Set);for(let a=0,s=e.length;a<s;a++){const f=e[a];r.has(f)||(r.add(f),t.addEventListener(f,TS))}}function cr(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function ES(e,t,r,a){a==null?e.removeAttributeNS(t,r):e.setAttributeNS(t,r,a)}function ft(e,t){t==null?e.removeAttribute("class"):e.className=t}function Br(e,t,r,a){if(a)Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r;else if(Array.isArray(r)){const s=r[0];e.addEventListener(t,r[0]=f=>s.call(e,r[1],f))}else e.addEventListener(t,r)}function _S(e,t,r={}){const a=Object.keys(t||{}),s=Object.keys(r);let f,v;for(f=0,v=s.length;f<v;f++){const h=s[f];!h||h==="undefined"||t[h]||(Rd(e,h,!1),delete r[h])}for(f=0,v=a.length;f<v;f++){const h=a[f],n=!!t[h];!h||h==="undefined"||r[h]===n||!n||(Rd(e,h,!0),r[h]=n)}return r}function gi(e,t,r){if(!t)return r?cr(e,"style"):t;const a=e.style;if(typeof t=="string")return a.cssText=t;typeof r=="string"&&(a.cssText=r=void 0),r||(r={}),t||(t={});let s,f;for(f in r)t[f]==null&&a.removeProperty(f),delete r[f];for(f in t)s=t[f],s!==r[f]&&(a.setProperty(f,s),r[f]=s);return r}function Nr(e,t={},r,a){const s={};return a||Wt(()=>s.children=qa(e,t.children,s.children)),Wt(()=>t.ref&&t.ref(e)),Wt(()=>DS(e,t,r,!0,s,!0)),s}function Ki(e,t,r){return Tr(()=>e(t,r))}function Ve(e,t,r,a){if(r!==void 0&&!a&&(a=[]),typeof t!="function")return qa(e,t,a,r);Wt(s=>qa(e,t(),s,r),a)}function DS(e,t,r,a,s={},f=!1){t||(t={});for(const v in s)if(!(v in t)){if(v==="children")continue;s[v]=kd(e,v,null,s[v],r,f)}for(const v in t){if(v==="children"){a||qa(e,t.children);continue}const h=t[v];s[v]=kd(e,v,h,s[v],r,f)}}function AS(e){let t,r;return!nr.context||!(t=nr.registry.get(r=OS()))?e.cloneNode(!0):(nr.completed&&nr.completed.add(t),nr.registry.delete(r),t)}function NS(e){return e.toLowerCase().replace(/-([a-z])/g,(t,r)=>r.toUpperCase())}function Rd(e,t,r){const a=t.trim().split(/\s+/);for(let s=0,f=a.length;s<f;s++)e.classList.toggle(a[s],r)}function kd(e,t,r,a,s,f){let v,h,n;if(t==="style")return gi(e,r,a);if(t==="classList")return _S(e,r,a);if(r===a)return a;if(t==="ref")f||r(e);else if(t.slice(0,3)==="on:"){const u=t.slice(3);a&&e.removeEventListener(u,a),r&&e.addEventListener(u,r)}else if(t.slice(0,10)==="oncapture:"){const u=t.slice(10);a&&e.removeEventListener(u,a,!0),r&&e.addEventListener(u,r,!0)}else if(t.slice(0,2)==="on"){const u=t.slice(2).toLowerCase(),o=bS.has(u);if(!o&&a){const i=Array.isArray(a)?a[0]:a;e.removeEventListener(u,i)}(o||r)&&(Br(e,u,r,o),o&&fn([u]))}else if((n=gS.has(t))||!s&&(Bd[t]||(h=vS.has(t)))||(v=e.nodeName.includes("-")))t==="class"||t==="className"?ft(e,r):v&&!h&&!n?e[NS(t)]=r:e[Bd[t]||t]=r;else{const u=s&&t.indexOf(":")>-1&&xS[t.split(":")[0]];u?ES(e,u,t,r):cr(e,yS[t]||t,r)}return r}function TS(e){const t=`$$${e.type}`;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return r||document}}),nr.registry&&!nr.done&&(nr.done=!0,document.querySelectorAll("[id^=pl-]").forEach(a=>a.remove()));r!==null;){const a=r[t];if(a&&!r.disabled){const s=r[`${t}Data`];if(s!==void 0?a.call(r,s,e):a.call(r,e),e.cancelBubble)return}r=r.host&&r.host!==r&&r.host instanceof Node?r.host:r.parentNode}}function qa(e,t,r,a,s){for(nr.context&&!r&&(r=[...e.childNodes]);typeof r=="function";)r=r();if(t===r)return r;const f=typeof t,v=a!==void 0;if(e=v&&r[0]&&r[0].parentNode||e,f==="string"||f==="number"){if(nr.context)return r;if(f==="number"&&(t=t.toString()),v){let h=r[0];h&&h.nodeType===3?h.data=t:h=document.createTextNode(t),r=xa(e,r,a,h)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||f==="boolean"){if(nr.context)return r;r=xa(e,r,a)}else{if(f==="function")return Wt(()=>{let h=t();for(;typeof h=="function";)h=h();r=qa(e,h,r,a)}),()=>r;if(Array.isArray(t)){const h=[],n=r&&Array.isArray(r);if(Df(h,t,r,s))return Wt(()=>r=qa(e,h,r,a,!0)),()=>r;if(nr.context){if(!h.length)return r;for(let u=0;u<h.length;u++)if(h[u].parentNode)return r=h}if(h.length===0){if(r=xa(e,r,a),v)return r}else n?r.length===0?$d(e,h,a):CS(e,r,h):(r&&xa(e),$d(e,h));r=h}else if(t instanceof Node){if(nr.context&&t.parentNode)return r=v?[t]:t;if(Array.isArray(r)){if(v)return r=xa(e,r,a,t);xa(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function Df(e,t,r,a){let s=!1;for(let f=0,v=t.length;f<v;f++){let h=t[f],n=r&&r[f];if(h instanceof Node)e.push(h);else if(!(h==null||h===!0||h===!1))if(Array.isArray(h))s=Df(e,h,n)||s;else if(typeof h=="function")if(a){for(;typeof h=="function";)h=h();s=Df(e,Array.isArray(h)?h:[h],Array.isArray(n)?n:[n])||s}else e.push(h),s=!0;else{const u=String(h);n&&n.nodeType===3&&n.data===u?e.push(n):e.push(document.createTextNode(u))}}return s}function $d(e,t,r=null){for(let a=0,s=t.length;a<s;a++)e.insertBefore(t[a],r)}function xa(e,t,r,a){if(r===void 0)return e.textContent="";const s=a||document.createTextNode("");if(t.length){let f=!1;for(let v=t.length-1;v>=0;v--){const h=t[v];if(s!==h){const n=h.parentNode===e;!f&&!v?n?e.replaceChild(s,h):e.insertBefore(s,r):n&&h.remove()}else f=!0}}else e.insertBefore(s,r);return[s]}function OS(){const e=nr.context;return`${e.id}${e.count++}`}const t1=!1,MS="http://www.w3.org/2000/svg";function FS(e,t=!1){return t?document.createElementNS(MS,e):document.createElement(e)}function Tu(e){const[t,r]=dS(e,["component"]),a=Re(()=>t.component);return Re(()=>{const s=a();switch(typeof s){case"function":return Tr(()=>s(r));case"string":const f=wS.has(s),v=nr.context?AS():FS(s,f);return Nr(v,r,f),v}})}const Af=Symbol("store-raw"),Wo=Symbol("store-node"),PS=Symbol("store-name");function r1(e,t){let r=e[_n];if(!r&&(Object.defineProperty(e,_n,{value:r=new Proxy(e,RS)}),!Array.isArray(e))){const a=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let f=0,v=a.length;f<v;f++){const h=a[f];if(s[h].get){const n=s[h].get.bind(r);Object.defineProperty(e,h,{enumerable:s[h].enumerable,get:n})}}}return r}function yi(e){let t;return e!=null&&typeof e=="object"&&(e[_n]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function Ha(e,t=new Set){let r,a,s,f;if(r=e!=null&&e[Af])return r;if(!yi(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let v=0,h=e.length;v<h;v++)s=e[v],(a=Ha(s,t))!==s&&(e[v]=a)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const v=Object.keys(e),h=Object.getOwnPropertyDescriptors(e);for(let n=0,u=v.length;n<u;n++)f=v[n],!h[f].get&&(s=e[f],(a=Ha(s,t))!==s&&(e[f]=a))}return e}function yh(e){let t=e[Wo];return t||Object.defineProperty(e,Wo,{value:t={}}),t}function Nf(e,t,r){return e[t]||(e[t]=i1(r))}function BS(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||!r.configurable||t===_n||t===Wo||t===PS||(delete r.value,delete r.writable,r.get=()=>e[_n][t]),r}function n1(e){if(Wy()){const t=yh(e);(t._||(t._=i1()))()}}function IS(e){return n1(e),Reflect.ownKeys(e)}function i1(e){const[t,r]=nt(e,{equals:!1,internal:!0});return t.$=r,t}const RS={get(e,t,r){if(t===Af)return e;if(t===_n)return r;if(t===Ef)return n1(e),r;const a=yh(e),s=a.hasOwnProperty(t);let f=s?a[t]():e[t];if(t===Wo||t==="__proto__")return f;if(!s){const v=Object.getOwnPropertyDescriptor(e,t);Wy()&&(typeof f!="function"||e.hasOwnProperty(t))&&!(v&&v.get)&&(f=Nf(a,t,f)())}return yi(f)?r1(f):f},has(e,t){return t===Af||t===_n||t===Ef||t===Wo||t==="__proto__"?!0:(this.get(e,t,e),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:IS,getOwnPropertyDescriptor:BS};function Ur(e,t,r,a=!1){if(!a&&e[t]===r)return;const s=e[t],f=e.length;r===void 0?delete e[t]:e[t]=r;let v=yh(e),h;(h=Nf(v,t,s))&&h.$(()=>r),Array.isArray(e)&&e.length!==f&&(h=Nf(v,"length",f))&&h.$(e.length),(h=v._)&&h.$()}function a1(e,t){const r=Object.keys(t);for(let a=0;a<r.length;a+=1){const s=r[a];Ur(e,s,t[s])}}function kS(e,t){if(typeof t=="function"&&(t=t(e)),t=Ha(t),Array.isArray(t)){if(e===t)return;let r=0,a=t.length;for(;r<a;r++){const s=t[r];e[r]!==s&&Ur(e,r,s)}Ur(e,"length",a)}else a1(e,t)}function $o(e,t,r=[]){let a,s=e;if(t.length>1){a=t.shift();const v=typeof a,h=Array.isArray(e);if(Array.isArray(a)){for(let n=0;n<a.length;n++)$o(e,[a[n]].concat(t),r);return}else if(h&&v==="function"){for(let n=0;n<e.length;n++)a(e[n],n)&&$o(e,[n].concat(t),r);return}else if(h&&v==="object"){const{from:n=0,to:u=e.length-1,by:o=1}=a;for(let i=n;i<=u;i+=o)$o(e,[i].concat(t),r);return}else if(t.length>1){$o(e[a],t,[a].concat(r));return}s=e[a],r=[a].concat(r)}let f=t[0];typeof f=="function"&&(f=f(s,r),f===s)||a===void 0&&f==null||(f=Ha(f),a===void 0||yi(s)&&yi(f)&&!Array.isArray(f)?a1(s,f):Ur(e,a,f))}function bh(...[e,t]){const r=Ha(e||{}),a=Array.isArray(r),s=r1(r);function f(...v){rS(()=>{a&&v.length===1?kS(r,v[0]):$o(r,v)})}return[s,f]}const Tf=Symbol("store-root");function Oa(e,t,r,a,s){const f=t[r];if(e===f)return;if(!yi(e)||!yi(f)||s&&e[s]!==f[s]){if(e!==f){if(r===Tf)return e;Ur(t,r,e)}return}if(Array.isArray(e)){if(e.length&&f.length&&(!a||s&&e[0][s]!=null)){let n,u,o,i,l,c,d,p;for(o=0,i=Math.min(f.length,e.length);o<i&&(f[o]===e[o]||s&&f[o][s]===e[o][s]);o++)Oa(e[o],f,o,a,s);const m=new Array(e.length),g=new Map;for(i=f.length-1,l=e.length-1;i>=o&&l>=o&&(f[i]===e[l]||s&&f[i][s]===e[l][s]);i--,l--)m[l]=f[i];if(o>l||o>i){for(u=o;u<=l;u++)Ur(f,u,e[u]);for(;u<e.length;u++)Ur(f,u,m[u]),Oa(e[u],f,u,a,s);f.length>e.length&&Ur(f,"length",e.length);return}for(d=new Array(l+1),u=l;u>=o;u--)c=e[u],p=s?c[s]:c,n=g.get(p),d[u]=n===void 0?-1:n,g.set(p,u);for(n=o;n<=i;n++)c=f[n],p=s?c[s]:c,u=g.get(p),u!==void 0&&u!==-1&&(m[u]=f[n],u=d[u],g.set(p,u));for(u=o;u<e.length;u++)u in m?(Ur(f,u,m[u]),Oa(e[u],f,u,a,s)):Ur(f,u,e[u])}else for(let n=0,u=e.length;n<u;n++)Oa(e[n],f,n,a,s);f.length>e.length&&Ur(f,"length",e.length);return}const v=Object.keys(e);for(let n=0,u=v.length;n<u;n++)Oa(e[v[n]],f,v[n],a,s);const h=Object.keys(f);for(let n=0,u=h.length;n<u;n++)e[h[n]]===void 0&&Ur(f,h[n],void 0)}function $S(e,t={}){const{merge:r,key:a="id"}=t,s=Ha(e);return f=>{if(!yi(f)||!yi(s))return s;const v=Oa(s,{[Tf]:f},Tf,r,a);return v===void 0?f:v}}var Of=(e,t,r)=>{const a=t.trim().split(".").reduce((s,f)=>s?s[f]:void 0,e);return a!==void 0?a:r},LS=(e,t,r=/{{(.*?)}}/g)=>e.replace(r,(a,s)=>Of(t,s,"")),zS=(e={},t=navigator.language in e?navigator.language:Object.keys(e)[0])=>{const[r,a]=nt(t),[s,f]=bh(e);return[(n,u,o)=>{const i=Of(s[r()],n,o||"");return typeof i=="function"?i(u):typeof i=="string"?LS(i,u||{}):i},{add(n,u){f(n,o=>Object.assign(o||{},u))},locale:n=>n?a(n):r(),dict:n=>Of(s,n)}]},o1=gl({}),jt=()=>os(o1);function s1(e,t,r){return e.addEventListener(t,r),()=>e.removeEventListener(t,r)}function US([e,t],r,a){return[r?()=>r(e()):e,a?s=>t(a(s)):t]}function jS(e){try{return document.querySelector(e)}catch{return null}}function u1(e,t){const r=jS(`#${e}`);r?r.scrollIntoView():t&&window.scrollTo(0,0)}function l1(e,t,r,a){let s=!1;const f=h=>typeof h=="string"?{value:h}:h,v=US(nt(f(e()),{equals:(h,n)=>h.value===n.value}),void 0,h=>(!s&&t(h),h));return r&&as(r((h=e())=>{s=!0,v[1](f(h)),s=!1})),{signal:v,utils:a}}function qS(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:nt({value:""})};return e}function HS(){return l1(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:e,replace:t,scroll:r,state:a})=>{t?window.history.replaceState(a,"",e):window.history.pushState(a,"",e),u1(window.location.hash.slice(1),r)},e=>s1(window,"popstate",()=>e()),{go:e=>window.history.go(e)})}function VS(){return l1(()=>window.location.hash.slice(1),({value:e,replace:t,scroll:r,state:a})=>{t?window.history.replaceState(a,"","#"+e):window.location.hash=e;const s=e.indexOf("#"),f=s>=0?e.slice(s+1):"";u1(f,r)},e=>s1(window,"hashchange",()=>e()),{go:e=>window.history.go(e),renderPath:e=>`#${e}`,parsePath:e=>{const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,r="/"]=window.location.hash.split("#",2);return`${r}#${t}`}return t}})}function GS(){let e=new Set;function t(s){return e.add(s),()=>e.delete(s)}let r=!1;function a(s,f){if(r)return!(r=!1);const v={to:s,options:f,defaultPrevented:!1,preventDefault:()=>v.defaultPrevented=!0};for(const h of e)h.listener({...v,from:h.location,retry:n=>{n&&(r=!0),h.navigate(s,f)}});return!v.defaultPrevented}return{subscribe:t,confirm:a}}const WS=/^(?:[a-z0-9]+:)?\/\//i,YS=/^\/+|\/+$/g;function qo(e,t=!1){const r=e.replace(YS,"");return r?t||/^[?#]/.test(r)?r:"/"+r:""}function gu(e,t,r){if(WS.test(t))return;const a=qo(e),s=r&&qo(r);let f="";return!s||t.startsWith("/")?f=a:s.toLowerCase().indexOf(a.toLowerCase())!==0?f=a+s:f=s,(f||"/")+qo(t,!f)}function XS(e,t){if(e==null)throw new Error(t);return e}function c1(e,t){return qo(e).replace(/\/*(\*.*)?$/g,"")+qo(t)}function KS(e){const t={};return e.searchParams.forEach((r,a)=>{t[a]=r}),t}function yu(e,t){return decodeURIComponent(t?e.replace(/\+/g," "):e)}function JS(e,t){const[r,a]=e.split("/*",2),s=r.split("/").filter(Boolean),f=s.length;return v=>{const h=v.split("/").filter(Boolean),n=h.length-f;if(n<0||n>0&&a===void 0&&!t)return null;const u={path:f?"":"/",params:{}};for(let o=0;o<f;o++){const i=s[o],l=h[o];if(i[0]===":")u.params[i.slice(1)]=l;else if(i.localeCompare(l,void 0,{sensitivity:"base"})!==0)return null;u.path+=`/${l}`}return a&&(u.params[a]=n?h.slice(-n).join("/"):""),u}}function ZS(e){const[t,r]=e.pattern.split("/*",2),a=t.split("/").filter(Boolean);return a.reduce((s,f)=>s+(f.startsWith(":")?2:3),a.length-(r===void 0?0:1))}function f1(e){const t=new Map,r=nS();return new Proxy({},{get(a,s){return t.has(s)||iS(r,()=>t.set(s,Re(()=>e()[s]))),t.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function QS(e,t){const r=new URLSearchParams(e);Object.entries(t).forEach(([s,f])=>{f==null||f===""?r.delete(s):r.set(s,String(f))});const a=r.toString();return a?`?${a}`:""}function h1(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let r=e.slice(0,t.index),a=e.slice(t.index+t[0].length);const s=[r,r+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(a);)s.push(r+=t[1]),a=a.slice(t[0].length);return h1(a).reduce((f,v)=>[...f,...s.map(h=>h+v)],[])}const eE=100,d1=gl(),wl=gl(),xl=()=>XS(os(d1),"Make sure your app is wrapped in a <Router />");let Yo;const p1=()=>Yo||os(wl)||xl().base,wh=()=>xl().navigatorFactory(),m1=()=>xl().location,tE=()=>{const e=m1(),t=wh(),r=(a,s)=>{const f=Tr(()=>QS(e.search,a));t(e.pathname+f+e.hash,{scroll:!1,resolve:!1,...s})};return[e.query,r]};function rE(e,t="",r){const{component:a,data:s,children:f}=e,v=!f||Array.isArray(f)&&!f.length,h={key:e,element:a?()=>$(a,{}):()=>{const{element:n}=e;return n===void 0&&r?$(r,{}):n},preload:e.component?a.preload:e.preload,data:s};return v1(e.path).reduce((n,u)=>{for(const o of h1(u)){const i=c1(t,o),l=v?i:i.split("/*",1)[0];n.push({...h,originalPath:o,pattern:l,matcher:JS(l,!v)})}return n},[])}function nE(e,t=0){return{routes:e,score:ZS(e[e.length-1])*1e4-t,matcher(r){const a=[];for(let s=e.length-1;s>=0;s--){const f=e[s],v=f.matcher(r);if(!v)return null;a.unshift({...v,route:f})}return a}}}function v1(e){return Array.isArray(e)?e:[e]}function g1(e,t="",r,a=[],s=[]){const f=v1(e);for(let v=0,h=f.length;v<h;v++){const n=f[v];if(n&&typeof n=="object"&&n.hasOwnProperty("path")){const u=rE(n,t,r);for(const o of u){a.push(o);const i=Array.isArray(n.children)&&n.children.length===0;if(n.children&&!i)g1(n.children,o.pattern,r,a,s);else{const l=nE([...a],s.length);s.push(l)}a.pop()}}}return a.length?s:s.sort((v,h)=>h.score-v.score)}function iE(e,t){for(let r=0,a=e.length;r<a;r++){const s=e[r].matcher(t);if(s)return s}return[]}function aE(e,t){const r=new URL("http://sar"),a=Re(n=>{const u=e();try{return new URL(u,r)}catch{return console.error(`Invalid path ${u}`),n}},r,{equals:(n,u)=>n.href===u.href}),s=Re(()=>yu(a().pathname)),f=Re(()=>yu(a().search,!0)),v=Re(()=>yu(a().hash)),h=Re(()=>"");return{get pathname(){return s()},get search(){return f()},get hash(){return v()},get state(){return t()},get key(){return h()},query:f1(Vy(f,()=>KS(a())))}}function oE(e,t="",r,a){const{signal:[s,f],utils:v={}}=qS(e),h=v.parsePath||(D=>D),n=v.renderPath||(D=>D),u=v.beforeLeave||GS(),o=gu("",t),i=void 0;if(o===void 0)throw new Error(`${o} is not a valid base path`);o&&!s().value&&f({value:o,replace:!0,scroll:!1});const[l,c]=nt(!1),d=async D=>{c(!0);try{await aS(D)}finally{c(!1)}},[p,m]=nt(s().value),[g,b]=nt(s().state),y=aE(p,g),w=[],x={pattern:o,params:{},path:()=>o,outlet:()=>null,resolvePath(D){return gu(o,D)}};if(r)try{Yo=x,x.data=r({data:void 0,params:{},location:y,navigate:S(x)})}finally{Yo=void 0}function C(D,M,B){Tr(()=>{if(typeof M=="number"){M&&(v.go?u.confirm(M,B)&&v.go(M):console.warn("Router integration does not support relative routing"));return}const{replace:O,resolve:F,scroll:z,state:N}={replace:!1,resolve:!0,scroll:!0,...B},T=F?D.resolvePath(M):gu("",M);if(T===void 0)throw new Error(`Path '${M}' is not a routable path`);if(w.length>=eE)throw new Error("Too many redirects");const q=p();if((T!==q||N!==g())&&!t1){if(u.confirm(T,B)){const _=w.push({value:q,replace:O,scroll:z,state:g()});d(()=>{m(T),b(N)}).then(()=>{w.length===_&&E({value:T,state:N})})}}})}function S(D){return D=D||os(wl)||x,(M,B)=>C(D,M,B)}function E(D){const M=w[0];M&&((D.value!==M.value||D.state!==M.state)&&f({...D,replace:M.replace,scroll:M.scroll}),w.length=0)}Wt(()=>{const{value:D,state:M}=s();Tr(()=>{D!==p()&&d(()=>{m(D),b(M)})})});{let D=function(M){if(M.defaultPrevented||M.button!==0||M.metaKey||M.altKey||M.ctrlKey||M.shiftKey)return;const B=M.composedPath().find(_=>_ instanceof Node&&_.nodeName.toUpperCase()==="A");if(!B||!B.hasAttribute("link"))return;const O=B.href;if(B.target||!O&&!B.hasAttribute("state"))return;const F=(B.getAttribute("rel")||"").split(/\s+/);if(B.hasAttribute("download")||F&&F.includes("external"))return;const z=new URL(O),N=yu(z.pathname);if(z.origin!==window.location.origin||o&&N&&!N.toLowerCase().startsWith(o.toLowerCase()))return;const T=h(z.pathname+z.search+z.hash),q=B.getAttribute("state");M.preventDefault(),C(x,T,{resolve:!1,replace:B.hasAttribute("replace"),scroll:!B.hasAttribute("noscroll"),state:q&&JSON.parse(q)})};var A=D;fn(["click"]),document.addEventListener("click",D),as(()=>document.removeEventListener("click",D))}return{base:x,out:i,location:y,isRouting:l,renderPath:n,parsePath:h,navigatorFactory:S,beforeLeave:u}}function sE(e,t,r,a){const{base:s,location:f,navigatorFactory:v}=e,{pattern:h,element:n,preload:u,data:o}=a().route,i=Re(()=>a().path),l=f1(()=>a().params);u&&u();const c={parent:t,pattern:h,get child(){return r()},path:i,params:l,data:t.data,outlet:n,resolvePath(d){return gu(s.path(),d,i())}};if(o)try{Yo=c,c.data=o({data:t.data,params:l,location:f,navigate:v(c)})}finally{Yo=void 0}return c}const uE=e=>{const{source:t,url:r,base:a,data:s,out:f}=e,v=t||HS(),h=oE(v,a,s);return $(d1.Provider,{value:h,get children(){return e.children}})},lE=e=>{const t=xl(),r=p1(),a=yl(()=>e.children),s=Re(()=>g1(a(),c1(r.pattern,e.base||""),cE)),f=Re(()=>iE(s(),t.location.pathname));t.out&&t.out.matches.push(f().map(({route:u,path:o,params:i})=>({originalPath:u.originalPath,pattern:u.pattern,path:o,params:i})));const v=[];let h;const n=Re(Vy(f,(u,o,i)=>{let l=o&&u.length===o.length;const c=[];for(let d=0,p=u.length;d<p;d++){const m=o&&o[d],g=u[d];i&&m&&g.route.key===m.route.key?c[d]=i[d]:(l=!1,v[d]&&v[d](),jo(b=>{v[d]=b,c[d]=sE(t,c[d-1]||r,()=>n()[d+1],()=>f()[d])}))}return v.splice(u.length).forEach(d=>d()),i&&l?i:(h=c[0],c)}));return $(Wr,{get when(){return n()&&h},children:u=>$(wl.Provider,{value:u,get children(){return u.outlet()}})})},$s=e=>{const t=yl(()=>e.children);return Ar(e,{get children(){return t()}})},cE=()=>{const e=p1();return $(Wr,{get when(){return e.child},children:t=>$(wl.Provider,{value:t,get children(){return t.outlet()}})})};function fE(e){const t=wh(),r=m1(),{href:a,state:s}=e,f=typeof a=="function"?a({navigate:t,location:r}):a;return t(f,{replace:!0,state:s}),null}var hE="o115ly0",sn={yellow:"#f2f230",pink:"#e949f5",neonpink:"#ff00ff",green:"#0fff50",neongreen:"#00ff00",darkblue:"#2c84fa",blue:"#3f99ff",neonblue:"#00ffff",red:"#ff1818",fontPrimary:"#ffffff",background:"#27262b",background100:"#080c12",background100a70:"#080c1270",background100aee:"#080c12ef",background200:"#12171d",background300:"#567091"},dE="z5tqv70",xh={fontFamily:"var(--z5tqv71)",fontSizes:{small:"var(--z5tqv72)",standard:"var(--z5tqv73)",bigger:"var(--z5tqv74)",large:"var(--z5tqv75)"},colors:{yellow:"var(--z5tqv76)",pink:"var(--z5tqv77)",neonpink:"var(--z5tqv78)",green:"var(--z5tqv79)",neongreen:"var(--z5tqv7a)",darkblue:"var(--z5tqv7b)",blue:"var(--z5tqv7c)",neonblue:"var(--z5tqv7d)",red:"var(--z5tqv7e)",fontPrimary:"var(--z5tqv7f)",background:"var(--z5tqv7g)",background100:"var(--z5tqv7h)",background100a70:"var(--z5tqv7i)",background100aee:"var(--z5tqv7j)",background200:"var(--z5tqv7k)",background300:"var(--z5tqv7l)"}};function y1(e,t){const r=gl(t);return[f=>$(r.Provider,{value:e(f),get children(){return f.children}}),()=>os(r)]}let Ls;const pE=new Uint8Array(16);function mE(){if(!Ls&&(Ls=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ls))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ls(pE)}const sr=[];for(let e=0;e<256;++e)sr.push((e+256).toString(16).slice(1));function vE(e,t=0){return(sr[e[t+0]]+sr[e[t+1]]+sr[e[t+2]]+sr[e[t+3]]+"-"+sr[e[t+4]]+sr[e[t+5]]+"-"+sr[e[t+6]]+sr[e[t+7]]+"-"+sr[e[t+8]]+sr[e[t+9]]+"-"+sr[e[t+10]]+sr[e[t+11]]+sr[e[t+12]]+sr[e[t+13]]+sr[e[t+14]]+sr[e[t+15]]).toLowerCase()}const gE=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ld={randomUUID:gE};function ti(e,t,r){if(Ld.randomUUID&&!t&&!e)return Ld.randomUUID();e=e||{};const a=e.random||(e.rng||mE)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,t){r=r||0;for(let s=0;s<16;++s)t[r+s]=a[s];return t}return vE(a)}const Cl={id:"",player:"",name:"",background:"",bio:[0,0],psy:[0,0],inf:[0,0],hp:[0,0],armor:0,subscription:"",credits:0,inventory:[],cybermods:[],cyberdeck:[],shared:!1,deprived:!1},b1=e=>({username:"Noname",browserID:e?ti():"",hosting:!1,remote:"",nats:"",nats_token:"",lang:"en",color:"#fff"}),yE={tool:"select",brush:"white",fill:"transparent",width:1},Mf=e=>({id:e?ti():"",name:e?"Noname":"",symbol:"s1",bio:e?10:0,psy:e?10:0,inf:e?10:0,hp:e?3:0,armor:0,dmgdice:0,description:""}),[li,w1]=nt("Corporation"),[Xo,Ko]=nt([]),[lt,Ou]=nt(b1()),[bE,wE]=nt(0),[xE,Ni]=y1(()=>{const[e,t]=nt(Cl);return{editCharacter:e,setEditCharacter:t}}),[CE,Kt]=y1(()=>{const[e,t]=bh({}),[r,a]=nt(yE),[s,f]=nt([]),[v,h]=nt({}),[n,u]=nt({}),[o,i]=nt({}),[l,c]=nt(),[d,p]=nt({}),[m,g]=nt({msg:"",delay:0}),[b,y]=nt("1d4"),[w,x]=nt(),[C,S]=nt(Cl),[E,A]=nt(Mf()),[D,M]=nt({}),[B,O]=nt("");return{charData:e,setCharData:t,wbState:r,setWbState:a,rollHistory:s,setRollHistory:f,noteData:v,setNoteData:h,selectedDice:b,setSelectedDice:y,selectedNote:w,setSelectedNote:x,drawCache:d,setDrawCache:p,selectedChar:C,setSelectedChar:S,boardData:n,setBoardData:u,subeditOpen:B,setSubeditOpen:O,trackData:o,setTrackData:i,selectedTrack:E,setSelectedTrack:A,mqttClient:l,setMqttClient:c,notification:m,setNotification:g,connections:D,setConnections:M}});function ur(){return ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ur.apply(this,arguments)}var x1={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function dt(e){return typeof e=="number"}function ct(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function Wn(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function us(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function zn(e){return e&&e.constructor.prototype.isUnit===!0||!1}function Cr(e){return typeof e=="string"}var Et=Array.isArray;function Ze(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function Jn(e){return Array.isArray(e)||Ze(e)}function Mu(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Gi(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Ch(e){return e&&e.constructor.prototype.isRange===!0||!1}function Sl(e){return e&&e.constructor.prototype.isIndex===!0||!1}function SE(e){return typeof e=="boolean"}function EE(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function C1(e){return e&&e.constructor.prototype.isHelp===!0||!1}function _E(e){return typeof e=="function"}function DE(e){return e instanceof Date}function AE(e){return e instanceof RegExp}function Sh(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!Wn(e)&&!us(e))}function NE(e){return e===null}function TE(e){return e===void 0}function Ji(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function jr(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function OE(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function ME(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function FE(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function gt(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ff(e){return gt(e)||Xt(e)&&e.args.length===1&&gt(e.args[0])&&"-+~".includes(e.op)}function ls(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function bi(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function no(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function _t(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function El(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function Xt(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function Zn(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function PE(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function BE(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function ir(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function S1(e){return e&&e.constructor.prototype.isChain===!0||!1}function Bt(e){var t=typeof e;return t==="object"?e===null?"null":ct(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function Je(e){var t=typeof e;if(t==="number"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(r){return Je(r)});if(e instanceof Date)return new Date(e.valueOf());if(ct(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return IE(e,Je)}function IE(e,t){var r={};for(var a in e)ze(e,a)&&(r[a]=t(e[a]));return r}function E1(e,t){for(var r in t)ze(t,r)&&(e[r]=t[r]);return e}function Jo(e,t){var r,a,s;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(a=0,s=e.length;a<s;a++)if(!Jo(e[a],t[a]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(r in e)if(!(r in t)||!Jo(e[r],t[r]))return!1;for(r in t)if(!(r in e))return!1;return!0}else return e===t}}function RE(e,t,r){var a=!0,s;Object.defineProperty(e,t,{get:function(){return a&&(s=r(),a=!1),s},set:function(v){s=v,a=!1},configurable:!0,enumerable:!0})}function ze(e,t){return e&&Object.hasOwnProperty.call(e,t)}function kE(e,t){for(var r={},a=0;a<t.length;a++){var s=t[a],f=e[s];f!==void 0&&(r[s]=f)}return r}var $E=["Matrix","Array"],LE=["number","BigNumber","Fraction"],Ee=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(x1)};ur(Ee,x1,{MATRIX_OPTIONS:$E,NUMBER_OPTIONS:LE});function nn(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=zE(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var a=0,s=function(){};return{s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(u){throw u},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,v=!1,h;return{s:function(){r=r.call(e)},n:function(){var u=r.next();return f=u.done,u},e:function(u){v=!0,h=u},f:function(){try{!f&&r.return!=null&&r.return()}finally{if(v)throw h}}}}function zE(e,t){if(!!e){if(typeof e=="string")return zd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zd(e,t)}}function zd(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Ma(e){return Ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ma(e)}function Ud(){return!0}function Lr(){return!1}function Ca(){}var jd="Argument is not a typed-function.";function _1(){function e(Y){return Ma(Y)==="object"&&Y!==null&&Y.constructor===Object}var t=[{name:"number",test:function(K){return typeof K=="number"}},{name:"string",test:function(K){return typeof K=="string"}},{name:"boolean",test:function(K){return typeof K=="boolean"}},{name:"Function",test:function(K){return typeof K=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(K){return K instanceof Date}},{name:"RegExp",test:function(K){return K instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(K){return K===null}},{name:"undefined",test:function(K){return K===void 0}}],r={name:"any",test:Ud,isAny:!0},a,s,f=0,v={createCount:0};function h(Y){var K=a.get(Y);if(K)return K;var fe='Unknown type "'+Y+'"',me=Y.toLowerCase(),be,Se=nn(s),xe;try{for(Se.s();!(xe=Se.n()).done;)if(be=xe.value,be.toLowerCase()===me){fe+='. Did you mean "'+be+'" ?';break}}catch(Ce){Se.e(Ce)}finally{Se.f()}throw new TypeError(fe)}function n(Y){for(var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",fe=K?h(K).index:s.length,me=[],be=0;be<Y.length;++be){if(!Y[be]||typeof Y[be].name!="string"||typeof Y[be].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var Se=Y[be].name;if(a.has(Se))throw new TypeError('Duplicate type name "'+Se+'"');me.push(Se),a.set(Se,{name:Se,test:Y[be].test,isAny:Y[be].isAny,index:fe+be,conversionsTo:[]})}var xe=s.slice(fe);s=s.slice(0,fe).concat(me).concat(xe);for(var Ce=fe+me.length;Ce<s.length;++Ce)a.get(s[Ce]).index=Ce}function u(){a=new Map,s=[],f=0,n([r],!1)}u(),n(t);function o(){var Y,K=nn(s),fe;try{for(K.s();!(fe=K.n()).done;)Y=fe.value,a.get(Y).conversionsTo=[]}catch(me){K.e(me)}finally{K.f()}f=0}function i(Y){var K=s.filter(function(fe){var me=a.get(fe);return!me.isAny&&me.test(Y)});return K.length?K:["any"]}function l(Y){return Y&&typeof Y=="function"&&"_typedFunctionData"in Y}function c(Y,K,fe){if(!l(Y))throw new TypeError(jd);var me=fe&&fe.exact,be=Array.isArray(K)?K.join(","):K,Se=w(be),xe=m(Se);if(!me||xe in Y.signatures){var Ce=Y._typedFunctionData.signatureMap.get(xe);if(Ce)return Ce}var _e=Se.length,ke;if(me){ke=[];var Ye;for(Ye in Y.signatures)ke.push(Y._typedFunctionData.signatureMap.get(Ye))}else ke=Y._typedFunctionData.signatures;for(var Fe=0;Fe<_e;++Fe){var wt=Se[Fe],et=[],Ct=void 0,R=nn(ke),oe;try{for(R.s();!(oe=R.n()).done;){Ct=oe.value;var ye=E(Ct.params,Fe);if(!(!ye||wt.restParam&&!ye.restParam)){if(!ye.hasAny){var Ne=function(){var rr=y(ye);if(wt.types.some(function(In){return!rr.has(In.name)}))return"continue"}();if(Ne==="continue")continue}et.push(Ct)}}}catch(rr){R.e(rr)}finally{R.f()}if(ke=et,ke.length===0)break}var He,We=nn(ke),Vt;try{for(We.s();!(Vt=We.n()).done;)if(He=Vt.value,He.params.length<=_e)return He}catch(rr){We.e(rr)}finally{We.f()}throw new TypeError("Signature not found (signature: "+(Y.name||"unnamed")+"("+m(Se,", ")+"))")}function d(Y,K,fe){return c(Y,K,fe).implementation}function p(Y,K){var fe=h(K);if(fe.test(Y))return Y;var me=fe.conversionsTo;if(me.length===0)throw new Error("There are no conversions to "+K+" defined.");for(var be=0;be<me.length;be++){var Se=h(me[be].from);if(Se.test(Y))return me[be].convert(Y)}throw new Error("Cannot convert "+Y+" to "+K)}function m(Y){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return Y.map(function(fe){return fe.name}).join(K)}function g(Y){var K=Y.indexOf("...")===0,fe=K?Y.length>3?Y.slice(3):"any":Y,me=fe.split("|").map(function(Ce){return h(Ce.trim())}),be=!1,Se=K?"...":"",xe=me.map(function(Ce){return be=Ce.isAny||be,Se+=Ce.name+"|",{name:Ce.name,typeIndex:Ce.index,test:Ce.test,isAny:Ce.isAny,conversion:null,conversionIndex:-1}});return{types:xe,name:Se.slice(0,-1),hasAny:be,hasConversion:!1,restParam:K}}function b(Y){var K=Y.types.map(function(xe){return xe.name}),fe=T(K),me=Y.hasAny,be=Y.name,Se=fe.map(function(xe){var Ce=h(xe.from);return me=Ce.isAny||me,be+="|"+xe.from,{name:xe.from,typeIndex:Ce.index,test:Ce.test,isAny:Ce.isAny,conversion:xe,conversionIndex:xe.index}});return{types:Y.types.concat(Se),name:be,hasAny:me,hasConversion:Se.length>0,restParam:Y.restParam}}function y(Y){return Y.typeSet||(Y.typeSet=new Set,Y.types.forEach(function(K){return Y.typeSet.add(K.name)})),Y.typeSet}function w(Y){var K=[];if(typeof Y!="string")throw new TypeError("Signatures must be strings");var fe=Y.trim();if(fe==="")return K;for(var me=fe.split(","),be=0;be<me.length;++be){var Se=g(me[be].trim());if(Se.restParam&&be!==me.length-1)throw new SyntaxError('Unexpected rest parameter "'+me[be]+'": only allowed for the last parameter');if(Se.types.length===0)return null;K.push(Se)}return K}function x(Y){var K=re(Y);return K?K.restParam:!1}function C(Y){if(!Y||Y.types.length===0)return Ud;if(Y.types.length===1)return h(Y.types[0].name).test;if(Y.types.length===2){var K=h(Y.types[0].name).test,fe=h(Y.types[1].name).test;return function(Se){return K(Se)||fe(Se)}}else{var me=Y.types.map(function(be){return h(be.name).test});return function(Se){for(var xe=0;xe<me.length;xe++)if(me[xe](Se))return!0;return!1}}}function S(Y){var K,fe,me;if(x(Y)){K=ne(Y).map(C);var be=K.length,Se=C(re(Y)),xe=function(_e){for(var ke=be;ke<_e.length;ke++)if(!Se(_e[ke]))return!1;return!0};return function(_e){for(var ke=0;ke<K.length;ke++)if(!K[ke](_e[ke]))return!1;return xe(_e)&&_e.length>=be+1}}else return Y.length===0?function(_e){return _e.length===0}:Y.length===1?(fe=C(Y[0]),function(_e){return fe(_e[0])&&_e.length===1}):Y.length===2?(fe=C(Y[0]),me=C(Y[1]),function(_e){return fe(_e[0])&&me(_e[1])&&_e.length===2}):(K=Y.map(C),function(_e){for(var ke=0;ke<K.length;ke++)if(!K[ke](_e[ke]))return!1;return _e.length===K.length})}function E(Y,K){return K<Y.length?Y[K]:x(Y)?re(Y):null}function A(Y,K){var fe=E(Y,K);return fe?y(fe):new Set}function D(Y){return Y.conversion===null||Y.conversion===void 0}function M(Y,K){var fe=new Set;return Y.forEach(function(me){var be=A(me.params,K),Se,xe=nn(be),Ce;try{for(xe.s();!(Ce=xe.n()).done;)Se=Ce.value,fe.add(Se)}catch(_e){xe.e(_e)}finally{xe.f()}}),fe.has("any")?["any"]:Array.from(fe)}function B(Y,K,fe){var me,be,Se=Y||"unnamed",xe=fe,Ce,_e=function(){var R=[];if(xe.forEach(function(ye){var Ne=E(ye.params,Ce),He=C(Ne);(Ce<ye.params.length||x(ye.params))&&He(K[Ce])&&R.push(ye)}),R.length===0){if(be=M(xe,Ce),be.length>0){var oe=i(K[Ce]);return me=new TypeError("Unexpected type of argument in function "+Se+" (expected: "+be.join(" or ")+", actual: "+oe.join(" | ")+", index: "+Ce+")"),me.data={category:"wrongType",fn:Se,index:Ce,actual:oe,expected:be},{v:me}}}else xe=R};for(Ce=0;Ce<K.length;Ce++){var ke=_e();if(Ma(ke)==="object")return ke.v}var Ye=xe.map(function(Ct){return x(Ct.params)?1/0:Ct.params.length});if(K.length<Math.min.apply(null,Ye))return be=M(xe,Ce),me=new TypeError("Too few arguments in function "+Se+" (expected: "+be.join(" or ")+", index: "+K.length+")"),me.data={category:"tooFewArgs",fn:Se,index:K.length,expected:be},me;var Fe=Math.max.apply(null,Ye);if(K.length>Fe)return me=new TypeError("Too many arguments in function "+Se+" (expected: "+Fe+", actual: "+K.length+")"),me.data={category:"tooManyArgs",fn:Se,index:K.length,expectedLength:Fe},me;for(var wt=[],et=0;et<K.length;++et)wt.push(i(K[et]).join("|"));return me=new TypeError('Arguments of type "'+wt.join(", ")+'" do not match any of the defined signatures of function '+Se+"."),me.data={category:"mismatch",actual:wt},me}function O(Y){for(var K=s.length+1,fe=0;fe<Y.types.length;fe++)D(Y.types[fe])&&(K=Math.min(K,Y.types[fe].typeIndex));return K}function F(Y){for(var K=f+1,fe=0;fe<Y.types.length;fe++)D(Y.types[fe])||(K=Math.min(K,Y.types[fe].conversionIndex));return K}function z(Y,K){if(Y.hasAny){if(!K.hasAny)return 1}else if(K.hasAny)return-1;if(Y.restParam){if(!K.restParam)return 1}else if(K.restParam)return-1;if(Y.hasConversion){if(!K.hasConversion)return 1}else if(K.hasConversion)return-1;var fe=O(Y)-O(K);if(fe<0)return-1;if(fe>0)return 1;var me=F(Y)-F(K);return me<0?-1:me>0?1:0}function N(Y,K){var fe=Y.params,me=K.params,be=re(fe),Se=re(me),xe=x(fe),Ce=x(me);if(xe&&be.hasAny){if(!Ce||!Se.hasAny)return 1}else if(Ce&&Se.hasAny)return-1;var _e=0,ke=0,Ye,Fe=nn(fe),wt;try{for(Fe.s();!(wt=Fe.n()).done;)Ye=wt.value,Ye.hasAny&&++_e,Ye.hasConversion&&++ke}catch(Li){Fe.e(Li)}finally{Fe.f()}var et=0,Ct=0,R=nn(me),oe;try{for(R.s();!(oe=R.n()).done;)Ye=oe.value,Ye.hasAny&&++et,Ye.hasConversion&&++Ct}catch(Li){R.e(Li)}finally{R.f()}if(_e!==et)return _e-et;if(xe&&be.hasConversion){if(!Ce||!Se.hasConversion)return 1}else if(Ce&&Se.hasConversion)return-1;if(ke!==Ct)return ke-Ct;if(xe){if(!Ce)return 1}else if(Ce)return-1;var ye=(fe.length-me.length)*(xe?-1:1);if(ye!==0)return ye;for(var Ne=[],He=0,We=0;We<fe.length;++We){var Vt=z(fe[We],me[We]);Ne.push(Vt),He+=Vt}if(He!==0)return He;for(var rr,In=0,pa=Ne;In<pa.length;In++)if(rr=pa[In],rr!==0)return rr;return 0}function T(Y){if(Y.length===0)return[];var K=Y.map(h);Y.length>1&&K.sort(function(_e,ke){return _e.index-ke.index});var fe=K[0].conversionsTo;if(Y.length===1)return fe;fe=fe.concat([]);for(var me=new Set(Y),be=1;be<K.length;++be){var Se=void 0,xe=nn(K[be].conversionsTo),Ce;try{for(xe.s();!(Ce=xe.n()).done;)Se=Ce.value,me.has(Se.from)||(fe.push(Se),me.add(Se.from))}catch(_e){xe.e(_e)}finally{xe.f()}}return fe}function q(Y,K){var fe=K;if(Y.some(function(Ce){return Ce.hasConversion})){var me=x(Y),be=Y.map(_);fe=function(){for(var _e=[],ke=me?arguments.length-1:arguments.length,Ye=0;Ye<ke;Ye++)_e[Ye]=be[Ye](arguments[Ye]);return me&&(_e[ke]=arguments[ke].map(be[ke])),K.apply(this,_e)}}var Se=fe;if(x(Y)){var xe=Y.length-1;Se=function(){return fe.apply(this,ie(arguments,0,xe).concat([ie(arguments,xe)]))}}return Se}function _(Y){var K,fe,me,be,Se=[],xe=[];switch(Y.types.forEach(function(Ce){Ce.conversion&&(Se.push(h(Ce.conversion.from).test),xe.push(Ce.conversion.convert))}),xe.length){case 0:return function(_e){return _e};case 1:return K=Se[0],me=xe[0],function(_e){return K(_e)?me(_e):_e};case 2:return K=Se[0],fe=Se[1],me=xe[0],be=xe[1],function(_e){return K(_e)?me(_e):fe(_e)?be(_e):_e};default:return function(_e){for(var ke=0;ke<xe.length;ke++)if(Se[ke](_e))return xe[ke](_e);return _e}}}function I(Y){function K(fe,me,be){if(me<fe.length){var Se=fe[me],xe=[];if(Se.restParam){var Ce=Se.types.filter(D);Ce.length<Se.types.length&&xe.push({types:Ce,name:"..."+Ce.map(function(_e){return _e.name}).join("|"),hasAny:Ce.some(function(_e){return _e.isAny}),hasConversion:!1,restParam:!0}),xe.push(Se)}else xe=Se.types.map(function(_e){return{types:[_e],name:_e.name,hasAny:_e.isAny,hasConversion:_e.conversion,restParam:!1}});return ve(xe,function(_e){return K(fe,me+1,be.concat([_e]))})}else return[be]}return K(Y,0,[])}function U(Y,K){for(var fe=Math.max(Y.length,K.length),me=0;me<fe;me++){var be=A(Y,me),Se=A(K,me),xe=!1,Ce=void 0,_e=nn(Se),ke;try{for(_e.s();!(ke=_e.n()).done;)if(Ce=ke.value,be.has(Ce)){xe=!0;break}}catch(Ct){_e.e(Ct)}finally{_e.f()}if(!xe)return!1}var Ye=Y.length,Fe=K.length,wt=x(Y),et=x(K);return wt?et?Ye===Fe:Fe>=Ye:et?Ye>=Fe:Ye===Fe}function j(Y){return Y.map(function(K){return te(K)?G(K.referToSelf.callback):X(K)?ae(K.referTo.references,K.referTo.callback):K})}function L(Y,K,fe){var me=[],be,Se=nn(Y),xe;try{for(Se.s();!(xe=Se.n()).done;){be=xe.value;var Ce=fe[be];if(typeof Ce!="number")throw new TypeError('No definition for referenced signature "'+be+'"');if(Ce=K[Ce],typeof Ce!="function")return!1;me.push(Ce)}}catch(_e){Se.e(_e)}finally{Se.f()}return me}function P(Y,K,fe){for(var me=j(Y),be=new Array(me.length).fill(!1),Se=!0;Se;){Se=!1;for(var xe=!0,Ce=0;Ce<me.length;++Ce)if(!be[Ce]){var _e=me[Ce];if(te(_e))me[Ce]=_e.referToSelf.callback(fe),me[Ce].referToSelf=_e.referToSelf,be[Ce]=!0,xe=!1;else if(X(_e)){var ke=L(_e.referTo.references,me,K);ke?(me[Ce]=_e.referTo.callback.apply(this,ke),me[Ce].referTo=_e.referTo,be[Ce]=!0,xe=!1):Se=!0}}if(xe&&Se)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return me}function k(Y){var K=/\bthis(\(|\.signatures\b)/;Object.keys(Y).forEach(function(fe){var me=Y[fe];if(K.test(me.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function V(Y,K){if(v.createCount++,Object.keys(K).length===0)throw new SyntaxError("No signatures provided");v.warnAgainstDeprecatedThis&&k(K);var fe=[],me=[],be={},Se=[],xe,Ce=function(){if(!Object.prototype.hasOwnProperty.call(K,xe))return"continue";var Zt=w(xe);if(!Zt)return"continue";fe.forEach(function(bn){if(U(bn,Zt))throw new TypeError('Conflicting signatures "'+m(bn)+'" and "'+m(Zt)+'".')}),fe.push(Zt);var Ds=me.length;me.push(K[xe]);var Nc=Zt.map(b),ga=void 0,ya=nn(I(Nc)),As;try{for(ya.s();!(As=ya.n()).done;){ga=As.value;var Ns=m(ga);Se.push({params:ga,name:Ns,fn:Ds}),ga.every(function(bn){return!bn.hasConversion})&&(be[Ns]=Ds)}}catch(bn){ya.e(bn)}finally{ya.f()}};for(xe in K)var _e=Ce();Se.sort(N);var ke=P(me,be,yn),Ye;for(Ye in be)Object.prototype.hasOwnProperty.call(be,Ye)&&(be[Ye]=ke[be[Ye]]);for(var Fe=[],wt=new Map,et=0,Ct=Se;et<Ct.length;et++)Ye=Ct[et],wt.has(Ye.name)||(Ye.fn=ke[Ye.fn],Fe.push(Ye),wt.set(Ye.name,Ye));for(var R=Fe[0]&&Fe[0].params.length<=2&&!x(Fe[0].params),oe=Fe[1]&&Fe[1].params.length<=2&&!x(Fe[1].params),ye=Fe[2]&&Fe[2].params.length<=2&&!x(Fe[2].params),Ne=Fe[3]&&Fe[3].params.length<=2&&!x(Fe[3].params),He=Fe[4]&&Fe[4].params.length<=2&&!x(Fe[4].params),We=Fe[5]&&Fe[5].params.length<=2&&!x(Fe[5].params),Vt=R&&oe&&ye&&Ne&&He&&We,rr=0;rr<Fe.length;++rr)Fe[rr].test=S(Fe[rr].params);for(var In=R?C(Fe[0].params[0]):Lr,pa=oe?C(Fe[1].params[0]):Lr,Li=ye?C(Fe[2].params[0]):Lr,ac=Ne?C(Fe[3].params[0]):Lr,oc=He?C(Fe[4].params[0]):Lr,sc=We?C(Fe[5].params[0]):Lr,uc=R?C(Fe[0].params[1]):Lr,lc=oe?C(Fe[1].params[1]):Lr,cc=ye?C(Fe[2].params[1]):Lr,fc=Ne?C(Fe[3].params[1]):Lr,hc=He?C(Fe[4].params[1]):Lr,dc=We?C(Fe[5].params[1]):Lr,zi=0;zi<Fe.length;++zi)Fe[zi].implementation=q(Fe[zi].params,Fe[zi].fn);var ma=R?Fe[0].implementation:Ca,va=oe?Fe[1].implementation:Ca,pc=ye?Fe[2].implementation:Ca,mc=Ne?Fe[3].implementation:Ca,vc=He?Fe[4].implementation:Ca,gc=We?Fe[5].implementation:Ca,yc=R?Fe[0].params.length:-1,bc=oe?Fe[1].params.length:-1,wc=ye?Fe[2].params.length:-1,xc=Ne?Fe[3].params.length:-1,Cc=He?Fe[4].params.length:-1,Sc=We?Fe[5].params.length:-1,Ec=Vt?6:0,_c=Fe.length,_s=Fe.map(function(wr){return wr.test}),Dc=Fe.map(function(wr){return wr.implementation}),Ac=function(){for(var Zt=Ec;Zt<_c;Zt++)if(_s[Zt](arguments))return Dc[Zt].apply(this,arguments);return v.onMismatch(Y,arguments,Fe)};function yn(wr,Zt){return arguments.length===yc&&In(wr)&&uc(Zt)?ma.apply(this,arguments):arguments.length===bc&&pa(wr)&&lc(Zt)?va.apply(this,arguments):arguments.length===wc&&Li(wr)&&cc(Zt)?pc.apply(this,arguments):arguments.length===xc&&ac(wr)&&fc(Zt)?mc.apply(this,arguments):arguments.length===Cc&&oc(wr)&&hc(Zt)?vc.apply(this,arguments):arguments.length===Sc&&sc(wr)&&dc(Zt)?gc.apply(this,arguments):Ac.apply(this,arguments)}try{Object.defineProperty(yn,"name",{value:Y})}catch{}return yn.signatures=be,yn._typedFunctionData={signatures:Fe,signatureMap:wt},yn}function Q(Y,K,fe){throw B(Y,K,fe)}function ne(Y){return ie(Y,0,Y.length-1)}function re(Y){return Y[Y.length-1]}function ie(Y,K,fe){return Array.prototype.slice.call(Y,K,fe)}function de(Y,K){for(var fe=0;fe<Y.length;fe++)if(K(Y[fe]))return Y[fe]}function ve(Y,K){return Array.prototype.concat.apply([],Y.map(K))}function ce(){var Y=ne(arguments).map(function(fe){return m(w(fe))}),K=re(arguments);if(typeof K!="function")throw new TypeError("Callback function expected as last argument");return ae(Y,K)}function ae(Y,K){return{referTo:{references:Y,callback:K}}}function G(Y){if(typeof Y!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:Y}}}function X(Y){return Y&&Ma(Y.referTo)==="object"&&Array.isArray(Y.referTo.references)&&typeof Y.referTo.callback=="function"}function te(Y){return Y&&Ma(Y.referToSelf)==="object"&&typeof Y.referToSelf.callback=="function"}function W(Y,K){if(!Y)return K;if(K&&K!==Y){var fe=new Error("Function names do not match (expected: "+Y+", actual: "+K+")");throw fe.data={actual:K,expected:Y},fe}return Y}function ee(Y){var K;for(var fe in Y)Object.prototype.hasOwnProperty.call(Y,fe)&&(l(Y[fe])||typeof Y[fe].signature=="string")&&(K=W(K,Y[fe].name));return K}function he(Y,K){var fe;for(fe in K)if(Object.prototype.hasOwnProperty.call(K,fe)){if(fe in Y&&K[fe]!==Y[fe]){var me=new Error('Signature "'+fe+'" is defined twice');throw me.data={signature:fe,sourceFunction:K[fe],destFunction:Y[fe]},me}Y[fe]=K[fe]}}var pe=v;v=function(K){for(var fe=typeof K=="string",me=fe?1:0,be=fe?K:"",Se={},xe=me;xe<arguments.length;++xe){var Ce=arguments[xe],_e={},ke=void 0;if(typeof Ce=="function"?(ke=Ce.name,typeof Ce.signature=="string"?_e[Ce.signature]=Ce:l(Ce)&&(_e=Ce.signatures)):e(Ce)&&(_e=Ce,fe||(ke=ee(Ce))),Object.keys(_e).length===0){var Ye=new TypeError("Argument to 'typed' at index "+xe+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ye.data={index:xe,argument:Ce},Ye}fe||(be=W(be,ke)),he(Se,_e)}return V(be||"",Se)},v.create=_1,v.createCount=pe.createCount,v.onMismatch=Q,v.throwMismatchError=Q,v.createError=B,v.clear=u,v.clearConversions=o,v.addTypes=n,v._findType=h,v.referTo=ce,v.referToSelf=G,v.convert=p,v.findSignature=c,v.find=d,v.isTypedFunction=l,v.warnAgainstDeprecatedThis=!0,v.addType=function(Y,K){var fe="any";K!==!1&&a.has("Object")&&(fe="Object"),v.addTypes([Y],fe)};function ue(Y){if(!Y||typeof Y.from!="string"||typeof Y.to!="string"||typeof Y.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(Y.to===Y.from)throw new SyntaxError('Illegal to define conversion from "'+Y.from+'" to itself.')}return v.addConversion=function(Y){ue(Y);var K=h(Y.to);if(K.conversionsTo.every(function(fe){return fe.from!==Y.from}))K.conversionsTo.push({from:Y.from,convert:Y.convert,index:f++});else throw new Error('There is already a conversion from "'+Y.from+'" to "'+K.name+'"')},v.addConversions=function(Y){Y.forEach(v.addConversion)},v.removeConversion=function(Y){ue(Y);var K=h(Y.to),fe=de(K.conversionsTo,function(be){return be.from===Y.from});if(!fe)throw new Error("Attempt to remove nonexistent conversion from "+Y.from+" to "+Y.to);if(fe.convert!==Y.convert)throw new Error("Conversion to remove does not match existing conversion");var me=K.conversionsTo.indexOf(fe);K.conversionsTo.splice(me,1)},v.resolve=function(Y,K){if(!l(Y))throw new TypeError(jd);for(var fe=Y._typedFunctionData.signatures,me=0;me<fe.length;++me)if(fe[me].test(K))return fe[me];return null},v}const qd=_1();function qe(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}var mi=Math.sign||function(e){return e>0?1:e<0?-1:0},UE=Math.log2||function(t){return Math.log(t)/Math.LN2},jE=Math.log10||function(t){return Math.log(t)/Math.LN10},qE=Math.log1p||function(e){return Math.log(e+1)},HE=Math.cbrt||function(t){if(t===0)return t;var r=t<0,a;return r&&(t=-t),isFinite(t)?(a=Math.exp(Math.log(t)/3),a=(t/(a*a)+2*a)/3):a=t,r?-a:a},VE=Math.expm1||function(t){return t>=2e-4||t<=-2e-4?Math.exp(t)-1:t+t*t/2+t*t*t/6};function Bc(e,t,r){var a={2:"0b",8:"0o",16:"0x"},s=a[t],f="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!qe(r))throw new Error("size must be an integer");if(e>2**(r-1)-1||e<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!qe(e))throw new Error("Value must be an integer");e<0&&(e=e+2**r),f="i".concat(r)}var v="";return e<0&&(e=-e,v="-"),"".concat(v).concat(s).concat(e.toString(t)).concat(f)}function Yi(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var r="auto",a,s;if(t&&(t.notation&&(r=t.notation),dt(t)?a=t:dt(t.precision)&&(a=t.precision),t.wordSize&&(s=t.wordSize,typeof s!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return D1(e,a);case"exponential":return A1(e,a);case"engineering":return GE(e,a);case"bin":return Bc(e,2,s);case"oct":return Bc(e,8,s);case"hex":return Bc(e,16,s);case"auto":return WE(e,a,t&&t).replace(/((\.\d*?)(0+))($|e)/,function(){var f=arguments[2],v=arguments[4];return f!=="."?f+v:v});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function _l(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var r=t[1],a=t[2],s=parseFloat(t[4]||"0"),f=a.indexOf(".");s+=f!==-1?f-1:a.length-1;var v=a.replace(".","").replace(/^0*/,function(h){return s-=h.length,""}).replace(/0*$/,"").split("").map(function(h){return parseInt(h)});return v.length===0&&(v.push(0),s++),{sign:r,coefficients:v,exponent:s}}function GE(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=_l(e),a=Dl(r,t),s=a.exponent,f=a.coefficients,v=s%3===0?s:s<0?s-3-s%3:s-s%3;if(dt(t))for(;t>f.length||s-v+1>f.length;)f.push(0);else for(var h=Math.abs(s-v)-(f.length-1),n=0;n<h;n++)f.push(0);for(var u=Math.abs(s-v),o=1;u>0;)o++,u--;var i=f.slice(o).join(""),l=dt(t)&&i.length||i.match(/[1-9]/)?"."+i:"",c=f.slice(0,o).join("")+l+"e"+(s>=0?"+":"")+v.toString();return a.sign+c}function D1(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=_l(e),a=typeof t=="number"?Dl(r,r.exponent+1+t):r,s=a.coefficients,f=a.exponent+1,v=f+(t||0);return s.length<v&&(s=s.concat(Ia(v-s.length))),f<0&&(s=Ia(-f+1).concat(s),f=1),f<s.length&&s.splice(f,0,f===0?"0.":"."),a.sign+s.join("")}function A1(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=_l(e),a=t?Dl(r,t):r,s=a.coefficients,f=a.exponent;s.length<t&&(s=s.concat(Ia(t-s.length)));var v=s.shift();return a.sign+v+(s.length>0?"."+s.join(""):"")+"e"+(f>=0?"+":"")+f}function WE(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var a=r&&r.lowerExp!==void 0?r.lowerExp:-3,s=r&&r.upperExp!==void 0?r.upperExp:5,f=_l(e),v=t?Dl(f,t):f;if(v.exponent<a||v.exponent>=s)return A1(e,t);var h=v.coefficients,n=v.exponent;h.length<t&&(h=h.concat(Ia(t-h.length))),h=h.concat(Ia(n-h.length+1+(h.length<t?t-h.length:0))),h=Ia(-n).concat(h);var u=n>0?n:0;return u<h.length-1&&h.splice(u+1,0,"."),v.sign+h.join("")}function Dl(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},a=r.coefficients;t<=0;)a.unshift(0),r.exponent++,t++;if(a.length>t){var s=a.splice(t,a.length-t);if(s[0]>=5){var f=t-1;for(a[f]++;a[f]===10;)a.pop(),f===0&&(a.unshift(0),r.exponent++,f++),f--,a[f]++}}return r}function Ia(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}function YE(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var XE=Number.EPSILON||2220446049250313e-31;function Rr(e,t,r){if(r==null)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var a=Math.abs(e-t);return a<XE?!0:a<=Math.max(Math.abs(e),Math.abs(t))*r}return!1}var KE=Math.acosh||function(e){return Math.log(Math.sqrt(e*e-1)+e)},JE=Math.asinh||function(e){return Math.log(Math.sqrt(e*e+1)+e)},ZE=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2},QE=Math.cosh||function(e){return(Math.exp(e)+Math.exp(-e))/2},e_=Math.sinh||function(e){return(Math.exp(e)-Math.exp(-e))/2},t_=Math.tanh||function(e){var t=Math.exp(2*e);return(t-1)/(t+1)};function r_(e,t){var r=e>0?!0:e<0?!1:1/e===1/0,a=t>0?!0:t<0?!1:1/t===1/0;return r^a?-e:e}function Ic(e,t,r){var a=e.constructor,s=new a(2),f="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!qe(r))throw new Error("size must be an integer");if(e.greaterThan(s.pow(r-1).sub(1))||e.lessThan(s.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(s.pow(r))),f="i".concat(r)}switch(t){case 2:return"".concat(e.toBinary()).concat(f);case 8:return"".concat(e.toOctal()).concat(f);case 16:return"".concat(e.toHexadecimal()).concat(f);default:throw new Error("Base ".concat(t," not supported "))}}function n_(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var r="auto",a,s;if(t!==void 0&&(t.notation&&(r=t.notation),typeof t=="number"?a=t:t.precision&&(a=t.precision),t.wordSize&&(s=t.wordSize,typeof s!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return a_(e,a);case"exponential":return Hd(e,a);case"engineering":return i_(e,a);case"bin":return Ic(e,2,s);case"oct":return Ic(e,8,s);case"hex":return Ic(e,16,s);case"auto":{var f=t&&t.lowerExp!==void 0?t.lowerExp:-3,v=t&&t.upperExp!==void 0?t.upperExp:5;if(e.isZero())return"0";var h,n=e.toSignificantDigits(a),u=n.e;return u>=f&&u<v?h=n.toFixed():h=Hd(e,a),h.replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],i=arguments[4];return o!=="."?o+i:i})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function i_(e,t){var r=e.e,a=r%3===0?r:r<0?r-3-r%3:r-r%3,s=e.mul(Math.pow(10,-a)),f=s.toPrecision(t);return f.indexOf("e")!==-1&&(f=s.toString()),f+"e"+(r>=0?"+":"")+a.toString()}function Hd(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function a_(e,t){return e.toFixed(t)}function o_(e,t){var r=e.length-t.length,a=e.length;return e.substring(r,a)===t}function it(e,t){var r=s_(e,t);return t&&typeof t=="object"&&"truncate"in t&&r.length>t.truncate?r.substring(0,t.truncate-3)+"...":r}function s_(e,t){if(typeof e=="number")return Yi(e,t);if(ct(e))return n_(e,t);if(u_(e))return!t||t.fraction!=="decimal"?e.s*e.n+"/"+e.d:e.toString();if(Array.isArray(e))return N1(e,t);if(Cr(e))return'"'+e+'"';if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var r=Object.keys(e).map(a=>'"'+a+'": '+it(e[a],t));return"{"+r.join(", ")+"}"}return String(e)}function zs(e){for(var t=String(e),r="",a=0;a<t.length;){var s=t.charAt(a);s==="\\"?(r+=s,a++,s=t.charAt(a),(s===""||'"\\/bfnrtu'.indexOf(s)===-1)&&(r+="\\"),r+=s):s==='"'?r+='\\"':r+=s,a++}return'"'+r+'"'}function Hr(e){var t=String(e);return t=t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t}function N1(e,t){if(Array.isArray(e)){for(var r="[",a=e.length,s=0;s<a;s++)s!==0&&(r+=", "),r+=N1(e[s],t);return r+="]",r}else return it(e,t)}function u_(e){return e&&typeof e=="object"&&typeof e.s=="number"&&typeof e.n=="number"&&typeof e.d=="number"||!1}function Pf(e,t){if(!Cr(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Bt(e)+", index: 0)");if(!Cr(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Bt(t)+", index: 1)");return e===t?0:e>t?1:-1}function ot(e,t,r){if(!(this instanceof ot))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}ot.prototype=new RangeError;ot.prototype.constructor=RangeError;ot.prototype.name="DimensionError";ot.prototype.isDimensionError=!0;function hn(e,t,r){if(!(this instanceof hn))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}hn.prototype=new RangeError;hn.prototype.constructor=RangeError;hn.prototype.name="IndexError";hn.prototype.isIndexError=!0;function ut(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function T1(e,t,r){var a,s=e.length;if(s!==t[r])throw new ot(s,t[r]);if(r<t.length-1){var f=r+1;for(a=0;a<s;a++){var v=e[a];if(!Array.isArray(v))throw new ot(t.length-1,t.length,"<");T1(e[a],t,f)}}else for(a=0;a<s;a++)if(Array.isArray(e[a]))throw new ot(t.length+1,t.length,">")}function Vd(e,t){var r=t.length===0;if(r){if(Array.isArray(e))throw new ot(e.length,0)}else T1(e,t,0)}function At(e,t){if(!dt(e)||!qe(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new hn(e,t)}function Va(e,t,r){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(s){if(!dt(s)||!qe(s)||s<0)throw new TypeError("Invalid size, must contain positive integers (size: "+it(t)+")")});var a=r!==void 0?r:0;return Bf(e,t,0,a),e}function Bf(e,t,r,a){var s,f,v=e.length,h=t[r],n=Math.min(v,h);if(e.length=h,r<t.length-1){var u=r+1;for(s=0;s<n;s++)f=e[s],Array.isArray(f)||(f=[f],e[s]=f),Bf(f,t,u,a);for(s=n;s<h;s++)f=[],e[s]=f,Bf(f,t,u,a)}else{for(s=0;s<n;s++)for(;Array.isArray(e[s]);)e[s]=e[s][0];for(s=n;s<h;s++)e[s]=a}}function O1(e,t){var r=yt(e),a=r.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new ot(0,a,"!=");t=Eh(t,a);var s=M1(t);if(a!==s)throw new ot(s,a,"!=");try{return l_(r,t)}catch(f){throw f instanceof ot?new ot(s,a,"!="):f}}function Eh(e,t){var r=M1(e),a=e.slice(),s=-1,f=e.indexOf(s),v=e.indexOf(s,f+1)>=0;if(v)throw new Error("More than one wildcard in sizes");var h=f>=0,n=t%r===0;if(h)if(n)a[f]=-t/r;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-r);return a}function M1(e){return e.reduce((t,r)=>t*r,1)}function l_(e,t){for(var r=e,a,s=t.length-1;s>0;s--){var f=t[s];a=[];for(var v=r.length/f,h=0;h<v;h++)a.push(r.slice(h*f,(h+1)*f));r=a}return r}function Fu(e,t){for(var r=t||ut(e);Array.isArray(e)&&e.length===1;)e=e[0],r.shift();for(var a=r.length;r[a-1]===1;)a--;return a<r.length&&(e=F1(e,a,0),r.length=a),e}function F1(e,t,r){var a,s;if(r<t){var f=r+1;for(a=0,s=e.length;a<s;a++)e[a]=F1(e[a],t,f)}else for(;Array.isArray(e);)e=e[0];return e}function P1(e,t,r,a){var s=a||ut(e);if(r)for(var f=0;f<r;f++)e=[e],s.unshift(1);for(e=B1(e,t,0);s.length<t;)s.push(1);return e}function B1(e,t,r){var a,s;if(Array.isArray(e)){var f=r+1;for(a=0,s=e.length;a<s;a++)e[a]=B1(e[a],t,f)}else for(var v=r;v<t;v++)e=[e];return e}function yt(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function r(a){Array.isArray(a)?a.forEach(r):t.push(a)}),t}function Yn(e,t){return Array.prototype.map.call(e,t)}function Al(e,t){Array.prototype.forEach.call(e,t)}function I1(e,t){if(ut(e).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,t)}function Pu(e,t){if(ut(e).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,r=>t.test(r))}function Gd(e,t){return Array.prototype.join.call(e,t)}function Ga(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(e.length===0)return e;var t=[],r=0;t[0]={value:e[0],identifier:0};for(var a=1;a<e.length;a++)e[a]===e[a-1]?r++:r=0,t.push({value:e[a],identifier:r});return t}function Bu(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(e.length===0)return e;for(var t=[],r=0;r<e.length;r++)t.push(e[r].value);return t}function Zo(e,t){for(var r,a=0,s=0;s<e.length;s++){var f=e[s],v=Array.isArray(f);if(s===0&&v&&(a=f.length),v&&f.length!==a)return;var h=v?Zo(f,t):t(f);if(r===void 0)r=h;else if(r!==h)return"mixed"}return r}function Z(e,t,r,a){function s(f){var v=kE(f,t.map(h_));return c_(e,t,f),r(v)}return s.isFactory=!0,s.fn=e,s.dependencies=t.slice().sort(),a&&(s.meta=a),s}function c_(e,t,r){var a=t.filter(f=>!f_(f)).every(f=>r[f]!==void 0);if(!a){var s=t.filter(f=>r[f]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(s.map(f=>'"'.concat(f,'"')).join(", "),"."))}}function f_(e){return e&&e[0]==="?"}function h_(e){return e&&e[0]==="?"?e.slice(1):e}function Yr(e,t){if(R1(e)&&_h(e,t))return e[t];throw typeof e[t]=="function"&&Dh(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function Wa(e,t,r){if(R1(e)&&_h(e,t))return e[t]=r,r;throw new Error('No access to property "'+t+'"')}function d_(e,t){return t in e}function _h(e,t){return!e||typeof e!="object"?!1:ze(m_,t)?!0:!(t in Object.prototype||t in Function.prototype)}function p_(e,t){if(!Dh(e,t))throw new Error('No access to method "'+t+'"')}function Dh(e,t){return e==null||typeof e[t]!="function"||ze(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:ze(v_,t)?!0:!(t in Object.prototype||t in Function.prototype)}function R1(e){return typeof e=="object"&&e&&e.constructor===Object}var m_={length:!0,name:!0},v_={toString:!0,valueOf:!0,toLocaleString:!0};class Ah{constructor(t){this.wrappedObject=t}keys(){return Object.keys(this.wrappedObject)}get(t){return Yr(this.wrappedObject,t)}set(t,r){return Wa(this.wrappedObject,t,r),this}has(t){return d_(this.wrappedObject,t)}}function Ya(){return new Map}function Ra(e){if(!e)return Ya();if(Nh(e))return e;if(Sh(e))return new Ah(e);throw new Error("createMap can create maps from objects or Maps")}function g_(e){if(e instanceof Ah)return e.wrappedObject;var t={};for(var r of e.keys()){var a=e.get(r);Wa(t,r,a)}return t}function Nh(e){return e?e instanceof Map||e instanceof Ah||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}function Wd(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];for(var s of r)if(!!s){if(Nh(s))for(var f of s.keys())e.set(f,s.get(f));else if(Sh(s))for(var v of Object.keys(s))e.set(v,s[v])}return e}var k1=function(){return k1=qd.create,qd},y_=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],b_=Z("typed",y_,function(t){var{BigNumber:r,Complex:a,DenseMatrix:s,Fraction:f}=t,v=k1();return v.clear(),v.addTypes([{name:"number",test:dt},{name:"Complex",test:Wn},{name:"BigNumber",test:ct},{name:"Fraction",test:us},{name:"Unit",test:zn},{name:"identifier",test:h=>Cr&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(h)},{name:"string",test:Cr},{name:"Chain",test:S1},{name:"Array",test:Et},{name:"Matrix",test:Ze},{name:"DenseMatrix",test:Mu},{name:"SparseMatrix",test:Gi},{name:"Range",test:Ch},{name:"Index",test:Sl},{name:"boolean",test:SE},{name:"ResultSet",test:EE},{name:"Help",test:C1},{name:"function",test:_E},{name:"Date",test:DE},{name:"RegExp",test:AE},{name:"null",test:NE},{name:"undefined",test:TE},{name:"AccessorNode",test:Ji},{name:"ArrayNode",test:jr},{name:"AssignmentNode",test:OE},{name:"BlockNode",test:ME},{name:"ConditionalNode",test:FE},{name:"ConstantNode",test:gt},{name:"FunctionNode",test:bi},{name:"FunctionAssignmentNode",test:ls},{name:"IndexNode",test:no},{name:"Node",test:_t},{name:"ObjectNode",test:El},{name:"OperatorNode",test:Xt},{name:"ParenthesisNode",test:Zn},{name:"RangeNode",test:PE},{name:"RelationalNode",test:BE},{name:"SymbolNode",test:ir},{name:"Map",test:Nh},{name:"Object",test:Sh}]),v.addConversions([{from:"number",to:"BigNumber",convert:function(n){if(r||Rc(n),YE(n)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+n+"). Use function bignumber(x) to convert to BigNumber.");return new r(n)}},{from:"number",to:"Complex",convert:function(n){return a||Us(n),new a(n,0)}},{from:"BigNumber",to:"Complex",convert:function(n){return a||Us(n),new a(n.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(n){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(n){return a||Us(n),new a(n.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(n){f||kc(n);var u=new f(n);if(u.valueOf()!==n)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+n+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(n){var u=Number(n);if(isNaN(u))throw new Error('Cannot convert "'+n+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(n){r||Rc(n);try{return new r(n)}catch{throw new Error('Cannot convert "'+n+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(n){f||kc(n);try{return new f(n)}catch{throw new Error('Cannot convert "'+n+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(n){a||Us(n);try{return new a(n)}catch{throw new Error('Cannot convert "'+n+'" to Complex')}}},{from:"boolean",to:"number",convert:function(n){return+n}},{from:"boolean",to:"BigNumber",convert:function(n){return r||Rc(n),new r(+n)}},{from:"boolean",to:"Fraction",convert:function(n){return f||kc(n),new f(+n)}},{from:"boolean",to:"string",convert:function(n){return String(n)}},{from:"Array",to:"Matrix",convert:function(n){return s||w_(),new s(n)}},{from:"Matrix",to:"Array",convert:function(n){return n.valueOf()}}]),v.onMismatch=(h,n,u)=>{var o=v.createError(h,n,u);if(["wrongType","mismatch"].includes(o.data.category)&&n.length===1&&Jn(n[0])&&u.some(l=>!l.params.includes(","))){var i=new TypeError("Function '".concat(h,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(h,")'."));throw i.data=o.data,i}throw o},v.onMismatch=(h,n,u)=>{var o=v.createError(h,n,u);if(["wrongType","mismatch"].includes(o.data.category)&&n.length===1&&Jn(n[0])&&u.some(l=>!l.params.includes(","))){var i=new TypeError("Function '".concat(h,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(h,")'."));throw i.data=o.data,i}throw o},v});function Rc(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function Us(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function w_(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function kc(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}var x_="ResultSet",C_=[],S_=Z(x_,C_,()=>{function e(t){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this.entries=t||[]}return e.prototype.type="ResultSet",e.prototype.isResultSet=!0,e.prototype.valueOf=function(){return this.entries},e.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},e.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},e.fromJSON=function(t){return new e(t.entries)},e},{isClass:!0});/*!
 *  decimal.js v10.4.2
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Fa=9e15,Ti=1e9,If="0123456789abcdef",Iu="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ru="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Rf={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Fa,maxE:Fa,crypto:!1},$1,qn,tt=!0,Nl="[DecimalError] ",wi=Nl+"Invalid argument: ",L1=Nl+"Precision limit exceeded",z1=Nl+"crypto unavailable",U1="[object Decimal]",vr=Math.floor,er=Math.pow,E_=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,__=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,D_=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,j1=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ln=1e7,Ke=7,A_=9007199254740991,N_=Iu.length-1,kf=Ru.length-1,Ae={toStringTag:U1};Ae.absoluteValue=Ae.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),Ge(e)};Ae.ceil=function(){return Ge(new this.constructor(this),this.e+1,2)};Ae.clampedTo=Ae.clamp=function(e,t){var r,a=this,s=a.constructor;if(e=new s(e),t=new s(t),!e.s||!t.s)return new s(NaN);if(e.gt(t))throw Error(wi+t);return r=a.cmp(e),r<0?e:a.cmp(t)>0?t:new s(a)};Ae.comparedTo=Ae.cmp=function(e){var t,r,a,s,f=this,v=f.d,h=(e=new f.constructor(e)).d,n=f.s,u=e.s;if(!v||!h)return!n||!u?NaN:n!==u?n:v===h?0:!v^n<0?1:-1;if(!v[0]||!h[0])return v[0]?n:h[0]?-u:0;if(n!==u)return n;if(f.e!==e.e)return f.e>e.e^n<0?1:-1;for(a=v.length,s=h.length,t=0,r=a<s?a:s;t<r;++t)if(v[t]!==h[t])return v[t]>h[t]^n<0?1:-1;return a===s?0:a>s^n<0?1:-1};Ae.cosine=Ae.cos=function(){var e,t,r=this,a=r.constructor;return r.d?r.d[0]?(e=a.precision,t=a.rounding,a.precision=e+Math.max(r.e,r.sd())+Ke,a.rounding=1,r=T_(a,W1(a,r)),a.precision=e,a.rounding=t,Ge(qn==2||qn==3?r.neg():r,e,t,!0)):new a(1):new a(NaN)};Ae.cubeRoot=Ae.cbrt=function(){var e,t,r,a,s,f,v,h,n,u,o=this,i=o.constructor;if(!o.isFinite()||o.isZero())return new i(o);for(tt=!1,f=o.s*er(o.s*o,1/3),!f||Math.abs(f)==1/0?(r=fr(o.d),e=o.e,(f=(e-r.length+1)%3)&&(r+=f==1||f==-2?"0":"00"),f=er(r,1/3),e=vr((e+1)/3)-(e%3==(e<0?-1:2)),f==1/0?r="5e"+e:(r=f.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),a=new i(r),a.s=o.s):a=new i(f.toString()),v=(e=i.precision)+3;;)if(h=a,n=h.times(h).times(h),u=n.plus(o),a=Ft(u.plus(o).times(h),u.plus(n),v+2,1),fr(h.d).slice(0,v)===(r=fr(a.d)).slice(0,v))if(r=r.slice(v-3,v+1),r=="9999"||!s&&r=="4999"){if(!s&&(Ge(h,e+1,0),h.times(h).times(h).eq(o))){a=h;break}v+=4,s=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Ge(a,e+1,1),t=!a.times(a).times(a).eq(o));break}return tt=!0,Ge(a,e,i.rounding,t)};Ae.decimalPlaces=Ae.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-vr(this.e/Ke))*Ke,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};Ae.dividedBy=Ae.div=function(e){return Ft(this,new this.constructor(e))};Ae.dividedToIntegerBy=Ae.divToInt=function(e){var t=this,r=t.constructor;return Ge(Ft(t,new r(e),0,1,1),r.precision,r.rounding)};Ae.equals=Ae.eq=function(e){return this.cmp(e)===0};Ae.floor=function(){return Ge(new this.constructor(this),this.e+1,3)};Ae.greaterThan=Ae.gt=function(e){return this.cmp(e)>0};Ae.greaterThanOrEqualTo=Ae.gte=function(e){var t=this.cmp(e);return t==1||t===0};Ae.hyperbolicCosine=Ae.cosh=function(){var e,t,r,a,s,f=this,v=f.constructor,h=new v(1);if(!f.isFinite())return new v(f.s?1/0:NaN);if(f.isZero())return h;r=v.precision,a=v.rounding,v.precision=r+Math.max(f.e,f.sd())+4,v.rounding=1,s=f.d.length,s<32?(e=Math.ceil(s/3),t=(1/Ol(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),f=Xa(v,1,f.times(t),new v(1),!0);for(var n,u=e,o=new v(8);u--;)n=f.times(f),f=h.minus(n.times(o.minus(n.times(o))));return Ge(f,v.precision=r,v.rounding=a,!0)};Ae.hyperbolicSine=Ae.sinh=function(){var e,t,r,a,s=this,f=s.constructor;if(!s.isFinite()||s.isZero())return new f(s);if(t=f.precision,r=f.rounding,f.precision=t+Math.max(s.e,s.sd())+4,f.rounding=1,a=s.d.length,a<3)s=Xa(f,2,s,s,!0);else{e=1.4*Math.sqrt(a),e=e>16?16:e|0,s=s.times(1/Ol(5,e)),s=Xa(f,2,s,s,!0);for(var v,h=new f(5),n=new f(16),u=new f(20);e--;)v=s.times(s),s=s.times(h.plus(v.times(n.times(v).plus(u))))}return f.precision=t,f.rounding=r,Ge(s,t,r,!0)};Ae.hyperbolicTangent=Ae.tanh=function(){var e,t,r=this,a=r.constructor;return r.isFinite()?r.isZero()?new a(r):(e=a.precision,t=a.rounding,a.precision=e+7,a.rounding=1,Ft(r.sinh(),r.cosh(),a.precision=e,a.rounding=t)):new a(r.s)};Ae.inverseCosine=Ae.acos=function(){var e,t=this,r=t.constructor,a=t.abs().cmp(1),s=r.precision,f=r.rounding;return a!==-1?a===0?t.isNeg()?un(r,s,f):new r(0):new r(NaN):t.isZero()?un(r,s+4,f).times(.5):(r.precision=s+6,r.rounding=1,t=t.asin(),e=un(r,s+4,f).times(.5),r.precision=s,r.rounding=f,e.minus(t))};Ae.inverseHyperbolicCosine=Ae.acosh=function(){var e,t,r=this,a=r.constructor;return r.lte(1)?new a(r.eq(1)?0:NaN):r.isFinite()?(e=a.precision,t=a.rounding,a.precision=e+Math.max(Math.abs(r.e),r.sd())+4,a.rounding=1,tt=!1,r=r.times(r).minus(1).sqrt().plus(r),tt=!0,a.precision=e,a.rounding=t,r.ln()):new a(r)};Ae.inverseHyperbolicSine=Ae.asinh=function(){var e,t,r=this,a=r.constructor;return!r.isFinite()||r.isZero()?new a(r):(e=a.precision,t=a.rounding,a.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,a.rounding=1,tt=!1,r=r.times(r).plus(1).sqrt().plus(r),tt=!0,a.precision=e,a.rounding=t,r.ln())};Ae.inverseHyperbolicTangent=Ae.atanh=function(){var e,t,r,a,s=this,f=s.constructor;return s.isFinite()?s.e>=0?new f(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(e=f.precision,t=f.rounding,a=s.sd(),Math.max(a,e)<2*-s.e-1?Ge(new f(s),e,t,!0):(f.precision=r=a-s.e,s=Ft(s.plus(1),new f(1).minus(s),r+e,1),f.precision=e+4,f.rounding=1,s=s.ln(),f.precision=e,f.rounding=t,s.times(.5))):new f(NaN)};Ae.inverseSine=Ae.asin=function(){var e,t,r,a,s=this,f=s.constructor;return s.isZero()?new f(s):(t=s.abs().cmp(1),r=f.precision,a=f.rounding,t!==-1?t===0?(e=un(f,r+4,a).times(.5),e.s=s.s,e):new f(NaN):(f.precision=r+6,f.rounding=1,s=s.div(new f(1).minus(s.times(s)).sqrt().plus(1)).atan(),f.precision=r,f.rounding=a,s.times(2)))};Ae.inverseTangent=Ae.atan=function(){var e,t,r,a,s,f,v,h,n,u=this,o=u.constructor,i=o.precision,l=o.rounding;if(u.isFinite()){if(u.isZero())return new o(u);if(u.abs().eq(1)&&i+4<=kf)return v=un(o,i+4,l).times(.25),v.s=u.s,v}else{if(!u.s)return new o(NaN);if(i+4<=kf)return v=un(o,i+4,l).times(.5),v.s=u.s,v}for(o.precision=h=i+10,o.rounding=1,r=Math.min(28,h/Ke+2|0),e=r;e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(tt=!1,t=Math.ceil(h/Ke),a=1,n=u.times(u),v=new o(u),s=u;e!==-1;)if(s=s.times(n),f=v.minus(s.div(a+=2)),s=s.times(n),v=f.plus(s.div(a+=2)),v.d[t]!==void 0)for(e=t;v.d[e]===f.d[e]&&e--;);return r&&(v=v.times(2<<r-1)),tt=!0,Ge(v,o.precision=i,o.rounding=l,!0)};Ae.isFinite=function(){return!!this.d};Ae.isInteger=Ae.isInt=function(){return!!this.d&&vr(this.e/Ke)>this.d.length-2};Ae.isNaN=function(){return!this.s};Ae.isNegative=Ae.isNeg=function(){return this.s<0};Ae.isPositive=Ae.isPos=function(){return this.s>0};Ae.isZero=function(){return!!this.d&&this.d[0]===0};Ae.lessThan=Ae.lt=function(e){return this.cmp(e)<0};Ae.lessThanOrEqualTo=Ae.lte=function(e){return this.cmp(e)<1};Ae.logarithm=Ae.log=function(e){var t,r,a,s,f,v,h,n,u=this,o=u.constructor,i=o.precision,l=o.rounding,c=5;if(e==null)e=new o(10),t=!0;else{if(e=new o(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new o(NaN);t=e.eq(10)}if(r=u.d,u.s<0||!r||!r[0]||u.eq(1))return new o(r&&!r[0]?-1/0:u.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)f=!0;else{for(s=r[0];s%10===0;)s/=10;f=s!==1}if(tt=!1,h=i+c,v=vi(u,h),a=t?ku(o,h+10):vi(e,h),n=Ft(v,a,h,1),Qo(n.d,s=i,l))do if(h+=10,v=vi(u,h),a=t?ku(o,h+10):vi(e,h),n=Ft(v,a,h,1),!f){+fr(n.d).slice(s+1,s+15)+1==1e14&&(n=Ge(n,i+1,0));break}while(Qo(n.d,s+=10,l));return tt=!0,Ge(n,i,l)};Ae.minus=Ae.sub=function(e){var t,r,a,s,f,v,h,n,u,o,i,l,c=this,d=c.constructor;if(e=new d(e),!c.d||!e.d)return!c.s||!e.s?e=new d(NaN):c.d?e.s=-e.s:e=new d(e.d||c.s!==e.s?c:NaN),e;if(c.s!=e.s)return e.s=-e.s,c.plus(e);if(u=c.d,l=e.d,h=d.precision,n=d.rounding,!u[0]||!l[0]){if(l[0])e.s=-e.s;else if(u[0])e=new d(c);else return new d(n===3?-0:0);return tt?Ge(e,h,n):e}if(r=vr(e.e/Ke),o=vr(c.e/Ke),u=u.slice(),f=o-r,f){for(i=f<0,i?(t=u,f=-f,v=l.length):(t=l,r=o,v=u.length),a=Math.max(Math.ceil(h/Ke),v)+2,f>a&&(f=a,t.length=1),t.reverse(),a=f;a--;)t.push(0);t.reverse()}else{for(a=u.length,v=l.length,i=a<v,i&&(v=a),a=0;a<v;a++)if(u[a]!=l[a]){i=u[a]<l[a];break}f=0}for(i&&(t=u,u=l,l=t,e.s=-e.s),v=u.length,a=l.length-v;a>0;--a)u[v++]=0;for(a=l.length;a>f;){if(u[--a]<l[a]){for(s=a;s&&u[--s]===0;)u[s]=ln-1;--u[s],u[a]+=ln}u[a]-=l[a]}for(;u[--v]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=Tl(u,r),tt?Ge(e,h,n):e):new d(n===3?-0:0)};Ae.modulo=Ae.mod=function(e){var t,r=this,a=r.constructor;return e=new a(e),!r.d||!e.s||e.d&&!e.d[0]?new a(NaN):!e.d||r.d&&!r.d[0]?Ge(new a(r),a.precision,a.rounding):(tt=!1,a.modulo==9?(t=Ft(r,e.abs(),0,3,1),t.s*=e.s):t=Ft(r,e,0,a.modulo,1),t=t.times(e),tt=!0,r.minus(t))};Ae.naturalExponential=Ae.exp=function(){return $f(this)};Ae.naturalLogarithm=Ae.ln=function(){return vi(this)};Ae.negated=Ae.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Ge(e)};Ae.plus=Ae.add=function(e){var t,r,a,s,f,v,h,n,u,o,i=this,l=i.constructor;if(e=new l(e),!i.d||!e.d)return!i.s||!e.s?e=new l(NaN):i.d||(e=new l(e.d||i.s===e.s?i:NaN)),e;if(i.s!=e.s)return e.s=-e.s,i.minus(e);if(u=i.d,o=e.d,h=l.precision,n=l.rounding,!u[0]||!o[0])return o[0]||(e=new l(i)),tt?Ge(e,h,n):e;if(f=vr(i.e/Ke),a=vr(e.e/Ke),u=u.slice(),s=f-a,s){for(s<0?(r=u,s=-s,v=o.length):(r=o,a=f,v=u.length),f=Math.ceil(h/Ke),v=f>v?f+1:v+1,s>v&&(s=v,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(v=u.length,s=o.length,v-s<0&&(s=v,r=o,o=u,u=r),t=0;s;)t=(u[--s]=u[s]+o[s]+t)/ln|0,u[s]%=ln;for(t&&(u.unshift(t),++a),v=u.length;u[--v]==0;)u.pop();return e.d=u,e.e=Tl(u,a),tt?Ge(e,h,n):e};Ae.precision=Ae.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(wi+e);return r.d?(t=q1(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};Ae.round=function(){var e=this,t=e.constructor;return Ge(new t(e),e.e+1,t.rounding)};Ae.sine=Ae.sin=function(){var e,t,r=this,a=r.constructor;return r.isFinite()?r.isZero()?new a(r):(e=a.precision,t=a.rounding,a.precision=e+Math.max(r.e,r.sd())+Ke,a.rounding=1,r=M_(a,W1(a,r)),a.precision=e,a.rounding=t,Ge(qn>2?r.neg():r,e,t,!0)):new a(NaN)};Ae.squareRoot=Ae.sqrt=function(){var e,t,r,a,s,f,v=this,h=v.d,n=v.e,u=v.s,o=v.constructor;if(u!==1||!h||!h[0])return new o(!u||u<0&&(!h||h[0])?NaN:h?v:1/0);for(tt=!1,u=Math.sqrt(+v),u==0||u==1/0?(t=fr(h),(t.length+n)%2==0&&(t+="0"),u=Math.sqrt(t),n=vr((n+1)/2)-(n<0||n%2),u==1/0?t="5e"+n:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),a=new o(t)):a=new o(u.toString()),r=(n=o.precision)+3;;)if(f=a,a=f.plus(Ft(v,f,r+2,1)).times(.5),fr(f.d).slice(0,r)===(t=fr(a.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!s&&t=="4999"){if(!s&&(Ge(f,n+1,0),f.times(f).eq(v))){a=f;break}r+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Ge(a,n+1,1),e=!a.times(a).eq(v));break}return tt=!0,Ge(a,n,o.rounding,e)};Ae.tangent=Ae.tan=function(){var e,t,r=this,a=r.constructor;return r.isFinite()?r.isZero()?new a(r):(e=a.precision,t=a.rounding,a.precision=e+10,a.rounding=1,r=r.sin(),r.s=1,r=Ft(r,new a(1).minus(r.times(r)).sqrt(),e+10,0),a.precision=e,a.rounding=t,Ge(qn==2||qn==4?r.neg():r,e,t,!0)):new a(NaN)};Ae.times=Ae.mul=function(e){var t,r,a,s,f,v,h,n,u,o=this,i=o.constructor,l=o.d,c=(e=new i(e)).d;if(e.s*=o.s,!l||!l[0]||!c||!c[0])return new i(!e.s||l&&!l[0]&&!c||c&&!c[0]&&!l?NaN:!l||!c?e.s/0:e.s*0);for(r=vr(o.e/Ke)+vr(e.e/Ke),n=l.length,u=c.length,n<u&&(f=l,l=c,c=f,v=n,n=u,u=v),f=[],v=n+u,a=v;a--;)f.push(0);for(a=u;--a>=0;){for(t=0,s=n+a;s>a;)h=f[s]+c[a]*l[s-a-1]+t,f[s--]=h%ln|0,t=h/ln|0;f[s]=(f[s]+t)%ln|0}for(;!f[--v];)f.pop();return t?++r:f.shift(),e.d=f,e.e=Tl(f,r),tt?Ge(e,i.precision,i.rounding):e};Ae.toBinary=function(e,t){return Th(this,2,e,t)};Ae.toDecimalPlaces=Ae.toDP=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(Mr(e,0,Ti),t===void 0?t=a.rounding:Mr(t,0,8),Ge(r,e+r.e+1,t))};Ae.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=Dn(a,!0):(Mr(e,0,Ti),t===void 0?t=s.rounding:Mr(t,0,8),a=Ge(new s(a),e+1,t),r=Dn(a,!0,e+1)),a.isNeg()&&!a.isZero()?"-"+r:r};Ae.toFixed=function(e,t){var r,a,s=this,f=s.constructor;return e===void 0?r=Dn(s):(Mr(e,0,Ti),t===void 0?t=f.rounding:Mr(t,0,8),a=Ge(new f(s),e+s.e+1,t),r=Dn(a,!1,e+a.e+1)),s.isNeg()&&!s.isZero()?"-"+r:r};Ae.toFraction=function(e){var t,r,a,s,f,v,h,n,u,o,i,l,c=this,d=c.d,p=c.constructor;if(!d)return new p(c);if(u=r=new p(1),a=n=new p(0),t=new p(a),f=t.e=q1(d)-c.e-1,v=f%Ke,t.d[0]=er(10,v<0?Ke+v:v),e==null)e=f>0?t:u;else{if(h=new p(e),!h.isInt()||h.lt(u))throw Error(wi+h);e=h.gt(t)?f>0?t:u:h}for(tt=!1,h=new p(fr(d)),o=p.precision,p.precision=f=d.length*Ke*2;i=Ft(h,t,0,1,1),s=r.plus(i.times(a)),s.cmp(e)!=1;)r=a,a=s,s=u,u=n.plus(i.times(s)),n=s,s=t,t=h.minus(i.times(s)),h=s;return s=Ft(e.minus(r),a,0,1,1),n=n.plus(s.times(u)),r=r.plus(s.times(a)),n.s=u.s=c.s,l=Ft(u,a,f,1).minus(c).abs().cmp(Ft(n,r,f,1).minus(c).abs())<1?[u,a]:[n,r],p.precision=o,tt=!0,l};Ae.toHexadecimal=Ae.toHex=function(e,t){return Th(this,16,e,t)};Ae.toNearest=function(e,t){var r=this,a=r.constructor;if(r=new a(r),e==null){if(!r.d)return r;e=new a(1),t=a.rounding}else{if(e=new a(e),t===void 0?t=a.rounding:Mr(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(tt=!1,r=Ft(r,e,0,t,1).times(e),tt=!0,Ge(r)):(e.s=r.s,r=e),r};Ae.toNumber=function(){return+this};Ae.toOctal=function(e,t){return Th(this,8,e,t)};Ae.toPower=Ae.pow=function(e){var t,r,a,s,f,v,h=this,n=h.constructor,u=+(e=new n(e));if(!h.d||!e.d||!h.d[0]||!e.d[0])return new n(er(+h,u));if(h=new n(h),h.eq(1))return h;if(a=n.precision,f=n.rounding,e.eq(1))return Ge(h,a,f);if(t=vr(e.e/Ke),t>=e.d.length-1&&(r=u<0?-u:u)<=A_)return s=H1(n,h,r,a),e.s<0?new n(1).div(s):Ge(s,a,f);if(v=h.s,v<0){if(t<e.d.length-1)return new n(NaN);if((e.d[t]&1)==0&&(v=1),h.e==0&&h.d[0]==1&&h.d.length==1)return h.s=v,h}return r=er(+h,u),t=r==0||!isFinite(r)?vr(u*(Math.log("0."+fr(h.d))/Math.LN10+h.e+1)):new n(r+"").e,t>n.maxE+1||t<n.minE-1?new n(t>0?v/0:0):(tt=!1,n.rounding=h.s=1,r=Math.min(12,(t+"").length),s=$f(e.times(vi(h,a+r)),a),s.d&&(s=Ge(s,a+5,1),Qo(s.d,a,f)&&(t=a+10,s=Ge($f(e.times(vi(h,t+r)),t),t+5,1),+fr(s.d).slice(a+1,a+15)+1==1e14&&(s=Ge(s,a+1,0)))),s.s=v,tt=!0,n.rounding=f,Ge(s,a,f))};Ae.toPrecision=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=Dn(a,a.e<=s.toExpNeg||a.e>=s.toExpPos):(Mr(e,1,Ti),t===void 0?t=s.rounding:Mr(t,0,8),a=Ge(new s(a),e,t),r=Dn(a,e<=a.e||a.e<=s.toExpNeg,e)),a.isNeg()&&!a.isZero()?"-"+r:r};Ae.toSignificantDigits=Ae.toSD=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Mr(e,1,Ti),t===void 0?t=a.rounding:Mr(t,0,8)),Ge(new a(r),e,t)};Ae.toString=function(){var e=this,t=e.constructor,r=Dn(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};Ae.truncated=Ae.trunc=function(){return Ge(new this.constructor(this),this.e+1,1)};Ae.valueOf=Ae.toJSON=function(){var e=this,t=e.constructor,r=Dn(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function fr(e){var t,r,a,s=e.length-1,f="",v=e[0];if(s>0){for(f+=v,t=1;t<s;t++)a=e[t]+"",r=Ke-a.length,r&&(f+=hi(r)),f+=a;v=e[t],a=v+"",r=Ke-a.length,r&&(f+=hi(r))}else if(v===0)return"0";for(;v%10===0;)v/=10;return f+v}function Mr(e,t,r){if(e!==~~e||e<t||e>r)throw Error(wi+e)}function Qo(e,t,r,a){var s,f,v,h;for(f=e[0];f>=10;f/=10)--t;return--t<0?(t+=Ke,s=0):(s=Math.ceil((t+1)/Ke),t%=Ke),f=er(10,Ke-t),h=e[s]%f|0,a==null?t<3?(t==0?h=h/100|0:t==1&&(h=h/10|0),v=r<4&&h==99999||r>3&&h==49999||h==5e4||h==0):v=(r<4&&h+1==f||r>3&&h+1==f/2)&&(e[s+1]/f/100|0)==er(10,t-2)-1||(h==f/2||h==0)&&(e[s+1]/f/100|0)==0:t<4?(t==0?h=h/1e3|0:t==1?h=h/100|0:t==2&&(h=h/10|0),v=(a||r<4)&&h==9999||!a&&r>3&&h==4999):v=((a||r<4)&&h+1==f||!a&&r>3&&h+1==f/2)&&(e[s+1]/f/1e3|0)==er(10,t-3)-1,v}function bu(e,t,r){for(var a,s=[0],f,v=0,h=e.length;v<h;){for(f=s.length;f--;)s[f]*=t;for(s[0]+=If.indexOf(e.charAt(v++)),a=0;a<s.length;a++)s[a]>r-1&&(s[a+1]===void 0&&(s[a+1]=0),s[a+1]+=s[a]/r|0,s[a]%=r)}return s.reverse()}function T_(e,t){var r,a,s;if(t.isZero())return t;a=t.d.length,a<32?(r=Math.ceil(a/3),s=(1/Ol(4,r)).toString()):(r=16,s="2.3283064365386962890625e-10"),e.precision+=r,t=Xa(e,1,t.times(s),new e(1));for(var f=r;f--;){var v=t.times(t);t=v.times(v).minus(v).times(8).plus(1)}return e.precision-=r,t}var Ft=function(){function e(a,s,f){var v,h=0,n=a.length;for(a=a.slice();n--;)v=a[n]*s+h,a[n]=v%f|0,h=v/f|0;return h&&a.unshift(h),a}function t(a,s,f,v){var h,n;if(f!=v)n=f>v?1:-1;else for(h=n=0;h<f;h++)if(a[h]!=s[h]){n=a[h]>s[h]?1:-1;break}return n}function r(a,s,f,v){for(var h=0;f--;)a[f]-=h,h=a[f]<s[f]?1:0,a[f]=h*v+a[f]-s[f];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,f,v,h,n){var u,o,i,l,c,d,p,m,g,b,y,w,x,C,S,E,A,D,M,B,O=a.constructor,F=a.s==s.s?1:-1,z=a.d,N=s.d;if(!z||!z[0]||!N||!N[0])return new O(!a.s||!s.s||(z?N&&z[0]==N[0]:!N)?NaN:z&&z[0]==0||!N?F*0:F/0);for(n?(c=1,o=a.e-s.e):(n=ln,c=Ke,o=vr(a.e/c)-vr(s.e/c)),M=N.length,A=z.length,g=new O(F),b=g.d=[],i=0;N[i]==(z[i]||0);i++);if(N[i]>(z[i]||0)&&o--,f==null?(C=f=O.precision,v=O.rounding):h?C=f+(a.e-s.e)+1:C=f,C<0)b.push(1),d=!0;else{if(C=C/c+2|0,i=0,M==1){for(l=0,N=N[0],C++;(i<A||l)&&C--;i++)S=l*n+(z[i]||0),b[i]=S/N|0,l=S%N|0;d=l||i<A}else{for(l=n/(N[0]+1)|0,l>1&&(N=e(N,l,n),z=e(z,l,n),M=N.length,A=z.length),E=M,y=z.slice(0,M),w=y.length;w<M;)y[w++]=0;B=N.slice(),B.unshift(0),D=N[0],N[1]>=n/2&&++D;do l=0,u=t(N,y,M,w),u<0?(x=y[0],M!=w&&(x=x*n+(y[1]||0)),l=x/D|0,l>1?(l>=n&&(l=n-1),p=e(N,l,n),m=p.length,w=y.length,u=t(p,y,m,w),u==1&&(l--,r(p,M<m?B:N,m,n))):(l==0&&(u=l=1),p=N.slice()),m=p.length,m<w&&p.unshift(0),r(y,p,w,n),u==-1&&(w=y.length,u=t(N,y,M,w),u<1&&(l++,r(y,M<w?B:N,w,n))),w=y.length):u===0&&(l++,y=[0]),b[i++]=l,u&&y[0]?y[w++]=z[E]||0:(y=[z[E]],w=1);while((E++<A||y[0]!==void 0)&&C--);d=y[0]!==void 0}b[0]||b.shift()}if(c==1)g.e=o,$1=d;else{for(i=1,l=b[0];l>=10;l/=10)i++;g.e=i+o*c-1,Ge(g,h?f+g.e+1:f,v,d)}return g}}();function Ge(e,t,r,a){var s,f,v,h,n,u,o,i,l,c=e.constructor;e:if(t!=null){if(i=e.d,!i)return e;for(s=1,h=i[0];h>=10;h/=10)s++;if(f=t-s,f<0)f+=Ke,v=t,o=i[l=0],n=o/er(10,s-v-1)%10|0;else if(l=Math.ceil((f+1)/Ke),h=i.length,l>=h)if(a){for(;h++<=l;)i.push(0);o=n=0,s=1,f%=Ke,v=f-Ke+1}else break e;else{for(o=h=i[l],s=1;h>=10;h/=10)s++;f%=Ke,v=f-Ke+s,n=v<0?0:o/er(10,s-v-1)%10|0}if(a=a||t<0||i[l+1]!==void 0||(v<0?o:o%er(10,s-v-1)),u=r<4?(n||a)&&(r==0||r==(e.s<0?3:2)):n>5||n==5&&(r==4||a||r==6&&(f>0?v>0?o/er(10,s-v):0:i[l-1])%10&1||r==(e.s<0?8:7)),t<1||!i[0])return i.length=0,u?(t-=e.e+1,i[0]=er(10,(Ke-t%Ke)%Ke),e.e=-t||0):i[0]=e.e=0,e;if(f==0?(i.length=l,h=1,l--):(i.length=l+1,h=er(10,Ke-f),i[l]=v>0?(o/er(10,s-v)%er(10,v)|0)*h:0),u)for(;;)if(l==0){for(f=1,v=i[0];v>=10;v/=10)f++;for(v=i[0]+=h,h=1;v>=10;v/=10)h++;f!=h&&(e.e++,i[0]==ln&&(i[0]=1));break}else{if(i[l]+=h,i[l]!=ln)break;i[l--]=0,h=1}for(f=i.length;i[--f]===0;)i.pop()}return tt&&(e.e>c.maxE?(e.d=null,e.e=NaN):e.e<c.minE&&(e.e=0,e.d=[0])),e}function Dn(e,t,r){if(!e.isFinite())return G1(e);var a,s=e.e,f=fr(e.d),v=f.length;return t?(r&&(a=r-v)>0?f=f.charAt(0)+"."+f.slice(1)+hi(a):v>1&&(f=f.charAt(0)+"."+f.slice(1)),f=f+(e.e<0?"e":"e+")+e.e):s<0?(f="0."+hi(-s-1)+f,r&&(a=r-v)>0&&(f+=hi(a))):s>=v?(f+=hi(s+1-v),r&&(a=r-s-1)>0&&(f=f+"."+hi(a))):((a=s+1)<v&&(f=f.slice(0,a)+"."+f.slice(a)),r&&(a=r-v)>0&&(s+1===v&&(f+="."),f+=hi(a))),f}function Tl(e,t){var r=e[0];for(t*=Ke;r>=10;r/=10)t++;return t}function ku(e,t,r){if(t>N_)throw tt=!0,r&&(e.precision=r),Error(L1);return Ge(new e(Iu),t,1,!0)}function un(e,t,r){if(t>kf)throw Error(L1);return Ge(new e(Ru),t,r,!0)}function q1(e){var t=e.length-1,r=t*Ke+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function hi(e){for(var t="";e--;)t+="0";return t}function H1(e,t,r,a){var s,f=new e(1),v=Math.ceil(a/Ke+4);for(tt=!1;;){if(r%2&&(f=f.times(t),Xd(f.d,v)&&(s=!0)),r=vr(r/2),r===0){r=f.d.length-1,s&&f.d[r]===0&&++f.d[r];break}t=t.times(t),Xd(t.d,v)}return tt=!0,f}function Yd(e){return e.d[e.d.length-1]&1}function V1(e,t,r){for(var a,s=new e(t[0]),f=0;++f<t.length;)if(a=new e(t[f]),a.s)s[r](a)&&(s=a);else{s=a;break}return s}function $f(e,t){var r,a,s,f,v,h,n,u=0,o=0,i=0,l=e.constructor,c=l.rounding,d=l.precision;if(!e.d||!e.d[0]||e.e>17)return new l(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(tt=!1,n=d):n=t,h=new l(.03125);e.e>-2;)e=e.times(h),i+=5;for(a=Math.log(er(2,i))/Math.LN10*2+5|0,n+=a,r=f=v=new l(1),l.precision=n;;){if(f=Ge(f.times(e),n,1),r=r.times(++o),h=v.plus(Ft(f,r,n,1)),fr(h.d).slice(0,n)===fr(v.d).slice(0,n)){for(s=i;s--;)v=Ge(v.times(v),n,1);if(t==null)if(u<3&&Qo(v.d,n-a,c,u))l.precision=n+=10,r=f=h=new l(1),o=0,u++;else return Ge(v,l.precision=d,c,tt=!0);else return l.precision=d,v}v=h}}function vi(e,t){var r,a,s,f,v,h,n,u,o,i,l,c=1,d=10,p=e,m=p.d,g=p.constructor,b=g.rounding,y=g.precision;if(p.s<0||!m||!m[0]||!p.e&&m[0]==1&&m.length==1)return new g(m&&!m[0]?-1/0:p.s!=1?NaN:m?0:p);if(t==null?(tt=!1,o=y):o=t,g.precision=o+=d,r=fr(m),a=r.charAt(0),Math.abs(f=p.e)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)p=p.times(e),r=fr(p.d),a=r.charAt(0),c++;f=p.e,a>1?(p=new g("0."+r),f++):p=new g(a+"."+r.slice(1))}else return u=ku(g,o+2,y).times(f+""),p=vi(new g(a+"."+r.slice(1)),o-d).plus(u),g.precision=y,t==null?Ge(p,y,b,tt=!0):p;for(i=p,n=v=p=Ft(p.minus(1),p.plus(1),o,1),l=Ge(p.times(p),o,1),s=3;;){if(v=Ge(v.times(l),o,1),u=n.plus(Ft(v,new g(s),o,1)),fr(u.d).slice(0,o)===fr(n.d).slice(0,o))if(n=n.times(2),f!==0&&(n=n.plus(ku(g,o+2,y).times(f+""))),n=Ft(n,new g(c),o,1),t==null)if(Qo(n.d,o-d,b,h))g.precision=o+=d,u=v=p=Ft(i.minus(1),i.plus(1),o,1),l=Ge(p.times(p),o,1),s=h=1;else return Ge(n,g.precision=y,b,tt=!0);else return g.precision=y,n;n=u,s+=2}}function G1(e){return String(e.s*e.s/0)}function Lf(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;a++);for(s=t.length;t.charCodeAt(s-1)===48;--s);if(t=t.slice(a,s),t){if(s-=a,e.e=r=r-a-1,e.d=[],a=(r+1)%Ke,r<0&&(a+=Ke),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=Ke;a<s;)e.d.push(+t.slice(a,a+=Ke));t=t.slice(a),a=Ke-t.length}else a-=s;for(;a--;)t+="0";e.d.push(+t),tt&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function O_(e,t){var r,a,s,f,v,h,n,u,o;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),j1.test(t))return Lf(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(__.test(t))r=16,t=t.toLowerCase();else if(E_.test(t))r=2;else if(D_.test(t))r=8;else throw Error(wi+t);for(f=t.search(/p/i),f>0?(n=+t.slice(f+1),t=t.substring(2,f)):t=t.slice(2),f=t.indexOf("."),v=f>=0,a=e.constructor,v&&(t=t.replace(".",""),h=t.length,f=h-f,s=H1(a,new a(r),f,f*2)),u=bu(t,r,ln),o=u.length-1,f=o;u[f]===0;--f)u.pop();return f<0?new a(e.s*0):(e.e=Tl(u,o),e.d=u,tt=!1,v&&(e=Ft(e,s,h*4)),n&&(e=e.times(Math.abs(n)<54?er(2,n):xi.pow(2,n))),tt=!0,e)}function M_(e,t){var r,a=t.d.length;if(a<3)return t.isZero()?t:Xa(e,2,t,t);r=1.4*Math.sqrt(a),r=r>16?16:r|0,t=t.times(1/Ol(5,r)),t=Xa(e,2,t,t);for(var s,f=new e(5),v=new e(16),h=new e(20);r--;)s=t.times(t),t=t.times(f.plus(s.times(v.times(s).minus(h))));return t}function Xa(e,t,r,a,s){var f,v,h,n,u=e.precision,o=Math.ceil(u/Ke);for(tt=!1,n=r.times(r),h=new e(a);;){if(v=Ft(h.times(n),new e(t++*t++),u,1),h=s?a.plus(v):a.minus(v),a=Ft(v.times(n),new e(t++*t++),u,1),v=h.plus(a),v.d[o]!==void 0){for(f=o;v.d[f]===h.d[f]&&f--;);if(f==-1)break}f=h,h=a,a=v,v=f}return tt=!0,v.d.length=o+1,v}function Ol(e,t){for(var r=e;--t;)r*=e;return r}function W1(e,t){var r,a=t.s<0,s=un(e,e.precision,1),f=s.times(.5);if(t=t.abs(),t.lte(f))return qn=a?4:1,t;if(r=t.divToInt(s),r.isZero())qn=a?3:2;else{if(t=t.minus(r.times(s)),t.lte(f))return qn=Yd(r)?a?2:3:a?4:1,t;qn=Yd(r)?a?1:4:a?3:2}return t.minus(s).abs()}function Th(e,t,r,a){var s,f,v,h,n,u,o,i,l,c=e.constructor,d=r!==void 0;if(d?(Mr(r,1,Ti),a===void 0?a=c.rounding:Mr(a,0,8)):(r=c.precision,a=c.rounding),!e.isFinite())o=G1(e);else{for(o=Dn(e),v=o.indexOf("."),d?(s=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):s=t,v>=0&&(o=o.replace(".",""),l=new c(1),l.e=o.length-v,l.d=bu(Dn(l),10,s),l.e=l.d.length),i=bu(o,10,s),f=n=i.length;i[--n]==0;)i.pop();if(!i[0])o=d?"0p+0":"0";else{if(v<0?f--:(e=new c(e),e.d=i,e.e=f,e=Ft(e,l,r,a,0,s),i=e.d,f=e.e,u=$1),v=i[r],h=s/2,u=u||i[r+1]!==void 0,u=a<4?(v!==void 0||u)&&(a===0||a===(e.s<0?3:2)):v>h||v===h&&(a===4||u||a===6&&i[r-1]&1||a===(e.s<0?8:7)),i.length=r,u)for(;++i[--r]>s-1;)i[r]=0,r||(++f,i.unshift(1));for(n=i.length;!i[n-1];--n);for(v=0,o="";v<n;v++)o+=If.charAt(i[v]);if(d){if(n>1)if(t==16||t==8){for(v=t==16?4:3,--n;n%v;n++)o+="0";for(i=bu(o,s,t),n=i.length;!i[n-1];--n);for(v=1,o="1.";v<n;v++)o+=If.charAt(i[v])}else o=o.charAt(0)+"."+o.slice(1);o=o+(f<0?"p":"p+")+f}else if(f<0){for(;++f;)o="0"+o;o="0."+o}else if(++f>n)for(f-=n;f--;)o+="0";else f<n&&(o=o.slice(0,f)+"."+o.slice(f))}o=(t==16?"0x":t==2?"0b":t==8?"0o":"")+o}return e.s<0?"-"+o:o}function Xd(e,t){if(e.length>t)return e.length=t,!0}function F_(e){return new this(e).abs()}function P_(e){return new this(e).acos()}function B_(e){return new this(e).acosh()}function I_(e,t){return new this(e).plus(t)}function R_(e){return new this(e).asin()}function k_(e){return new this(e).asinh()}function $_(e){return new this(e).atan()}function L_(e){return new this(e).atanh()}function z_(e,t){e=new this(e),t=new this(t);var r,a=this.precision,s=this.rounding,f=a+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=un(this,f,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?un(this,a,s):new this(0),r.s=e.s):!e.d||t.isZero()?(r=un(this,f,1).times(.5),r.s=e.s):t.s<0?(this.precision=f,this.rounding=1,r=this.atan(Ft(e,t,f,1)),t=un(this,f,1),this.precision=a,this.rounding=s,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(Ft(e,t,f,1)),r}function U_(e){return new this(e).cbrt()}function j_(e){return Ge(e=new this(e),e.e+1,2)}function q_(e,t,r){return new this(e).clamp(t,r)}function H_(e){if(!e||typeof e!="object")throw Error(Nl+"Object expected");var t,r,a,s=e.defaults===!0,f=["precision",1,Ti,"rounding",0,8,"toExpNeg",-Fa,0,"toExpPos",0,Fa,"maxE",0,Fa,"minE",-Fa,0,"modulo",0,9];for(t=0;t<f.length;t+=3)if(r=f[t],s&&(this[r]=Rf[r]),(a=e[r])!==void 0)if(vr(a)===a&&a>=f[t+1]&&a<=f[t+2])this[r]=a;else throw Error(wi+r+": "+a);if(r="crypto",s&&(this[r]=Rf[r]),(a=e[r])!==void 0)if(a===!0||a===!1||a===0||a===1)if(a)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(z1);else this[r]=!1;else throw Error(wi+r+": "+a);return this}function V_(e){return new this(e).cos()}function G_(e){return new this(e).cosh()}function Y1(e){var t,r,a;function s(f){var v,h,n,u=this;if(!(u instanceof s))return new s(f);if(u.constructor=s,Kd(f)){u.s=f.s,tt?!f.d||f.e>s.maxE?(u.e=NaN,u.d=null):f.e<s.minE?(u.e=0,u.d=[0]):(u.e=f.e,u.d=f.d.slice()):(u.e=f.e,u.d=f.d?f.d.slice():f.d);return}if(n=typeof f,n==="number"){if(f===0){u.s=1/f<0?-1:1,u.e=0,u.d=[0];return}if(f<0?(f=-f,u.s=-1):u.s=1,f===~~f&&f<1e7){for(v=0,h=f;h>=10;h/=10)v++;tt?v>s.maxE?(u.e=NaN,u.d=null):v<s.minE?(u.e=0,u.d=[0]):(u.e=v,u.d=[f]):(u.e=v,u.d=[f]);return}else if(f*0!==0){f||(u.s=NaN),u.e=NaN,u.d=null;return}return Lf(u,f.toString())}else if(n!=="string")throw Error(wi+f);return(h=f.charCodeAt(0))===45?(f=f.slice(1),u.s=-1):(h===43&&(f=f.slice(1)),u.s=1),j1.test(f)?Lf(u,f):O_(u,f)}if(s.prototype=Ae,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=H_,s.clone=Y1,s.isDecimal=Kd,s.abs=F_,s.acos=P_,s.acosh=B_,s.add=I_,s.asin=R_,s.asinh=k_,s.atan=$_,s.atanh=L_,s.atan2=z_,s.cbrt=U_,s.ceil=j_,s.clamp=q_,s.cos=V_,s.cosh=G_,s.div=W_,s.exp=Y_,s.floor=X_,s.hypot=K_,s.ln=J_,s.log=Z_,s.log10=eD,s.log2=Q_,s.max=tD,s.min=rD,s.mod=nD,s.mul=iD,s.pow=aD,s.random=oD,s.round=sD,s.sign=uD,s.sin=lD,s.sinh=cD,s.sqrt=fD,s.sub=hD,s.sum=dD,s.tan=pD,s.tanh=mD,s.trunc=vD,e===void 0&&(e={}),e&&e.defaults!==!0)for(a=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function W_(e,t){return new this(e).div(t)}function Y_(e){return new this(e).exp()}function X_(e){return Ge(e=new this(e),e.e+1,3)}function K_(){var e,t,r=new this(0);for(tt=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return tt=!0,new this(1/0);r=t}return tt=!0,r.sqrt()}function Kd(e){return e instanceof xi||e&&e.toStringTag===U1||!1}function J_(e){return new this(e).ln()}function Z_(e,t){return new this(e).log(t)}function Q_(e){return new this(e).log(2)}function eD(e){return new this(e).log(10)}function tD(){return V1(this,arguments,"lt")}function rD(){return V1(this,arguments,"gt")}function nD(e,t){return new this(e).mod(t)}function iD(e,t){return new this(e).mul(t)}function aD(e,t){return new this(e).pow(t)}function oD(e){var t,r,a,s,f=0,v=new this(1),h=[];if(e===void 0?e=this.precision:Mr(e,1,Ti),a=Math.ceil(e/Ke),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(a));f<a;)s=t[f],s>=429e7?t[f]=crypto.getRandomValues(new Uint32Array(1))[0]:h[f++]=s%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(a*=4);f<a;)s=t[f]+(t[f+1]<<8)+(t[f+2]<<16)+((t[f+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(t,f):(h.push(s%1e7),f+=4);f=a/4}else throw Error(z1);else for(;f<a;)h[f++]=Math.random()*1e7|0;for(a=h[--f],e%=Ke,a&&e&&(s=er(10,Ke-e),h[f]=(a/s|0)*s);h[f]===0;f--)h.pop();if(f<0)r=0,h=[0];else{for(r=-1;h[0]===0;r-=Ke)h.shift();for(a=1,s=h[0];s>=10;s/=10)a++;a<Ke&&(r-=Ke-a)}return v.e=r,v.d=h,v}function sD(e){return Ge(e=new this(e),e.e+1,this.rounding)}function uD(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function lD(e){return new this(e).sin()}function cD(e){return new this(e).sinh()}function fD(e){return new this(e).sqrt()}function hD(e,t){return new this(e).sub(t)}function dD(){var e=0,t=arguments,r=new this(t[e]);for(tt=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return tt=!0,Ge(r,this.precision,this.rounding)}function pD(e){return new this(e).tan()}function mD(e){return new this(e).tanh()}function vD(e){return Ge(e=new this(e),e.e+1,1)}Ae[Symbol.for("nodejs.util.inspect.custom")]=Ae.toString;Ae[Symbol.toStringTag]="Decimal";var xi=Ae.constructor=Y1(Rf);Iu=new xi(Iu);Ru=new xi(Ru);var gD="BigNumber",yD=["?on","config"],bD=Z(gD,yD,e=>{var{on:t,config:r}=e,a=xi.clone({precision:r.precision,modulo:xi.EUCLID});return a.prototype=Object.create(a.prototype),a.prototype.type="BigNumber",a.prototype.isBigNumber=!0,a.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},a.fromJSON=function(s){return new a(s.value)},t&&t("config",function(s,f){s.precision!==f.precision&&a.config({precision:s.precision})}),a},{isClass:!0}),En=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function X1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function wD(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var s=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,s.get?s:{enumerable:!0,get:function(){return e[a]}})}),r}var K1={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(r){var a=Math.cosh||function(i){return Math.abs(i)<1e-9?1-i:(Math.exp(i)+Math.exp(-i))*.5},s=Math.sinh||function(i){return Math.abs(i)<1e-9?i:(Math.exp(i)-Math.exp(-i))*.5},f=function(i){var l=Math.PI/4;if(-l>i||i>l)return Math.cos(i)-1;var c=i*i;return c*(c*(c*(c*(c*(c*(c*(c/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},v=function(i,l){var c=Math.abs(i),d=Math.abs(l);return c<3e3&&d<3e3?Math.sqrt(c*c+d*d):(c<d?(c=d,d=i/l):d=l/i,c*Math.sqrt(1+d*d))},h=function(){throw SyntaxError("Invalid Param")};function n(i,l){var c=Math.abs(i),d=Math.abs(l);return i===0?Math.log(d):l===0?Math.log(c):c<3e3&&d<3e3?Math.log(i*i+l*l)*.5:(i=i/2,l=l/2,.5*Math.log(i*i+l*l)+Math.LN2)}var u=function(i,l){var c={re:0,im:0};if(i==null)c.re=c.im=0;else if(l!==void 0)c.re=i,c.im=l;else switch(typeof i){case"object":if("im"in i&&"re"in i)c.re=i.re,c.im=i.im;else if("abs"in i&&"arg"in i){if(!Number.isFinite(i.abs)&&Number.isFinite(i.arg))return o.INFINITY;c.re=i.abs*Math.cos(i.arg),c.im=i.abs*Math.sin(i.arg)}else if("r"in i&&"phi"in i){if(!Number.isFinite(i.r)&&Number.isFinite(i.phi))return o.INFINITY;c.re=i.r*Math.cos(i.phi),c.im=i.r*Math.sin(i.phi)}else i.length===2?(c.re=i[0],c.im=i[1]):h();break;case"string":c.im=c.re=0;var d=i.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),p=1,m=0;d===null&&h();for(var g=0;g<d.length;g++){var b=d[g];b===" "||b==="	"||b===`
`||(b==="+"?p++:b==="-"?m++:b==="i"||b==="I"?(p+m===0&&h(),d[g+1]!==" "&&!isNaN(d[g+1])?(c.im+=parseFloat((m%2?"-":"")+d[g+1]),g++):c.im+=parseFloat((m%2?"-":"")+"1"),p=m=0):((p+m===0||isNaN(b))&&h(),d[g+1]==="i"||d[g+1]==="I"?(c.im+=parseFloat((m%2?"-":"")+b),g++):c.re+=parseFloat((m%2?"-":"")+b),p=m=0))}p+m>0&&h();break;case"number":c.im=0,c.re=i;break;default:h()}return isNaN(c.re)||isNaN(c.im),c};function o(i,l){if(!(this instanceof o))return new o(i,l);var c=u(i,l);this.re=c.re,this.im=c.im}o.prototype={re:0,im:0,sign:function(){var i=this.abs();return new o(this.re/i,this.im/i)},add:function(i,l){var c=new o(i,l);return this.isInfinite()&&c.isInfinite()?o.NAN:this.isInfinite()||c.isInfinite()?o.INFINITY:new o(this.re+c.re,this.im+c.im)},sub:function(i,l){var c=new o(i,l);return this.isInfinite()&&c.isInfinite()?o.NAN:this.isInfinite()||c.isInfinite()?o.INFINITY:new o(this.re-c.re,this.im-c.im)},mul:function(i,l){var c=new o(i,l);return this.isInfinite()&&c.isZero()||this.isZero()&&c.isInfinite()?o.NAN:this.isInfinite()||c.isInfinite()?o.INFINITY:c.im===0&&this.im===0?new o(this.re*c.re,0):new o(this.re*c.re-this.im*c.im,this.re*c.im+this.im*c.re)},div:function(i,l){var c=new o(i,l);if(this.isZero()&&c.isZero()||this.isInfinite()&&c.isInfinite())return o.NAN;if(this.isInfinite()||c.isZero())return o.INFINITY;if(this.isZero()||c.isInfinite())return o.ZERO;i=this.re,l=this.im;var d=c.re,p=c.im,m,g;return p===0?new o(i/d,l/d):Math.abs(d)<Math.abs(p)?(g=d/p,m=d*g+p,new o((i*g+l)/m,(l*g-i)/m)):(g=p/d,m=p*g+d,new o((i+l*g)/m,(l-i*g)/m))},pow:function(i,l){var c=new o(i,l);if(i=this.re,l=this.im,c.isZero())return o.ONE;if(c.im===0){if(l===0&&i>0)return new o(Math.pow(i,c.re),0);if(i===0)switch((c.re%4+4)%4){case 0:return new o(Math.pow(l,c.re),0);case 1:return new o(0,Math.pow(l,c.re));case 2:return new o(-Math.pow(l,c.re),0);case 3:return new o(0,-Math.pow(l,c.re))}}if(i===0&&l===0&&c.re>0&&c.im>=0)return o.ZERO;var d=Math.atan2(l,i),p=n(i,l);return i=Math.exp(c.re*p-c.im*d),l=c.im*p+c.re*d,new o(i*Math.cos(l),i*Math.sin(l))},sqrt:function(){var i=this.re,l=this.im,c=this.abs(),d,p;if(i>=0){if(l===0)return new o(Math.sqrt(i),0);d=.5*Math.sqrt(2*(c+i))}else d=Math.abs(l)/Math.sqrt(2*(c-i));return i<=0?p=.5*Math.sqrt(2*(c-i)):p=Math.abs(l)/Math.sqrt(2*(c+i)),new o(d,l<0?-p:p)},exp:function(){var i=Math.exp(this.re);return this.im,new o(i*Math.cos(this.im),i*Math.sin(this.im))},expm1:function(){var i=this.re,l=this.im;return new o(Math.expm1(i)*Math.cos(l)+f(l),Math.exp(i)*Math.sin(l))},log:function(){var i=this.re,l=this.im;return new o(n(i,l),Math.atan2(l,i))},abs:function(){return v(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var i=this.re,l=this.im;return new o(Math.sin(i)*a(l),Math.cos(i)*s(l))},cos:function(){var i=this.re,l=this.im;return new o(Math.cos(i)*a(l),-Math.sin(i)*s(l))},tan:function(){var i=2*this.re,l=2*this.im,c=Math.cos(i)+a(l);return new o(Math.sin(i)/c,s(l)/c)},cot:function(){var i=2*this.re,l=2*this.im,c=Math.cos(i)-a(l);return new o(-Math.sin(i)/c,s(l)/c)},sec:function(){var i=this.re,l=this.im,c=.5*a(2*l)+.5*Math.cos(2*i);return new o(Math.cos(i)*a(l)/c,Math.sin(i)*s(l)/c)},csc:function(){var i=this.re,l=this.im,c=.5*a(2*l)-.5*Math.cos(2*i);return new o(Math.sin(i)*a(l)/c,-Math.cos(i)*s(l)/c)},asin:function(){var i=this.re,l=this.im,c=new o(l*l-i*i+1,-2*i*l).sqrt(),d=new o(c.re-l,c.im+i).log();return new o(d.im,-d.re)},acos:function(){var i=this.re,l=this.im,c=new o(l*l-i*i+1,-2*i*l).sqrt(),d=new o(c.re-l,c.im+i).log();return new o(Math.PI/2-d.im,d.re)},atan:function(){var i=this.re,l=this.im;if(i===0){if(l===1)return new o(0,1/0);if(l===-1)return new o(0,-1/0)}var c=i*i+(1-l)*(1-l),d=new o((1-l*l-i*i)/c,-2*i/c).log();return new o(-.5*d.im,.5*d.re)},acot:function(){var i=this.re,l=this.im;if(l===0)return new o(Math.atan2(1,i),0);var c=i*i+l*l;return c!==0?new o(i/c,-l/c).atan():new o(i!==0?i/0:0,l!==0?-l/0:0).atan()},asec:function(){var i=this.re,l=this.im;if(i===0&&l===0)return new o(0,1/0);var c=i*i+l*l;return c!==0?new o(i/c,-l/c).acos():new o(i!==0?i/0:0,l!==0?-l/0:0).acos()},acsc:function(){var i=this.re,l=this.im;if(i===0&&l===0)return new o(Math.PI/2,1/0);var c=i*i+l*l;return c!==0?new o(i/c,-l/c).asin():new o(i!==0?i/0:0,l!==0?-l/0:0).asin()},sinh:function(){var i=this.re,l=this.im;return new o(s(i)*Math.cos(l),a(i)*Math.sin(l))},cosh:function(){var i=this.re,l=this.im;return new o(a(i)*Math.cos(l),s(i)*Math.sin(l))},tanh:function(){var i=2*this.re,l=2*this.im,c=a(i)+Math.cos(l);return new o(s(i)/c,Math.sin(l)/c)},coth:function(){var i=2*this.re,l=2*this.im,c=a(i)-Math.cos(l);return new o(s(i)/c,-Math.sin(l)/c)},csch:function(){var i=this.re,l=this.im,c=Math.cos(2*l)-a(2*i);return new o(-2*s(i)*Math.cos(l)/c,2*a(i)*Math.sin(l)/c)},sech:function(){var i=this.re,l=this.im,c=Math.cos(2*l)+a(2*i);return new o(2*a(i)*Math.cos(l)/c,-2*s(i)*Math.sin(l)/c)},asinh:function(){var i=this.im;this.im=-this.re,this.re=i;var l=this.asin();return this.re=-this.im,this.im=i,i=l.re,l.re=-l.im,l.im=i,l},acosh:function(){var i=this.acos();if(i.im<=0){var l=i.re;i.re=-i.im,i.im=l}else{var l=i.im;i.im=-i.re,i.re=l}return i},atanh:function(){var i=this.re,l=this.im,c=i>1&&l===0,d=1-i,p=1+i,m=d*d+l*l,g=m!==0?new o((p*d-l*l)/m,(l*d+p*l)/m):new o(i!==-1?i/0:0,l!==0?l/0:0),b=g.re;return g.re=n(g.re,g.im)/2,g.im=Math.atan2(g.im,b)/2,c&&(g.im=-g.im),g},acoth:function(){var i=this.re,l=this.im;if(i===0&&l===0)return new o(0,Math.PI/2);var c=i*i+l*l;return c!==0?new o(i/c,-l/c).atanh():new o(i!==0?i/0:0,l!==0?-l/0:0).atanh()},acsch:function(){var i=this.re,l=this.im;if(l===0)return new o(i!==0?Math.log(i+Math.sqrt(i*i+1)):1/0,0);var c=i*i+l*l;return c!==0?new o(i/c,-l/c).asinh():new o(i!==0?i/0:0,l!==0?-l/0:0).asinh()},asech:function(){var i=this.re,l=this.im;if(this.isZero())return o.INFINITY;var c=i*i+l*l;return c!==0?new o(i/c,-l/c).acosh():new o(i!==0?i/0:0,l!==0?-l/0:0).acosh()},inverse:function(){if(this.isZero())return o.INFINITY;if(this.isInfinite())return o.ZERO;var i=this.re,l=this.im,c=i*i+l*l;return new o(i/c,-l/c)},conjugate:function(){return new o(this.re,-this.im)},neg:function(){return new o(-this.re,-this.im)},ceil:function(i){return i=Math.pow(10,i||0),new o(Math.ceil(this.re*i)/i,Math.ceil(this.im*i)/i)},floor:function(i){return i=Math.pow(10,i||0),new o(Math.floor(this.re*i)/i,Math.floor(this.im*i)/i)},round:function(i){return i=Math.pow(10,i||0),new o(Math.round(this.re*i)/i,Math.round(this.im*i)/i)},equals:function(i,l){var c=new o(i,l);return Math.abs(c.re-this.re)<=o.EPSILON&&Math.abs(c.im-this.im)<=o.EPSILON},clone:function(){return new o(this.re,this.im)},toString:function(){var i=this.re,l=this.im,c="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(i)<o.EPSILON&&(i=0),Math.abs(l)<o.EPSILON&&(l=0),l===0?c+i:(i!==0?(c+=i,c+=" ",l<0?(l=-l,c+="-"):c+="+",c+=" "):l<0&&(l=-l,c+="-"),l!==1&&(c+=l),c+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},o.ZERO=new o(0,0),o.ONE=new o(1,0),o.I=new o(0,1),o.PI=new o(Math.PI,0),o.E=new o(Math.E,0),o.INFINITY=new o(1/0,1/0),o.NAN=new o(NaN,NaN),o.EPSILON=1e-15,Object.defineProperty(o,"__esModule",{value:!0}),o.default=o,o.Complex=o,e.exports=o})()})(K1);const or=X1(K1.exports);var xD="Complex",CD=[],SD=Z(xD,CD,()=>(Object.defineProperty(or,"name",{value:"Complex"}),or.prototype.constructor=or,or.prototype.type="Complex",or.prototype.isComplex=!0,or.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},or.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},or.prototype.format=function(e){var t="",r=this.im,a=this.re,s=Yi(this.re,e),f=Yi(this.im,e),v=dt(e)?e:e?e.precision:null;if(v!==null){var h=Math.pow(10,-v);Math.abs(a/r)<h&&(a=0),Math.abs(r/a)<h&&(r=0)}return r===0?t=s:a===0?r===1?t="i":r===-1?t="-i":t=f+"i":r<0?r===-1?t=s+" - i":t=s+" - "+f.substring(1)+"i":r===1?t=s+" + i":t=s+" + "+f+"i",t},or.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return or(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],a=arguments[1];if(dt(r)){if(zn(a)&&a.hasBase("ANGLE")&&(a=a.toNumber("rad")),dt(a))return new or({r,phi:a});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},or.prototype.valueOf=or.prototype.toString,or.fromJSON=function(e){return new or(e)},or.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},or),{isClass:!0}),J1={exports:{}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(r){var a=2e3,s={s:1,n:0,d:1};function f(d,p){if(isNaN(d=parseInt(d,10)))throw c.InvalidParameter;return d*p}function v(d,p){if(p===0)throw c.DivisionByZero;var m=Object.create(c.prototype);m.s=d<0?-1:1,d=d<0?-d:d;var g=l(d,p);return m.n=d/g,m.d=p/g,m}function h(d){for(var p={},m=d,g=2,b=4;b<=m;){for(;m%g===0;)m/=g,p[g]=(p[g]||0)+1;b+=1+2*g++}return m!==d?m>1&&(p[m]=(p[m]||0)+1):p[d]=(p[d]||0)+1,p}var n=function(d,p){var m=0,g=1,b=1,y=0,w=0,x=0,C=1,S=1,E=0,A=1,D=1,M=1,B=1e7,O;if(d!=null)if(p!==void 0){if(m=d,g=p,b=m*g,m%1!==0||g%1!==0)throw c.NonIntegerParameter}else switch(typeof d){case"object":{if("d"in d&&"n"in d)m=d.n,g=d.d,"s"in d&&(m*=d.s);else if(0 in d)m=d[0],1 in d&&(g=d[1]);else throw c.InvalidParameter;b=m*g;break}case"number":{if(d<0&&(b=d,d=-d),d%1===0)m=d;else if(d>0){for(d>=1&&(S=Math.pow(10,Math.floor(1+Math.log(d)/Math.LN10)),d/=S);A<=B&&M<=B;)if(O=(E+D)/(A+M),d===O){A+M<=B?(m=E+D,g=A+M):M>A?(m=D,g=M):(m=E,g=A);break}else d>O?(E+=D,A+=M):(D+=E,M+=A),A>B?(m=D,g=M):(m=E,g=A);m*=S}else(isNaN(d)||isNaN(p))&&(g=m=NaN);break}case"string":{if(A=d.match(/\d+|./g),A===null)throw c.InvalidParameter;if(A[E]==="-"?(b=-1,E++):A[E]==="+"&&E++,A.length===E+1?w=f(A[E++],b):A[E+1]==="."||A[E]==="."?(A[E]!=="."&&(y=f(A[E++],b)),E++,(E+1===A.length||A[E+1]==="("&&A[E+3]===")"||A[E+1]==="'"&&A[E+3]==="'")&&(w=f(A[E],b),C=Math.pow(10,A[E].length),E++),(A[E]==="("&&A[E+2]===")"||A[E]==="'"&&A[E+2]==="'")&&(x=f(A[E+1],b),S=Math.pow(10,A[E+1].length)-1,E+=3)):A[E+1]==="/"||A[E+1]===":"?(w=f(A[E],b),C=f(A[E+2],1),E+=3):A[E+3]==="/"&&A[E+1]===" "&&(y=f(A[E],b),w=f(A[E+2],b),C=f(A[E+4],1),E+=5),A.length<=E){g=C*S,b=m=x+g*y+S*w;break}}default:throw c.InvalidParameter}if(g===0)throw c.DivisionByZero;s.s=b<0?-1:1,s.n=Math.abs(m),s.d=Math.abs(g)};function u(d,p,m){for(var g=1;p>0;d=d*d%m,p>>=1)p&1&&(g=g*d%m);return g}function o(d,p){for(;p%2===0;p/=2);for(;p%5===0;p/=5);if(p===1)return 0;for(var m=10%p,g=1;m!==1;g++)if(m=m*10%p,g>a)return 0;return g}function i(d,p,m){for(var g=1,b=u(10,m,p),y=0;y<300;y++){if(g===b)return y;g=g*10%p,b=b*10%p}return 0}function l(d,p){if(!d)return p;if(!p)return d;for(;;){if(d%=p,!d)return p;if(p%=d,!p)return d}}function c(d,p){if(n(d,p),this instanceof c)d=l(s.d,s.n),this.s=s.s,this.n=s.n/d,this.d=s.d/d;else return v(s.s*s.n,s.d)}c.DivisionByZero=new Error("Division by Zero"),c.InvalidParameter=new Error("Invalid argument"),c.NonIntegerParameter=new Error("Parameters must be integer"),c.prototype={s:1,n:0,d:1,abs:function(){return v(this.n,this.d)},neg:function(){return v(-this.s*this.n,this.d)},add:function(d,p){return n(d,p),v(this.s*this.n*s.d+s.s*this.d*s.n,this.d*s.d)},sub:function(d,p){return n(d,p),v(this.s*this.n*s.d-s.s*this.d*s.n,this.d*s.d)},mul:function(d,p){return n(d,p),v(this.s*s.s*this.n*s.n,this.d*s.d)},div:function(d,p){return n(d,p),v(this.s*s.s*this.n*s.d,this.d*s.n)},clone:function(){return v(this.s*this.n,this.d)},mod:function(d,p){if(isNaN(this.n)||isNaN(this.d))return new c(NaN);if(d===void 0)return v(this.s*this.n%this.d,1);if(n(d,p),s.n===0&&this.d===0)throw c.DivisionByZero;return v(this.s*(s.d*this.n)%(s.n*this.d),s.d*this.d)},gcd:function(d,p){return n(d,p),v(l(s.n,this.n)*l(s.d,this.d),s.d*this.d)},lcm:function(d,p){return n(d,p),s.n===0&&this.n===0?v(0,1):v(s.n*this.n,l(s.n,this.n)*l(s.d,this.d))},ceil:function(d){return d=Math.pow(10,d||0),isNaN(this.n)||isNaN(this.d)?new c(NaN):v(Math.ceil(d*this.s*this.n/this.d),d)},floor:function(d){return d=Math.pow(10,d||0),isNaN(this.n)||isNaN(this.d)?new c(NaN):v(Math.floor(d*this.s*this.n/this.d),d)},round:function(d){return d=Math.pow(10,d||0),isNaN(this.n)||isNaN(this.d)?new c(NaN):v(Math.round(d*this.s*this.n/this.d),d)},inverse:function(){return v(this.s*this.d,this.n)},pow:function(d,p){if(n(d,p),s.d===1)return s.s<0?v(Math.pow(this.s*this.d,s.n),Math.pow(this.n,s.n)):v(Math.pow(this.s*this.n,s.n),Math.pow(this.d,s.n));if(this.s<0)return null;var m=h(this.n),g=h(this.d),b=1,y=1;for(var w in m)if(w!=="1"){if(w==="0"){b=0;break}if(m[w]*=s.n,m[w]%s.d===0)m[w]/=s.d;else return null;b*=Math.pow(w,m[w])}for(var w in g)if(w!=="1"){if(g[w]*=s.n,g[w]%s.d===0)g[w]/=s.d;else return null;y*=Math.pow(w,g[w])}return s.s<0?v(y,b):v(b,y)},equals:function(d,p){return n(d,p),this.s*this.n*s.d===s.s*s.n*this.d},compare:function(d,p){n(d,p);var m=this.s*this.n*s.d-s.s*s.n*this.d;return(0<m)-(m<0)},simplify:function(d){if(isNaN(this.n)||isNaN(this.d))return this;d=d||.001;for(var p=this.abs(),m=p.toContinued(),g=1;g<m.length;g++){for(var b=v(m[g-1],1),y=g-2;y>=0;y--)b=b.inverse().add(m[y]);if(b.sub(p).abs().valueOf()<d)return b.mul(this.s)}return this},divisible:function(d,p){return n(d,p),!(!(s.n*this.d)||this.n*s.d%(s.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(d){var p,m="",g=this.n,b=this.d;return this.s<0&&(m+="-"),b===1?m+=g:(d&&(p=Math.floor(g/b))>0&&(m+=p,m+=" ",g%=b),m+=g,m+="/",m+=b),m},toLatex:function(d){var p,m="",g=this.n,b=this.d;return this.s<0&&(m+="-"),b===1?m+=g:(d&&(p=Math.floor(g/b))>0&&(m+=p,g%=b),m+="\\frac{",m+=g,m+="}{",m+=b,m+="}"),m},toContinued:function(){var d,p=this.n,m=this.d,g=[];if(isNaN(p)||isNaN(m))return g;do g.push(Math.floor(p/m)),d=p%m,p=m,m=d;while(p!==1);return g},toString:function(d){var p=this.n,m=this.d;if(isNaN(p)||isNaN(m))return"NaN";d=d||15;var g=o(p,m),b=i(p,m,g),y=this.s<0?"-":"";if(y+=p/m|0,p%=m,p*=10,p&&(y+="."),g){for(var w=b;w--;)y+=p/m|0,p%=m,p*=10;y+="(";for(var w=g;w--;)y+=p/m|0,p%=m,p*=10;y+=")"}else for(var w=d;p&&w--;)y+=p/m|0,p%=m,p*=10;return y}},Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Fraction=c,e.exports=c})()})(J1);const Rn=X1(J1.exports);var ED="Fraction",_D=[],DD=Z(ED,_D,()=>(Object.defineProperty(Rn,"name",{value:"Fraction"}),Rn.prototype.constructor=Rn,Rn.prototype.type="Fraction",Rn.prototype.isFraction=!0,Rn.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Rn.fromJSON=function(e){return new Rn(e)},Rn),{isClass:!0}),AD="Range",ND=[],TD=Z(AD,ND,()=>{function e(t,r,a){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");var s=t!=null,f=r!=null,v=a!=null;if(s){if(ct(t))t=t.toNumber();else if(typeof t!="number")throw new TypeError("Parameter start must be a number")}if(f){if(ct(r))r=r.toNumber();else if(typeof r!="number")throw new TypeError("Parameter end must be a number")}if(v){if(ct(a))a=a.toNumber();else if(typeof a!="number")throw new TypeError("Parameter step must be a number")}this.start=s?parseFloat(t):0,this.end=f?parseFloat(r):0,this.step=v?parseFloat(a):1}return e.prototype.type="Range",e.prototype.isRange=!0,e.parse=function(t){if(typeof t!="string")return null;var r=t.split(":"),a=r.map(function(f){return parseFloat(f)}),s=a.some(function(f){return isNaN(f)});if(s)return null;switch(a.length){case 2:return new e(a[0],a[1]);case 3:return new e(a[0],a[2],a[1]);default:return null}},e.prototype.clone=function(){return new e(this.start,this.end,this.step)},e.prototype.size=function(){var t=0,r=this.start,a=this.step,s=this.end,f=s-r;return mi(a)===mi(f)?t=Math.ceil(f/a):f===0&&(t=0),isNaN(t)&&(t=0),[t]},e.prototype.min=function(){var t=this.size()[0];if(t>0)return this.step>0?this.start:this.start+(t-1)*this.step},e.prototype.max=function(){var t=this.size()[0];if(t>0)return this.step>0?this.start+(t-1)*this.step:this.start},e.prototype.forEach=function(t){var r=this.start,a=this.step,s=this.end,f=0;if(a>0)for(;r<s;)t(r,[f],this),r+=a,f++;else if(a<0)for(;r>s;)t(r,[f],this),r+=a,f++},e.prototype.map=function(t){var r=[];return this.forEach(function(a,s,f){r[s[0]]=t(a,s,f)}),r},e.prototype.toArray=function(){var t=[];return this.forEach(function(r,a){t[a[0]]=r}),t},e.prototype.valueOf=function(){return this.toArray()},e.prototype.format=function(t){var r=Yi(this.start,t);return this.step!==1&&(r+=":"+Yi(this.step,t)),r+=":"+Yi(this.end,t),r},e.prototype.toString=function(){return this.format()},e.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},e.fromJSON=function(t){return new e(t.start,t.end,t.step)},e},{isClass:!0}),OD="Matrix",MD=[],FD=Z(OD,MD,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,r){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,r,a){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,r,a){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,r){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,r){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,r){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function PD(e){var t=0,r=1,a=Object.create(null),s=Object.create(null),f=0,v=function(n){var u=s[n];if(!!u&&(delete a[u],delete s[n],--t,r===u)){if(!t){f=0,r=1;return}for(;!hasOwnProperty.call(a,++r););}};return e=Math.abs(e),{hit:function(n){var u=s[n],o=++f;if(a[o]=n,s[n]=o,!u)return++t,t<=e?void 0:(n=a[r],v(n),n);if(delete a[u],r===u)for(;!hasOwnProperty.call(a,++r););},delete:v,clear:function(){t=f=0,r=1,a=Object.create(null),s=Object.create(null)}}}function cs(e){var{hasher:t,limit:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r=r??Number.POSITIVE_INFINITY,t=t??JSON.stringify,function a(){typeof a.cache!="object"&&(a.cache={values:new Map,lru:PD(r||Number.POSITIVE_INFINITY)});for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];var v=t(s);if(a.cache.values.has(v))return a.cache.lru.hit(v),a.cache.values.get(v);var h=e.apply(e,s);return a.cache.values.set(v,h),a.cache.values.delete(a.cache.lru.hit(v)),h}}function Oi(e){return Object.keys(e.signatures||{}).reduce(function(t,r){var a=(r.match(/,/g)||[]).length+1;return Math.max(t,a)},-1)}var BD="DenseMatrix",ID=["Matrix"],RD=Z(BD,ID,e=>{var{Matrix:t}=e;function r(o,i){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(i&&!Cr(i))throw new Error("Invalid datatype: "+i);if(Ze(o))o.type==="DenseMatrix"?(this._data=Je(o._data),this._size=Je(o._size),this._datatype=i||o._datatype):(this._data=o.toArray(),this._size=o.size(),this._datatype=i||o._datatype);else if(o&&Et(o.data)&&Et(o.size))this._data=o.data,this._size=o.size,Vd(this._data,this._size),this._datatype=i||o.datatype;else if(Et(o))this._data=u(o),this._size=ut(this._data),Vd(this._data,this._size),this._datatype=i;else{if(o)throw new TypeError("Unsupported type of data ("+Bt(o)+")");this._data=[],this._size=[0],this._datatype=i}}r.prototype=new t,r.prototype.createDenseMatrix=function(o,i){return new r(o,i)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return Zo(this._data,Bt)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(o,i){return new r(o,i)},r.prototype.subset=function(o,i,l){switch(arguments.length){case 1:return a(this,o);case 2:case 3:return f(this,o,i,l);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(o){if(!Et(o))throw new TypeError("Array expected");if(o.length!==this._size.length)throw new ot(o.length,this._size.length);for(var i=0;i<o.length;i++)At(o[i],this._size[i]);for(var l=this._data,c=0,d=o.length;c<d;c++){var p=o[c];At(p,l.length),l=l[p]}return l},r.prototype.set=function(o,i,l){if(!Et(o))throw new TypeError("Array expected");if(o.length<this._size.length)throw new ot(o.length,this._size.length,"<");var c,d,p,m=o.map(function(b){return b+1});n(this,m,l);var g=this._data;for(c=0,d=o.length-1;c<d;c++)p=o[c],At(p,g.length),g=g[p];return p=o[o.length-1],At(p,g.length),g[p]=i,this};function a(o,i){if(!Sl(i))throw new TypeError("Invalid index");var l=i.isScalar();if(l)return o.get(i.min());var c=i.size();if(c.length!==o._size.length)throw new ot(c.length,o._size.length);for(var d=i.min(),p=i.max(),m=0,g=o._size.length;m<g;m++)At(d[m],o._size[m]),At(p[m],o._size[m]);return new r(s(o._data,i,c.length,0),o._datatype)}function s(o,i,l,c){var d=c===l-1,p=i.dimension(c);return d?p.map(function(m){return At(m,o.length),o[m]}).valueOf():p.map(function(m){At(m,o.length);var g=o[m];return s(g,i,l,c+1)}).valueOf()}function f(o,i,l,c){if(!i||i.isIndex!==!0)throw new TypeError("Invalid index");var d=i.size(),p=i.isScalar(),m;if(Ze(l)?(m=l.size(),l=l.valueOf()):m=ut(l),p){if(m.length!==0)throw new TypeError("Scalar expected");o.set(i.min(),l,c)}else{if(d.length<o._size.length)throw new ot(d.length,o._size.length,"<");if(m.length<d.length){for(var g=0,b=0;d[g]===1&&m[g]===1;)g++;for(;d[g]===1;)b++,g++;l=P1(l,d.length,b,m)}if(!Jo(d,m))throw new ot(d,m,">");var y=i.max().map(function(C){return C+1});n(o,y,c);var w=d.length,x=0;v(o._data,i,l,w,x)}return o}function v(o,i,l,c,d){var p=d===c-1,m=i.dimension(d);p?m.forEach(function(g,b){At(g),o[g]=l[b[0]]}):m.forEach(function(g,b){At(g),v(o[g],i,l[b[0]],c,d+1)})}r.prototype.resize=function(o,i,l){if(!Jn(o))throw new TypeError("Array or Matrix expected");var c=o.valueOf().map(p=>Array.isArray(p)&&p.length===1?p[0]:p),d=l?this.clone():this;return h(d,c,i)};function h(o,i,l){if(i.length===0){for(var c=o._data;Et(c);)c=c[0];return c}return o._size=i.slice(0),o._data=Va(o._data,o._size,l),o}r.prototype.reshape=function(o,i){var l=i?this.clone():this;l._data=O1(l._data,o);var c=l._size.reduce((d,p)=>d*p);return l._size=Eh(o,c),l};function n(o,i,l){for(var c=o._size.slice(0),d=!1;c.length<i.length;)c.push(0),d=!0;for(var p=0,m=i.length;p<m;p++)i[p]>c[p]&&(c[p]=i[p],d=!0);d&&h(o,c,l)}r.prototype.clone=function(){var o=new r({data:Je(this._data),size:Je(this._size),datatype:this._datatype});return o},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(o){var i=this,l=Oi(o),c=function m(g,b){return Et(g)?g.map(function(y,w){return m(y,b.concat(w))}):l===1?o(g):l===2?o(g,b):o(g,b,i)},d=c(this._data,[]),p=this._datatype!==void 0?Zo(d,Bt):void 0;return new r(d,p)},r.prototype.forEach=function(o){var i=this,l=function c(d,p){Et(d)?d.forEach(function(m,g){c(m,p.concat(g))}):o(d,p,i)};l(this._data,[])},r.prototype[Symbol.iterator]=function*(){var o=function*i(l,c){if(Et(l))for(var d=0;d<l.length;d++)yield*i(l[d],c.concat(d));else yield{value:l,index:c}};yield*o(this._data,[])},r.prototype.rows=function(){var o=[],i=this.size();if(i.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var l=this._data;for(var c of l)o.push(new r([c],this._datatype));return o},r.prototype.columns=function(){var o=this,i=[],l=this.size();if(l.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var c=this._data,d=function(g){var b=c.map(y=>[y[g]]);i.push(new r(b,o._datatype))},p=0;p<l[1];p++)d(p);return i},r.prototype.toArray=function(){return Je(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(o){return it(this._data,o)},r.prototype.toString=function(){return it(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(o){if(o){if(ct(o)&&(o=o.toNumber()),!dt(o)||!qe(o))throw new TypeError("The parameter k must be an integer number")}else o=0;for(var i=o>0?o:0,l=o<0?-o:0,c=this._size[0],d=this._size[1],p=Math.min(c-l,d-i),m=[],g=0;g<p;g++)m[g]=this._data[g+l][g+i];return new r({data:m,size:[p],datatype:this._datatype})},r.diagonal=function(o,i,l,c){if(!Et(o))throw new TypeError("Array expected, size parameter");if(o.length!==2)throw new Error("Only two dimensions matrix are supported");if(o=o.map(function(S){if(ct(S)&&(S=S.toNumber()),!dt(S)||!qe(S)||S<1)throw new Error("Size values must be positive integers");return S}),l){if(ct(l)&&(l=l.toNumber()),!dt(l)||!qe(l))throw new TypeError("The parameter k must be an integer number")}else l=0;var d=l>0?l:0,p=l<0?-l:0,m=o[0],g=o[1],b=Math.min(m-p,g-d),y;if(Et(i)){if(i.length!==b)throw new Error("Invalid value array length");y=function(E){return i[E]}}else if(Ze(i)){var w=i.size();if(w.length!==1||w[0]!==b)throw new Error("Invalid matrix length");y=function(E){return i.get([E])}}else y=function(){return i};c||(c=ct(y(0))?y(0).mul(0):0);var x=[];if(o.length>0){x=Va(x,o,c);for(var C=0;C<b;C++)x[C+p][C+d]=y(C)}return new r({data:x,size:[m,g]})},r.fromJSON=function(o){return new r(o)},r.prototype.swapRows=function(o,i){if(!dt(o)||!qe(o)||!dt(i)||!qe(i))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return At(o,this._size[0]),At(i,this._size[0]),r._swapRows(o,i,this._data),this},r._swapRows=function(o,i,l){var c=l[o];l[o]=l[i],l[i]=c};function u(o){for(var i=0,l=o.length;i<l;i++){var c=o[i];Et(c)?o[i]=u(c):c&&c.isMatrix===!0&&(o[i]=u(c.valueOf()))}return o}return r},{isClass:!0}),Jd="clone",kD=["typed"],$D=Z(Jd,kD,e=>{var{typed:t}=e;return t(Jd,{any:Je})});function Z1(e){var t=e.length,r=e[0].length,a,s,f=[];for(s=0;s<r;s++){var v=[];for(a=0;a<t;a++)v.push(e[a][s]);f.push(v)}return f}function io(e){for(var t=0;t<e.length;t++)if(Jn(e[t]))return!0;return!1}function Qn(e,t){Ze(e)&&(e=e.valueOf());for(var r=0,a=e.length;r<a;r++){var s=e[r];Array.isArray(s)?Qn(s,t):t(s)}}function st(e,t,r){return e&&typeof e.map=="function"?e.map(function(a){return st(a,t)}):t(e)}function Ml(e,t,r){var a=Array.isArray(e)?ut(e):e.size();if(t<0||t>=a.length)throw new hn(t,a.length);return Ze(e)?e.create($u(e.valueOf(),t,r)):$u(e,t,r)}function $u(e,t,r){var a,s,f,v;if(t<=0)if(Array.isArray(e[0])){for(v=Z1(e),s=[],a=0;a<v.length;a++)s[a]=$u(v[a],t-1,r);return s}else{for(f=e[0],a=1;a<e.length;a++)f=r(f,e[a]);return f}else{for(s=[],a=0;a<e.length;a++)s[a]=$u(e[a],t-1,r);return s}}function Zd(e,t,r,a,s,f,v,h,n,u,o){var i=e._values,l=e._index,c=e._ptr,d,p,m,g;if(a)for(p=c[t],m=c[t+1],d=p;d<m;d++)g=l[d],r[g]!==f?(r[g]=f,v.push(g),u?(a[g]=n?h(i[d],o):h(o,i[d]),s[g]=f):a[g]=i[d]):(a[g]=n?h(i[d],a[g]):h(a[g],i[d]),s[g]=f);else for(p=c[t],m=c[t+1],d=p;d<m;d++)g=l[d],r[g]!==f?(r[g]=f,v.push(g)):s[g]=f}var Qd="isInteger",LD=["typed"],zD=Z(Qd,LD,e=>{var{typed:t}=e;return t(Qd,{number:qe,BigNumber:function(a){return a.isInt()},Fraction:function(a){return a.d===1&&isFinite(a.n)},"Array | Matrix":t.referToSelf(r=>a=>st(a,r))})}),dn="number",na="number, number";function Q1(e){return Math.abs(e)}Q1.signature=dn;function eb(e,t){return e+t}eb.signature=na;function tb(e,t){return e*t}tb.signature=na;function rb(e){return-e}rb.signature=dn;function nb(e){return e}nb.signature=dn;function Lo(e){return HE(e)}Lo.signature=dn;function ib(e){return e*e*e}ib.signature=dn;function ab(e){return Math.exp(e)}ab.signature=dn;function ob(e){return VE(e)}ob.signature=dn;function sb(e,t){if(!qe(e)||!qe(t))throw new Error("Parameters in function gcd must be integer numbers");for(var r;t!==0;)r=e%t,e=t,t=r;return e<0?-e:e}sb.signature=na;function ub(e,t){if(!qe(e)||!qe(t))throw new Error("Parameters in function lcm must be integer numbers");if(e===0||t===0)return 0;for(var r,a=e*t;t!==0;)r=t,t=e%r,e=r;return Math.abs(a/e)}ub.signature=na;function UD(e,t){return t?Math.log(e)/Math.log(t):Math.log(e)}function lb(e){return jE(e)}lb.signature=dn;function cb(e){return UE(e)}cb.signature=dn;function fb(e,t){if(t>0)return e-t*Math.floor(e/t);if(t===0)return e;throw new Error("Cannot calculate mod for a negative divisor")}fb.signature=na;function ep(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r=t<0;if(r&&(t=-t),t===0)throw new Error("Root must be non-zero");if(e<0&&Math.abs(t)%2!==1)throw new Error("Root must be odd when a is negative.");if(e===0)return r?1/0:0;if(!isFinite(e))return r?0:e;var a=Math.pow(Math.abs(e),1/t);return a=e<0?-a:a,r?1/a:a}function zf(e){return mi(e)}zf.signature=dn;function hb(e){return e*e}hb.signature=dn;function db(e,t){var r,a,s,f=0,v=1,h=1,n=0;if(!qe(e)||!qe(t))throw new Error("Parameters in function xgcd must be integer numbers");for(;t;)a=Math.floor(e/t),s=e-a*t,r=f,f=v-a*f,v=r,r=h,h=n-a*h,n=r,e=t,t=s;var u;return e<0?u=[-e,-v,-n]:u=[e,e?v:0,n],u}db.signature=na;function pb(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}pb.signature=na;function tp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!qe(t)||t<0||t>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(D1(e,t))}var jD="number",ao="number, number";function mb(e,t){if(!qe(e)||!qe(t))throw new Error("Integers expected in function bitAnd");return e&t}mb.signature=ao;function vb(e){if(!qe(e))throw new Error("Integer expected in function bitNot");return~e}vb.signature=jD;function gb(e,t){if(!qe(e)||!qe(t))throw new Error("Integers expected in function bitOr");return e|t}gb.signature=ao;function yb(e,t){if(!qe(e)||!qe(t))throw new Error("Integers expected in function bitXor");return e^t}yb.signature=ao;function bb(e,t){if(!qe(e)||!qe(t))throw new Error("Integers expected in function leftShift");return e<<t}bb.signature=ao;function wb(e,t){if(!qe(e)||!qe(t))throw new Error("Integers expected in function rightArithShift");return e>>t}wb.signature=ao;function xb(e,t){if(!qe(e)||!qe(t))throw new Error("Integers expected in function rightLogShift");return e>>>t}xb.signature=ao;function Hn(e,t){if(t<e)return 1;if(t===e)return t;var r=t+e>>1;return Hn(e,r)*Hn(r+1,t)}function Cb(e,t){if(!qe(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(!qe(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(t>e)throw new TypeError("k must be less than or equal to n");for(var r=e-t,a=1,s=t<r?r+1:t+1,f=2,v=t<r?t:r,h=s;h<=e;++h)for(a*=h;f<=v&&a%f===0;)a/=f,++f;return f<=v&&(a/=Hn(f,v)),a}Cb.signature="number, number";var qD=Math.PI,HD=2*Math.PI,VD=Math.E,GD=1.618033988749895,WD="number",Oh="number, number";function Sb(e){return!e}Sb.signature=WD;function Eb(e,t){return!!(e||t)}Eb.signature=Oh;function _b(e,t){return!!e!=!!t}_b.signature=Oh;function Db(e,t){return!!(e&&t)}Db.signature=Oh;function Lu(e){var t;if(qe(e))return e<=0?isFinite(e)?1/0:NaN:e>171?1/0:Hn(1,e-1);if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*Lu(1-e));if(e>=171.35)return 1/0;if(e>85){var r=e*e,a=r*e,s=a*e,f=s*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*r)-139/(51840*a)-571/(2488320*s)+163879/(209018880*f)+5246819/(75246796800*f*e))}--e,t=ka[0];for(var v=1;v<ka.length;++v)t+=ka[v]/(e+v);var h=e+Ab+.5;return Math.sqrt(2*Math.PI)*Math.pow(h,e+.5)*Math.exp(-h)*t}Lu.signature="number";var Ab=4.7421875,ka=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Nb=.9189385332046728,YD=5,XD=7,rp=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function zu(e){if(e<0)return NaN;if(e===0)return 1/0;if(!isFinite(e))return e;if(e<.5)return Math.log(Math.PI/Math.sin(Math.PI*e))-zu(1-e);e=e-1;for(var t=e+YD+.5,r=rp[0],a=XD-1;a>=1;a--)r+=rp[a]/(e+a);return Nb+(e+.5)*Math.log(t)-t+Math.log(r)}zu.signature="number";var gr="number";function Tb(e){return KE(e)}Tb.signature=gr;function Ob(e){return Math.atan(1/e)}Ob.signature=gr;function Mb(e){return isFinite(e)?(Math.log((e+1)/e)+Math.log(e/(e-1)))/2:0}Mb.signature=gr;function Fb(e){return Math.asin(1/e)}Fb.signature=gr;function Pb(e){var t=1/e;return Math.log(t+Math.sqrt(t*t+1))}Pb.signature=gr;function Bb(e){return Math.acos(1/e)}Bb.signature=gr;function Ib(e){var t=1/e,r=Math.sqrt(t*t-1);return Math.log(r+t)}Ib.signature=gr;function Rb(e){return JE(e)}Rb.signature=gr;function kb(e){return ZE(e)}kb.signature=gr;function $b(e){return 1/Math.tan(e)}$b.signature=gr;function Lb(e){var t=Math.exp(2*e);return(t+1)/(t-1)}Lb.signature=gr;function zb(e){return 1/Math.sin(e)}zb.signature=gr;function Ub(e){return e===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(e)-Math.exp(-e)))*mi(e)}Ub.signature=gr;function jb(e){return 1/Math.cos(e)}jb.signature=gr;function qb(e){return 2/(Math.exp(e)+Math.exp(-e))}qb.signature=gr;function Hb(e){return e_(e)}Hb.signature=gr;var Fl="number";function Vb(e){return e<0}Vb.signature=Fl;function Gb(e){return e>0}Gb.signature=Fl;function Wb(e){return e===0}Wb.signature=Fl;function Yb(e){return Number.isNaN(e)}Yb.signature=Fl;var np="isNegative",KD=["typed"],JD=Z(np,KD,e=>{var{typed:t}=e;return t(np,{number:Vb,BigNumber:function(a){return a.isNeg()&&!a.isZero()&&!a.isNaN()},Fraction:function(a){return a.s<0},Unit:t.referToSelf(r=>a=>t.find(r,a.valueType())(a.value)),"Array | Matrix":t.referToSelf(r=>a=>st(a,r))})}),ip="isNumeric",ZD=["typed"],QD=Z(ip,ZD,e=>{var{typed:t}=e;return t(ip,{"number | BigNumber | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":t.referToSelf(r=>a=>st(a,r))})}),ap="hasNumericValue",eA=["typed","isNumeric"],tA=Z(ap,eA,e=>{var{typed:t,isNumeric:r}=e;return t(ap,{boolean:()=>!0,string:function(s){return s.trim().length>0&&!isNaN(Number(s))},any:function(s){return r(s)}})}),op="isPositive",rA=["typed"],nA=Z(op,rA,e=>{var{typed:t}=e;return t(op,{number:Gb,BigNumber:function(a){return!a.isNeg()&&!a.isZero()&&!a.isNaN()},Fraction:function(a){return a.s>0&&a.n>0},Unit:t.referToSelf(r=>a=>t.find(r,a.valueType())(a.value)),"Array | Matrix":t.referToSelf(r=>a=>st(a,r))})}),sp="isZero",iA=["typed"],aA=Z(sp,iA,e=>{var{typed:t}=e;return t(sp,{number:Wb,BigNumber:function(a){return a.isZero()},Complex:function(a){return a.re===0&&a.im===0},Fraction:function(a){return a.d===1&&a.n===0},Unit:t.referToSelf(r=>a=>t.find(r,a.valueType())(a.value)),"Array | Matrix":t.referToSelf(r=>a=>st(a,r))})}),up="isNaN",oA=["typed"],sA=Z(up,oA,e=>{var{typed:t}=e;return t(up,{number:Yb,BigNumber:function(a){return a.isNaN()},Fraction:function(a){return!1},Complex:function(a){return a.isNaN()},Unit:function(a){return Number.isNaN(a.value)},"Array | Matrix":function(a){return st(a,Number.isNaN)}})}),lp="typeOf",uA=["typed"],lA=Z(lp,uA,e=>{var{typed:t}=e;return t(lp,{any:Bt})});function An(e,t,r){if(r==null)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var a=e.minus(t).abs();if(a.isZero())return!0;var s=e.constructor.max(e.abs(),t.abs());return a.lte(s.times(r))}return!1}function cA(e,t,r){return Rr(e.re,t.re,r)&&Rr(e.im,t.im,r)}var oo=Z("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(r=>(a,s)=>{if(!a.equalBase(s))throw new Error("Cannot compare units with different base");return t.find(r,[a.valueType(),s.valueType()])(a.value,s.value)})}}),Uu="equalScalar",fA=["typed","config"],hA=Z(Uu,fA,e=>{var{typed:t,config:r}=e,a=oo({typed:t});return t(Uu,{"boolean, boolean":function(f,v){return f===v},"number, number":function(f,v){return Rr(f,v,r.epsilon)},"BigNumber, BigNumber":function(f,v){return f.eq(v)||An(f,v,r.epsilon)},"Fraction, Fraction":function(f,v){return f.equals(v)},"Complex, Complex":function(f,v){return cA(f,v,r.epsilon)}},a)});Z(Uu,["typed","config"],e=>{var{typed:t,config:r}=e;return t(Uu,{"number, number":function(s,f){return Rr(s,f,r.epsilon)}})});var dA="SparseMatrix",pA=["typed","equalScalar","Matrix"],mA=Z(dA,pA,e=>{var{typed:t,equalScalar:r,Matrix:a}=e;function s(p,m){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Cr(m))throw new Error("Invalid datatype: "+m);if(Ze(p))f(this,p,m);else if(p&&Et(p.index)&&Et(p.ptr)&&Et(p.size))this._values=p.values,this._index=p.index,this._ptr=p.ptr,this._size=p.size,this._datatype=m||p.datatype;else if(Et(p))v(this,p,m);else{if(p)throw new TypeError("Unsupported type of data ("+Bt(p)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function f(p,m,g){m.type==="SparseMatrix"?(p._values=m._values?Je(m._values):void 0,p._index=Je(m._index),p._ptr=Je(m._ptr),p._size=Je(m._size),p._datatype=g||m._datatype):v(p,m.valueOf(),g||m._datatype)}function v(p,m,g){p._values=[],p._index=[],p._ptr=[],p._datatype=g;var b=m.length,y=0,w=r,x=0;if(Cr(g)&&(w=t.find(r,[g,g])||r,x=t.convert(0,g)),b>0){var C=0;do{p._ptr.push(p._index.length);for(var S=0;S<b;S++){var E=m[S];if(Et(E)){if(C===0&&y<E.length&&(y=E.length),C<E.length){var A=E[C];w(A,x)||(p._values.push(A),p._index.push(S))}}else C===0&&y<1&&(y=1),w(E,x)||(p._values.push(E),p._index.push(S))}C++}while(C<y)}p._ptr.push(p._index.length),p._size=[b,y]}s.prototype=new a,s.prototype.createSparseMatrix=function(p,m){return new s(p,m)},Object.defineProperty(s,"name",{value:"SparseMatrix"}),s.prototype.constructor=s,s.prototype.type="SparseMatrix",s.prototype.isSparseMatrix=!0,s.prototype.getDataType=function(){return Zo(this._values,Bt)},s.prototype.storage=function(){return"sparse"},s.prototype.datatype=function(){return this._datatype},s.prototype.create=function(p,m){return new s(p,m)},s.prototype.density=function(){var p=this._size[0],m=this._size[1];return p!==0&&m!==0?this._index.length/(p*m):0},s.prototype.subset=function(p,m,g){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return h(this,p);case 2:case 3:return n(this,p,m,g);default:throw new SyntaxError("Wrong number of arguments")}};function h(p,m){if(!Sl(m))throw new TypeError("Invalid index");var g=m.isScalar();if(g)return p.get(m.min());var b=m.size();if(b.length!==p._size.length)throw new ot(b.length,p._size.length);var y,w,x,C,S=m.min(),E=m.max();for(y=0,w=p._size.length;y<w;y++)At(S[y],p._size[y]),At(E[y],p._size[y]);var A=p._values,D=p._index,M=p._ptr,B=m.dimension(0),O=m.dimension(1),F=[],z=[];B.forEach(function(_,I){z[_]=I[0],F[_]=!0});var N=A?[]:void 0,T=[],q=[];return O.forEach(function(_){for(q.push(T.length),x=M[_],C=M[_+1];x<C;x++)y=D[x],F[y]===!0&&(T.push(z[y]),N&&N.push(A[x]))}),q.push(T.length),new s({values:N,index:T,ptr:q,size:b,datatype:p._datatype})}function n(p,m,g,b){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var y=m.size(),w=m.isScalar(),x;if(Ze(g)?(x=g.size(),g=g.toArray()):x=ut(g),w){if(x.length!==0)throw new TypeError("Scalar expected");p.set(m.min(),g,b)}else{if(y.length!==1&&y.length!==2)throw new ot(y.length,p._size.length,"<");if(x.length<y.length){for(var C=0,S=0;y[C]===1&&x[C]===1;)C++;for(;y[C]===1;)S++,C++;g=P1(g,y.length,S,x)}if(!Jo(y,x))throw new ot(y,x,">");if(y.length===1){var E=m.dimension(0);E.forEach(function(M,B){At(M),p.set([M,0],g[B[0]],b)})}else{var A=m.dimension(0),D=m.dimension(1);A.forEach(function(M,B){At(M),D.forEach(function(O,F){At(O),p.set([M,O],g[B[0]][F[0]],b)})})}}return p}s.prototype.get=function(p){if(!Et(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new ot(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=p[0],g=p[1];At(m,this._size[0]),At(g,this._size[1]);var b=u(m,this._ptr[g],this._ptr[g+1],this._index);return b<this._ptr[g+1]&&this._index[b]===m?this._values[b]:0},s.prototype.set=function(p,m,g){if(!Et(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new ot(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var b=p[0],y=p[1],w=this._size[0],x=this._size[1],C=r,S=0;Cr(this._datatype)&&(C=t.find(r,[this._datatype,this._datatype])||r,S=t.convert(0,this._datatype)),(b>w-1||y>x-1)&&(l(this,Math.max(b+1,w),Math.max(y+1,x),g),w=this._size[0],x=this._size[1]),At(b,w),At(y,x);var E=u(b,this._ptr[y],this._ptr[y+1],this._index);return E<this._ptr[y+1]&&this._index[E]===b?C(m,S)?o(E,y,this._values,this._index,this._ptr):this._values[E]=m:C(m,S)||i(E,b,y,m,this._values,this._index,this._ptr),this};function u(p,m,g,b){if(g-m===0)return g;for(var y=m;y<g;y++)if(b[y]===p)return y;return m}function o(p,m,g,b,y){g.splice(p,1),b.splice(p,1);for(var w=m+1;w<y.length;w++)y[w]--}function i(p,m,g,b,y,w,x){y.splice(p,0,b),w.splice(p,0,m);for(var C=g+1;C<x.length;C++)x[C]++}s.prototype.resize=function(p,m,g){if(!Jn(p))throw new TypeError("Array or Matrix expected");var b=p.valueOf().map(w=>Array.isArray(w)&&w.length===1?w[0]:w);if(b.length!==2)throw new Error("Only two dimensions matrix are supported");b.forEach(function(w){if(!dt(w)||!qe(w)||w<0)throw new TypeError("Invalid size, must contain positive integers (size: "+it(b)+")")});var y=g?this.clone():this;return l(y,b[0],b[1],m)};function l(p,m,g,b){var y=b||0,w=r,x=0;Cr(p._datatype)&&(w=t.find(r,[p._datatype,p._datatype])||r,x=t.convert(0,p._datatype),y=t.convert(y,p._datatype));var C=!w(y,x),S=p._size[0],E=p._size[1],A,D,M;if(g>E){for(D=E;D<g;D++)if(p._ptr[D]=p._values.length,C)for(A=0;A<S;A++)p._values.push(y),p._index.push(A);p._ptr[g]=p._values.length}else g<E&&(p._ptr.splice(g+1,E-g),p._values.splice(p._ptr[g],p._values.length),p._index.splice(p._ptr[g],p._index.length));if(E=g,m>S){if(C){var B=0;for(D=0;D<E;D++){p._ptr[D]=p._ptr[D]+B,M=p._ptr[D+1]+B;var O=0;for(A=S;A<m;A++,O++)p._values.splice(M+O,0,y),p._index.splice(M+O,0,A),B++}p._ptr[E]=p._values.length}}else if(m<S){var F=0;for(D=0;D<E;D++){p._ptr[D]=p._ptr[D]-F;var z=p._ptr[D],N=p._ptr[D+1]-F;for(M=z;M<N;M++)A=p._index[M],A>m-1&&(p._values.splice(M,1),p._index.splice(M,1),F++)}p._ptr[D]=p._values.length}return p._size[0]=m,p._size[1]=g,p}s.prototype.reshape=function(p,m){if(!Et(p))throw new TypeError("Array expected");if(p.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");p.forEach(function(_){if(!dt(_)||!qe(_)||_<=-2||_===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+it(p)+")")});var g=this._size[0]*this._size[1];p=Eh(p,g);var b=p[0]*p[1];if(g!==b)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=m?this.clone():this;if(this._size[0]===p[0]&&this._size[1]===p[1])return y;for(var w=[],x=0;x<y._ptr.length;x++)for(var C=0;C<y._ptr[x+1]-y._ptr[x];C++)w.push(x);for(var S=y._values.slice(),E=y._index.slice(),A=0;A<y._index.length;A++){var D=E[A],M=w[A],B=D*y._size[1]+M;w[A]=B%p[1],E[A]=Math.floor(B/p[1])}y._values.length=0,y._index.length=0,y._ptr.length=p[1]+1,y._size=p.slice();for(var O=0;O<y._ptr.length;O++)y._ptr[O]=0;for(var F=0;F<S.length;F++){var z=E[F],N=w[F],T=S[F],q=u(z,y._ptr[N],y._ptr[N+1],y._index);i(q,z,N,T,y._values,y._index,y._ptr)}return y},s.prototype.clone=function(){var p=new s({values:this._values?Je(this._values):void 0,index:Je(this._index),ptr:Je(this._ptr),size:Je(this._size),datatype:this._datatype});return p},s.prototype.size=function(){return this._size.slice(0)},s.prototype.map=function(p,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var g=this,b=this._size[0],y=this._size[1],w=Oi(p),x=function(S,E,A){return w===1?p(S):w===2?p(S,[E,A]):p(S,[E,A],g)};return c(this,0,b-1,0,y-1,x,m)};function c(p,m,g,b,y,w,x){var C=[],S=[],E=[],A=r,D=0;Cr(p._datatype)&&(A=t.find(r,[p._datatype,p._datatype])||r,D=t.convert(0,p._datatype));for(var M=function(L,P,k){L=w(L,P,k),A(L,D)||(C.push(L),S.push(P))},B=b;B<=y;B++){E.push(C.length);var O=p._ptr[B],F=p._ptr[B+1];if(x)for(var z=O;z<F;z++){var N=p._index[z];N>=m&&N<=g&&M(p._values[z],N-m,B-b)}else{for(var T={},q=O;q<F;q++){var _=p._index[q];T[_]=p._values[q]}for(var I=m;I<=g;I++){var U=I in T?T[I]:0;M(U,I-m,B-b)}}}return E.push(C.length),new s({values:C,index:S,ptr:E,size:[g-m+1,y-b+1]})}s.prototype.forEach=function(p,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var g=this,b=this._size[0],y=this._size[1],w=0;w<y;w++){var x=this._ptr[w],C=this._ptr[w+1];if(m)for(var S=x;S<C;S++){var E=this._index[S];p(this._values[S],[E,w],g)}else{for(var A={},D=x;D<C;D++){var M=this._index[D];A[M]=this._values[D]}for(var B=0;B<b;B++){var O=B in A?A[B]:0;p(O,[B,w],g)}}}},s.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var p=this._size[1],m=0;m<p;m++)for(var g=this._ptr[m],b=this._ptr[m+1],y=g;y<b;y++){var w=this._index[y];yield{value:this._values[y],index:[w,m]}}},s.prototype.toArray=function(){return d(this._values,this._index,this._ptr,this._size,!0)},s.prototype.valueOf=function(){return d(this._values,this._index,this._ptr,this._size,!1)};function d(p,m,g,b,y){var w=b[0],x=b[1],C=[],S,E;for(S=0;S<w;S++)for(C[S]=[],E=0;E<x;E++)C[S][E]=0;for(E=0;E<x;E++)for(var A=g[E],D=g[E+1],M=A;M<D;M++)S=m[M],C[S][E]=p?y?Je(p[M]):p[M]:1;return C}return s.prototype.format=function(p){for(var m=this._size[0],g=this._size[1],b=this.density(),y="Sparse Matrix ["+it(m,p)+" x "+it(g,p)+"] density: "+it(b,p)+`
`,w=0;w<g;w++)for(var x=this._ptr[w],C=this._ptr[w+1],S=x;S<C;S++){var E=this._index[S];y+=`
    (`+it(E,p)+", "+it(w,p)+") ==> "+(this._values?it(this._values[S],p):"X")}return y},s.prototype.toString=function(){return it(this.toArray())},s.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},s.prototype.diagonal=function(p){if(p){if(ct(p)&&(p=p.toNumber()),!dt(p)||!qe(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var m=p>0?p:0,g=p<0?-p:0,b=this._size[0],y=this._size[1],w=Math.min(b-g,y-m),x=[],C=[],S=[];S[0]=0;for(var E=m;E<y&&x.length<w;E++)for(var A=this._ptr[E],D=this._ptr[E+1],M=A;M<D;M++){var B=this._index[M];if(B===E-m+g){x.push(this._values[M]),C[x.length-1]=B-g;break}}return S.push(x.length),new s({values:x,index:C,ptr:S,size:[w,1]})},s.fromJSON=function(p){return new s(p)},s.diagonal=function(p,m,g,b,y){if(!Et(p))throw new TypeError("Array expected, size parameter");if(p.length!==2)throw new Error("Only two dimensions matrix are supported");if(p=p.map(function(_){if(ct(_)&&(_=_.toNumber()),!dt(_)||!qe(_)||_<1)throw new Error("Size values must be positive integers");return _}),g){if(ct(g)&&(g=g.toNumber()),!dt(g)||!qe(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var w=r,x=0;Cr(y)&&(w=t.find(r,[y,y])||r,x=t.convert(0,y));var C=g>0?g:0,S=g<0?-g:0,E=p[0],A=p[1],D=Math.min(E-S,A-C),M;if(Et(m)){if(m.length!==D)throw new Error("Invalid value array length");M=function(I){return m[I]}}else if(Ze(m)){var B=m.size();if(B.length!==1||B[0]!==D)throw new Error("Invalid matrix length");M=function(I){return m.get([I])}}else M=function(){return m};for(var O=[],F=[],z=[],N=0;N<A;N++){z.push(O.length);var T=N-C;if(T>=0&&T<D){var q=M(T);w(q,x)||(F.push(T+S),O.push(q))}}return z.push(O.length),new s({values:O,index:F,ptr:z,size:[E,A]})},s.prototype.swapRows=function(p,m){if(!dt(p)||!qe(p)||!dt(m)||!qe(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return At(p,this._size[0]),At(m,this._size[0]),s._swapRows(p,m,this._size[1],this._values,this._index,this._ptr),this},s._forEachRow=function(p,m,g,b,y){for(var w=b[p],x=b[p+1],C=w;C<x;C++)y(g[C],m[C])},s._swapRows=function(p,m,g,b,y,w){for(var x=0;x<g;x++){var C=w[x],S=w[x+1],E=u(p,C,S,y),A=u(m,C,S,y);if(E<S&&A<S&&y[E]===p&&y[A]===m){if(b){var D=b[E];b[E]=b[A],b[A]=D}continue}if(E<S&&y[E]===p&&(A>=S||y[A]!==m)){var M=b?b[E]:void 0;y.splice(A,0,m),b&&b.splice(A,0,M),y.splice(A<=E?E+1:E,1),b&&b.splice(A<=E?E+1:E,1);continue}if(A<S&&y[A]===m&&(E>=S||y[E]!==p)){var B=b?b[A]:void 0;y.splice(E,0,p),b&&b.splice(E,0,B),y.splice(E<=A?A+1:A,1),b&&b.splice(E<=A?A+1:A,1)}}},s},{isClass:!0}),vA="number",gA=["typed"];function yA(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var r={"0b":2,"0o":8,"0x":16}[t[1]],a=t[2],s=t[3];return{input:e,radix:r,integerPart:a,fractionalPart:s}}else return null}function bA(e){for(var t=parseInt(e.integerPart,e.radix),r=0,a=0;a<e.fractionalPart.length;a++){var s=parseInt(e.fractionalPart[a],e.radix);r+=s/Math.pow(e.radix,a+1)}var f=t+r;if(isNaN(f))throw new SyntaxError('String "'+e.input+'" is no valid number');return f}var wA=Z(vA,gA,e=>{var{typed:t}=e,r=t("number",{"":function(){return 0},number:function(s){return s},string:function(s){if(s==="NaN")return NaN;var f=yA(s);if(f)return bA(f);var v=0,h=s.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);h&&(v=Number(h[2]),s=h[1]);var n=Number(s);if(isNaN(n))throw new SyntaxError('String "'+s+'" is no valid number');if(h){if(n>2**v-1)throw new SyntaxError('String "'.concat(s,'" is out of range'));n>=2**(v-1)&&(n=n-2**v)}return n},BigNumber:function(s){return s.toNumber()},Fraction:function(s){return s.valueOf()},Unit:function(s){throw new Error("Second argument with valueless unit expected")},null:function(s){return 0},"Unit, string | Unit":function(s,f){return s.toNumber(f)},"Array | Matrix":t.referToSelf(a=>s=>st(s,a))});return r.fromJSON=function(a){return parseFloat(a.value)},r}),cp="string",xA=["typed"],CA=Z(cp,xA,e=>{var{typed:t}=e;return t(cp,{"":function(){return""},number:Yi,null:function(a){return"null"},boolean:function(a){return a+""},string:function(a){return a},"Array | Matrix":t.referToSelf(r=>a=>st(a,r)),any:function(a){return String(a)}})}),fp="boolean",SA=["typed"],EA=Z(fp,SA,e=>{var{typed:t}=e;return t(fp,{"":function(){return!1},boolean:function(a){return a},number:function(a){return!!a},null:function(a){return!1},BigNumber:function(a){return!a.isZero()},string:function(a){var s=a.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;var f=Number(a);if(a!==""&&!isNaN(f))return!!f;throw new Error('Cannot convert "'+a+'" to a boolean')},"Array | Matrix":t.referToSelf(r=>a=>st(a,r))})}),_A="bignumber",DA=["typed","BigNumber"],AA=Z(_A,DA,e=>{var{typed:t,BigNumber:r}=e;return t("bignumber",{"":function(){return new r(0)},number:function(s){return new r(s+"")},string:function(s){var f=s.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(f){var v=f[2],h=r(f[1]),n=new r(2).pow(Number(v));if(h.gt(n.sub(1)))throw new SyntaxError('String "'.concat(s,'" is out of range'));var u=new r(2).pow(Number(v)-1);return h.gte(u)?h.sub(n):h}return new r(s)},BigNumber:function(s){return s},Fraction:function(s){return new r(s.n).div(s.d).times(s.s)},null:function(s){return new r(0)},"Array | Matrix":t.referToSelf(a=>s=>st(s,a))})}),NA="complex",TA=["typed","Complex"],OA=Z(NA,TA,e=>{var{typed:t,Complex:r}=e;return t("complex",{"":function(){return r.ZERO},number:function(s){return new r(s,0)},"number, number":function(s,f){return new r(s,f)},"BigNumber, BigNumber":function(s,f){return new r(s.toNumber(),f.toNumber())},Fraction:function(s){return new r(s.valueOf(),0)},Complex:function(s){return s.clone()},string:function(s){return r(s)},null:function(s){return r(0)},Object:function(s){if("re"in s&&"im"in s)return new r(s.re,s.im);if("r"in s&&"phi"in s||"abs"in s&&"arg"in s)return new r(s);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":t.referToSelf(a=>s=>st(s,a))})}),MA="fraction",FA=["typed","Fraction"],PA=Z(MA,FA,e=>{var{typed:t,Fraction:r}=e;return t("fraction",{number:function(s){if(!isFinite(s)||isNaN(s))throw new Error(s+" cannot be represented as a fraction");return new r(s)},string:function(s){return new r(s)},"number, number":function(s,f){return new r(s,f)},null:function(s){return new r(0)},BigNumber:function(s){return new r(s.toString())},Fraction:function(s){return s},Object:function(s){return new r(s)},"Array | Matrix":t.referToSelf(a=>s=>st(s,a))})}),hp="matrix",BA=["typed","Matrix","DenseMatrix","SparseMatrix"],IA=Z(hp,BA,e=>{var{typed:t,Matrix:r,DenseMatrix:a,SparseMatrix:s}=e;return t(hp,{"":function(){return f([])},string:function(h){return f([],h)},"string, string":function(h,n){return f([],h,n)},Array:function(h){return f(h)},Matrix:function(h){return f(h,h.storage())},"Array | Matrix, string":f,"Array | Matrix, string, string":f});function f(v,h,n){if(h==="dense"||h==="default"||h===void 0)return new a(v,n);if(h==="sparse")return new s(v,n);throw new TypeError("Unknown matrix type "+JSON.stringify(h)+".")}}),dp="matrixFromFunction",RA=["typed","matrix","isZero"],kA=Z(dp,RA,e=>{var{typed:t,matrix:r,isZero:a}=e;return t(dp,{"Array | Matrix, function, string, string":function(v,h,n,u){return s(v,h,n,u)},"Array | Matrix, function, string":function(v,h,n){return s(v,h,n)},"Matrix, function":function(v,h){return s(v,h,"dense")},"Array, function":function(v,h){return s(v,h,"dense").toArray()},"Array | Matrix, string, function":function(v,h,n){return s(v,n,h)},"Array | Matrix, string, string, function":function(v,h,n,u){return s(v,u,h,n)}});function s(f,v,h,n){var u;return n!==void 0?u=r(h,n):u=r(h),u.resize(f),u.forEach(function(o,i){var l=v(i);a(l)||u.set(i,l)}),u}}),pp="matrixFromRows",$A=["typed","matrix","flatten","size"],LA=Z(pp,$A,e=>{var{typed:t,matrix:r,flatten:a,size:s}=e;return t(pp,{"...Array":function(n){return f(n)},"...Matrix":function(n){return r(f(n.map(u=>u.toArray())))}});function f(h){if(h.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var n=v(h[0]),u=[];for(var o of h){var i=v(o);if(i!==n)throw new TypeError("The vectors had different length: "+(n|0)+" \u2260 "+(i|0));u.push(a(o))}return u}function v(h){var n=s(h);if(n.length===1)return n[0];if(n.length===2){if(n[0]===1)return n[1];if(n[1]===1)return n[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),mp="matrixFromColumns",zA=["typed","matrix","flatten","size"],UA=Z(mp,zA,e=>{var{typed:t,matrix:r,flatten:a,size:s}=e;return t(mp,{"...Array":function(n){return f(n)},"...Matrix":function(n){return r(f(n.map(u=>u.toArray())))}});function f(h){if(h.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var n=v(h[0]),u=[],o=0;o<n;o++)u[o]=[];for(var i of h){var l=v(i);if(l!==n)throw new TypeError("The vectors had different length: "+(n|0)+" \u2260 "+(l|0));for(var c=a(i),d=0;d<n;d++)u[d].push(c[d])}return u}function v(h){var n=s(h);if(n.length===1)return n[0];if(n.length===2){if(n[0]===1)return n[1];if(n[1]===1)return n[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),vp="splitUnit",jA=["typed"],qA=Z(vp,jA,e=>{var{typed:t}=e;return t(vp,{"Unit, Array":function(a,s){return a.splitUnit(s)}})}),gp="unaryMinus",HA=["typed"],VA=Z(gp,HA,e=>{var{typed:t}=e;return t(gp,{number:rb,"Complex | BigNumber | Fraction":r=>r.neg(),Unit:t.referToSelf(r=>a=>{var s=a.clone();return s.value=t.find(r,s.valueType())(a.value),s}),"Array | Matrix":t.referToSelf(r=>a=>st(a,r))})}),yp="unaryPlus",GA=["typed","config","BigNumber"],WA=Z(yp,GA,e=>{var{typed:t,config:r,BigNumber:a}=e;return t(yp,{number:nb,Complex:function(f){return f},BigNumber:function(f){return f},Fraction:function(f){return f},Unit:function(f){return f.clone()},"Array | Matrix":t.referToSelf(s=>f=>st(f,s)),"boolean | string":function(f){return r.number==="BigNumber"?new a(+f):+f}})}),bp="abs",YA=["typed"],XA=Z(bp,YA,e=>{var{typed:t}=e;return t(bp,{number:Q1,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),"Array | Matrix":t.referToSelf(r=>a=>st(a,r))})}),wp="apply",KA=["typed","isInteger"],Xb=Z(wp,KA,e=>{var{typed:t,isInteger:r}=e;return t(wp,{"Array | Matrix, number | BigNumber, function":function(s,f,v){if(!r(f))throw new TypeError("Integer number expected for dimension");var h=Array.isArray(s)?ut(s):s.size();if(f<0||f>=h.length)throw new hn(f,h.length);return Ze(s)?s.create(ju(s.valueOf(),f,v)):ju(s,f,v)}})});function ju(e,t,r){var a,s,f;if(t<=0)if(Array.isArray(e[0])){for(f=JA(e),s=[],a=0;a<f.length;a++)s[a]=ju(f[a],t-1,r);return s}else return r(e);else{for(s=[],a=0;a<e.length;a++)s[a]=ju(e[a],t-1,r);return s}}function JA(e){var t=e.length,r=e[0].length,a,s,f=[];for(s=0;s<r;s++){var v=[];for(a=0;a<t;a++)v.push(e[a][s]);f.push(v)}return f}var xp="addScalar",ZA=["typed"],QA=Z(xp,ZA,e=>{var{typed:t}=e;return t(xp,{"number, number":eb,"Complex, Complex":function(a,s){return a.add(s)},"BigNumber, BigNumber":function(a,s){return a.plus(s)},"Fraction, Fraction":function(a,s){return a.add(s)},"Unit, Unit":t.referToSelf(r=>(a,s)=>{if(a.value===null||a.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(s.value===null||s.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!a.equalBase(s))throw new Error("Units do not match");var f=a.clone();return f.value=t.find(r,[f.valueType(),s.valueType()])(f.value,s.value),f.fixPrefix=!1,f})})}),Cp="cbrt",eN=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],tN=Z(Cp,eN,e=>{var{config:t,typed:r,isNegative:a,unaryMinus:s,matrix:f,Complex:v,BigNumber:h,Fraction:n}=e;return r(Cp,{number:Lo,Complex:u,"Complex, boolean":u,BigNumber:function(l){return l.cbrt()},Unit:o});function u(i,l){var c=i.arg()/3,d=i.abs(),p=new v(Lo(d),0).mul(new v(0,c).exp());if(l){var m=[p,new v(Lo(d),0).mul(new v(0,c+Math.PI*2/3).exp()),new v(Lo(d),0).mul(new v(0,c-Math.PI*2/3).exp())];return t.matrix==="Array"?m:f(m)}else return p}function o(i){if(i.value&&Wn(i.value)){var l=i.clone();return l.value=1,l=l.pow(1/3),l.value=u(i.value),l}else{var c=a(i.value);c&&(i.value=s(i.value));var d;ct(i.value)?d=new h(1).div(3):us(i.value)?d=new n(1,3):d=1/3;var p=i.pow(d);return c&&(p.value=s(p.value)),p}}}),rN="matAlgo11xS0s",nN=["typed","equalScalar"],dr=Z(rN,nN,e=>{var{typed:t,equalScalar:r}=e;return function(s,f,v,h){var n=s._values,u=s._index,o=s._ptr,i=s._size,l=s._datatype;if(!n)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var c=i[0],d=i[1],p,m=r,g=0,b=v;typeof l=="string"&&(p=l,m=t.find(r,[p,p]),g=t.convert(0,p),f=t.convert(f,p),b=t.find(v,[p,p]));for(var y=[],w=[],x=[],C=0;C<d;C++){x[C]=w.length;for(var S=o[C],E=o[C+1],A=S;A<E;A++){var D=u[A],M=h?b(f,n[A]):b(n[A],f);m(M,g)||(w.push(D),y.push(M))}}return x[d]=w.length,s.createSparseMatrix({values:y,index:w,ptr:x,size:[c,d],datatype:p})}}),iN="matAlgo12xSfs",aN=["typed","DenseMatrix"],tr=Z(iN,aN,e=>{var{typed:t,DenseMatrix:r}=e;return function(s,f,v,h){var n=s._values,u=s._index,o=s._ptr,i=s._size,l=s._datatype;if(!n)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var c=i[0],d=i[1],p,m=v;typeof l=="string"&&(p=l,f=t.convert(f,p),m=t.find(v,[p,p]));for(var g=[],b=[],y=[],w=0;w<d;w++){for(var x=w+1,C=o[w],S=o[w+1],E=C;E<S;E++){var A=u[E];b[A]=n[E],y[A]=x}for(var D=0;D<c;D++)w===0&&(g[D]=[]),y[D]===x?g[D][w]=h?m(f,b[D]):m(b[D],f):g[D][w]=h?m(f,0):m(0,f)}return new r({data:g,size:[c,d],datatype:p})}}),oN="matAlgo14xDs",sN=["typed"],pn=Z(oN,sN,e=>{var{typed:t}=e;return function(s,f,v,h){var n=s._data,u=s._size,o=s._datatype,i,l=v;typeof o=="string"&&(i=o,f=t.convert(f,i),l=t.find(v,[i,i]));var c=u.length>0?r(l,0,u,u[0],n,f,h):[];return s.createDenseMatrix({data:c,size:Je(u),datatype:i})};function r(a,s,f,v,h,n,u){var o=[];if(s===f.length-1)for(var i=0;i<v;i++)o[i]=u?a(n,h[i]):a(h[i],n);else for(var l=0;l<v;l++)o[l]=r(a,s+1,f,f[s+1],h[l],n,u);return o}}),Uf="ceil",uN=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],lN=Z(Uf,["typed","config","round"],e=>{var{typed:t,config:r,round:a}=e;return t(Uf,{number:function(f){return Rr(f,a(f),r.epsilon)?a(f):Math.ceil(f)},"number, number":function(f,v){if(Rr(f,a(f,v),r.epsilon))return a(f,v);var[h,n]="".concat(f,"e").split("e"),u=Math.ceil(Number("".concat(h,"e").concat(Number(n)+v)));return[h,n]="".concat(u,"e").split("e"),Number("".concat(h,"e").concat(Number(n)-v))}})}),cN=Z(Uf,uN,e=>{var{typed:t,config:r,round:a,matrix:s,equalScalar:f,zeros:v,DenseMatrix:h}=e,n=dr({typed:t,equalScalar:f}),u=tr({typed:t,DenseMatrix:h}),o=pn({typed:t}),i=lN({typed:t,config:r,round:a});return t("ceil",{number:i.signatures.number,"number,number":i.signatures["number,number"],Complex:function(c){return c.ceil()},"Complex, number":function(c,d){return c.ceil(d)},"Complex, BigNumber":function(c,d){return c.ceil(d.toNumber())},BigNumber:function(c){return An(c,a(c),r.epsilon)?a(c):c.ceil()},"BigNumber, BigNumber":function(c,d){return An(c,a(c,d),r.epsilon)?a(c,d):c.toDecimalPlaces(d.toNumber(),xi.ROUND_CEIL)},Fraction:function(c){return c.ceil()},"Fraction, number":function(c,d){return c.ceil(d)},"Fraction, BigNumber":function(c,d){return c.ceil(d.toNumber())},"Array | Matrix":t.referToSelf(l=>c=>st(c,l)),"Array, number | BigNumber":t.referToSelf(l=>(c,d)=>st(c,p=>l(p,d))),"SparseMatrix, number | BigNumber":t.referToSelf(l=>(c,d)=>n(c,d,l,!1)),"DenseMatrix, number | BigNumber":t.referToSelf(l=>(c,d)=>o(c,d,l,!1)),"number | Complex | Fraction | BigNumber, Array":t.referToSelf(l=>(c,d)=>o(s(d),c,l,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":t.referToSelf(l=>(c,d)=>f(c,0)?v(d.size(),d.storage()):d.storage()==="dense"?o(d,c,l,!0):u(d,c,l,!0))})}),Sp="cube",fN=["typed"],hN=Z(Sp,fN,e=>{var{typed:t}=e;return t(Sp,{number:ib,Complex:function(a){return a.mul(a).mul(a)},BigNumber:function(a){return a.times(a).times(a)},Fraction:function(a){return a.pow(3)},Unit:function(a){return a.pow(3)}})}),Ep="exp",dN=["typed"],pN=Z(Ep,dN,e=>{var{typed:t}=e;return t(Ep,{number:ab,Complex:function(a){return a.exp()},BigNumber:function(a){return a.exp()}})}),_p="expm1",mN=["typed","Complex"],vN=Z(_p,mN,e=>{var{typed:t,Complex:r}=e;return t(_p,{number:ob,Complex:function(s){var f=Math.exp(s.re);return new r(f*Math.cos(s.im)-1,f*Math.sin(s.im))},BigNumber:function(s){return s.exp().minus(1)}})}),jf="fix",gN=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],yN=Z(jf,["typed","ceil","floor"],e=>{var{typed:t,ceil:r,floor:a}=e;return t(jf,{number:function(f){return f>0?a(f):r(f)},"number, number":function(f,v){return f>0?a(f,v):r(f,v)}})}),bN=Z(jf,gN,e=>{var{typed:t,Complex:r,matrix:a,ceil:s,floor:f,equalScalar:v,zeros:h,DenseMatrix:n}=e,u=tr({typed:t,DenseMatrix:n}),o=pn({typed:t}),i=yN({typed:t,ceil:s,floor:f});return t("fix",{number:i.signatures.number,"number, number | BigNumber":i.signatures["number,number"],Complex:function(c){return new r(c.re>0?Math.floor(c.re):Math.ceil(c.re),c.im>0?Math.floor(c.im):Math.ceil(c.im))},"Complex, number":function(c,d){return new r(c.re>0?f(c.re,d):s(c.re,d),c.im>0?f(c.im,d):s(c.im,d))},"Complex, BigNumber":function(c,d){var p=d.toNumber();return new r(c.re>0?f(c.re,p):s(c.re,p),c.im>0?f(c.im,p):s(c.im,p))},BigNumber:function(c){return c.isNegative()?s(c):f(c)},"BigNumber, number | BigNumber":function(c,d){return c.isNegative()?s(c,d):f(c,d)},Fraction:function(c){return c.s<0?c.ceil():c.floor()},"Fraction, number | BigNumber":function(c,d){return c.s<0?s(c,d):f(c,d)},"Array | Matrix":t.referToSelf(l=>c=>st(c,l)),"Array | Matrix, number | BigNumber":t.referToSelf(l=>(c,d)=>st(c,p=>l(p,d))),"number | Complex | Fraction | BigNumber, Array":t.referToSelf(l=>(c,d)=>o(a(d),c,l,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":t.referToSelf(l=>(c,d)=>v(c,0)?h(d.size(),d.storage()):d.storage()==="dense"?o(d,c,l,!0):u(d,c,l,!0))})}),qf="floor",wN=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],xN=Z(qf,["typed","config","round"],e=>{var{typed:t,config:r,round:a}=e;return t(qf,{number:function(f){return Rr(f,a(f),r.epsilon)?a(f):Math.floor(f)},"number, number":function(f,v){if(Rr(f,a(f,v),r.epsilon))return a(f,v);var[h,n]="".concat(f,"e").split("e"),u=Math.floor(Number("".concat(h,"e").concat(Number(n)+v)));return[h,n]="".concat(u,"e").split("e"),Number("".concat(h,"e").concat(Number(n)-v))}})}),CN=Z(qf,wN,e=>{var{typed:t,config:r,round:a,matrix:s,equalScalar:f,zeros:v,DenseMatrix:h}=e,n=dr({typed:t,equalScalar:f}),u=tr({typed:t,DenseMatrix:h}),o=pn({typed:t}),i=xN({typed:t,config:r,round:a});return t("floor",{number:i.signatures.number,"number,number":i.signatures["number,number"],Complex:function(c){return c.floor()},"Complex, number":function(c,d){return c.floor(d)},"Complex, BigNumber":function(c,d){return c.floor(d.toNumber())},BigNumber:function(c){return An(c,a(c),r.epsilon)?a(c):c.floor()},"BigNumber, BigNumber":function(c,d){return An(c,a(c,d),r.epsilon)?a(c,d):c.toDecimalPlaces(d.toNumber(),xi.ROUND_FLOOR)},Fraction:function(c){return c.floor()},"Fraction, number":function(c,d){return c.floor(d)},"Fraction, BigNumber":function(c,d){return c.floor(d.toNumber())},"Array | Matrix":t.referToSelf(l=>c=>st(c,l)),"Array, number | BigNumber":t.referToSelf(l=>(c,d)=>st(c,p=>l(p,d))),"SparseMatrix, number | BigNumber":t.referToSelf(l=>(c,d)=>n(c,d,l,!1)),"DenseMatrix, number | BigNumber":t.referToSelf(l=>(c,d)=>o(c,d,l,!1)),"number | Complex | Fraction | BigNumber, Array":t.referToSelf(l=>(c,d)=>o(s(d),c,l,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":t.referToSelf(l=>(c,d)=>f(c,0)?v(d.size(),d.storage()):d.storage()==="dense"?o(d,c,l,!0):u(d,c,l,!0))})}),SN="matAlgo01xDSid",EN=["typed"],Mi=Z(SN,EN,e=>{var{typed:t}=e;return function(a,s,f,v){var h=a._data,n=a._size,u=a._datatype,o=s._values,i=s._index,l=s._ptr,c=s._size,d=s._datatype;if(n.length!==c.length)throw new ot(n.length,c.length);if(n[0]!==c[0]||n[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+n+") must match Matrix B ("+c+")");if(!o)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=n[0],m=n[1],g=typeof u=="string"&&u===d?u:void 0,b=g?t.find(f,[g,g]):f,y,w,x=[];for(y=0;y<p;y++)x[y]=[];var C=[],S=[];for(w=0;w<m;w++){for(var E=w+1,A=l[w],D=l[w+1],M=A;M<D;M++)y=i[M],C[y]=v?b(o[M],h[y][w]):b(h[y][w],o[M]),S[y]=E;for(y=0;y<p;y++)S[y]===E?x[y][w]=C[y]:x[y][w]=h[y][w]}return a.createDenseMatrix({data:x,size:[p,m],datatype:g})}}),_N="matAlgo04xSidSid",DN=["typed","equalScalar"],Mh=Z(_N,DN,e=>{var{typed:t,equalScalar:r}=e;return function(s,f,v){var h=s._values,n=s._index,u=s._ptr,o=s._size,i=s._datatype,l=f._values,c=f._index,d=f._ptr,p=f._size,m=f._datatype;if(o.length!==p.length)throw new ot(o.length,p.length);if(o[0]!==p[0]||o[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+p+")");var g=o[0],b=o[1],y,w=r,x=0,C=v;typeof i=="string"&&i===m&&(y=i,w=t.find(r,[y,y]),x=t.convert(0,y),C=t.find(v,[y,y]));var S=h&&l?[]:void 0,E=[],A=[],D=h&&l?[]:void 0,M=h&&l?[]:void 0,B=[],O=[],F,z,N,T,q;for(z=0;z<b;z++){A[z]=E.length;var _=z+1;for(T=u[z],q=u[z+1],N=T;N<q;N++)F=n[N],E.push(F),B[F]=_,D&&(D[F]=h[N]);for(T=d[z],q=d[z+1],N=T;N<q;N++)if(F=c[N],B[F]===_){if(D){var I=C(D[F],l[N]);w(I,x)?B[F]=null:D[F]=I}}else E.push(F),O[F]=_,M&&(M[F]=l[N]);if(D&&M)for(N=A[z];N<E.length;)F=E[N],B[F]===_?(S[N]=D[F],N++):O[F]===_?(S[N]=M[F],N++):E.splice(N,1)}return A[b]=E.length,s.createSparseMatrix({values:S,index:E,ptr:A,size:[g,b],datatype:y})}}),AN="matAlgo10xSids",NN=["typed","DenseMatrix"],ia=Z(AN,NN,e=>{var{typed:t,DenseMatrix:r}=e;return function(s,f,v,h){var n=s._values,u=s._index,o=s._ptr,i=s._size,l=s._datatype;if(!n)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var c=i[0],d=i[1],p,m=v;typeof l=="string"&&(p=l,f=t.convert(f,p),m=t.find(v,[p,p]));for(var g=[],b=[],y=[],w=0;w<d;w++){for(var x=w+1,C=o[w],S=o[w+1],E=C;E<S;E++){var A=u[E];b[A]=n[E],y[A]=x}for(var D=0;D<c;D++)w===0&&(g[D]=[]),y[D]===x?g[D][w]=h?m(f,b[D]):m(b[D],f):g[D][w]=f}return new r({data:g,size:[c,d],datatype:p})}}),TN="matAlgo13xDD",ON=["typed"],MN=Z(TN,ON,e=>{var{typed:t}=e;return function(s,f,v){var h=s._data,n=s._size,u=s._datatype,o=f._data,i=f._size,l=f._datatype,c=[];if(n.length!==i.length)throw new ot(n.length,i.length);for(var d=0;d<n.length;d++){if(n[d]!==i[d])throw new RangeError("Dimension mismatch. Matrix A ("+n+") must match Matrix B ("+i+")");c[d]=n[d]}var p,m=v;typeof u=="string"&&u===l&&(p=u,m=t.find(v,[p,p]));var g=c.length>0?r(m,0,c,c[0],h,o):[];return s.createDenseMatrix({data:g,size:c,datatype:p})};function r(a,s,f,v,h,n){var u=[];if(s===f.length-1)for(var o=0;o<v;o++)u[o]=a(h[o],n[o]);else for(var i=0;i<v;i++)u[i]=r(a,s+1,f,f[s+1],h[i],n[i]);return u}}),FN="matrixAlgorithmSuite",PN=["typed","matrix"],Mt=Z(FN,PN,e=>{var{typed:t,matrix:r}=e,a=MN({typed:t}),s=pn({typed:t});return function(v){var h=v.elop,n=v.SD||v.DS,u;h?(u={"DenseMatrix, DenseMatrix":(c,d)=>a(c,d,h),"Array, Array":(c,d)=>a(r(c),r(d),h).valueOf(),"Array, DenseMatrix":(c,d)=>a(r(c),d,h),"DenseMatrix, Array":(c,d)=>a(c,r(d),h)},v.SS&&(u["SparseMatrix, SparseMatrix"]=(c,d)=>v.SS(c,d,h,!1)),v.DS&&(u["DenseMatrix, SparseMatrix"]=(c,d)=>v.DS(c,d,h,!1),u["Array, SparseMatrix"]=(c,d)=>v.DS(r(c),d,h,!1)),n&&(u["SparseMatrix, DenseMatrix"]=(c,d)=>n(d,c,h,!0),u["SparseMatrix, Array"]=(c,d)=>n(r(d),c,h,!0))):(u={"DenseMatrix, DenseMatrix":t.referToSelf(c=>(d,p)=>a(d,p,c)),"Array, Array":t.referToSelf(c=>(d,p)=>a(r(d),r(p),c).valueOf()),"Array, DenseMatrix":t.referToSelf(c=>(d,p)=>a(r(d),p,c)),"DenseMatrix, Array":t.referToSelf(c=>(d,p)=>a(d,r(p),c))},v.SS&&(u["SparseMatrix, SparseMatrix"]=t.referToSelf(c=>(d,p)=>v.SS(d,p,c,!1))),v.DS&&(u["DenseMatrix, SparseMatrix"]=t.referToSelf(c=>(d,p)=>v.DS(d,p,c,!1)),u["Array, SparseMatrix"]=t.referToSelf(c=>(d,p)=>v.DS(r(d),p,c,!1))),n&&(u["SparseMatrix, DenseMatrix"]=t.referToSelf(c=>(d,p)=>n(p,d,c,!0)),u["SparseMatrix, Array"]=t.referToSelf(c=>(d,p)=>n(r(p),d,c,!0))));var o=v.scalar||"any",i=v.Ds||v.Ss;i&&(h?(u["DenseMatrix,"+o]=(c,d)=>s(c,d,h,!1),u[o+", DenseMatrix"]=(c,d)=>s(d,c,h,!0),u["Array,"+o]=(c,d)=>s(r(c),d,h,!1).valueOf(),u[o+", Array"]=(c,d)=>s(r(d),c,h,!0).valueOf()):(u["DenseMatrix,"+o]=t.referToSelf(c=>(d,p)=>s(d,p,c,!1)),u[o+", DenseMatrix"]=t.referToSelf(c=>(d,p)=>s(p,d,c,!0)),u["Array,"+o]=t.referToSelf(c=>(d,p)=>s(r(d),p,c,!1).valueOf()),u[o+", Array"]=t.referToSelf(c=>(d,p)=>s(r(p),d,c,!0).valueOf())));var l=v.sS!==void 0?v.sS:v.Ss;return h?(v.Ss&&(u["SparseMatrix,"+o]=(c,d)=>v.Ss(c,d,h,!1)),l&&(u[o+", SparseMatrix"]=(c,d)=>l(d,c,h,!0))):(v.Ss&&(u["SparseMatrix,"+o]=t.referToSelf(c=>(d,p)=>v.Ss(d,p,c,!1))),l&&(u[o+", SparseMatrix"]=t.referToSelf(c=>(d,p)=>l(p,d,c,!0)))),h&&h.signatures&&E1(u,h.signatures),u}}),Dp="gcd",BN=["typed","matrix","equalScalar","BigNumber","DenseMatrix"],IN=Z(Dp,BN,e=>{var{typed:t,matrix:r,equalScalar:a,BigNumber:s,DenseMatrix:f}=e,v=Mi({typed:t}),h=Mh({typed:t,equalScalar:a}),n=ia({typed:t,DenseMatrix:f}),u=Mt({typed:t,matrix:r}),o="number | BigNumber | Fraction | Matrix | Array",i={};return i["".concat(o,", ").concat(o,", ...").concat(o)]=t.referToSelf(c=>(d,p,m)=>{for(var g=c(d,p),b=0;b<m.length;b++)g=c(g,m[b]);return g}),t(Dp,{"number, number":sb,"BigNumber, BigNumber":l,"Fraction, Fraction":(c,d)=>c.gcd(d)},u({SS:h,DS:v,Ss:n}),i);function l(c,d){if(!c.isInt()||!d.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var p=new s(0);!d.isZero();){var m=c.mod(d);c=d,d=m}return c.lt(p)?c.neg():c}}),RN="matAlgo02xDS0",kN=["typed","equalScalar"],mn=Z(RN,kN,e=>{var{typed:t,equalScalar:r}=e;return function(s,f,v,h){var n=s._data,u=s._size,o=s._datatype,i=f._values,l=f._index,c=f._ptr,d=f._size,p=f._datatype;if(u.length!==d.length)throw new ot(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");if(!i)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=u[0],g=u[1],b,y=r,w=0,x=v;typeof o=="string"&&o===p&&(b=o,y=t.find(r,[b,b]),w=t.convert(0,b),x=t.find(v,[b,b]));for(var C=[],S=[],E=[],A=0;A<g;A++){E[A]=S.length;for(var D=c[A],M=c[A+1],B=D;B<M;B++){var O=l[B],F=h?x(i[B],n[O][A]):x(n[O][A],i[B]);y(F,w)||(S.push(O),C.push(F))}}return E[g]=S.length,f.createSparseMatrix({values:C,index:S,ptr:E,size:[m,g],datatype:b})}}),$N="matAlgo06xS0S0",LN=["typed","equalScalar"],Pl=Z($N,LN,e=>{var{typed:t,equalScalar:r}=e;return function(s,f,v){var h=s._values,n=s._size,u=s._datatype,o=f._values,i=f._size,l=f._datatype;if(n.length!==i.length)throw new ot(n.length,i.length);if(n[0]!==i[0]||n[1]!==i[1])throw new RangeError("Dimension mismatch. Matrix A ("+n+") must match Matrix B ("+i+")");var c=n[0],d=n[1],p,m=r,g=0,b=v;typeof u=="string"&&u===l&&(p=u,m=t.find(r,[p,p]),g=t.convert(0,p),b=t.find(v,[p,p]));for(var y=h&&o?[]:void 0,w=[],x=[],C=y?[]:void 0,S=[],E=[],A=0;A<d;A++){x[A]=w.length;var D=A+1;if(Zd(s,A,S,C,E,D,w,b),Zd(f,A,S,C,E,D,w,b),C)for(var M=x[A];M<w.length;){var B=w[M];if(E[B]===D){var O=C[B];m(O,g)?w.splice(M,1):(y.push(O),M++)}else w.splice(M,1)}else for(var F=x[A];F<w.length;){var z=w[F];E[z]!==D?w.splice(F,1):F++}}return x[d]=w.length,s.createSparseMatrix({values:y,index:w,ptr:x,size:[c,d],datatype:p})}}),Ap="lcm",zN=["typed","matrix","equalScalar"],UN=Z(Ap,zN,e=>{var{typed:t,matrix:r,equalScalar:a}=e,s=mn({typed:t,equalScalar:a}),f=Pl({typed:t,equalScalar:a}),v=dr({typed:t,equalScalar:a}),h=Mt({typed:t,matrix:r}),n="number | BigNumber | Fraction | Matrix | Array",u={};return u["".concat(n,", ").concat(n,", ...").concat(n)]=t.referToSelf(i=>(l,c,d)=>{for(var p=i(l,c),m=0;m<d.length;m++)p=i(p,d[m]);return p}),t(Ap,{"number, number":ub,"BigNumber, BigNumber":o,"Fraction, Fraction":(i,l)=>i.lcm(l)},h({SS:f,DS:s,Ss:v}),u);function o(i,l){if(!i.isInt()||!l.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(i.isZero())return i;if(l.isZero())return l;for(var c=i.times(l);!l.isZero();){var d=l;l=i.mod(d),i=d}return c.div(i).abs()}}),Np="log10",jN=["typed","config","Complex"],qN=Z(Np,jN,e=>{var{typed:t,config:r,Complex:a}=e;return t(Np,{number:function(f){return f>=0||r.predictable?lb(f):new a(f,0).log().div(Math.LN10)},Complex:function(f){return new a(f).log().div(Math.LN10)},BigNumber:function(f){return!f.isNegative()||r.predictable?f.log():new a(f.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":t.referToSelf(s=>f=>st(f,s))})}),Tp="log2",HN=["typed","config","Complex"],VN=Z(Tp,HN,e=>{var{typed:t,config:r,Complex:a}=e;return t(Tp,{number:function(v){return v>=0||r.predictable?cb(v):s(new a(v,0))},Complex:s,BigNumber:function(v){return!v.isNegative()||r.predictable?v.log(2):s(new a(v.toNumber(),0))},"Array | Matrix":t.referToSelf(f=>v=>st(v,f))});function s(f){var v=Math.sqrt(f.re*f.re+f.im*f.im);return new a(Math.log2?Math.log2(v):Math.log(v)/Math.LN2,Math.atan2(f.im,f.re)/Math.LN2)}}),GN="matAlgo03xDSf",WN=["typed"],Er=Z(GN,WN,e=>{var{typed:t}=e;return function(a,s,f,v){var h=a._data,n=a._size,u=a._datatype,o=s._values,i=s._index,l=s._ptr,c=s._size,d=s._datatype;if(n.length!==c.length)throw new ot(n.length,c.length);if(n[0]!==c[0]||n[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+n+") must match Matrix B ("+c+")");if(!o)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=n[0],m=n[1],g,b=0,y=f;typeof u=="string"&&u===d&&(g=u,b=t.convert(0,g),y=t.find(f,[g,g]));for(var w=[],x=0;x<p;x++)w[x]=[];for(var C=[],S=[],E=0;E<m;E++){for(var A=E+1,D=l[E],M=l[E+1],B=D;B<M;B++){var O=i[B];C[O]=v?y(o[B],h[O][E]):y(h[O][E],o[B]),S[O]=A}for(var F=0;F<p;F++)S[F]===A?w[F][E]=C[F]:w[F][E]=v?y(b,h[F][E]):y(h[F][E],b)}return a.createDenseMatrix({data:w,size:[p,m],datatype:g})}}),YN="matAlgo05xSfSf",XN=["typed","equalScalar"],Bl=Z(YN,XN,e=>{var{typed:t,equalScalar:r}=e;return function(s,f,v){var h=s._values,n=s._index,u=s._ptr,o=s._size,i=s._datatype,l=f._values,c=f._index,d=f._ptr,p=f._size,m=f._datatype;if(o.length!==p.length)throw new ot(o.length,p.length);if(o[0]!==p[0]||o[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+p+")");var g=o[0],b=o[1],y,w=r,x=0,C=v;typeof i=="string"&&i===m&&(y=i,w=t.find(r,[y,y]),x=t.convert(0,y),C=t.find(v,[y,y]));var S=h&&l?[]:void 0,E=[],A=[],D=S?[]:void 0,M=S?[]:void 0,B=[],O=[],F,z,N,T;for(z=0;z<b;z++){A[z]=E.length;var q=z+1;for(N=u[z],T=u[z+1];N<T;N++)F=n[N],E.push(F),B[F]=q,D&&(D[F]=h[N]);for(N=d[z],T=d[z+1];N<T;N++)F=c[N],B[F]!==q&&E.push(F),O[F]=q,M&&(M[F]=l[N]);if(S)for(N=A[z];N<E.length;){F=E[N];var _=B[F],I=O[F];if(_===q||I===q){var U=_===q?D[F]:x,j=I===q?M[F]:x,L=C(U,j);w(L,x)?E.splice(N,1):(S.push(L),N++)}}}return A[b]=E.length,s.createSparseMatrix({values:S,index:E,ptr:A,size:[g,b],datatype:y})}}),Op="mod",KN=["typed","matrix","equalScalar","DenseMatrix"],JN=Z(Op,KN,e=>{var{typed:t,matrix:r,equalScalar:a,DenseMatrix:s}=e,f=mn({typed:t,equalScalar:a}),v=Er({typed:t}),h=Bl({typed:t,equalScalar:a}),n=dr({typed:t,equalScalar:a}),u=tr({typed:t,DenseMatrix:s}),o=Mt({typed:t,matrix:r});return t(Op,{"number, number":fb,"BigNumber, BigNumber":function(l,c){if(c.isNeg())throw new Error("Cannot calculate mod for a negative divisor");return c.isZero()?l:l.mod(c)},"Fraction, Fraction":function(l,c){if(c.compare(0)<0)throw new Error("Cannot calculate mod for a negative divisor");return l.compare(0)>=0?l.mod(c):l.mod(c).add(c).mod(c)}},o({SS:h,DS:v,SD:f,Ss:n,sS:u}))}),ZN="multiplyScalar",QN=["typed"],eT=Z(ZN,QN,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":tb,"Complex, Complex":function(a,s){return a.mul(s)},"BigNumber, BigNumber":function(a,s){return a.times(s)},"Fraction, Fraction":function(a,s){return a.mul(s)},"number | Fraction | BigNumber | Complex, Unit":(r,a)=>a.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,a)=>r.multiply(a)})}),Mp="multiply",tT=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],rT=Z(Mp,tT,e=>{var{typed:t,matrix:r,addScalar:a,multiplyScalar:s,equalScalar:f,dot:v}=e,h=dr({typed:t,equalScalar:f}),n=pn({typed:t});function u(x,C){switch(x.length){case 1:switch(C.length){case 1:if(x[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(x[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+x[0]+") must match Matrix rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;case 2:switch(C.length){case 1:if(x[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+x[1]+") must match Vector length ("+C[0]+")");break;case 2:if(x[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+x[1]+") must match Matrix B rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+x.length+" dimensions)")}}function o(x,C,S){if(S===0)throw new Error("Cannot multiply two empty vectors");return v(x,C)}function i(x,C){if(C.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return l(x,C)}function l(x,C){var S=x._data,E=x._size,A=x._datatype,D=C._data,M=C._size,B=C._datatype,O=E[0],F=M[1],z,N=a,T=s;A&&B&&A===B&&typeof A=="string"&&(z=A,N=t.find(a,[z,z]),T=t.find(s,[z,z]));for(var q=[],_=0;_<F;_++){for(var I=T(S[0],D[0][_]),U=1;U<O;U++)I=N(I,T(S[U],D[U][_]));q[_]=I}return x.createDenseMatrix({data:q,size:[F],datatype:z})}var c=t("_multiplyMatrixVector",{"DenseMatrix, any":p,"SparseMatrix, any":b}),d=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":g,"SparseMatrix, DenseMatrix":y,"SparseMatrix, SparseMatrix":w});function p(x,C){var S=x._data,E=x._size,A=x._datatype,D=C._data,M=C._datatype,B=E[0],O=E[1],F,z=a,N=s;A&&M&&A===M&&typeof A=="string"&&(F=A,z=t.find(a,[F,F]),N=t.find(s,[F,F]));for(var T=[],q=0;q<B;q++){for(var _=S[q],I=N(_[0],D[0]),U=1;U<O;U++)I=z(I,N(_[U],D[U]));T[q]=I}return x.createDenseMatrix({data:T,size:[B],datatype:F})}function m(x,C){var S=x._data,E=x._size,A=x._datatype,D=C._data,M=C._size,B=C._datatype,O=E[0],F=E[1],z=M[1],N,T=a,q=s;A&&B&&A===B&&typeof A=="string"&&(N=A,T=t.find(a,[N,N]),q=t.find(s,[N,N]));for(var _=[],I=0;I<O;I++){var U=S[I];_[I]=[];for(var j=0;j<z;j++){for(var L=q(U[0],D[0][j]),P=1;P<F;P++)L=T(L,q(U[P],D[P][j]));_[I][j]=L}}return x.createDenseMatrix({data:_,size:[O,z],datatype:N})}function g(x,C){var S=x._data,E=x._size,A=x._datatype,D=C._values,M=C._index,B=C._ptr,O=C._size,F=C._datatype;if(!D)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var z=E[0],N=O[1],T,q=a,_=s,I=f,U=0;A&&F&&A===F&&typeof A=="string"&&(T=A,q=t.find(a,[T,T]),_=t.find(s,[T,T]),I=t.find(f,[T,T]),U=t.convert(0,T));for(var j=[],L=[],P=[],k=C.createSparseMatrix({values:j,index:L,ptr:P,size:[z,N],datatype:T}),V=0;V<N;V++){P[V]=L.length;var Q=B[V],ne=B[V+1];if(ne>Q)for(var re=0,ie=0;ie<z;ie++){for(var de=ie+1,ve=void 0,ce=Q;ce<ne;ce++){var ae=M[ce];re!==de?(ve=_(S[ie][ae],D[ce]),re=de):ve=q(ve,_(S[ie][ae],D[ce]))}re===de&&!I(ve,U)&&(L.push(ie),j.push(ve))}}return P[N]=L.length,k}function b(x,C){var S=x._values,E=x._index,A=x._ptr,D=x._datatype;if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=C._data,B=C._datatype,O=x._size[0],F=C._size[0],z=[],N=[],T=[],q,_=a,I=s,U=f,j=0;D&&B&&D===B&&typeof D=="string"&&(q=D,_=t.find(a,[q,q]),I=t.find(s,[q,q]),U=t.find(f,[q,q]),j=t.convert(0,q));var L=[],P=[];T[0]=0;for(var k=0;k<F;k++){var V=M[k];if(!U(V,j))for(var Q=A[k],ne=A[k+1],re=Q;re<ne;re++){var ie=E[re];P[ie]?L[ie]=_(L[ie],I(V,S[re])):(P[ie]=!0,N.push(ie),L[ie]=I(V,S[re]))}}for(var de=N.length,ve=0;ve<de;ve++){var ce=N[ve];z[ve]=L[ce]}return T[1]=N.length,x.createSparseMatrix({values:z,index:N,ptr:T,size:[O,1],datatype:q})}function y(x,C){var S=x._values,E=x._index,A=x._ptr,D=x._datatype;if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=C._data,B=C._datatype,O=x._size[0],F=C._size[0],z=C._size[1],N,T=a,q=s,_=f,I=0;D&&B&&D===B&&typeof D=="string"&&(N=D,T=t.find(a,[N,N]),q=t.find(s,[N,N]),_=t.find(f,[N,N]),I=t.convert(0,N));for(var U=[],j=[],L=[],P=x.createSparseMatrix({values:U,index:j,ptr:L,size:[O,z],datatype:N}),k=[],V=[],Q=0;Q<z;Q++){L[Q]=j.length;for(var ne=Q+1,re=0;re<F;re++){var ie=M[re][Q];if(!_(ie,I))for(var de=A[re],ve=A[re+1],ce=de;ce<ve;ce++){var ae=E[ce];V[ae]!==ne?(V[ae]=ne,j.push(ae),k[ae]=q(ie,S[ce])):k[ae]=T(k[ae],q(ie,S[ce]))}}for(var G=L[Q],X=j.length,te=G;te<X;te++){var W=j[te];U[te]=k[W]}}return L[z]=j.length,P}function w(x,C){var S=x._values,E=x._index,A=x._ptr,D=x._datatype,M=C._values,B=C._index,O=C._ptr,F=C._datatype,z=x._size[0],N=C._size[1],T=S&&M,q,_=a,I=s;D&&F&&D===F&&typeof D=="string"&&(q=D,_=t.find(a,[q,q]),I=t.find(s,[q,q]));for(var U=T?[]:void 0,j=[],L=[],P=x.createSparseMatrix({values:U,index:j,ptr:L,size:[z,N],datatype:q}),k=T?[]:void 0,V=[],Q,ne,re,ie,de,ve,ce,ae,G=0;G<N;G++){L[G]=j.length;var X=G+1;for(de=O[G],ve=O[G+1],ie=de;ie<ve;ie++)if(ae=B[ie],T)for(ne=A[ae],re=A[ae+1],Q=ne;Q<re;Q++)ce=E[Q],V[ce]!==X?(V[ce]=X,j.push(ce),k[ce]=I(M[ie],S[Q])):k[ce]=_(k[ce],I(M[ie],S[Q]));else for(ne=A[ae],re=A[ae+1],Q=ne;Q<re;Q++)ce=E[Q],V[ce]!==X&&(V[ce]=X,j.push(ce));if(T)for(var te=L[G],W=j.length,ee=te;ee<W;ee++){var he=j[ee];U[ee]=k[he]}}return L[N]=j.length,P}return t(Mp,s,{"Array, Array":t.referTo("Matrix, Matrix",x=>(C,S)=>{u(ut(C),ut(S));var E=x(r(C),r(S));return Ze(E)?E.valueOf():E}),"Matrix, Matrix":function(C,S){var E=C.size(),A=S.size();return u(E,A),E.length===1?A.length===1?o(C,S,E[0]):i(C,S):A.length===1?c(C,S):d(C,S)},"Matrix, Array":t.referTo("Matrix,Matrix",x=>(C,S)=>x(C,r(S))),"Array, Matrix":t.referToSelf(x=>(C,S)=>x(r(C,S.storage()),S)),"SparseMatrix, any":function(C,S){return h(C,S,s,!1)},"DenseMatrix, any":function(C,S){return n(C,S,s,!1)},"any, SparseMatrix":function(C,S){return h(S,C,s,!0)},"any, DenseMatrix":function(C,S){return n(S,C,s,!0)},"Array, any":function(C,S){return n(r(C),S,s,!1).valueOf()},"any, Array":function(C,S){return n(r(S),C,s,!0).valueOf()},"any, any":s,"any, any, ...any":t.referToSelf(x=>(C,S,E)=>{for(var A=x(C,S),D=0;D<E.length;D++)A=x(A,E[D]);return A})})}),Fp="nthRoot",nT=["typed","matrix","equalScalar","BigNumber"],iT=Z(Fp,nT,e=>{var{typed:t,matrix:r,equalScalar:a,BigNumber:s}=e,f=Mi({typed:t}),v=mn({typed:t,equalScalar:a}),h=Pl({typed:t,equalScalar:a}),n=dr({typed:t,equalScalar:a}),u=Mt({typed:t,matrix:r});function o(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return t(Fp,{number:ep,"number, number":ep,BigNumber:l=>i(l,new s(2)),"BigNumber, BigNumber":i,Complex:o,"Complex, number":o,Array:t.referTo("DenseMatrix,number",l=>c=>l(r(c),2).valueOf()),DenseMatrix:t.referTo("DenseMatrix,number",l=>c=>l(c,2)),SparseMatrix:t.referTo("SparseMatrix,number",l=>c=>l(c,2)),"SparseMatrix, SparseMatrix":t.referToSelf(l=>(c,d)=>{if(d.density()===1)return h(c,d,l);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":t.referToSelf(l=>(c,d)=>{if(d.density()===1)return f(c,d,l,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":t.referTo("DenseMatrix,SparseMatrix",l=>(c,d)=>l(r(c),d)),"number | BigNumber, SparseMatrix":t.referToSelf(l=>(c,d)=>{if(d.density()===1)return n(d,c,l,!0);throw new Error("Root must be non-zero")})},u({scalar:"number | BigNumber",SD:v,Ss:n,sS:!1}));function i(l,c){var d=s.precision,p=s.clone({precision:d+2}),m=new s(0),g=new p(1),b=c.isNegative();if(b&&(c=c.neg()),c.isZero())throw new Error("Root must be non-zero");if(l.isNegative()&&!c.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(l.isZero())return b?new p(1/0):0;if(!l.isFinite())return b?m:l;var y=l.abs().pow(g.div(c));return y=l.isNeg()?y.neg():y,new s((b?g.div(y):y).toPrecision(d))}}),Pp="sign",aT=["typed","BigNumber","Fraction","complex"],oT=Z(Pp,aT,e=>{var{typed:t,BigNumber:r,complex:a,Fraction:s}=e;return t(Pp,{number:zf,Complex:function(v){return v.im===0?a(zf(v.re)):v.sign()},BigNumber:function(v){return new r(v.cmp(0))},Fraction:function(v){return new s(v.s,1)},"Array | Matrix":t.referToSelf(f=>v=>st(v,f)),Unit:t.referToSelf(f=>v=>{if(!v._isDerived()&&v.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return t.find(f,v.valueType())(v.value)})})}),sT="sqrt",uT=["config","typed","Complex"],lT=Z(sT,uT,e=>{var{config:t,typed:r,Complex:a}=e;return r("sqrt",{number:s,Complex:function(v){return v.sqrt()},BigNumber:function(v){return!v.isNegative()||t.predictable?v.sqrt():s(v.toNumber())},Unit:function(v){return v.pow(.5)}});function s(f){return isNaN(f)?NaN:f>=0||t.predictable?Math.sqrt(f):new a(f,0).sqrt()}}),Bp="square",cT=["typed"],fT=Z(Bp,cT,e=>{var{typed:t}=e;return t(Bp,{number:hb,Complex:function(a){return a.mul(a)},BigNumber:function(a){return a.times(a)},Fraction:function(a){return a.mul(a)},Unit:function(a){return a.pow(2)}})}),Ip="subtract",hT=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],dT=Z(Ip,hT,e=>{var{typed:t,matrix:r,equalScalar:a,addScalar:s,unaryMinus:f,DenseMatrix:v}=e,h=Mi({typed:t}),n=Er({typed:t}),u=Bl({typed:t,equalScalar:a}),o=ia({typed:t,DenseMatrix:v}),i=tr({typed:t,DenseMatrix:v}),l=Mt({typed:t,matrix:r});return t(Ip,{"number, number":(c,d)=>c-d,"Complex, Complex":(c,d)=>c.sub(d),"BigNumber, BigNumber":(c,d)=>c.minus(d),"Fraction, Fraction":(c,d)=>c.sub(d),"Unit, Unit":t.referToSelf(c=>(d,p)=>{if(d.value===null)throw new Error("Parameter x contains a unit with undefined value");if(p.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!d.equalBase(p))throw new Error("Units do not match");var m=d.clone();return m.value=t.find(c,[m.valueType(),p.valueType()])(m.value,p.value),m.fixPrefix=!1,m})},l({SS:u,DS:h,SD:n,Ss:i,sS:o}))}),Rp="xgcd",pT=["typed","config","matrix","BigNumber"],mT=Z(Rp,pT,e=>{var{typed:t,config:r,matrix:a,BigNumber:s}=e;return t(Rp,{"number, number":function(h,n){var u=db(h,n);return r.matrix==="Array"?u:a(u)},"BigNumber, BigNumber":f});function f(v,h){var n,u,o,i=new s(0),l=new s(1),c=i,d=l,p=l,m=i;if(!v.isInt()||!h.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!h.isZero();)u=v.div(h).floor(),o=v.mod(h),n=c,c=d.minus(u.times(c)),d=n,n=p,p=m.minus(u.times(p)),m=n,v=h,h=o;var g;return v.lt(i)?g=[v.neg(),d.neg(),m.neg()]:g=[v,v.isZero()?0:d,m],r.matrix==="Array"?g:a(g)}}),kp="invmod",vT=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],gT=Z(kp,vT,e=>{var{typed:t,config:r,BigNumber:a,xgcd:s,equal:f,smaller:v,mod:h,add:n,isInteger:u}=e;return t(kp,{"number, number":o,"BigNumber, BigNumber":o});function o(i,l){if(!u(i)||!u(l))throw new Error("Parameters in function invmod must be integer numbers");if(i=h(i,l),f(l,0))throw new Error("Divisor must be non zero");var c=s(i,l);c=c.valueOf();var[d,p]=c;return f(d,a(1))?(p=h(p,l),v(p,a(0))&&(p=n(p,l)),p):NaN}}),yT="matAlgo09xS0Sf",bT=["typed","equalScalar"],Kb=Z(yT,bT,e=>{var{typed:t,equalScalar:r}=e;return function(s,f,v){var h=s._values,n=s._index,u=s._ptr,o=s._size,i=s._datatype,l=f._values,c=f._index,d=f._ptr,p=f._size,m=f._datatype;if(o.length!==p.length)throw new ot(o.length,p.length);if(o[0]!==p[0]||o[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+p+")");var g=o[0],b=o[1],y,w=r,x=0,C=v;typeof i=="string"&&i===m&&(y=i,w=t.find(r,[y,y]),x=t.convert(0,y),C=t.find(v,[y,y]));var S=h&&l?[]:void 0,E=[],A=[],D=S?[]:void 0,M=[],B,O,F,z,N;for(O=0;O<b;O++){A[O]=E.length;var T=O+1;if(D)for(z=d[O],N=d[O+1],F=z;F<N;F++)B=c[F],M[B]=T,D[B]=l[F];for(z=u[O],N=u[O+1],F=z;F<N;F++)if(B=n[F],D){var q=M[B]===T?D[B]:x,_=C(h[F],q);w(_,x)||(E.push(B),S.push(_))}else E.push(B)}return A[b]=E.length,s.createSparseMatrix({values:S,index:E,ptr:A,size:[g,b],datatype:y})}}),$p="dotMultiply",wT=["typed","matrix","equalScalar","multiplyScalar"],xT=Z($p,wT,e=>{var{typed:t,matrix:r,equalScalar:a,multiplyScalar:s}=e,f=mn({typed:t,equalScalar:a}),v=Kb({typed:t,equalScalar:a}),h=dr({typed:t,equalScalar:a}),n=Mt({typed:t,matrix:r});return t($p,n({elop:s,SS:v,DS:f,Ss:h}))});function CT(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitAnd");var r=e.constructor;if(e.isNaN()||t.isNaN())return new r(NaN);if(e.isZero()||t.eq(-1)||e.eq(t))return e;if(t.isZero()||e.eq(-1))return t;if(!e.isFinite()||!t.isFinite()){if(!e.isFinite()&&!t.isFinite())return e.isNegative()===t.isNegative()?e:new r(0);if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new r(0):t;if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new r(0):e}return Fh(e,t,function(a,s){return a&s})}function es(e){if(e.isFinite()&&!e.isInteger())throw new Error("Integer expected in function bitNot");var t=e.constructor,r=t.precision;t.config({precision:1e9});var a=e.plus(new t(1));return a.s=-a.s||null,t.config({precision:r}),a}function ST(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitOr");var r=e.constructor;if(e.isNaN()||t.isNaN())return new r(NaN);var a=new r(-1);return e.isZero()||t.eq(a)||e.eq(t)?t:t.isZero()||e.eq(a)?e:!e.isFinite()||!t.isFinite()?!e.isFinite()&&!e.isNegative()&&t.isNegative()||e.isNegative()&&!t.isNegative()&&!t.isFinite()?a:e.isNegative()&&t.isNegative()?e.isFinite()?e:t:e.isFinite()?t:e:Fh(e,t,function(s,f){return s|f})}function Fh(e,t,r){var a=e.constructor,s,f,v=+(e.s<0),h=+(t.s<0);if(v){s=js(es(e));for(var n=0;n<s.length;++n)s[n]^=1}else s=js(e);if(h){f=js(es(t));for(var u=0;u<f.length;++u)f[u]^=1}else f=js(t);var o,i,l;s.length<=f.length?(o=s,i=f,l=v):(o=f,i=s,l=h);var c=o.length,d=i.length,p=r(v,h)^1,m=new a(p^1),g=new a(1),b=new a(2),y=a.precision;for(a.config({precision:1e9});c>0;)r(o[--c],i[--d])===p&&(m=m.plus(g)),g=g.times(b);for(;d>0;)r(l,i[--d])===p&&(m=m.plus(g)),g=g.times(b);return a.config({precision:y}),p===0&&(m.s=-m.s),m}function js(e){for(var t=e.d,r=t[0]+"",a=1;a<t.length;++a){for(var s=t[a]+"",f=7-s.length;f--;)s="0"+s;r+=s}for(var v=r.length;r.charAt(v)==="0";)v--;var h=e.e,n=r.slice(0,v+1||1),u=n.length;if(h>0)if(++h>u)for(h-=u;h--;)n+="0";else h<u&&(n=n.slice(0,h)+"."+n.slice(h));for(var o=[0],i=0;i<n.length;){for(var l=o.length;l--;)o[l]*=10;o[0]+=parseInt(n.charAt(i++));for(var c=0;c<o.length;++c)o[c]>1&&((o[c+1]===null||o[c+1]===void 0)&&(o[c+1]=0),o[c+1]+=o[c]>>1,o[c]&=1)}return o.reverse()}function ET(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitXor");var r=e.constructor;if(e.isNaN()||t.isNaN())return new r(NaN);if(e.isZero())return t;if(t.isZero())return e;if(e.eq(t))return new r(0);var a=new r(-1);return e.eq(a)?es(t):t.eq(a)?es(e):!e.isFinite()||!t.isFinite()?!e.isFinite()&&!t.isFinite()?a:new r(e.isNegative()===t.isNegative()?1/0:-1/0):Fh(e,t,function(s,f){return s^f})}function _T(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function leftShift");var r=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new r(NaN):e.isZero()||t.isZero()?e:!e.isFinite()&&!t.isFinite()?new r(NaN):t.lt(55)?e.times(Math.pow(2,t.toNumber())+""):e.times(new r(2).pow(t))}function DT(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function rightArithShift");var r=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new r(NaN):e.isZero()||t.isZero()?e:t.isFinite()?t.lt(55)?e.div(Math.pow(2,t.toNumber())+"").floor():e.div(new r(2).pow(t)).floor():e.isNegative()?new r(-1):e.isFinite()?new r(0):new r(NaN)}var Lp="bitAnd",AT=["typed","matrix","equalScalar"],NT=Z(Lp,AT,e=>{var{typed:t,matrix:r,equalScalar:a}=e,s=mn({typed:t,equalScalar:a}),f=Pl({typed:t,equalScalar:a}),v=dr({typed:t,equalScalar:a}),h=Mt({typed:t,matrix:r});return t(Lp,{"number, number":mb,"BigNumber, BigNumber":CT},h({SS:f,DS:s,Ss:v}))}),zp="bitNot",TT=["typed"],OT=Z(zp,TT,e=>{var{typed:t}=e;return t(zp,{number:vb,BigNumber:es,"Array | Matrix":t.referToSelf(r=>a=>st(a,r))})}),Up="bitOr",MT=["typed","matrix","equalScalar","DenseMatrix"],FT=Z(Up,MT,e=>{var{typed:t,matrix:r,equalScalar:a,DenseMatrix:s}=e,f=Mi({typed:t}),v=Mh({typed:t,equalScalar:a}),h=ia({typed:t,DenseMatrix:s}),n=Mt({typed:t,matrix:r});return t(Up,{"number, number":gb,"BigNumber, BigNumber":ST},n({SS:v,DS:f,Ss:h}))}),PT="matAlgo07xSSf",BT=["typed","DenseMatrix"],On=Z(PT,BT,e=>{var{typed:t,DenseMatrix:r}=e;return function(f,v,h){var n=f._size,u=f._datatype,o=v._size,i=v._datatype;if(n.length!==o.length)throw new ot(n.length,o.length);if(n[0]!==o[0]||n[1]!==o[1])throw new RangeError("Dimension mismatch. Matrix A ("+n+") must match Matrix B ("+o+")");var l=n[0],c=n[1],d,p=0,m=h;typeof u=="string"&&u===i&&(d=u,p=t.convert(0,d),m=t.find(h,[d,d]));var g,b,y=[];for(g=0;g<l;g++)y[g]=[];var w=[],x=[],C=[],S=[];for(b=0;b<c;b++){var E=b+1;for(a(f,b,C,w,E),a(v,b,S,x,E),g=0;g<l;g++){var A=C[g]===E?w[g]:p,D=S[g]===E?x[g]:p;y[g][b]=m(A,D)}}return new r({data:y,size:[l,c],datatype:d})};function a(s,f,v,h,n){for(var u=s._values,o=s._index,i=s._ptr,l=i[f],c=i[f+1];l<c;l++){var d=o[l];v[d]=n,h[d]=u[l]}}}),jp="bitXor",IT=["typed","matrix","DenseMatrix"],RT=Z(jp,IT,e=>{var{typed:t,matrix:r,DenseMatrix:a}=e,s=Er({typed:t}),f=On({typed:t,DenseMatrix:a}),v=tr({typed:t,DenseMatrix:a}),h=Mt({typed:t,matrix:r});return t(jp,{"number, number":yb,"BigNumber, BigNumber":ET},h({SS:f,DS:s,Ss:v}))}),qp="arg",kT=["typed"],$T=Z(qp,kT,e=>{var{typed:t}=e;return t(qp,{number:function(a){return Math.atan2(0,a)},BigNumber:function(a){return a.constructor.atan2(0,a)},Complex:function(a){return a.arg()},"Array | Matrix":t.referToSelf(r=>a=>st(a,r))})}),Hp="conj",LT=["typed"],zT=Z(Hp,LT,e=>{var{typed:t}=e;return t(Hp,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":t.referToSelf(r=>a=>st(a,r))})}),Vp="im",UT=["typed"],jT=Z(Vp,UT,e=>{var{typed:t}=e;return t(Vp,{number:()=>0,"BigNumber | Fraction":r=>r.mul(0),Complex:r=>r.im,"Array | Matrix":t.referToSelf(r=>a=>st(a,r))})}),Gp="re",qT=["typed"],HT=Z(Gp,qT,e=>{var{typed:t}=e;return t(Gp,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.re,"Array | Matrix":t.referToSelf(r=>a=>st(a,r))})}),Wp="not",VT=["typed"],GT=Z(Wp,VT,e=>{var{typed:t}=e;return t(Wp,{"null | undefined":()=>!0,number:Sb,Complex:function(a){return a.re===0&&a.im===0},BigNumber:function(a){return a.isZero()||a.isNaN()},Unit:t.referToSelf(r=>a=>t.find(r,a.valueType())(a.value)),"Array | Matrix":t.referToSelf(r=>a=>st(a,r))})}),Yp="or",WT=["typed","matrix","equalScalar","DenseMatrix"],YT=Z(Yp,WT,e=>{var{typed:t,matrix:r,equalScalar:a,DenseMatrix:s}=e,f=Er({typed:t}),v=Bl({typed:t,equalScalar:a}),h=tr({typed:t,DenseMatrix:s}),n=Mt({typed:t,matrix:r});return t(Yp,{"number, number":Eb,"Complex, Complex":function(o,i){return o.re!==0||o.im!==0||i.re!==0||i.im!==0},"BigNumber, BigNumber":function(o,i){return!o.isZero()&&!o.isNaN()||!i.isZero()&&!i.isNaN()},"Unit, Unit":t.referToSelf(u=>(o,i)=>u(o.value||0,i.value||0))},n({SS:v,DS:f,Ss:h}))}),Xp="xor",XT=["typed","matrix","DenseMatrix"],KT=Z(Xp,XT,e=>{var{typed:t,matrix:r,DenseMatrix:a}=e,s=Er({typed:t}),f=On({typed:t,DenseMatrix:a}),v=tr({typed:t,DenseMatrix:a}),h=Mt({typed:t,matrix:r});return t(Xp,{"number, number":_b,"Complex, Complex":function(u,o){return(u.re!==0||u.im!==0)!=(o.re!==0||o.im!==0)},"BigNumber, BigNumber":function(u,o){return(!u.isZero()&&!u.isNaN())!=(!o.isZero()&&!o.isNaN())},"Unit, Unit":t.referToSelf(n=>(u,o)=>n(u.value||0,o.value||0))},h({SS:f,DS:s,Ss:v}))}),Kp="concat",JT=["typed","matrix","isInteger"],Jb=Z(Kp,JT,e=>{var{typed:t,matrix:r,isInteger:a}=e;return t(Kp,{"...Array | Matrix | number | BigNumber":function(f){var v,h=f.length,n=-1,u,o=!1,i=[];for(v=0;v<h;v++){var l=f[v];if(Ze(l)&&(o=!0),dt(l)||ct(l)){if(v!==h-1)throw new Error("Dimension must be specified as last argument");if(u=n,n=l.valueOf(),!a(n))throw new TypeError("Integer number expected for dimension");if(n<0||v>0&&n>u)throw new hn(n,u+1)}else{var c=Je(l).valueOf(),d=ut(c);if(i[v]=c,u=n,n=d.length-1,v>0&&n!==u)throw new ot(u+1,n+1)}}if(i.length===0)throw new SyntaxError("At least one matrix expected");for(var p=i.shift();i.length;)p=Zb(p,i.shift(),n,0);return o?r(p):p},"...string":function(f){return f.join("")}})});function Zb(e,t,r,a){if(a<r){if(e.length!==t.length)throw new ot(e.length,t.length);for(var s=[],f=0;f<e.length;f++)s[f]=Zb(e[f],t[f],r,a+1);return s}else return e.concat(t)}var Jp="column",ZT=["typed","Index","matrix","range"],Qb=Z(Jp,ZT,e=>{var{typed:t,Index:r,matrix:a,range:s}=e;return t(Jp,{"Matrix, number":f,"Array, number":function(h,n){return f(a(Je(h)),n).valueOf()}});function f(v,h){if(v.size().length!==2)throw new Error("Only two dimensional matrix is supported");At(h,v.size()[1]);var n=s(0,v.size()[0]),u=new r(n,h);return v.subset(u)}}),Zp="count",QT=["typed","size","prod"],e3=Z(Zp,QT,e=>{var{typed:t,size:r,prod:a}=e;return t(Zp,{string:function(f){return f.length},"Matrix | Array":function(f){return a(r(f))}})}),Qp="cross",t3=["typed","matrix","subtract","multiply"],r3=Z(Qp,t3,e=>{var{typed:t,matrix:r,subtract:a,multiply:s}=e;return t(Qp,{"Matrix, Matrix":function(h,n){return r(f(h.toArray(),n.toArray()))},"Matrix, Array":function(h,n){return r(f(h.toArray(),n))},"Array, Matrix":function(h,n){return r(f(h,n.toArray()))},"Array, Array":f});function f(v,h){var n=Math.max(ut(v).length,ut(h).length);v=Fu(v),h=Fu(h);var u=ut(v),o=ut(h);if(u.length!==1||o.length!==1||u[0]!==3||o[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+o.join(", ")+"])");var i=[a(s(v[1],h[2]),s(v[2],h[1])),a(s(v[2],h[0]),s(v[0],h[2])),a(s(v[0],h[1]),s(v[1],h[0]))];return n>1?[i]:i}}),em="diag",n3=["typed","matrix","DenseMatrix","SparseMatrix"],i3=Z(em,n3,e=>{var{typed:t,matrix:r,DenseMatrix:a,SparseMatrix:s}=e;return t(em,{Array:function(u){return f(u,0,ut(u),null)},"Array, number":function(u,o){return f(u,o,ut(u),null)},"Array, BigNumber":function(u,o){return f(u,o.toNumber(),ut(u),null)},"Array, string":function(u,o){return f(u,0,ut(u),o)},"Array, number, string":function(u,o,i){return f(u,o,ut(u),i)},"Array, BigNumber, string":function(u,o,i){return f(u,o.toNumber(),ut(u),i)},Matrix:function(u){return f(u,0,u.size(),u.storage())},"Matrix, number":function(u,o){return f(u,o,u.size(),u.storage())},"Matrix, BigNumber":function(u,o){return f(u,o.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,o){return f(u,0,u.size(),o)},"Matrix, number, string":function(u,o,i){return f(u,o,u.size(),i)},"Matrix, BigNumber, string":function(u,o,i){return f(u,o.toNumber(),u.size(),i)}});function f(n,u,o,i){if(!qe(u))throw new TypeError("Second parameter in function diag must be an integer");var l=u>0?u:0,c=u<0?-u:0;switch(o.length){case 1:return v(n,u,i,o[0],c,l);case 2:return h(n,u,i,o,c,l)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function v(n,u,o,i,l,c){var d=[i+l,i+c];if(o&&o!=="sparse"&&o!=="dense")throw new TypeError("Unknown matrix type ".concat(o,'"'));var p=o==="sparse"?s.diagonal(d,n,u):a.diagonal(d,n,u);return o!==null?p:p.valueOf()}function h(n,u,o,i,l,c){if(Ze(n)){var d=n.diagonal(u);return o!==null?o!==d.storage()?r(d,o):d:d.valueOf()}for(var p=Math.min(i[0]-l,i[1]-c),m=[],g=0;g<p;g++)m[g]=n[g+l][g+c];return o!==null?r(m):m}}),a3="filter",o3=["typed"],s3=Z(a3,o3,e=>{var{typed:t}=e;return t("filter",{"Array, function":tm,"Matrix, function":function(a,s){return a.create(tm(a.toArray(),s))},"Array, RegExp":Pu,"Matrix, RegExp":function(a,s){return a.create(Pu(a.toArray(),s))}})});function tm(e,t){var r=Oi(t);return I1(e,function(a,s,f){return r===1?t(a):r===2?t(a,[s]):t(a,[s],f)})}var rm="flatten",u3=["typed","matrix"],l3=Z(rm,u3,e=>{var{typed:t,matrix:r}=e;return t(rm,{Array:function(s){return yt(s)},Matrix:function(s){var f=yt(s.toArray());return r(f)}})}),nm="forEach",c3=["typed"],f3=Z(nm,c3,e=>{var{typed:t}=e;return t(nm,{"Array, function":h3,"Matrix, function":function(a,s){a.forEach(s)}})});function h3(e,t){var r=Oi(t),a=function s(f,v){Array.isArray(f)?Al(f,function(h,n){s(h,v.concat(n))}):r===1?t(f):r===2?t(f,v):t(f,v,e)};a(e,[])}var im="getMatrixDataType",d3=["typed"],p3=Z(im,d3,e=>{var{typed:t}=e;return t(im,{Array:function(a){return Zo(a,Bt)},Matrix:function(a){return a.getDataType()}})}),am="identity",m3=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],v3=Z(am,m3,e=>{var{typed:t,config:r,matrix:a,BigNumber:s,DenseMatrix:f,SparseMatrix:v}=e;return t(am,{"":function(){return r.matrix==="Matrix"?a([]):[]},string:function(o){return a(o)},"number | BigNumber":function(o){return n(o,o,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(o,i){return n(o,o,i)},"number | BigNumber, number | BigNumber":function(o,i){return n(o,i,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(o,i,l){return n(o,i,l)},Array:function(o){return h(o)},"Array, string":function(o,i){return h(o,i)},Matrix:function(o){return h(o.valueOf(),o.storage())},"Matrix, string":function(o,i){return h(o.valueOf(),i)}});function h(u,o){switch(u.length){case 0:return o?a(o):[];case 1:return n(u[0],u[0],o);case 2:return n(u[0],u[1],o);default:throw new Error("Vector containing two values expected")}}function n(u,o,i){var l=ct(u)||ct(o)?s:null;if(ct(u)&&(u=u.toNumber()),ct(o)&&(o=o.toNumber()),!qe(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!qe(o)||o<1)throw new Error("Parameters in function identity must be positive integers");var c=l?new s(1):1,d=l?new l(0):0,p=[u,o];if(i){if(i==="sparse")return v.diagonal(p,c,0,d);if(i==="dense")return f.diagonal(p,c,0,d);throw new TypeError('Unknown matrix type "'.concat(i,'"'))}for(var m=Va([],p,d),g=u<o?u:o,b=0;b<g;b++)m[b][b]=c;return m}}),om="kron",g3=["typed","matrix","multiplyScalar"],y3=Z(om,g3,e=>{var{typed:t,matrix:r,multiplyScalar:a}=e;return t(om,{"Matrix, Matrix":function(v,h){return r(s(v.toArray(),h.toArray()))},"Matrix, Array":function(v,h){return r(s(v.toArray(),h))},"Array, Matrix":function(v,h){return r(s(v,h.toArray()))},"Array, Array":s});function s(f,v){if(ut(f).length===1&&(f=[f]),ut(v).length===1&&(v=[v]),ut(f).length>2||ut(v).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(f.length)+", y = "+JSON.stringify(v.length)+")");var h=[],n=[];return f.map(function(u){return v.map(function(o){return n=[],h.push(n),u.map(function(i){return o.map(function(l){return n.push(a(i,l))})})})})&&h}}),sm="map",b3=["typed"],w3=Z(sm,b3,e=>{var{typed:t}=e;return t(sm,{"Array, function":x3,"Matrix, function":function(a,s){return a.map(s)}})});function x3(e,t){var r=Oi(t),a=function s(f,v){if(Array.isArray(f))return f.map(function(u,o){return s(u,v.concat(o))});try{return r===1?t(f):r===2?t(f,v):t(f,v,e)}catch(u){if(u instanceof TypeError&&"data"in u&&u.data.category==="wrongType"){var h="map attempted to call '".concat(u.data.fn,"(").concat(f),n=JSON.stringify(v);throw r===2?h+=","+n:r!==1&&(h+=",".concat(n,",").concat(e)),h+=")' but argument ".concat(u.data.index+1," of type "),h+="".concat(u.data.actual," does not match expected type "),h+=u.data.expected.join(" or "),new TypeError(h)}throw u}};return a(e,[])}var um="diff",C3=["typed","matrix","subtract","number"],ew=Z(um,C3,e=>{var{typed:t,matrix:r,subtract:a,number:s}=e;return t(um,{"Array | Matrix":function(o){return Ze(o)?r(v(o.toArray())):v(o)},"Array | Matrix, number":function(o,i){if(!qe(i))throw new RangeError("Dimension must be a whole number");return Ze(o)?r(f(o.toArray(),i)):f(o,i)},"Array, BigNumber":t.referTo("Array,number",u=>(o,i)=>u(o,s(i))),"Matrix, BigNumber":t.referTo("Matrix,number",u=>(o,i)=>u(o,s(i)))});function f(u,o){if(Ze(u)&&(u=u.toArray()),!Array.isArray(u))throw RangeError("Array/Matrix does not have that many dimensions");if(o>0){var i=[];return u.forEach(l=>{i.push(f(l,o-1))}),i}else{if(o===0)return v(u);throw RangeError("Cannot have negative dimension")}}function v(u){for(var o=[],i=u.length,l=1;l<i;l++)o.push(h(u[l-1],u[l]));return o}function h(u,o){Ze(u)&&(u=u.toArray()),Ze(o)&&(o=o.toArray());var i=Array.isArray(u),l=Array.isArray(o);if(i&&l)return n(u,o);if(!i&&!l)return a(o,u);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function n(u,o){if(u.length!==o.length)throw RangeError("Not all sub-arrays have the same length");for(var i=[],l=u.length,c=0;c<l;c++)i.push(h(u[c],o[c]));return i}}),S3="ones",E3=["typed","config","matrix","BigNumber"],_3=Z(S3,E3,e=>{var{typed:t,config:r,matrix:a,BigNumber:s}=e;return t("ones",{"":function(){return r.matrix==="Array"?f([]):f([],"default")},"...number | BigNumber | string":function(u){var o=u[u.length-1];if(typeof o=="string"){var i=u.pop();return f(u,i)}else return r.matrix==="Array"?f(u):f(u,"default")},Array:f,Matrix:function(u){var o=u.storage();return f(u.valueOf(),o)},"Array | Matrix, string":function(u,o){return f(u.valueOf(),o)}});function f(n,u){var o=v(n),i=o?new s(1):1;if(h(n),u){var l=a(u);return n.length>0?l.resize(n,i):l}else{var c=[];return n.length>0?Va(c,n,i):c}}function v(n){var u=!1;return n.forEach(function(o,i,l){ct(o)&&(u=!0,l[i]=o.toNumber())}),u}function h(n){n.forEach(function(u){if(typeof u!="number"||!qe(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function Ph(){throw new Error('No "bignumber" implementation available')}function tw(){throw new Error('No "fraction" implementation available')}function rw(){throw new Error('No "matrix" implementation available')}var lm="range",D3=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],nw=Z(lm,D3,e=>{var{typed:t,config:r,matrix:a,bignumber:s,smaller:f,smallerEq:v,larger:h,largerEq:n}=e;return t(lm,{string:o,"string, boolean":o,"number, number":function(g,b){return u(i(g,b,1))},"number, number, number":function(g,b,y){return u(i(g,b,y))},"number, number, boolean":function(g,b,y){return u(y?l(g,b,1):i(g,b,1))},"number, number, number, boolean":function(g,b,y,w){return u(w?l(g,b,y):i(g,b,y))},"BigNumber, BigNumber":function(g,b){var y=g.constructor;return u(c(g,b,new y(1)))},"BigNumber, BigNumber, BigNumber":function(g,b,y){return u(c(g,b,y))},"BigNumber, BigNumber, boolean":function(g,b,y){var w=g.constructor;return u(y?d(g,b,new w(1)):c(g,b,new w(1)))},"BigNumber, BigNumber, BigNumber, boolean":function(g,b,y,w){return u(w?d(g,b,y):c(g,b,y))}});function u(m){return r.matrix==="Matrix"?a?a(m):rw():m}function o(m,g){var b=p(m);if(!b)throw new SyntaxError('String "'+m+'" is no valid range');var y;return r.number==="BigNumber"?(s===void 0&&Ph(),y=g?d:c,u(y(s(b.start),s(b.end),s(b.step)))):(y=g?l:i,u(y(b.start,b.end,b.step)))}function i(m,g,b){var y=[],w=m;if(b>0)for(;f(w,g);)y.push(w),w+=b;else if(b<0)for(;h(w,g);)y.push(w),w+=b;return y}function l(m,g,b){var y=[],w=m;if(b>0)for(;v(w,g);)y.push(w),w+=b;else if(b<0)for(;n(w,g);)y.push(w),w+=b;return y}function c(m,g,b){var y=s(0),w=[],x=m;if(b.gt(y))for(;f(x,g);)w.push(x),x=x.plus(b);else if(b.lt(y))for(;h(x,g);)w.push(x),x=x.plus(b);return w}function d(m,g,b){var y=s(0),w=[],x=m;if(b.gt(y))for(;v(x,g);)w.push(x),x=x.plus(b);else if(b.lt(y))for(;n(x,g);)w.push(x),x=x.plus(b);return w}function p(m){var g=m.split(":"),b=g.map(function(w){return Number(w)}),y=b.some(function(w){return isNaN(w)});if(y)return null;switch(b.length){case 2:return{start:b[0],end:b[1],step:1};case 3:return{start:b[0],end:b[2],step:b[1]};default:return null}}}),cm="reshape",A3=["typed","isInteger","matrix"],N3=Z(cm,A3,e=>{var{typed:t,isInteger:r}=e;return t(cm,{"Matrix, Array":function(s,f){return s.reshape(f)},"Array, Array":function(s,f){return f.forEach(function(v){if(!r(v))throw new TypeError("Invalid size for dimension: "+v)}),O1(s,f)}})});function so(e,t,r,a){if(!(this instanceof so))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=r,this.max=a,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+r+(a!=null?"-"+a:"")+" expected)",this.stack=new Error().stack}so.prototype=new Error;so.prototype.constructor=Error;so.prototype.name="ArgumentsError";so.prototype.isArgumentsError=!0;var T3="resize",O3=["config","matrix"],M3=Z(T3,O3,e=>{var{config:t,matrix:r}=e;return function(f,v,h){if(arguments.length!==2&&arguments.length!==3)throw new so("resize",arguments.length,2,3);if(Ze(v)&&(v=v.valueOf()),ct(v[0])&&(v=v.map(function(o){return ct(o)?o.toNumber():o})),Ze(f))return f.resize(v,h,!0);if(typeof f=="string")return a(f,v,h);var n=Array.isArray(f)?!1:t.matrix!=="Array";if(v.length===0){for(;Array.isArray(f);)f=f[0];return Je(f)}else{Array.isArray(f)||(f=[f]),f=Je(f);var u=Va(f,v,h);return n?r(u):u}};function a(s,f,v){if(v!==void 0){if(typeof v!="string"||v.length!==1)throw new TypeError("Single character expected as defaultValue")}else v=" ";if(f.length!==1)throw new ot(f.length,1);var h=f[0];if(typeof h!="number"||!qe(h))throw new TypeError("Invalid size, must contain positive integers (size: "+it(f)+")");if(s.length>h)return s.substring(0,h);if(s.length<h){for(var n=s,u=0,o=h-s.length;u<o;u++)n+=v;return n}else return s}}),fm="rotate",F3=["typed","multiply","rotationMatrix"],P3=Z(fm,F3,e=>{var{typed:t,multiply:r,rotationMatrix:a}=e;return t(fm,{"Array , number | BigNumber | Complex | Unit":function(v,h){s(v,2);var n=r(a(h),v);return n.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(v,h){return s(v,2),r(a(h),v)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(v,h,n){s(v,3);var u=r(a(h,n),v);return u},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(v,h,n){return s(v,3),r(a(h,n),v)}});function s(f,v){var h=Array.isArray(f)?ut(f):f.size();if(h.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(v));if(h.length===2&&h[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(v));if(h[0]!==v)throw new RangeError("Vector must be of dimensions 1x".concat(v))}}),hm="rotationMatrix",B3=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],I3=Z(hm,B3,e=>{var{typed:t,config:r,multiplyScalar:a,addScalar:s,unaryMinus:f,norm:v,BigNumber:h,matrix:n,DenseMatrix:u,SparseMatrix:o,cos:i,sin:l}=e;return t(hm,{"":function(){return r.matrix==="Matrix"?n([]):[]},string:function(y){return n(y)},"number | BigNumber | Complex | Unit":function(y){return c(y,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(y,w){return c(y,w)},"number | BigNumber | Complex | Unit, Array":function(y,w){var x=n(w);return d(x),g(y,x,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(y,w){d(w);var x=w.storage()||(r.matrix==="Matrix"?"dense":void 0);return g(y,w,x)},"number | BigNumber | Complex | Unit, Array, string":function(y,w,x){var C=n(w);return d(C),g(y,C,x)},"number | BigNumber | Complex | Unit, Matrix, string":function(y,w,x){return d(w),g(y,w,x)}});function c(b,y){var w=ct(b),x=w?new h(-1):-1,C=i(b),S=l(b),E=[[C,a(x,S)],[S,C]];return m(E,y)}function d(b){var y=b.size();if(y.length<1||y[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function p(b){return b.reduce((y,w)=>a(y,w))}function m(b,y){if(y){if(y==="sparse")return new o(b);if(y==="dense")return new u(b);throw new TypeError('Unknown matrix type "'.concat(y,'"'))}return b}function g(b,y,w){var x=v(y);if(x===0)throw new RangeError("Rotation around zero vector");var C=ct(b)?h:null,S=C?new C(1):1,E=C?new C(-1):-1,A=C?new C(y.get([0])/x):y.get([0])/x,D=C?new C(y.get([1])/x):y.get([1])/x,M=C?new C(y.get([2])/x):y.get([2])/x,B=i(b),O=s(S,f(B)),F=l(b),z=s(B,p([A,A,O])),N=s(p([A,D,O]),p([E,M,F])),T=s(p([A,M,O]),p([D,F])),q=s(p([A,D,O]),p([M,F])),_=s(B,p([D,D,O])),I=s(p([D,M,O]),p([E,A,F])),U=s(p([A,M,O]),p([E,D,F])),j=s(p([D,M,O]),p([A,F])),L=s(B,p([M,M,O])),P=[[z,N,T],[q,_,I],[U,j,L]];return m(P,w)}}),dm="row",R3=["typed","Index","matrix","range"],iw=Z(dm,R3,e=>{var{typed:t,Index:r,matrix:a,range:s}=e;return t(dm,{"Matrix, number":f,"Array, number":function(h,n){return f(a(Je(h)),n).valueOf()}});function f(v,h){if(v.size().length!==2)throw new Error("Only two dimensional matrix is supported");At(h,v.size()[0]);var n=s(0,v.size()[1]),u=new r(h,n);return v.subset(u)}}),pm="size",k3=["typed","config","?matrix"],$3=Z(pm,k3,e=>{var{typed:t,config:r,matrix:a}=e;return t(pm,{Matrix:function(f){return f.create(f.size())},Array:ut,string:function(f){return r.matrix==="Array"?[f.length]:a([f.length])},"number | Complex | BigNumber | Unit | boolean | null":function(f){return r.matrix==="Array"?[]:a?a([]):rw()}})}),mm="squeeze",L3=["typed","matrix"],z3=Z(mm,L3,e=>{var{typed:t,matrix:r}=e;return t(mm,{Array:function(s){return Fu(Je(s))},Matrix:function(s){var f=Fu(s.toArray());return Array.isArray(f)?r(f):f},any:function(s){return Je(s)}})}),vm="subset",U3=["typed","matrix"],aw=Z(vm,U3,e=>{var{typed:t,matrix:r}=e;return t(vm,{"Array, Index":function(s,f){var v=r(s),h=v.subset(f);return f.isScalar()?h:h.valueOf()},"Matrix, Index":function(s,f){return s.subset(f)},"Object, Index":q3,"string, Index":j3,"Array, Index, any":function(s,f,v){return r(Je(s)).subset(f,v,void 0).valueOf()},"Array, Index, any, any":function(s,f,v,h){return r(Je(s)).subset(f,v,h).valueOf()},"Matrix, Index, any":function(s,f,v){return s.clone().subset(f,v)},"Matrix, Index, any, any":function(s,f,v,h){return s.clone().subset(f,v,h)},"string, Index, string":gm,"string, Index, string, string":gm,"Object, Index, any":H3})});function j3(e,t){if(!Sl(t))throw new TypeError("Index expected");if(t.size().length!==1)throw new ot(t.size().length,1);var r=e.length;At(t.min()[0],r),At(t.max()[0],r);var a=t.dimension(0),s="";return a.forEach(function(f){s+=e.charAt(f)}),s}function gm(e,t,r,a){if(!t||t.isIndex!==!0)throw new TypeError("Index expected");if(t.size().length!==1)throw new ot(t.size().length,1);if(a!==void 0){if(typeof a!="string"||a.length!==1)throw new TypeError("Single character expected as defaultValue")}else a=" ";var s=t.dimension(0),f=s.size()[0];if(f!==r.length)throw new ot(s.size()[0],r.length);var v=e.length;At(t.min()[0]),At(t.max()[0]);for(var h=[],n=0;n<v;n++)h[n]=e.charAt(n);if(s.forEach(function(i,l){h[i]=r.charAt(l[0])}),h.length>v)for(var u=v-1,o=h.length;u<o;u++)h[u]||(h[u]=a);return h.join("")}function q3(e,t){if(t.size().length!==1)throw new ot(t.size(),1);var r=t.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");return Yr(e,r)}function H3(e,t,r){if(t.size().length!==1)throw new ot(t.size(),1);var a=t.dimension(0);if(typeof a!="string")throw new TypeError("String expected as index to retrieve an object property");var s=Je(e);return Wa(s,a,r),s}var ym="transpose",V3=["typed","matrix"],G3=Z(ym,V3,e=>{var{typed:t,matrix:r}=e;return t(ym,{Array:v=>a(r(v)).valueOf(),Matrix:a,any:Je});function a(v){var h=v.size(),n;switch(h.length){case 1:n=v.clone();break;case 2:{var u=h[0],o=h[1];if(o===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+it(h)+")");switch(v.storage()){case"dense":n=s(v,u,o);break;case"sparse":n=f(v,u,o);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+it(h)+")")}return n}function s(v,h,n){for(var u=v._data,o=[],i,l=0;l<n;l++){i=o[l]=[];for(var c=0;c<h;c++)i[c]=Je(u[c][l])}return v.createDenseMatrix({data:o,size:[n,h],datatype:v._datatype})}function f(v,h,n){for(var u=v._values,o=v._index,i=v._ptr,l=u?[]:void 0,c=[],d=[],p=[],m=0;m<h;m++)p[m]=0;var g,b,y;for(g=0,b=o.length;g<b;g++)p[o[g]]++;for(var w=0,x=0;x<h;x++)d.push(w),w+=p[x],p[x]=d[x];for(d.push(w),y=0;y<n;y++)for(var C=i[y],S=i[y+1],E=C;E<S;E++){var A=p[o[E]]++;c[A]=y,u&&(l[A]=Je(u[E]))}return v.createSparseMatrix({values:l,index:c,ptr:d,size:[n,h],datatype:v._datatype})}}),bm="ctranspose",W3=["typed","transpose","conj"],Y3=Z(bm,W3,e=>{var{typed:t,transpose:r,conj:a}=e;return t(bm,{any:function(f){return a(r(f))}})}),wm="zeros",X3=["typed","config","matrix","BigNumber"],K3=Z(wm,X3,e=>{var{typed:t,config:r,matrix:a,BigNumber:s}=e;return t(wm,{"":function(){return r.matrix==="Array"?f([]):f([],"default")},"...number | BigNumber | string":function(u){var o=u[u.length-1];if(typeof o=="string"){var i=u.pop();return f(u,i)}else return r.matrix==="Array"?f(u):f(u,"default")},Array:f,Matrix:function(u){var o=u.storage();return f(u.valueOf(),o)},"Array | Matrix, string":function(u,o){return f(u.valueOf(),o)}});function f(n,u){var o=v(n),i=o?new s(0):0;if(h(n),u){var l=a(u);return n.length>0?l.resize(n,i):l}else{var c=[];return n.length>0?Va(c,n,i):c}}function v(n){var u=!1;return n.forEach(function(o,i,l){ct(o)&&(u=!0,l[i]=o.toNumber())}),u}function h(n){n.forEach(function(u){if(typeof u!="number"||!qe(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}}),xm="fft",J3=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i"],Z3=Z(xm,J3,e=>{var{typed:t,matrix:r,addScalar:a,multiplyScalar:s,divideScalar:f,exp:v,tau:h,i:n}=e;return t(xm,{Array:u,Matrix:function(c){return c.create(u(c.toArray()))}});function u(l){var c=ut(l);return c.length===1?i(l,c[0]):o(l.map(d=>u(d,c.slice(1))),0)}function o(l,c){var d=ut(l);if(c!==0)return new Array(d[0]).fill(0).map((m,g)=>o(l[g],c-1));if(d.length===1)return i(l);function p(m){var g=ut(m);return new Array(g[1]).fill(0).map((b,y)=>new Array(g[0]).fill(0).map((w,x)=>m[x][y]))}return p(o(p(l),1))}function i(l){var c=l.length;if(c===1)return[l[0]];if(c%2===0){for(var d=[...i(l.filter((b,y)=>y%2===0)),...i(l.filter((b,y)=>y%2===1))],p=0;p<c/2;p++){var m=d[p],g=s(d[p+c/2],v(s(s(h,n),f(-p,c))));d[p]=a(m,g),d[p+c/2]=a(m,s(-1,g))}return d}throw new Error("Can only calculate FFT of power-of-two size")}}),Cm="ifft",Q3=["typed","fft","dotDivide","conj"],eO=Z(Cm,Q3,e=>{var{typed:t,fft:r,dotDivide:a,conj:s}=e;return t(Cm,{"Array | Matrix":function(v){var h=Ze(v)?v.size():ut(v);return a(s(r(s(v))),h.reduce((n,u)=>n*u,1))}})}),tO="erf",rO=["typed"],nO=Z(tO,rO,e=>{var{typed:t}=e;return t("name",{number:function(v){var h=Math.abs(v);return h>=oO?mi(v):h<=iO?mi(v)*r(h):h<=4?mi(v)*(1-a(h)):mi(v)*(1-s(h))},"Array | Matrix":t.referToSelf(f=>v=>st(v,f))});function r(f){var v=f*f,h=kn[0][4]*v,n=v,u;for(u=0;u<3;u+=1)h=(h+kn[0][u])*v,n=(n+Sa[0][u])*v;return f*(h+kn[0][3])/(n+Sa[0][3])}function a(f){var v=kn[1][8]*f,h=f,n;for(n=0;n<7;n+=1)v=(v+kn[1][n])*f,h=(h+Sa[1][n])*f;var u=(v+kn[1][7])/(h+Sa[1][7]),o=parseInt(f*16)/16,i=(f-o)*(f+o);return Math.exp(-o*o)*Math.exp(-i)*u}function s(f){var v=1/(f*f),h=kn[2][5]*v,n=v,u;for(u=0;u<4;u+=1)h=(h+kn[2][u])*v,n=(n+Sa[2][u])*v;var o=v*(h+kn[2][4])/(n+Sa[2][4]);o=(aO-o)/f,v=parseInt(f*16)/16;var i=(f-v)*(f+v);return Math.exp(-v*v)*Math.exp(-i)*o}}),iO=.46875,aO=.5641895835477563,kn=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Sa=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],oO=Math.pow(2,53),Sm="mode",sO=["typed","isNaN","isNumeric"],uO=Z(Sm,sO,e=>{var{typed:t,isNaN:r,isNumeric:a}=e;return t(Sm,{"Array | Matrix":s,"...":function(v){return s(v)}});function s(f){f=yt(f.valueOf());var v=f.length;if(v===0)throw new Error("Cannot calculate mode of an empty array");for(var h={},n=[],u=0,o=0;o<f.length;o++){var i=f[o];if(a(i)&&r(i))throw new Error("Cannot calculate mode of an array containing NaN values");i in h||(h[i]=0),h[i]++,h[i]===u?n.push(i):h[i]>u&&(u=h[i],n=[i])}return n}});function Sr(e,t,r){var a;return String(e).indexOf("Unexpected type")!==-1?(a=arguments.length>2?" (type: "+Bt(r)+", value: "+JSON.stringify(r)+")":" (type: "+e.data.actual+")",new TypeError("Cannot calculate "+t+", unexpected type of argument"+a)):String(e).indexOf("complex numbers")!==-1?(a=arguments.length>2?" (type: "+Bt(r)+", value: "+JSON.stringify(r)+")":"",new TypeError("Cannot calculate "+t+", no ordering relation is defined for complex numbers"+a)):e}var Em="prod",lO=["typed","config","multiplyScalar","numeric"],cO=Z(Em,lO,e=>{var{typed:t,config:r,multiplyScalar:a,numeric:s}=e;return t(Em,{"Array | Matrix":f,"Array | Matrix, number | BigNumber":function(h,n){throw new Error("prod(A, dim) is not yet supported")},"...":function(h){return f(h)}});function f(v){var h;if(Qn(v,function(n){try{h=h===void 0?n:a(h,n)}catch(u){throw Sr(u,"prod",n)}}),typeof h=="string"&&(h=s(h,r.number)),h===void 0)throw new Error("Cannot calculate prod of an empty array");return h}}),_m="format",fO=["typed"],hO=Z(_m,fO,e=>{var{typed:t}=e;return t(_m,{any:it,"any, Object | function | number":it})}),Dm="bin",dO=["typed","format"],pO=Z(Dm,dO,e=>{var{typed:t,format:r}=e;return t(Dm,{"number | BigNumber":function(s){return r(s,{notation:"bin"})},"number | BigNumber, number":function(s,f){return r(s,{notation:"bin",wordSize:f})}})}),Am="oct",mO=["typed","format"],vO=Z(Am,mO,e=>{var{typed:t,format:r}=e;return t(Am,{"number | BigNumber":function(s){return r(s,{notation:"oct"})},"number | BigNumber, number":function(s,f){return r(s,{notation:"oct",wordSize:f})}})}),Nm="hex",gO=["typed","format"],yO=Z(Nm,gO,e=>{var{typed:t,format:r}=e;return t(Nm,{"number | BigNumber":function(s){return r(s,{notation:"hex"})},"number | BigNumber, number":function(s,f){return r(s,{notation:"hex",wordSize:f})}})}),Tm="print",bO=["typed"],wO=Z(Tm,bO,e=>{var{typed:t}=e;return t(Tm,{"string, Object | Array":Om,"string, Object | Array, number | Object":Om})});function Om(e,t,r){return e.replace(/\$([\w.]+)/g,function(a,s){for(var f=s.split("."),v=t[f.shift()];f.length&&v!==void 0;){var h=f.shift();v=h?v[h]:v+"."}return v!==void 0?Cr(v)?v:it(v,r):a})}var Mm="to",xO=["typed","matrix"],CO=Z(Mm,xO,e=>{var{typed:t,matrix:r}=e,a=Mt({typed:t,matrix:r});return t(Mm,{"Unit, Unit | string":(s,f)=>s.to(f)},a({Ds:!0}))}),Fm="isPrime",SO=["typed"],EO=Z(Fm,SO,e=>{var{typed:t}=e;return t(Fm,{number:function(a){if(a*0!==0)return!1;if(a<=3)return a>1;if(a%2===0||a%3===0)return!1;for(var s=5;s*s<=a;s+=6)if(a%s===0||a%(s+2)===0)return!1;return!0},BigNumber:function(a){if(a.toNumber()*0!==0)return!1;if(a.lte(3))return a.gt(1);if(a.mod(2).eq(0)||a.mod(3).eq(0))return!1;if(a.lt(Math.pow(2,32))){for(var s=a.toNumber(),f=5;f*f<=s;f+=6)if(s%f===0||s%(f+2)===0)return!1;return!0}function v(b,y,w){for(var x=1;!y.eq(0);)y.mod(2).eq(0)?(y=y.div(2),b=b.mul(b).mod(w)):(y=y.sub(1),x=b.mul(x).mod(w));return x}var h=a.constructor.clone({precision:a.toFixed(0).length*2});a=new h(a);for(var n=0,u=a.sub(1);u.mod(2).eq(0);)u=u.div(2),n+=1;var o=null;if(a.lt("3317044064679887385961981"))o=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(b=>b<a);else{var i=Math.min(a.toNumber()-2,Math.floor(2*Math.pow(a.toFixed(0).length*Math.log(10),2)));o=[];for(var l=2;l<=i;l+=1)o.push(i)}for(var c=0;c<o.length;c+=1){var d=o[c],p=v(a.sub(a).add(d),u,a);if(!p.eq(1)){for(var m=0,g=p;!g.eq(a.sub(1));m+=1,g=g.mul(g).mod(a))if(m===n-1)return!1}}return!0},"Array | Matrix":t.referToSelf(r=>a=>st(a,r))})}),_O="numeric",DO=["number","?bignumber","?fraction"],AO=Z(_O,DO,e=>{var{number:t,bignumber:r,fraction:a}=e,s={string:!0,number:!0,BigNumber:!0,Fraction:!0},f={number:v=>t(v),BigNumber:r?v=>r(v):Ph,Fraction:a?v=>a(v):tw};return function(h){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var o=Bt(h);if(!(o in s))throw new TypeError("Cannot convert "+h+' of type "'+o+'"; valid input types are '+Object.keys(s).join(", "));if(!(n in f))throw new TypeError("Cannot convert "+h+' to type "'+n+'"; valid output types are '+Object.keys(f).join(", "));return n===o?h:f[n](h)}}),Pm="divideScalar",NO=["typed","numeric"],TO=Z(Pm,NO,e=>{var{typed:t,numeric:r}=e;return t(Pm,{"number, number":function(s,f){return s/f},"Complex, Complex":function(s,f){return s.div(f)},"BigNumber, BigNumber":function(s,f){return s.div(f)},"Fraction, Fraction":function(s,f){return s.div(f)},"Unit, number | Complex | Fraction | BigNumber | Unit":(a,s)=>a.divide(s),"number | Fraction | Complex | BigNumber, Unit":(a,s)=>s.divideInto(a)})}),Bm="pow",OO=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],MO=Z(Bm,OO,e=>{var{typed:t,config:r,identity:a,multiply:s,matrix:f,inv:v,number:h,fraction:n,Complex:u}=e;return t(Bm,{"number, number":o,"Complex, Complex":function(d,p){return d.pow(p)},"BigNumber, BigNumber":function(d,p){return p.isInteger()||d>=0||r.predictable?d.pow(p):new u(d.toNumber(),0).pow(p.toNumber(),0)},"Fraction, Fraction":function(d,p){var m=d.pow(p);if(m!=null)return m;if(r.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return o(d.valueOf(),p.valueOf())},"Array, number":i,"Array, BigNumber":function(d,p){return i(d,p.toNumber())},"Matrix, number":l,"Matrix, BigNumber":function(d,p){return l(d,p.toNumber())},"Unit, number | BigNumber":function(d,p){return d.pow(p)}});function o(c,d){if(r.predictable&&!qe(d)&&c<0)try{var p=n(d),m=h(p);if((d===m||Math.abs((d-m)/d)<1e-14)&&p.d%2===1)return(p.n%2===0?1:-1)*Math.pow(-c,d)}catch{}return r.predictable&&(c<-1&&d===1/0||c>-1&&c<0&&d===-1/0)?NaN:qe(d)||c>=0||r.predictable?pb(c,d):c*c<1&&d===1/0||c*c>1&&d===-1/0?0:new u(c,0).pow(d,0)}function i(c,d){if(!qe(d))throw new TypeError("For A^b, b must be an integer (value is "+d+")");var p=ut(c);if(p.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+p.length+" dimensions)");if(p[0]!==p[1])throw new Error("For A^b, A must be square (size is "+p[0]+"x"+p[1]+")");if(d<0)try{return i(v(c),-d)}catch(b){throw b.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+d+")"):b}for(var m=a(p[0]).valueOf(),g=c;d>=1;)(d&1)===1&&(m=s(g,m)),d>>=1,g=s(g,g);return m}function l(c,d){return f(i(c.valueOf(),d))}}),Ea="Number of decimals in function round must be an integer",Im="round",FO=["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],PO=Z(Im,FO,e=>{var{typed:t,matrix:r,equalScalar:a,zeros:s,BigNumber:f,DenseMatrix:v}=e,h=dr({typed:t,equalScalar:a}),n=tr({typed:t,DenseMatrix:v}),u=pn({typed:t});return t(Im,{number:tp,"number, number":tp,"number, BigNumber":function(i,l){if(!l.isInteger())throw new TypeError(Ea);return new f(i).toDecimalPlaces(l.toNumber())},Complex:function(i){return i.round()},"Complex, number":function(i,l){if(l%1)throw new TypeError(Ea);return i.round(l)},"Complex, BigNumber":function(i,l){if(!l.isInteger())throw new TypeError(Ea);var c=l.toNumber();return i.round(c)},BigNumber:function(i){return i.toDecimalPlaces(0)},"BigNumber, BigNumber":function(i,l){if(!l.isInteger())throw new TypeError(Ea);return i.toDecimalPlaces(l.toNumber())},Fraction:function(i){return i.round()},"Fraction, number":function(i,l){if(l%1)throw new TypeError(Ea);return i.round(l)},"Fraction, BigNumber":function(i,l){if(!l.isInteger())throw new TypeError(Ea);return i.round(l.toNumber())},"Array | Matrix":t.referToSelf(o=>i=>st(i,o)),"SparseMatrix, number | BigNumber":t.referToSelf(o=>(i,l)=>h(i,l,o,!1)),"DenseMatrix, number | BigNumber":t.referToSelf(o=>(i,l)=>u(i,l,o,!1)),"Array, number | BigNumber":t.referToSelf(o=>(i,l)=>u(r(i),l,o,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":t.referToSelf(o=>(i,l)=>a(i,0)?s(l.size(),l.storage()):n(l,i,o,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":t.referToSelf(o=>(i,l)=>a(i,0)?s(l.size(),l.storage()):u(l,i,o,!0)),"number | Complex | BigNumber | Fraction, Array":t.referToSelf(o=>(i,l)=>u(r(l),i,o,!0).valueOf())})}),Rm="log",BO=["config","typed","divideScalar","Complex"],IO=Z(Rm,BO,e=>{var{typed:t,config:r,divideScalar:a,Complex:s}=e;return t(Rm,{number:function(v){return v>=0||r.predictable?UD(v):new s(v,0).log()},Complex:function(v){return v.log()},BigNumber:function(v){return!v.isNegative()||r.predictable?v.ln():new s(v.toNumber(),0).log()},"any, any":t.referToSelf(f=>(v,h)=>a(f(v),f(h)))})}),km="log1p",RO=["typed","config","divideScalar","log","Complex"],kO=Z(km,RO,e=>{var{typed:t,config:r,divideScalar:a,log:s,Complex:f}=e;return t(km,{number:function(n){return n>=-1||r.predictable?qE(n):v(new f(n,0))},Complex:v,BigNumber:function(n){var u=n.plus(1);return!u.isNegative()||r.predictable?u.ln():v(new f(n.toNumber(),0))},"Array | Matrix":t.referToSelf(h=>n=>st(n,h)),"any, any":t.referToSelf(h=>(n,u)=>a(h(n),s(u)))});function v(h){var n=h.re+1;return new f(Math.log(Math.sqrt(n*n+h.im*h.im)),Math.atan2(h.im,n))}}),$m="nthRoots",$O=["config","typed","divideScalar","Complex"],LO=Z($m,$O,e=>{var{typed:t,config:r,divideScalar:a,Complex:s}=e,f=[function(n){return new s(n,0)},function(n){return new s(0,n)},function(n){return new s(-n,0)},function(n){return new s(0,-n)}];function v(h,n){if(n<0)throw new Error("Root must be greater than zero");if(n===0)throw new Error("Root must be non-zero");if(n%1!==0)throw new Error("Root must be an integer");if(h===0||h.abs()===0)return[new s(0,0)];var u=typeof h=="number",o;(u||h.re===0||h.im===0)&&(u?o=2*+(h<0):h.im===0?o=2*+(h.re<0):o=2*+(h.im<0)+1);for(var i=h.arg(),l=h.abs(),c=[],d=Math.pow(l,1/n),p=0;p<n;p++){var m=(o+4*p)/n;if(m===Math.round(m)){c.push(f[m%4](d));continue}c.push(new s({r:d,phi:(i+2*Math.PI*p)/n}))}return c}return t($m,{Complex:function(n){return v(n,2)},"Complex, number":v})}),Lm="dotPow",zO=["typed","equalScalar","matrix","pow","DenseMatrix"],UO=Z(Lm,zO,e=>{var{typed:t,equalScalar:r,matrix:a,pow:s,DenseMatrix:f}=e,v=Er({typed:t}),h=On({typed:t,DenseMatrix:f}),n=dr({typed:t,equalScalar:r}),u=tr({typed:t,DenseMatrix:f}),o=Mt({typed:t,matrix:a}),i={};for(var l in s.signatures)Object.prototype.hasOwnProperty.call(s.signatures,l)&&!l.includes("Matrix")&&!l.includes("Array")&&(i[l]=s.signatures[l]);var c=t(i);return t(Lm,o({elop:c,SS:h,DS:v,Ss:n,sS:u}))}),zm="dotDivide",jO=["typed","matrix","equalScalar","divideScalar","DenseMatrix"],qO=Z(zm,jO,e=>{var{typed:t,matrix:r,equalScalar:a,divideScalar:s,DenseMatrix:f}=e,v=mn({typed:t,equalScalar:a}),h=Er({typed:t}),n=On({typed:t,DenseMatrix:f}),u=dr({typed:t,equalScalar:a}),o=tr({typed:t,DenseMatrix:f}),i=Mt({typed:t,matrix:r});return t(zm,i({elop:s,SS:n,DS:h,SD:v,Ss:u,sS:o}))});function fs(e){var{DenseMatrix:t}=e;return function(a,s,f){var v=a.size();if(v.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+it(v)+")");var h=v[0],n=v[1];if(h!==n)throw new RangeError("Matrix must be square (size: "+it(v)+")");var u=[];if(Ze(s)){var o=s.size(),i=s._data;if(o.length===1){if(o[0]!==h)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var l=0;l<h;l++)u[l]=[i[l]];return new t({data:u,size:[h,1],datatype:s._datatype})}if(o.length===2){if(o[0]!==h||o[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Mu(s)){if(f){u=[];for(var c=0;c<h;c++)u[c]=[i[c][0]];return new t({data:u,size:[h,1],datatype:s._datatype})}return s}if(Gi(s)){for(var d=0;d<h;d++)u[d]=[0];for(var p=s._values,m=s._index,g=s._ptr,b=g[1],y=g[0];y<b;y++){var w=m[y];u[w][0]=p[y]}return new t({data:u,size:[h,1],datatype:s._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Et(s)){var x=ut(s);if(x.length===1){if(x[0]!==h)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var C=0;C<h;C++)u[C]=[s[C]];return new t({data:u,size:[h,1]})}if(x.length===2){if(x[0]!==h||x[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var S=0;S<h;S++)u[S]=[s[S][0]];return new t({data:u,size:[h,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var Um="lsolve",HO=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],VO=Z(Um,HO,e=>{var{typed:t,matrix:r,divideScalar:a,multiplyScalar:s,subtract:f,equalScalar:v,DenseMatrix:h}=e,n=fs({DenseMatrix:h});return t(Um,{"SparseMatrix, Array | Matrix":function(l,c){return o(l,c)},"DenseMatrix, Array | Matrix":function(l,c){return u(l,c)},"Array, Array | Matrix":function(l,c){var d=r(l),p=u(d,c);return p.valueOf()}});function u(i,l){l=n(i,l,!0);for(var c=l._data,d=i._size[0],p=i._size[1],m=[],g=i._data,b=0;b<p;b++){var y=c[b][0]||0,w=void 0;if(v(y,0))w=0;else{var x=g[b][b];if(v(x,0))throw new Error("Linear system cannot be solved since matrix is singular");w=a(y,x);for(var C=b+1;C<d;C++)c[C]=[f(c[C][0]||0,s(w,g[C][b]))]}m[b]=[w]}return new h({data:m,size:[d,1]})}function o(i,l){l=n(i,l,!0);for(var c=l._data,d=i._size[0],p=i._size[1],m=i._values,g=i._index,b=i._ptr,y=[],w=0;w<p;w++){var x=c[w][0]||0;if(v(x,0))y[w]=[0];else{for(var C=0,S=[],E=[],A=b[w],D=b[w+1],M=A;M<D;M++){var B=g[M];B===w?C=m[M]:B>w&&(S.push(m[M]),E.push(B))}if(v(C,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var O=a(x,C),F=0,z=E.length;F<z;F++){var N=E[F];c[N]=[f(c[N][0]||0,s(O,S[F]))]}y[w]=[O]}}return new h({data:y,size:[d,1]})}}),jm="usolve",GO=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],WO=Z(jm,GO,e=>{var{typed:t,matrix:r,divideScalar:a,multiplyScalar:s,subtract:f,equalScalar:v,DenseMatrix:h}=e,n=fs({DenseMatrix:h});return t(jm,{"SparseMatrix, Array | Matrix":function(l,c){return o(l,c)},"DenseMatrix, Array | Matrix":function(l,c){return u(l,c)},"Array, Array | Matrix":function(l,c){var d=r(l),p=u(d,c);return p.valueOf()}});function u(i,l){l=n(i,l,!0);for(var c=l._data,d=i._size[0],p=i._size[1],m=[],g=i._data,b=p-1;b>=0;b--){var y=c[b][0]||0,w=void 0;if(v(y,0))w=0;else{var x=g[b][b];if(v(x,0))throw new Error("Linear system cannot be solved since matrix is singular");w=a(y,x);for(var C=b-1;C>=0;C--)c[C]=[f(c[C][0]||0,s(w,g[C][b]))]}m[b]=[w]}return new h({data:m,size:[d,1]})}function o(i,l){l=n(i,l,!0);for(var c=l._data,d=i._size[0],p=i._size[1],m=i._values,g=i._index,b=i._ptr,y=[],w=p-1;w>=0;w--){var x=c[w][0]||0;if(v(x,0))y[w]=[0];else{for(var C=0,S=[],E=[],A=b[w],D=b[w+1],M=D-1;M>=A;M--){var B=g[M];B===w?C=m[M]:B<w&&(S.push(m[M]),E.push(B))}if(v(C,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var O=a(x,C),F=0,z=E.length;F<z;F++){var N=E[F];c[N]=[f(c[N][0],s(O,S[F]))]}y[w]=[O]}}return new h({data:y,size:[d,1]})}}),qm="lsolveAll",YO=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],XO=Z(qm,YO,e=>{var{typed:t,matrix:r,divideScalar:a,multiplyScalar:s,subtract:f,equalScalar:v,DenseMatrix:h}=e,n=fs({DenseMatrix:h});return t(qm,{"SparseMatrix, Array | Matrix":function(l,c){return o(l,c)},"DenseMatrix, Array | Matrix":function(l,c){return u(l,c)},"Array, Array | Matrix":function(l,c){var d=r(l),p=u(d,c);return p.map(m=>m.valueOf())}});function u(i,l){for(var c=[n(i,l,!0)._data.map(E=>E[0])],d=i._data,p=i._size[0],m=i._size[1],g=0;g<m;g++)for(var b=c.length,y=0;y<b;y++){var w=c[y];if(v(d[g][g],0))if(v(w[g],0)){if(y===0){var C=[...w];C[g]=1;for(var S=g+1;S<m;S++)C[S]=f(C[S],d[S][g]);c.push(C)}}else{if(y===0)return[];c.splice(y,1),y-=1,b-=1}else{w[g]=a(w[g],d[g][g]);for(var x=g+1;x<m;x++)w[x]=f(w[x],s(w[g],d[x][g]))}}return c.map(E=>new h({data:E.map(A=>[A]),size:[p,1]}))}function o(i,l){for(var c=[n(i,l,!0)._data.map(U=>U[0])],d=i._size[0],p=i._size[1],m=i._values,g=i._index,b=i._ptr,y=0;y<p;y++)for(var w=c.length,x=0;x<w;x++){for(var C=c[x],S=[],E=[],A=b[y],D=b[y+1],M=0,B=A;B<D;B++){var O=g[B];O===y?M=m[B]:O>y&&(S.push(m[B]),E.push(O))}if(v(M,0))if(v(C[y],0)){if(x===0){var T=[...C];T[y]=1;for(var q=0,_=E.length;q<_;q++){var I=E[q];T[I]=f(T[I],S[q])}c.push(T)}}else{if(x===0)return[];c.splice(x,1),x-=1,w-=1}else{C[y]=a(C[y],M);for(var F=0,z=E.length;F<z;F++){var N=E[F];C[N]=f(C[N],s(C[y],S[F]))}}}return c.map(U=>new h({data:U.map(j=>[j]),size:[d,1]}))}}),Hm="usolveAll",KO=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],JO=Z(Hm,KO,e=>{var{typed:t,matrix:r,divideScalar:a,multiplyScalar:s,subtract:f,equalScalar:v,DenseMatrix:h}=e,n=fs({DenseMatrix:h});return t(Hm,{"SparseMatrix, Array | Matrix":function(l,c){return o(l,c)},"DenseMatrix, Array | Matrix":function(l,c){return u(l,c)},"Array, Array | Matrix":function(l,c){var d=r(l),p=u(d,c);return p.map(m=>m.valueOf())}});function u(i,l){for(var c=[n(i,l,!0)._data.map(E=>E[0])],d=i._data,p=i._size[0],m=i._size[1],g=m-1;g>=0;g--)for(var b=c.length,y=0;y<b;y++){var w=c[y];if(v(d[g][g],0))if(v(w[g],0)){if(y===0){var C=[...w];C[g]=1;for(var S=g-1;S>=0;S--)C[S]=f(C[S],d[S][g]);c.push(C)}}else{if(y===0)return[];c.splice(y,1),y-=1,b-=1}else{w[g]=a(w[g],d[g][g]);for(var x=g-1;x>=0;x--)w[x]=f(w[x],s(w[g],d[x][g]))}}return c.map(E=>new h({data:E.map(A=>[A]),size:[p,1]}))}function o(i,l){for(var c=[n(i,l,!0)._data.map(U=>U[0])],d=i._size[0],p=i._size[1],m=i._values,g=i._index,b=i._ptr,y=p-1;y>=0;y--)for(var w=c.length,x=0;x<w;x++){for(var C=c[x],S=[],E=[],A=b[y],D=b[y+1],M=0,B=D-1;B>=A;B--){var O=g[B];O===y?M=m[B]:O<y&&(S.push(m[B]),E.push(O))}if(v(M,0))if(v(C[y],0)){if(x===0){var T=[...C];T[y]=1;for(var q=0,_=E.length;q<_;q++){var I=E[q];T[I]=f(T[I],S[q])}c.push(T)}}else{if(x===0)return[];c.splice(x,1),x-=1,w-=1}else{C[y]=a(C[y],M);for(var F=0,z=E.length;F<z;F++){var N=E[F];C[N]=f(C[N],s(C[y],S[F]))}}}return c.map(U=>new h({data:U.map(j=>[j]),size:[d,1]}))}}),ZO="matAlgo08xS0Sid",QO=["typed","equalScalar"],Bh=Z(ZO,QO,e=>{var{typed:t,equalScalar:r}=e;return function(s,f,v){var h=s._values,n=s._index,u=s._ptr,o=s._size,i=s._datatype,l=f._values,c=f._index,d=f._ptr,p=f._size,m=f._datatype;if(o.length!==p.length)throw new ot(o.length,p.length);if(o[0]!==p[0]||o[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+p+")");if(!h||!l)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var g=o[0],b=o[1],y,w=r,x=0,C=v;typeof i=="string"&&i===m&&(y=i,w=t.find(r,[y,y]),x=t.convert(0,y),C=t.find(v,[y,y]));for(var S=[],E=[],A=[],D=[],M=[],B,O,F,z,N=0;N<b;N++){A[N]=E.length;var T=N+1;for(O=u[N],F=u[N+1],B=O;B<F;B++)z=n[B],M[z]=T,D[z]=h[B],E.push(z);for(O=d[N],F=d[N+1],B=O;B<F;B++)z=c[B],M[z]===T&&(D[z]=C(D[z],l[B]));for(B=A[N];B<E.length;){z=E[B];var q=D[z];w(q,x)?E.splice(B,1):(S.push(q),B++)}}return A[b]=E.length,s.createSparseMatrix({values:S,index:E,ptr:A,size:[g,b],datatype:y})}}),Ih=Z("useMatrixForArrayScalar",["typed","matrix"],e=>{var{typed:t,matrix:r}=e;return{"Array, number":t.referTo("DenseMatrix, number",a=>(s,f)=>a(r(s),f).valueOf()),"Array, BigNumber":t.referTo("DenseMatrix, BigNumber",a=>(s,f)=>a(r(s),f).valueOf()),"number, Array":t.referTo("number, DenseMatrix",a=>(s,f)=>a(s,r(f)).valueOf()),"BigNumber, Array":t.referTo("BigNumber, DenseMatrix",a=>(s,f)=>a(s,r(f)).valueOf())}}),Vm="leftShift",eM=["typed","matrix","equalScalar","zeros","DenseMatrix"],tM=Z(Vm,eM,e=>{var{typed:t,matrix:r,equalScalar:a,zeros:s,DenseMatrix:f}=e,v=Mi({typed:t}),h=mn({typed:t,equalScalar:a}),n=Bh({typed:t,equalScalar:a}),u=ia({typed:t,DenseMatrix:f}),o=dr({typed:t,equalScalar:a}),i=pn({typed:t}),l=Mt({typed:t,matrix:r}),c=Ih({typed:t,matrix:r});return t(Vm,{"number, number":bb,"BigNumber, BigNumber":_T,"SparseMatrix, number | BigNumber":t.referToSelf(d=>(p,m)=>a(m,0)?p.clone():o(p,m,d,!1)),"DenseMatrix, number | BigNumber":t.referToSelf(d=>(p,m)=>a(m,0)?p.clone():i(p,m,d,!1)),"number | BigNumber, SparseMatrix":t.referToSelf(d=>(p,m)=>a(p,0)?s(m.size(),m.storage()):u(m,p,d,!0)),"number | BigNumber, DenseMatrix":t.referToSelf(d=>(p,m)=>a(p,0)?s(m.size(),m.storage()):i(m,p,d,!0))},c,l({SS:n,DS:v,SD:h}))}),Gm="rightArithShift",rM=["typed","matrix","equalScalar","zeros","DenseMatrix"],nM=Z(Gm,rM,e=>{var{typed:t,matrix:r,equalScalar:a,zeros:s,DenseMatrix:f}=e,v=Mi({typed:t}),h=mn({typed:t,equalScalar:a}),n=Bh({typed:t,equalScalar:a}),u=ia({typed:t,DenseMatrix:f}),o=dr({typed:t,equalScalar:a}),i=pn({typed:t}),l=Mt({typed:t,matrix:r}),c=Ih({typed:t,matrix:r});return t(Gm,{"number, number":wb,"BigNumber, BigNumber":DT,"SparseMatrix, number | BigNumber":t.referToSelf(d=>(p,m)=>a(m,0)?p.clone():o(p,m,d,!1)),"DenseMatrix, number | BigNumber":t.referToSelf(d=>(p,m)=>a(m,0)?p.clone():i(p,m,d,!1)),"number | BigNumber, SparseMatrix":t.referToSelf(d=>(p,m)=>a(p,0)?s(m.size(),m.storage()):u(m,p,d,!0)),"number | BigNumber, DenseMatrix":t.referToSelf(d=>(p,m)=>a(p,0)?s(m.size(),m.storage()):i(m,p,d,!0))},c,l({SS:n,DS:v,SD:h}))}),Wm="rightLogShift",iM=["typed","matrix","equalScalar","zeros","DenseMatrix"],aM=Z(Wm,iM,e=>{var{typed:t,matrix:r,equalScalar:a,zeros:s,DenseMatrix:f}=e,v=Mi({typed:t}),h=mn({typed:t,equalScalar:a}),n=Bh({typed:t,equalScalar:a}),u=ia({typed:t,DenseMatrix:f}),o=dr({typed:t,equalScalar:a}),i=pn({typed:t}),l=Mt({typed:t,matrix:r}),c=Ih({typed:t,matrix:r});return t(Wm,{"number, number":xb,"SparseMatrix, number | BigNumber":t.referToSelf(d=>(p,m)=>a(m,0)?p.clone():o(p,m,d,!1)),"DenseMatrix, number | BigNumber":t.referToSelf(d=>(p,m)=>a(m,0)?p.clone():i(p,m,d,!1)),"number | BigNumber, SparseMatrix":t.referToSelf(d=>(p,m)=>a(p,0)?s(m.size(),m.storage()):u(m,p,d,!0)),"number | BigNumber, DenseMatrix":t.referToSelf(d=>(p,m)=>a(p,0)?s(m.size(),m.storage()):i(m,p,d,!0))},c,l({SS:n,DS:v,SD:h}))}),Ym="and",oM=["typed","matrix","equalScalar","zeros","not"],sM=Z(Ym,oM,e=>{var{typed:t,matrix:r,equalScalar:a,zeros:s,not:f}=e,v=mn({typed:t,equalScalar:a}),h=Pl({typed:t,equalScalar:a}),n=dr({typed:t,equalScalar:a}),u=pn({typed:t}),o=Mt({typed:t,matrix:r});return t(Ym,{"number, number":Db,"Complex, Complex":function(l,c){return(l.re!==0||l.im!==0)&&(c.re!==0||c.im!==0)},"BigNumber, BigNumber":function(l,c){return!l.isZero()&&!c.isZero()&&!l.isNaN()&&!c.isNaN()},"Unit, Unit":t.referToSelf(i=>(l,c)=>i(l.value||0,c.value||0)),"SparseMatrix, any":t.referToSelf(i=>(l,c)=>f(c)?s(l.size(),l.storage()):n(l,c,i,!1)),"DenseMatrix, any":t.referToSelf(i=>(l,c)=>f(c)?s(l.size(),l.storage()):u(l,c,i,!1)),"any, SparseMatrix":t.referToSelf(i=>(l,c)=>f(l)?s(l.size(),l.storage()):n(c,l,i,!0)),"any, DenseMatrix":t.referToSelf(i=>(l,c)=>f(l)?s(l.size(),l.storage()):u(c,l,i,!0)),"Array, any":t.referToSelf(i=>(l,c)=>i(r(l),c).valueOf()),"any, Array":t.referToSelf(i=>(l,c)=>i(l,r(c)).valueOf())},o({SS:h,DS:v}))}),qu="compare",uM=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix"],lM=Z(qu,uM,e=>{var{typed:t,config:r,equalScalar:a,matrix:s,BigNumber:f,Fraction:v,DenseMatrix:h}=e,n=Er({typed:t}),u=Bl({typed:t,equalScalar:a}),o=tr({typed:t,DenseMatrix:h}),i=Mt({typed:t,matrix:s}),l=oo({typed:t});return t(qu,cM({typed:t,config:r}),{"boolean, boolean":function(d,p){return d===p?0:d>p?1:-1},"BigNumber, BigNumber":function(d,p){return An(d,p,r.epsilon)?new f(0):new f(d.cmp(p))},"Fraction, Fraction":function(d,p){return new v(d.compare(p))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},l,i({SS:u,DS:n,Ss:o}))}),cM=Z(qu,["typed","config"],e=>{var{typed:t,config:r}=e;return t(qu,{"number, number":function(s,f){return Rr(s,f,r.epsilon)?0:s>f?1:-1}})}),_a=function e(t,r){var a=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,s=/(^[ ]*|[ ]*$)/g,f=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,v=/^0x[0-9a-f]+$/i,h=/^0/,n=function(y){return e.insensitive&&(""+y).toLowerCase()||""+y},u=n(t).replace(s,"")||"",o=n(r).replace(s,"")||"",i=u.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),l=o.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),c=parseInt(u.match(v),16)||i.length!==1&&u.match(f)&&Date.parse(u),d=parseInt(o.match(v),16)||c&&o.match(f)&&Date.parse(o)||null,p,m;if(d){if(c<d)return-1;if(c>d)return 1}for(var g=0,b=Math.max(i.length,l.length);g<b;g++){if(p=!(i[g]||"").match(h)&&parseFloat(i[g])||i[g]||0,m=!(l[g]||"").match(h)&&parseFloat(l[g])||l[g]||0,isNaN(p)!==isNaN(m))return isNaN(p)?1:-1;if(typeof p!=typeof m&&(p+="",m+=""),p<m)return-1;if(p>m)return 1}return 0},Xm="compareNatural",fM=["typed","compare"],hM=Z(Xm,fM,e=>{var{typed:t,compare:r}=e,a=r.signatures["boolean,boolean"];return t(Xm,{"any, any":s});function s(n,u){var o=Bt(n),i=Bt(u),l;if((o==="number"||o==="BigNumber"||o==="Fraction")&&(i==="number"||i==="BigNumber"||i==="Fraction"))return l=r(n,u),l.toString()!=="0"?l>0?1:-1:_a(o,i);var c=["Array","DenseMatrix","SparseMatrix"];if(c.includes(o)||c.includes(i))return l=f(s,n,u),l!==0?l:_a(o,i);if(o!==i)return _a(o,i);if(o==="Complex")return dM(n,u);if(o==="Unit")return n.equalBase(u)?s(n.value,u.value):v(s,n.formatUnits(),u.formatUnits());if(o==="boolean")return a(n,u);if(o==="string")return _a(n,u);if(o==="Object")return h(s,n,u);if(o==="null"||o==="undefined")return 0;throw new TypeError('Unsupported type of value "'+o+'"')}function f(n,u,o){return Gi(u)&&Gi(o)?v(n,u.toJSON().values,o.toJSON().values):Gi(u)?f(n,u.toArray(),o):Gi(o)?f(n,u,o.toArray()):Mu(u)?f(n,u.toJSON().data,o):Mu(o)?f(n,u,o.toJSON().data):Array.isArray(u)?Array.isArray(o)?v(n,u,o):f(n,u,[o]):f(n,[u],o)}function v(n,u,o){for(var i=0,l=Math.min(u.length,o.length);i<l;i++){var c=n(u[i],o[i]);if(c!==0)return c}return u.length>o.length?1:u.length<o.length?-1:0}function h(n,u,o){var i=Object.keys(u),l=Object.keys(o);i.sort(_a),l.sort(_a);var c=v(n,i,l);if(c!==0)return c;for(var d=0;d<i.length;d++){var p=n(u[i[d]],o[l[d]]);if(p!==0)return p}return 0}});function dM(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0}var Km="compareText",pM=["typed","matrix"];Pf.signature="any, any";var mM=Z(Km,pM,e=>{var{typed:t,matrix:r}=e,a=Mt({typed:t,matrix:r});return t(Km,Pf,a({elop:Pf,Ds:!0}))}),Hu="equal",vM=["typed","matrix","equalScalar","DenseMatrix"],gM=Z(Hu,vM,e=>{var{typed:t,matrix:r,equalScalar:a,DenseMatrix:s}=e,f=Er({typed:t}),v=On({typed:t,DenseMatrix:s}),h=tr({typed:t,DenseMatrix:s}),n=Mt({typed:t,matrix:r});return t(Hu,yM({typed:t,equalScalar:a}),n({elop:a,SS:v,DS:f,Ss:h}))}),yM=Z(Hu,["typed","equalScalar"],e=>{var{typed:t,equalScalar:r}=e;return t(Hu,{"any, any":function(s,f){return s===null?f===null:f===null?s===null:s===void 0?f===void 0:f===void 0?s===void 0:r(s,f)}})}),Jm="equalText",bM=["typed","compareText","isZero"],wM=Z(Jm,bM,e=>{var{typed:t,compareText:r,isZero:a}=e;return t(Jm,{"any, any":function(f,v){return a(r(f,v))}})}),Vu="smaller",xM=["typed","config","matrix","DenseMatrix"],CM=Z(Vu,xM,e=>{var{typed:t,config:r,matrix:a,DenseMatrix:s}=e,f=Er({typed:t}),v=On({typed:t,DenseMatrix:s}),h=tr({typed:t,DenseMatrix:s}),n=Mt({typed:t,matrix:a}),u=oo({typed:t});return t(Vu,SM({typed:t,config:r}),{"boolean, boolean":(o,i)=>o<i,"BigNumber, BigNumber":function(i,l){return i.lt(l)&&!An(i,l,r.epsilon)},"Fraction, Fraction":(o,i)=>o.compare(i)===-1,"Complex, Complex":function(i,l){throw new TypeError("No ordering relation is defined for complex numbers")}},u,n({SS:v,DS:f,Ss:h}))}),SM=Z(Vu,["typed","config"],e=>{var{typed:t,config:r}=e;return t(Vu,{"number, number":function(s,f){return s<f&&!Rr(s,f,r.epsilon)}})}),Gu="smallerEq",EM=["typed","config","matrix","DenseMatrix"],_M=Z(Gu,EM,e=>{var{typed:t,config:r,matrix:a,DenseMatrix:s}=e,f=Er({typed:t}),v=On({typed:t,DenseMatrix:s}),h=tr({typed:t,DenseMatrix:s}),n=Mt({typed:t,matrix:a}),u=oo({typed:t});return t(Gu,DM({typed:t,config:r}),{"boolean, boolean":(o,i)=>o<=i,"BigNumber, BigNumber":function(i,l){return i.lte(l)||An(i,l,r.epsilon)},"Fraction, Fraction":(o,i)=>o.compare(i)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},u,n({SS:v,DS:f,Ss:h}))}),DM=Z(Gu,["typed","config"],e=>{var{typed:t,config:r}=e;return t(Gu,{"number, number":function(s,f){return s<=f||Rr(s,f,r.epsilon)}})}),Wu="larger",AM=["typed","config","matrix","DenseMatrix"],NM=Z(Wu,AM,e=>{var{typed:t,config:r,matrix:a,DenseMatrix:s}=e,f=Er({typed:t}),v=On({typed:t,DenseMatrix:s}),h=tr({typed:t,DenseMatrix:s}),n=Mt({typed:t,matrix:a}),u=oo({typed:t});return t(Wu,TM({typed:t,config:r}),{"boolean, boolean":(o,i)=>o>i,"BigNumber, BigNumber":function(i,l){return i.gt(l)&&!An(i,l,r.epsilon)},"Fraction, Fraction":(o,i)=>o.compare(i)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},u,n({SS:v,DS:f,Ss:h}))}),TM=Z(Wu,["typed","config"],e=>{var{typed:t,config:r}=e;return t(Wu,{"number, number":function(s,f){return s>f&&!Rr(s,f,r.epsilon)}})}),Yu="largerEq",OM=["typed","config","matrix","DenseMatrix"],MM=Z(Yu,OM,e=>{var{typed:t,config:r,matrix:a,DenseMatrix:s}=e,f=Er({typed:t}),v=On({typed:t,DenseMatrix:s}),h=tr({typed:t,DenseMatrix:s}),n=Mt({typed:t,matrix:a}),u=oo({typed:t});return t(Yu,FM({typed:t,config:r}),{"boolean, boolean":(o,i)=>o>=i,"BigNumber, BigNumber":function(i,l){return i.gte(l)||An(i,l,r.epsilon)},"Fraction, Fraction":(o,i)=>o.compare(i)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},u,n({SS:v,DS:f,Ss:h}))}),FM=Z(Yu,["typed","config"],e=>{var{typed:t,config:r}=e;return t(Yu,{"number, number":function(s,f){return s>=f||Rr(s,f,r.epsilon)}})}),Zm="deepEqual",PM=["typed","equal"],BM=Z(Zm,PM,e=>{var{typed:t,equal:r}=e;return t(Zm,{"any, any":function(f,v){return a(f.valueOf(),v.valueOf())}});function a(s,f){if(Array.isArray(s))if(Array.isArray(f)){var v=s.length;if(v!==f.length)return!1;for(var h=0;h<v;h++)if(!a(s[h],f[h]))return!1;return!0}else return!1;else return Array.isArray(f)?!1:r(s,f)}}),Xu="unequal",IM=["typed","config","equalScalar","matrix","DenseMatrix"],RM=Z(Xu,IM,e=>{var{typed:t,config:r,equalScalar:a,matrix:s,DenseMatrix:f}=e,v=Er({typed:t}),h=On({typed:t,DenseMatrix:f}),n=tr({typed:t,DenseMatrix:f}),u=Mt({typed:t,matrix:s});return t(Xu,kM({typed:t,equalScalar:a}),u({elop:o,SS:h,DS:v,Ss:n}));function o(i,l){return!a(i,l)}}),kM=Z(Xu,["typed","equalScalar"],e=>{var{typed:t,equalScalar:r}=e;return t(Xu,{"any, any":function(s,f){return s===null?f!==null:f===null?s!==null:s===void 0?f!==void 0:f===void 0?s!==void 0:!r(s,f)}})}),Qm="partitionSelect",$M=["typed","isNumeric","isNaN","compare"],LM=Z(Qm,$M,e=>{var{typed:t,isNumeric:r,isNaN:a,compare:s}=e,f=s,v=(u,o)=>-s(u,o);return t(Qm,{"Array | Matrix, number":function(o,i){return h(o,i,f)},"Array | Matrix, number, string":function(o,i,l){if(l==="asc")return h(o,i,f);if(l==="desc")return h(o,i,v);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":h});function h(u,o,i){if(!qe(o)||o<0)throw new Error("k must be a non-negative integer");if(Ze(u)){var l=u.size();if(l.length>1)throw new Error("Only one dimensional matrices supported");return n(u.valueOf(),o,i)}if(Array.isArray(u))return n(u,o,i)}function n(u,o,i){if(o>=u.length)throw new Error("k out of bounds");for(var l=0;l<u.length;l++)if(r(u[l])&&a(u[l]))return u[l];for(var c=0,d=u.length-1;c<d;){for(var p=c,m=d,g=u[Math.floor(Math.random()*(d-c+1))+c];p<m;)if(i(u[p],g)>=0){var b=u[m];u[m]=u[p],u[p]=b,--m}else++p;i(u[p],g)>0&&--p,o<=p?d=p:c=p+1}return u[o]}}),ev="sort",zM=["typed","matrix","compare","compareNatural"],UM=Z(ev,zM,e=>{var{typed:t,matrix:r,compare:a,compareNatural:s}=e,f=a,v=(o,i)=>-a(o,i);return t(ev,{Array:function(i){return n(i),i.sort(f)},Matrix:function(i){return u(i),r(i.toArray().sort(f),i.storage())},"Array, function":function(i,l){return n(i),i.sort(l)},"Matrix, function":function(i,l){return u(i),r(i.toArray().sort(l),i.storage())},"Array, string":function(i,l){return n(i),i.sort(h(l))},"Matrix, string":function(i,l){return u(i),r(i.toArray().sort(h(l)),i.storage())}});function h(o){if(o==="asc")return f;if(o==="desc")return v;if(o==="natural")return s;throw new Error('String "asc", "desc", or "natural" expected')}function n(o){if(ut(o).length!==1)throw new Error("One dimensional array expected")}function u(o){if(o.size().length!==1)throw new Error("One dimensional matrix expected")}}),tv="max",jM=["typed","config","numeric","larger"],ow=Z(tv,jM,e=>{var{typed:t,config:r,numeric:a,larger:s}=e;return t(tv,{"Array | Matrix":v,"Array | Matrix, number | BigNumber":function(n,u){return Ml(n,u.valueOf(),f)},"...":function(n){if(io(n))throw new TypeError("Scalar values expected in function max");return v(n)}});function f(h,n){try{return s(h,n)?h:n}catch(u){throw Sr(u,"max",n)}}function v(h){var n;if(Qn(h,function(u){try{isNaN(u)&&typeof u=="number"?n=NaN:(n===void 0||s(u,n))&&(n=u)}catch(o){throw Sr(o,"max",u)}}),n===void 0)throw new Error("Cannot calculate max of an empty array");return typeof n=="string"&&(n=a(n,r.number)),n}}),rv="min",qM=["typed","config","numeric","smaller"],sw=Z(rv,qM,e=>{var{typed:t,config:r,numeric:a,smaller:s}=e;return t(rv,{"Array | Matrix":v,"Array | Matrix, number | BigNumber":function(n,u){return Ml(n,u.valueOf(),f)},"...":function(n){if(io(n))throw new TypeError("Scalar values expected in function min");return v(n)}});function f(h,n){try{return s(h,n)?h:n}catch(u){throw Sr(u,"min",n)}}function v(h){var n;if(Qn(h,function(u){try{isNaN(u)&&typeof u=="number"?n=NaN:(n===void 0||s(u,n))&&(n=u)}catch(o){throw Sr(o,"min",u)}}),n===void 0)throw new Error("Cannot calculate min of an empty array");return typeof n=="string"&&(n=a(n,r.number)),n}}),HM="ImmutableDenseMatrix",VM=["smaller","DenseMatrix"],GM=Z(HM,VM,e=>{var{smaller:t,DenseMatrix:r}=e;function a(s,f){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Cr(f))throw new Error("Invalid datatype: "+f);if(Ze(s)||Et(s)){var v=new r(s,f);this._data=v._data,this._size=v._size,this._datatype=v._datatype,this._min=null,this._max=null}else if(s&&Et(s.data)&&Et(s.size))this._data=s.data,this._size=s.size,this._datatype=s.datatype,this._min=typeof s.min<"u"?s.min:null,this._max=typeof s.max<"u"?s.max:null;else{if(s)throw new TypeError("Unsupported type of data ("+Bt(s)+")");this._data=[],this._size=[0],this._datatype=f,this._min=null,this._max=null}}return a.prototype=new r,a.prototype.type="ImmutableDenseMatrix",a.prototype.isImmutableDenseMatrix=!0,a.prototype.subset=function(s){switch(arguments.length){case 1:{var f=r.prototype.subset.call(this,s);return Ze(f)?new a({data:f._data,size:f._size,datatype:f._datatype}):f}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},a.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},a.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},a.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},a.prototype.clone=function(){return new a({data:Je(this._data),size:Je(this._size),datatype:this._datatype})},a.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},a.fromJSON=function(s){return new a(s)},a.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},a.prototype.min=function(){if(this._min===null){var s=null;this.forEach(function(f){(s===null||t(f,s))&&(s=f)}),this._min=s!==null?s:void 0}return this._min},a.prototype.max=function(){if(this._max===null){var s=null;this.forEach(function(f){(s===null||t(s,f))&&(s=f)}),this._max=s!==null?s:void 0}return this._max},a},{isClass:!0}),WM="Index",YM=["ImmutableDenseMatrix"],XM=Z(WM,YM,e=>{var{ImmutableDenseMatrix:t}=e;function r(s){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var f=0,v=arguments.length;f<v;f++){var h=arguments[f];if(Ch(h))this._dimensions.push(h),this._isScalar=!1;else if(Array.isArray(h)||Ze(h)){var n=a(h.valueOf());this._dimensions.push(n);var u=n.size();(u.length!==1||u[0]!==1)&&(this._isScalar=!1)}else if(typeof h=="number")this._dimensions.push(a([h]));else if(typeof h=="string")this._dimensions.push(h);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range")}}r.prototype.type="Index",r.prototype.isIndex=!0;function a(s){for(var f=0,v=s.length;f<v;f++)if(typeof s[f]!="number"||!qe(s[f]))throw new TypeError("Index parameters must be positive integer numbers");return new t(s)}return r.prototype.clone=function(){var s=new r;return s._dimensions=Je(this._dimensions),s._isScalar=this._isScalar,s},r.create=function(s){var f=new r;return r.apply(f,s),f},r.prototype.size=function(){for(var s=[],f=0,v=this._dimensions.length;f<v;f++){var h=this._dimensions[f];s[f]=typeof h=="string"?1:h.size()[0]}return s},r.prototype.max=function(){for(var s=[],f=0,v=this._dimensions.length;f<v;f++){var h=this._dimensions[f];s[f]=typeof h=="string"?h:h.max()}return s},r.prototype.min=function(){for(var s=[],f=0,v=this._dimensions.length;f<v;f++){var h=this._dimensions[f];s[f]=typeof h=="string"?h:h.min()}return s},r.prototype.forEach=function(s){for(var f=0,v=this._dimensions.length;f<v;f++)s(this._dimensions[f],f,this)},r.prototype.dimension=function(s){return this._dimensions[s]||null},r.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var s=[],f=0,v=this._dimensions.length;f<v;f++){var h=this._dimensions[f];s.push(typeof h=="string"?h:h.toArray())}return s},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var s=[],f=0,v=this._dimensions.length;f<v;f++){var h=this._dimensions[f];typeof h=="string"?s.push(JSON.stringify(h)):s.push(h.toString())}return"["+s.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(s){return r.create(s.dimensions)},r},{isClass:!0}),KM="FibonacciHeap",JM=["smaller","larger"],ZM=Z(KM,JM,e=>{var{smaller:t,larger:r}=e,a=1/Math.log((1+Math.sqrt(5))/2);function s(){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}s.prototype.type="FibonacciHeap",s.prototype.isFibonacciHeap=!0,s.prototype.insert=function(o,i){var l={key:o,value:i,degree:0};if(this._minimum){var c=this._minimum;l.left=c,l.right=c.right,c.right=l,l.right.left=l,t(o,c.key)&&(this._minimum=l)}else l.left=l,l.right=l,this._minimum=l;return this._size++,l},s.prototype.size=function(){return this._size},s.prototype.clear=function(){this._minimum=null,this._size=0},s.prototype.isEmpty=function(){return this._size===0},s.prototype.extractMinimum=function(){var o=this._minimum;if(o===null)return o;for(var i=this._minimum,l=o.degree,c=o.child;l>0;){var d=c.right;c.left.right=c.right,c.right.left=c.left,c.left=i,c.right=i.right,i.right=c,c.right.left=c,c.parent=null,c=d,l--}return o.left.right=o.right,o.right.left=o.left,o===o.right?i=null:(i=o.right,i=u(i,this._size)),this._size--,this._minimum=i,o},s.prototype.remove=function(o){this._minimum=f(this._minimum,o,-1),this.extractMinimum()};function f(o,i,l){i.key=l;var c=i.parent;return c&&t(i.key,c.key)&&(v(o,i,c),h(o,c)),t(i.key,o.key)&&(o=i),o}function v(o,i,l){i.left.right=i.right,i.right.left=i.left,l.degree--,l.child===i&&(l.child=i.right),l.degree===0&&(l.child=null),i.left=o,i.right=o.right,o.right=i,i.right.left=i,i.parent=null,i.mark=!1}function h(o,i){var l=i.parent;!l||(i.mark?(v(o,i,l),h(l)):i.mark=!0)}var n=function(i,l){i.left.right=i.right,i.right.left=i.left,i.parent=l,l.child?(i.left=l.child,i.right=l.child.right,l.child.right=i,i.right.left=i):(l.child=i,i.right=i,i.left=i),l.degree++,i.mark=!1};function u(o,i){var l=Math.floor(Math.log(i)*a)+1,c=new Array(l),d=0,p=o;if(p)for(d++,p=p.right;p!==o;)d++,p=p.right;for(var m;d>0;){for(var g=p.degree,b=p.right;m=c[g],!!m;){if(r(p.key,m.key)){var y=m;m=p,p=y}n(m,p),c[g]=null,g++}c[g]=p,p=b,d--}o=null;for(var w=0;w<l;w++)m=c[w],m&&(o?(m.left.right=m.right,m.right.left=m.left,m.left=o,m.right=o.right,o.right=m,m.right.left=m,t(m.key,o.key)&&(o=m)):o=m);return o}return s},{isClass:!0}),QM="Spa",e4=["addScalar","equalScalar","FibonacciHeap"],t4=Z(QM,e4,e=>{var{addScalar:t,equalScalar:r,FibonacciHeap:a}=e;function s(){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new a}return s.prototype.type="Spa",s.prototype.isSpa=!0,s.prototype.set=function(f,v){if(this._values[f])this._values[f].value=v;else{var h=this._heap.insert(f,v);this._values[f]=h}},s.prototype.get=function(f){var v=this._values[f];return v?v.value:0},s.prototype.accumulate=function(f,v){var h=this._values[f];h?h.value=t(h.value,v):(h=this._heap.insert(f,v),this._values[f]=h)},s.prototype.forEach=function(f,v,h){var n=this._heap,u=this._values,o=[],i=n.extractMinimum();for(i&&o.push(i);i&&i.key<=v;)i.key>=f&&(r(i.value,0)||h(i.key,i.value,this)),i=n.extractMinimum(),i&&o.push(i);for(var l=0;l<o.length;l++){var c=o[l];i=n.insert(c.key,c.value),u[i.key]=i}},s.prototype.swap=function(f,v){var h=this._values[f],n=this._values[v];if(!h&&n)h=this._heap.insert(f,n.value),this._heap.remove(n),this._values[f]=h,this._values[v]=void 0;else if(h&&!n)n=this._heap.insert(v,h.value),this._heap.remove(h),this._values[v]=n,this._values[f]=void 0;else if(h&&n){var u=h.value;h.value=n.value,n.value=u}},s},{isClass:!0});function ar(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var r4=cs(function(e){return new e(1).exp()},{hasher:Il}),n4=cs(function(e){return new e(1).plus(new e(5).sqrt()).div(2)},{hasher:Il}),Rh=cs(function(e){return e.acos(-1)},{hasher:Il}),i4=cs(function(e){return Rh(e).times(2)},{hasher:Il});function Il(e){return e[0].precision}function nv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $c(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nv(Object(r),!0).forEach(function(a){ar(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nv(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}var a4="Unit",o4=["?on","config","addScalar","subtract","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],s4=Z(a4,o4,e=>{var{on:t,config:r,addScalar:a,subtract:s,multiplyScalar:f,divideScalar:v,pow:h,abs:n,fix:u,round:o,equal:i,isNumeric:l,format:c,number:d,Complex:p,BigNumber:m,Fraction:g}=e,b=d;function y(G,X){if(!(this instanceof y))throw new Error("Constructor must be called with the new operator");if(!(G==null||l(G)||Wn(G)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,X===void 0)this.units=[],this.dimensions=q.map(W=>0);else if(typeof X=="string"){var te=y.parse(X);this.units=te.units,this.dimensions=te.dimensions}else if(zn(X)&&X.value===null)this.fixPrefix=X.fixPrefix,this.skipAutomaticSimplification=X.skipAutomaticSimplification,this.dimensions=X.dimensions.slice(0),this.units=X.units.map(W=>ur({},W));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(G)}Object.defineProperty(y,"name",{value:"Unit"}),y.prototype.constructor=y,y.prototype.type="Unit",y.prototype.isUnit=!0;var w,x,C;function S(){for(;C===" "||C==="	";)D()}function E(G){return G>="0"&&G<="9"||G==="."}function A(G){return G>="0"&&G<="9"}function D(){x++,C=w.charAt(x)}function M(G){x=G,C=w.charAt(x)}function B(){var G="",X=x;if(C==="+"?D():C==="-"&&(G+=C,D()),!E(C))return M(X),null;if(C==="."){if(G+=C,D(),!A(C))return M(X),null}else{for(;A(C);)G+=C,D();C==="."&&(G+=C,D())}for(;A(C);)G+=C,D();if(C==="E"||C==="e"){var te="",W=x;if(te+=C,D(),(C==="+"||C==="-")&&(te+=C,D()),!A(C))return M(W),G;for(G=G+te;A(C);)G+=C,D()}return G}function O(){for(var G="";A(C)||y.isValidAlpha(C);)G+=C,D();var X=G.charAt(0);return y.isValidAlpha(X)?G:null}function F(G){return C===G?(D(),G):null}y.parse=function(G,X){if(X=X||{},w=G,x=-1,C="",typeof w!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var te=new y;te.units=[];var W=1,ee=!1;D(),S();var he=B(),pe=null;if(he){if(r.number==="BigNumber")pe=new m(he);else if(r.number==="Fraction")try{pe=new g(he)}catch{pe=parseFloat(he)}else pe=parseFloat(he);S(),F("*")?(W=1,ee=!0):F("/")&&(W=-1,ee=!0)}for(var ue=[],Y=1;;){for(S();C==="(";)ue.push(W),Y*=W,W=1,D(),S();var K=void 0;if(C){var fe=C;if(K=O(),K===null)throw new SyntaxError('Unexpected "'+fe+'" in "'+w+'" at index '+x.toString())}else break;var me=z(K);if(me===null)throw new SyntaxError('Unit "'+K+'" not found.');var be=W*Y;if(S(),F("^")){S();var Se=B();if(Se===null)throw new SyntaxError('In "'+G+'", "^" must be followed by a floating-point number');be*=Se}te.units.push({unit:me.unit,prefix:me.prefix,power:be});for(var xe=0;xe<q.length;xe++)te.dimensions[xe]+=(me.unit.dimensions[xe]||0)*be;for(S();C===")";){if(ue.length===0)throw new SyntaxError('Unmatched ")" in "'+w+'" at index '+x.toString());Y/=ue.pop(),D(),S()}if(ee=!1,F("*")?(W=1,ee=!0):F("/")?(W=-1,ee=!0):W=1,me.unit.base){var Ce=me.unit.base.key;V.auto[Ce]={unit:me.unit,prefix:me.prefix}}}if(S(),C)throw new SyntaxError('Could not parse: "'+G+'"');if(ee)throw new SyntaxError('Trailing characters: "'+G+'"');if(ue.length!==0)throw new SyntaxError('Unmatched "(" in "'+w+'"');if(te.units.length===0&&!X.allowNoUnits)throw new SyntaxError('"'+G+'" contains no units');return te.value=pe!==void 0?te._normalize(pe):null,te},y.prototype.clone=function(){var G=new y;G.fixPrefix=this.fixPrefix,G.skipAutomaticSimplification=this.skipAutomaticSimplification,G.value=Je(this.value),G.dimensions=this.dimensions.slice(0),G.units=[];for(var X=0;X<this.units.length;X++){G.units[X]={};for(var te in this.units[X])ze(this.units[X],te)&&(G.units[X][te]=this.units[X][te])}return G},y.prototype.valueType=function(){return Bt(this.value)},y.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},y.prototype._normalize=function(G){if(G==null||this.units.length===0)return G;for(var X=G,te=y._getNumberConverter(Bt(G)),W=0;W<this.units.length;W++){var ee=te(this.units[W].unit.value),he=te(this.units[W].prefix.value),pe=te(this.units[W].power);X=f(X,h(f(ee,he),pe))}return X},y.prototype._denormalize=function(G,X){if(G==null||this.units.length===0)return G;for(var te=G,W=y._getNumberConverter(Bt(G)),ee=0;ee<this.units.length;ee++){var he=W(this.units[ee].unit.value),pe=W(this.units[ee].prefix.value),ue=W(this.units[ee].power);te=v(te,h(f(he,pe),ue))}return te};var z=cs(G=>{if(ze(L,G)){var X=L[G],te=X.prefixes[""];return{unit:X,prefix:te}}for(var W in L)if(ze(L,W)&&o_(G,W)){var ee=L[W],he=G.length-W.length,pe=G.substring(0,he),ue=ze(ee.prefixes,pe)?ee.prefixes[pe]:void 0;if(ue!==void 0)return{unit:ee,prefix:ue}}return null},{hasher:G=>G[0],limit:100});y.isValuelessUnit=function(G){return z(G)!==null},y.prototype.hasBase=function(G){if(typeof G=="string"&&(G=_[G]),!G)return!1;for(var X=0;X<q.length;X++)if(Math.abs((this.dimensions[X]||0)-(G.dimensions[X]||0))>1e-12)return!1;return!0},y.prototype.equalBase=function(G){for(var X=0;X<q.length;X++)if(Math.abs((this.dimensions[X]||0)-(G.dimensions[X]||0))>1e-12)return!1;return!0},y.prototype.equals=function(G){return this.equalBase(G)&&i(this.value,G.value)},y.prototype.multiply=function(G){for(var X=this.clone(),te=zn(G)?G:new y(G),W=0;W<q.length;W++)X.dimensions[W]=(this.dimensions[W]||0)+(te.dimensions[W]||0);for(var ee=0;ee<te.units.length;ee++){var he=$c({},te.units[ee]);X.units.push(he)}if(this.value!==null||te.value!==null){var pe=this.value===null?this._normalize(1):this.value,ue=te.value===null?te._normalize(1):te.value;X.value=f(pe,ue)}else X.value=null;return zn(G)&&(X.skipAutomaticSimplification=!1),N(X)},y.prototype.divideInto=function(G){return new y(G).divide(this)},y.prototype.divide=function(G){for(var X=this.clone(),te=zn(G)?G:new y(G),W=0;W<q.length;W++)X.dimensions[W]=(this.dimensions[W]||0)-(te.dimensions[W]||0);for(var ee=0;ee<te.units.length;ee++){var he=$c($c({},te.units[ee]),{},{power:-te.units[ee].power});X.units.push(he)}if(this.value!==null||te.value!==null){var pe=this.value===null?this._normalize(1):this.value,ue=te.value===null?te._normalize(1):te.value;X.value=v(pe,ue)}else X.value=null;return zn(G)&&(X.skipAutomaticSimplification=!1),N(X)},y.prototype.pow=function(G){for(var X=this.clone(),te=0;te<q.length;te++)X.dimensions[te]=(this.dimensions[te]||0)*G;for(var W=0;W<X.units.length;W++)X.units[W].power*=G;return X.value!==null?X.value=h(X.value,G):X.value=null,X.skipAutomaticSimplification=!1,N(X)};function N(G){return G.equalBase(_.NONE)&&G.value!==null&&!r.predictable?G.value:G}y.prototype.abs=function(){var G=this.clone();if(G.value!==null)if(G._isDerived()||G.units[0].unit.offset===0)G.value=n(G.value);else{var X=G._numberConverter(),te=X(G.units[0].unit.value),W=X(G.units[0].unit.offset),ee=f(te,W);G.value=s(n(a(G.value,ee)),ee)}for(var he in G.units)(G.units[he].unit.name==="VA"||G.units[he].unit.name==="VAR")&&(G.units[he].unit=L.W);return G},y.prototype.to=function(G){var X=this.value===null?this._normalize(1):this.value,te;if(typeof G=="string")te=y.parse(G);else if(zn(G))te=G.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(te))throw new Error("Units do not match ('".concat(te.toString(),"' != '").concat(this.toString(),"')"));if(te.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units[0].unit.offset===te.units[0].unit.offset)te.value=Je(X);else{var W=y._getNumberConverter(Bt(X)),ee=W(this.units[0].unit.value),he=W(this.units[0].unit.offset),pe=f(ee,he),ue=W(te.units[0].unit.value),Y=W(te.units[0].unit.offset),K=f(ue,Y);te.value=s(a(X,pe),K)}return te.fixPrefix=!0,te.skipAutomaticSimplification=!0,te},y.prototype.toNumber=function(G){return b(this.toNumeric(G))},y.prototype.toNumeric=function(G){var X;return G?X=this.to(G):X=this.clone(),X._isDerived()||X.units.length===0?X._denormalize(X.value):X._denormalize(X.value,X.units[0].prefix.value)},y.prototype.toString=function(){return this.format()},y.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},y.fromJSON=function(G){var X=new y(G.value,G.unit);return X.fixPrefix=G.fixPrefix||!1,X},y.prototype.valueOf=y.prototype.toString,y.prototype.simplify=function(){var G=this.clone(),X=[],te;for(var W in Q)if(ze(Q,W)&&G.hasBase(_[W])){te=W;break}if(te==="NONE")G.units=[];else{var ee;if(te&&ze(Q,te)&&(ee=Q[te]),ee)G.units=[{unit:ee.unit,prefix:ee.prefix,power:1}];else{for(var he=!1,pe=0;pe<q.length;pe++){var ue=q[pe];Math.abs(G.dimensions[pe]||0)>1e-12&&(ze(Q,ue)?X.push({unit:Q[ue].unit,prefix:Q[ue].prefix,power:G.dimensions[pe]||0}):he=!0)}X.length<G.units.length&&!he&&(G.units=X)}}return G},y.prototype.toSI=function(){for(var G=this.clone(),X=[],te=0;te<q.length;te++){var W=q[te];if(Math.abs(G.dimensions[te]||0)>1e-12)if(ze(V.si,W))X.push({unit:V.si[W].unit,prefix:V.si[W].prefix,power:G.dimensions[te]||0});else throw new Error("Cannot express custom unit "+W+" in SI units")}return G.units=X,G.fixPrefix=!0,G.skipAutomaticSimplification=!0,G},y.prototype.formatUnits=function(){for(var G="",X="",te=0,W=0,ee=0;ee<this.units.length;ee++)this.units[ee].power>0?(te++,G+=" "+this.units[ee].prefix.name+this.units[ee].unit.name,Math.abs(this.units[ee].power-1)>1e-15&&(G+="^"+this.units[ee].power)):this.units[ee].power<0&&W++;if(W>0)for(var he=0;he<this.units.length;he++)this.units[he].power<0&&(te>0?(X+=" "+this.units[he].prefix.name+this.units[he].unit.name,Math.abs(this.units[he].power+1)>1e-15&&(X+="^"+-this.units[he].power)):(X+=" "+this.units[he].prefix.name+this.units[he].unit.name,X+="^"+this.units[he].power));G=G.substr(1),X=X.substr(1),te>1&&W>0&&(G="("+G+")"),W>1&&te>0&&(X="("+X+")");var pe=G;return te>0&&W>0&&(pe+=" / "),pe+=X,pe},y.prototype.format=function(G){var X=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),te=!1;typeof X.value<"u"&&X.value!==null&&Wn(X.value)&&(te=Math.abs(X.value.re)<1e-14);for(var W in X.units)ze(X.units,W)&&X.units[W].unit&&(X.units[W].unit.name==="VA"&&te?X.units[W].unit=L.VAR:X.units[W].unit.name==="VAR"&&!te&&(X.units[W].unit=L.VA));X.units.length===1&&!X.fixPrefix&&Math.abs(X.units[0].power-Math.round(X.units[0].power))<1e-14&&(X.units[0].prefix=X._bestPrefix());var ee=X._denormalize(X.value),he=X.value!==null?c(ee,G||{}):"",pe=X.formatUnits();return X.value&&Wn(X.value)&&(he="("+he+")"),pe.length>0&&he.length>0&&(he+=" "),he+=pe,he},y.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var G=this.value!==null?n(this.value):0,X=n(this.units[0].unit.value),te=this.units[0].prefix;if(G===0)return te;var W=this.units[0].power,ee=Math.log(G/Math.pow(te.value*X,W))/Math.LN10-1.2;if(ee>-2.200001&&ee<1.800001)return te;ee=Math.abs(ee);var he=this.units[0].unit.prefixes;for(var pe in he)if(ze(he,pe)){var ue=he[pe];if(ue.scientific){var Y=Math.abs(Math.log(G/Math.pow(ue.value*X,W))/Math.LN10-1.2);(Y<ee||Y===ee&&ue.name.length<te.name.length)&&(te=ue,ee=Y)}}return te},y.prototype.splitUnit=function(G){for(var X=this.clone(),te=[],W=0;W<G.length&&(X=X.to(G[W]),W!==G.length-1);W++){var ee=X.toNumeric(),he=o(ee),pe=void 0,ue=i(he,ee);ue?pe=he:pe=u(X.toNumeric());var Y=new y(pe,G[W].toString());te.push(Y),X=s(X,Y)}for(var K=0,fe=0;fe<te.length;fe++)K=a(K,te[fe].value);return i(K,this.value)&&(X.value=0),te.push(X),te};var T={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};T.SHORTLONG=ur({},T.SHORT,T.LONG),T.BINARY_SHORT=ur({},T.BINARY_SHORT_SI,T.BINARY_SHORT_IEC),T.BINARY_LONG=ur({},T.BINARY_LONG_SI,T.BINARY_LONG_IEC);var q=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],_={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var I in _)ze(_,I)&&(_[I].key=I);var U={},j={name:"",base:U,value:1,offset:0,dimensions:q.map(G=>0)},L={meter:{name:"meter",base:_.LENGTH,prefixes:T.LONG,value:1,offset:0},inch:{name:"inch",base:_.LENGTH,prefixes:T.NONE,value:.0254,offset:0},foot:{name:"foot",base:_.LENGTH,prefixes:T.NONE,value:.3048,offset:0},yard:{name:"yard",base:_.LENGTH,prefixes:T.NONE,value:.9144,offset:0},mile:{name:"mile",base:_.LENGTH,prefixes:T.NONE,value:1609.344,offset:0},link:{name:"link",base:_.LENGTH,prefixes:T.NONE,value:.201168,offset:0},rod:{name:"rod",base:_.LENGTH,prefixes:T.NONE,value:5.0292,offset:0},chain:{name:"chain",base:_.LENGTH,prefixes:T.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:_.LENGTH,prefixes:T.NONE,value:1e-10,offset:0},m:{name:"m",base:_.LENGTH,prefixes:T.SHORT,value:1,offset:0},in:{name:"in",base:_.LENGTH,prefixes:T.NONE,value:.0254,offset:0},ft:{name:"ft",base:_.LENGTH,prefixes:T.NONE,value:.3048,offset:0},yd:{name:"yd",base:_.LENGTH,prefixes:T.NONE,value:.9144,offset:0},mi:{name:"mi",base:_.LENGTH,prefixes:T.NONE,value:1609.344,offset:0},li:{name:"li",base:_.LENGTH,prefixes:T.NONE,value:.201168,offset:0},rd:{name:"rd",base:_.LENGTH,prefixes:T.NONE,value:5.02921,offset:0},ch:{name:"ch",base:_.LENGTH,prefixes:T.NONE,value:20.1168,offset:0},mil:{name:"mil",base:_.LENGTH,prefixes:T.NONE,value:254e-7,offset:0},m2:{name:"m2",base:_.SURFACE,prefixes:T.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:_.SURFACE,prefixes:T.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:_.SURFACE,prefixes:T.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:_.SURFACE,prefixes:T.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:_.SURFACE,prefixes:T.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:_.SURFACE,prefixes:T.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:_.SURFACE,prefixes:T.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:_.SURFACE,prefixes:T.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:_.SURFACE,prefixes:T.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:_.SURFACE,prefixes:T.NONE,value:1e4,offset:0},m3:{name:"m3",base:_.VOLUME,prefixes:T.CUBIC,value:1,offset:0},L:{name:"L",base:_.VOLUME,prefixes:T.SHORT,value:.001,offset:0},l:{name:"l",base:_.VOLUME,prefixes:T.SHORT,value:.001,offset:0},litre:{name:"litre",base:_.VOLUME,prefixes:T.LONG,value:.001,offset:0},cuin:{name:"cuin",base:_.VOLUME,prefixes:T.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:_.VOLUME,prefixes:T.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:_.VOLUME,prefixes:T.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:_.VOLUME,prefixes:T.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:_.VOLUME,prefixes:T.NONE,value:15e-6,offset:0},drop:{name:"drop",base:_.VOLUME,prefixes:T.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:_.VOLUME,prefixes:T.NONE,value:5e-8,offset:0},minim:{name:"minim",base:_.VOLUME,prefixes:T.NONE,value:6161152e-14,offset:0},fluiddram:{name:"fluiddram",base:_.VOLUME,prefixes:T.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:_.VOLUME,prefixes:T.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:_.VOLUME,prefixes:T.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:_.VOLUME,prefixes:T.NONE,value:1e-6,offset:0},cup:{name:"cup",base:_.VOLUME,prefixes:T.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:_.VOLUME,prefixes:T.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:_.VOLUME,prefixes:T.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:_.VOLUME,prefixes:T.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:_.VOLUME,prefixes:T.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:_.VOLUME,prefixes:T.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:_.VOLUME,prefixes:T.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:_.VOLUME,prefixes:T.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:_.VOLUME,prefixes:T.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:_.VOLUME,prefixes:T.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:_.VOLUME,prefixes:T.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:_.VOLUME,prefixes:T.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:_.VOLUME,prefixes:T.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:_.VOLUME,prefixes:T.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:_.VOLUME,prefixes:T.NONE,value:.1173478,offset:0},obl:{name:"obl",base:_.VOLUME,prefixes:T.NONE,value:.1589873,offset:0},g:{name:"g",base:_.MASS,prefixes:T.SHORT,value:.001,offset:0},gram:{name:"gram",base:_.MASS,prefixes:T.LONG,value:.001,offset:0},ton:{name:"ton",base:_.MASS,prefixes:T.SHORT,value:907.18474,offset:0},t:{name:"t",base:_.MASS,prefixes:T.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:_.MASS,prefixes:T.LONG,value:1e3,offset:0},grain:{name:"grain",base:_.MASS,prefixes:T.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:_.MASS,prefixes:T.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:_.MASS,prefixes:T.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:_.MASS,prefixes:T.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:_.MASS,prefixes:T.NONE,value:45.359237,offset:0},stick:{name:"stick",base:_.MASS,prefixes:T.NONE,value:.115,offset:0},stone:{name:"stone",base:_.MASS,prefixes:T.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:_.MASS,prefixes:T.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:_.MASS,prefixes:T.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:_.MASS,prefixes:T.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:_.MASS,prefixes:T.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:_.MASS,prefixes:T.NONE,value:45.359237,offset:0},s:{name:"s",base:_.TIME,prefixes:T.SHORT,value:1,offset:0},min:{name:"min",base:_.TIME,prefixes:T.NONE,value:60,offset:0},h:{name:"h",base:_.TIME,prefixes:T.NONE,value:3600,offset:0},second:{name:"second",base:_.TIME,prefixes:T.LONG,value:1,offset:0},sec:{name:"sec",base:_.TIME,prefixes:T.LONG,value:1,offset:0},minute:{name:"minute",base:_.TIME,prefixes:T.NONE,value:60,offset:0},hour:{name:"hour",base:_.TIME,prefixes:T.NONE,value:3600,offset:0},day:{name:"day",base:_.TIME,prefixes:T.NONE,value:86400,offset:0},week:{name:"week",base:_.TIME,prefixes:T.NONE,value:7*86400,offset:0},month:{name:"month",base:_.TIME,prefixes:T.NONE,value:2629800,offset:0},year:{name:"year",base:_.TIME,prefixes:T.NONE,value:31557600,offset:0},decade:{name:"decade",base:_.TIME,prefixes:T.NONE,value:315576e3,offset:0},century:{name:"century",base:_.TIME,prefixes:T.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:_.TIME,prefixes:T.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:_.FREQUENCY,prefixes:T.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:_.FREQUENCY,prefixes:T.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:_.ANGLE,prefixes:T.SHORT,value:1,offset:0},radian:{name:"radian",base:_.ANGLE,prefixes:T.LONG,value:1,offset:0},deg:{name:"deg",base:_.ANGLE,prefixes:T.SHORT,value:null,offset:0},degree:{name:"degree",base:_.ANGLE,prefixes:T.LONG,value:null,offset:0},grad:{name:"grad",base:_.ANGLE,prefixes:T.SHORT,value:null,offset:0},gradian:{name:"gradian",base:_.ANGLE,prefixes:T.LONG,value:null,offset:0},cycle:{name:"cycle",base:_.ANGLE,prefixes:T.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:_.ANGLE,prefixes:T.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:_.ANGLE,prefixes:T.NONE,value:null,offset:0},A:{name:"A",base:_.CURRENT,prefixes:T.SHORT,value:1,offset:0},ampere:{name:"ampere",base:_.CURRENT,prefixes:T.LONG,value:1,offset:0},K:{name:"K",base:_.TEMPERATURE,prefixes:T.SHORT,value:1,offset:0},degC:{name:"degC",base:_.TEMPERATURE,prefixes:T.SHORT,value:1,offset:273.15},degF:{name:"degF",base:_.TEMPERATURE,prefixes:T.SHORT,value:1/1.8,offset:459.67},degR:{name:"degR",base:_.TEMPERATURE,prefixes:T.SHORT,value:1/1.8,offset:0},kelvin:{name:"kelvin",base:_.TEMPERATURE,prefixes:T.LONG,value:1,offset:0},celsius:{name:"celsius",base:_.TEMPERATURE,prefixes:T.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:_.TEMPERATURE,prefixes:T.LONG,value:1/1.8,offset:459.67},rankine:{name:"rankine",base:_.TEMPERATURE,prefixes:T.LONG,value:1/1.8,offset:0},mol:{name:"mol",base:_.AMOUNT_OF_SUBSTANCE,prefixes:T.SHORT,value:1,offset:0},mole:{name:"mole",base:_.AMOUNT_OF_SUBSTANCE,prefixes:T.LONG,value:1,offset:0},cd:{name:"cd",base:_.LUMINOUS_INTENSITY,prefixes:T.SHORT,value:1,offset:0},candela:{name:"candela",base:_.LUMINOUS_INTENSITY,prefixes:T.LONG,value:1,offset:0},N:{name:"N",base:_.FORCE,prefixes:T.SHORT,value:1,offset:0},newton:{name:"newton",base:_.FORCE,prefixes:T.LONG,value:1,offset:0},dyn:{name:"dyn",base:_.FORCE,prefixes:T.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:_.FORCE,prefixes:T.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:_.FORCE,prefixes:T.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:_.FORCE,prefixes:T.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:_.FORCE,prefixes:T.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:_.FORCE,prefixes:T.NONE,value:9.80665,offset:0},J:{name:"J",base:_.ENERGY,prefixes:T.SHORT,value:1,offset:0},joule:{name:"joule",base:_.ENERGY,prefixes:T.SHORT,value:1,offset:0},erg:{name:"erg",base:_.ENERGY,prefixes:T.NONE,value:1e-7,offset:0},Wh:{name:"Wh",base:_.ENERGY,prefixes:T.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:_.ENERGY,prefixes:T.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:_.ENERGY,prefixes:T.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:_.ENERGY,prefixes:T.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:_.POWER,prefixes:T.SHORT,value:1,offset:0},watt:{name:"watt",base:_.POWER,prefixes:T.LONG,value:1,offset:0},hp:{name:"hp",base:_.POWER,prefixes:T.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:_.POWER,prefixes:T.SHORT,value:p.I,offset:0},VA:{name:"VA",base:_.POWER,prefixes:T.SHORT,value:1,offset:0},Pa:{name:"Pa",base:_.PRESSURE,prefixes:T.SHORT,value:1,offset:0},psi:{name:"psi",base:_.PRESSURE,prefixes:T.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:_.PRESSURE,prefixes:T.NONE,value:101325,offset:0},bar:{name:"bar",base:_.PRESSURE,prefixes:T.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:_.PRESSURE,prefixes:T.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:_.PRESSURE,prefixes:T.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:_.PRESSURE,prefixes:T.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:_.PRESSURE,prefixes:T.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:_.ELECTRIC_CHARGE,prefixes:T.LONG,value:1,offset:0},C:{name:"C",base:_.ELECTRIC_CHARGE,prefixes:T.SHORT,value:1,offset:0},farad:{name:"farad",base:_.ELECTRIC_CAPACITANCE,prefixes:T.LONG,value:1,offset:0},F:{name:"F",base:_.ELECTRIC_CAPACITANCE,prefixes:T.SHORT,value:1,offset:0},volt:{name:"volt",base:_.ELECTRIC_POTENTIAL,prefixes:T.LONG,value:1,offset:0},V:{name:"V",base:_.ELECTRIC_POTENTIAL,prefixes:T.SHORT,value:1,offset:0},ohm:{name:"ohm",base:_.ELECTRIC_RESISTANCE,prefixes:T.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:_.ELECTRIC_INDUCTANCE,prefixes:T.LONG,value:1,offset:0},H:{name:"H",base:_.ELECTRIC_INDUCTANCE,prefixes:T.SHORT,value:1,offset:0},siemens:{name:"siemens",base:_.ELECTRIC_CONDUCTANCE,prefixes:T.LONG,value:1,offset:0},S:{name:"S",base:_.ELECTRIC_CONDUCTANCE,prefixes:T.SHORT,value:1,offset:0},weber:{name:"weber",base:_.MAGNETIC_FLUX,prefixes:T.LONG,value:1,offset:0},Wb:{name:"Wb",base:_.MAGNETIC_FLUX,prefixes:T.SHORT,value:1,offset:0},tesla:{name:"tesla",base:_.MAGNETIC_FLUX_DENSITY,prefixes:T.LONG,value:1,offset:0},T:{name:"T",base:_.MAGNETIC_FLUX_DENSITY,prefixes:T.SHORT,value:1,offset:0},b:{name:"b",base:_.BIT,prefixes:T.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:_.BIT,prefixes:T.BINARY_LONG,value:1,offset:0},B:{name:"B",base:_.BIT,prefixes:T.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:_.BIT,prefixes:T.BINARY_LONG,value:8,offset:0}},P={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function k(G){if(G.number==="BigNumber"){var X=Rh(m);L.rad.value=new m(1),L.deg.value=X.div(180),L.grad.value=X.div(200),L.cycle.value=X.times(2),L.arcsec.value=X.div(648e3),L.arcmin.value=X.div(10800)}else L.rad.value=1,L.deg.value=Math.PI/180,L.grad.value=Math.PI/200,L.cycle.value=Math.PI*2,L.arcsec.value=Math.PI/648e3,L.arcmin.value=Math.PI/10800;L.radian.value=L.rad.value,L.degree.value=L.deg.value,L.gradian.value=L.grad.value}k(r),t&&t("config",function(G,X){G.number!==X.number&&k(G)});var V={si:{NONE:{unit:j,prefix:T.NONE[""]},LENGTH:{unit:L.m,prefix:T.SHORT[""]},MASS:{unit:L.g,prefix:T.SHORT.k},TIME:{unit:L.s,prefix:T.SHORT[""]},CURRENT:{unit:L.A,prefix:T.SHORT[""]},TEMPERATURE:{unit:L.K,prefix:T.SHORT[""]},LUMINOUS_INTENSITY:{unit:L.cd,prefix:T.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:L.mol,prefix:T.SHORT[""]},ANGLE:{unit:L.rad,prefix:T.SHORT[""]},BIT:{unit:L.bits,prefix:T.SHORT[""]},FORCE:{unit:L.N,prefix:T.SHORT[""]},ENERGY:{unit:L.J,prefix:T.SHORT[""]},POWER:{unit:L.W,prefix:T.SHORT[""]},PRESSURE:{unit:L.Pa,prefix:T.SHORT[""]},ELECTRIC_CHARGE:{unit:L.C,prefix:T.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:L.F,prefix:T.SHORT[""]},ELECTRIC_POTENTIAL:{unit:L.V,prefix:T.SHORT[""]},ELECTRIC_RESISTANCE:{unit:L.ohm,prefix:T.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:L.H,prefix:T.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:L.S,prefix:T.SHORT[""]},MAGNETIC_FLUX:{unit:L.Wb,prefix:T.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:L.T,prefix:T.SHORT[""]},FREQUENCY:{unit:L.Hz,prefix:T.SHORT[""]}}};V.cgs=JSON.parse(JSON.stringify(V.si)),V.cgs.LENGTH={unit:L.m,prefix:T.SHORT.c},V.cgs.MASS={unit:L.g,prefix:T.SHORT[""]},V.cgs.FORCE={unit:L.dyn,prefix:T.SHORT[""]},V.cgs.ENERGY={unit:L.erg,prefix:T.NONE[""]},V.us=JSON.parse(JSON.stringify(V.si)),V.us.LENGTH={unit:L.ft,prefix:T.NONE[""]},V.us.MASS={unit:L.lbm,prefix:T.NONE[""]},V.us.TEMPERATURE={unit:L.degF,prefix:T.NONE[""]},V.us.FORCE={unit:L.lbf,prefix:T.NONE[""]},V.us.ENERGY={unit:L.BTU,prefix:T.BTU[""]},V.us.POWER={unit:L.hp,prefix:T.NONE[""]},V.us.PRESSURE={unit:L.psi,prefix:T.NONE[""]},V.auto=JSON.parse(JSON.stringify(V.si));var Q=V.auto;y.setUnitSystem=function(G){if(ze(V,G))Q=V[G];else throw new Error("Unit system "+G+" does not exist. Choices are: "+Object.keys(V).join(", "))},y.getUnitSystem=function(){for(var G in V)if(ze(V,G)&&V[G]===Q)return G},y.typeConverters={BigNumber:function(X){return new m(X+"")},Fraction:function(X){return new g(X)},Complex:function(X){return X},number:function(X){return X}},y.prototype._numberConverter=function(){var G=y.typeConverters[this.valueType()];if(G)return G;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},y._getNumberConverter=function(G){if(!y.typeConverters[G])throw new TypeError('Unsupported type "'+G+'"');return y.typeConverters[G]};for(var ne in L)if(ze(L,ne)){var re=L[ne];re.dimensions=re.base.dimensions}for(var ie in P)if(ze(P,ie)){var de=L[P[ie]],ve={};for(var ce in de)ze(de,ce)&&(ve[ce]=de[ce]);ve.name=ie,L[ie]=ve}y.isValidAlpha=function(X){return/^[a-zA-Z]$/.test(X)};function ae(G){for(var X=0;X<G.length;X++){if(C=G.charAt(X),X===0&&!y.isValidAlpha(C))throw new Error('Invalid unit name (must begin with alpha character): "'+G+'"');if(X>0&&!(y.isValidAlpha(C)||A(C)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+G+'"')}}return y.createUnit=function(G,X){if(typeof G!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(X&&X.override){for(var te in G)if(ze(G,te)&&y.deleteUnit(te),G[te].aliases)for(var W=0;W<G[te].aliases.length;W++)y.deleteUnit(G[te].aliases[W])}var ee;for(var he in G)ze(G,he)&&(ee=y.createUnitSingle(he,G[he]));return ee},y.createUnitSingle=function(G,X){if((typeof X>"u"||X===null)&&(X={}),typeof G!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(ze(L,G))throw new Error('Cannot create unit "'+G+'": a unit with that name already exists');ae(G);var te=null,W=[],ee=0,he,pe,ue;if(X&&X.type==="Unit")te=X.clone();else if(typeof X=="string")X!==""&&(he=X);else if(typeof X=="object")he=X.definition,pe=X.prefixes,ee=X.offset,ue=X.baseName,X.aliases&&(W=X.aliases.valueOf());else throw new TypeError('Cannot create unit "'+G+'" from "'+X.toString()+'": expecting "string" or "Unit" or "Object"');if(W){for(var Y=0;Y<W.length;Y++)if(ze(L,W[Y]))throw new Error('Cannot create alias "'+W[Y]+'": a unit with that name already exists')}if(he&&typeof he=="string"&&!te)try{te=y.parse(he,{allowNoUnits:!0})}catch(Ct){throw Ct.message='Could not create unit "'+G+'" from "'+he+'": '+Ct.message,Ct}else he&&he.type==="Unit"&&(te=he.clone());W=W||[],ee=ee||0,pe&&pe.toUpperCase?pe=T[pe.toUpperCase()]||T.NONE:pe=T.NONE;var K={};if(te){K={name:G,value:te.value,dimensions:te.dimensions.slice(0),prefixes:pe,offset:ee};var Se=!1;for(var xe in _)if(ze(_,xe)){for(var Ce=!0,_e=0;_e<q.length;_e++)if(Math.abs((K.dimensions[_e]||0)-(_[xe].dimensions[_e]||0))>1e-12){Ce=!1;break}if(Ce){Se=!0,K.base=_[xe];break}}if(!Se){ue=ue||G+"_STUFF";var ke={dimensions:te.dimensions.slice(0)};ke.key=ue,_[ue]=ke,Q[ue]={unit:K,prefix:T.NONE[""]},K.base=_[ue]}}else{if(ue=ue||G+"_STUFF",q.indexOf(ue)>=0)throw new Error('Cannot create new base unit "'+G+'": a base unit with that name already exists (and cannot be overridden)');q.push(ue);for(var fe in _)ze(_,fe)&&(_[fe].dimensions[q.length-1]=0);for(var me={dimensions:[]},be=0;be<q.length;be++)me.dimensions[be]=0;me.dimensions[q.length-1]=1,me.key=ue,_[ue]=me,K={name:G,value:1,dimensions:_[ue].dimensions.slice(0),prefixes:pe,offset:ee,base:_[ue]},Q[ue]={unit:K,prefix:T.NONE[""]}}y.UNITS[G]=K;for(var Ye=0;Ye<W.length;Ye++){var Fe=W[Ye],wt={};for(var et in K)ze(K,et)&&(wt[et]=K[et]);wt.name=Fe,y.UNITS[Fe]=wt}return delete z.cache,new y(null,G)},y.deleteUnit=function(G){delete y.UNITS[G]},y.PREFIXES=T,y.BASE_DIMENSIONS=q,y.BASE_UNITS=_,y.UNIT_SYSTEMS=V,y.UNITS=L,y},{isClass:!0}),iv="unit",u4=["typed","Unit"],l4=Z(iv,u4,e=>{var{typed:t,Unit:r}=e;return t(iv,{Unit:function(s){return s.clone()},string:function(s){return r.isValuelessUnit(s)?new r(null,s):r.parse(s,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(s,f){return new r(s,f)},"number | BigNumber | Fraction":function(s){return new r(s)},"Array | Matrix":t.referToSelf(a=>s=>st(s,a))})}),av="sparse",c4=["typed","SparseMatrix"],f4=Z(av,c4,e=>{var{typed:t,SparseMatrix:r}=e;return t(av,{"":function(){return new r([])},string:function(s){return new r([],s)},"Array | Matrix":function(s){return new r(s)},"Array | Matrix, string":function(s,f){return new r(s,f)}})}),ov="createUnit",h4=["typed","Unit"],d4=Z(ov,h4,e=>{var{typed:t,Unit:r}=e;return t(ov,{"Object, Object":function(s,f){return r.createUnit(s,f)},Object:function(s){return r.createUnit(s,{})},"string, Unit | string | Object, Object":function(s,f,v){var h={};return h[s]=f,r.createUnit(h,v)},"string, Unit | string | Object":function(s,f){var v={};return v[s]=f,r.createUnit(v,{})},string:function(s){var f={};return f[s]={},r.createUnit(f,{})}})}),sv="acos",p4=["typed","config","Complex"],m4=Z(sv,p4,e=>{var{typed:t,config:r,Complex:a}=e;return t(sv,{number:function(f){return f>=-1&&f<=1||r.predictable?Math.acos(f):new a(f,0).acos()},Complex:function(f){return f.acos()},BigNumber:function(f){return f.acos()}})}),uv="acosh",v4=["typed","config","Complex"],g4=Z(uv,v4,e=>{var{typed:t,config:r,Complex:a}=e;return t(uv,{number:function(f){return f>=1||r.predictable?Tb(f):f<=-1?new a(Math.log(Math.sqrt(f*f-1)-f),Math.PI):new a(f,0).acosh()},Complex:function(f){return f.acosh()},BigNumber:function(f){return f.acosh()}})}),lv="acot",y4=["typed","BigNumber"],b4=Z(lv,y4,e=>{var{typed:t,BigNumber:r}=e;return t(lv,{number:Ob,Complex:function(s){return s.acot()},BigNumber:function(s){return new r(1).div(s).atan()}})}),cv="acoth",w4=["typed","config","Complex","BigNumber"],x4=Z(cv,w4,e=>{var{typed:t,config:r,Complex:a,BigNumber:s}=e;return t(cv,{number:function(v){return v>=1||v<=-1||r.predictable?Mb(v):new a(v,0).acoth()},Complex:function(v){return v.acoth()},BigNumber:function(v){return new s(1).div(v).atanh()}})}),fv="acsc",C4=["typed","config","Complex","BigNumber"],S4=Z(fv,C4,e=>{var{typed:t,config:r,Complex:a,BigNumber:s}=e;return t(fv,{number:function(v){return v<=-1||v>=1||r.predictable?Fb(v):new a(v,0).acsc()},Complex:function(v){return v.acsc()},BigNumber:function(v){return new s(1).div(v).asin()}})}),hv="acsch",E4=["typed","BigNumber"],_4=Z(hv,E4,e=>{var{typed:t,BigNumber:r}=e;return t(hv,{number:Pb,Complex:function(s){return s.acsch()},BigNumber:function(s){return new r(1).div(s).asinh()}})}),dv="asec",D4=["typed","config","Complex","BigNumber"],A4=Z(dv,D4,e=>{var{typed:t,config:r,Complex:a,BigNumber:s}=e;return t(dv,{number:function(v){return v<=-1||v>=1||r.predictable?Bb(v):new a(v,0).asec()},Complex:function(v){return v.asec()},BigNumber:function(v){return new s(1).div(v).acos()}})}),pv="asech",N4=["typed","config","Complex","BigNumber"],T4=Z(pv,N4,e=>{var{typed:t,config:r,Complex:a,BigNumber:s}=e;return t(pv,{number:function(v){if(v<=1&&v>=-1||r.predictable){var h=1/v;if(h>0||r.predictable)return Ib(v);var n=Math.sqrt(h*h-1);return new a(Math.log(n-h),Math.PI)}return new a(v,0).asech()},Complex:function(v){return v.asech()},BigNumber:function(v){return new s(1).div(v).acosh()}})}),mv="asin",O4=["typed","config","Complex"],M4=Z(mv,O4,e=>{var{typed:t,config:r,Complex:a}=e;return t(mv,{number:function(f){return f>=-1&&f<=1||r.predictable?Math.asin(f):new a(f,0).asin()},Complex:function(f){return f.asin()},BigNumber:function(f){return f.asin()}})}),F4="asinh",P4=["typed"],B4=Z(F4,P4,e=>{var{typed:t}=e;return t("asinh",{number:Rb,Complex:function(a){return a.asinh()},BigNumber:function(a){return a.asinh()}})}),I4="atan",R4=["typed"],k4=Z(I4,R4,e=>{var{typed:t}=e;return t("atan",{number:function(a){return Math.atan(a)},Complex:function(a){return a.atan()},BigNumber:function(a){return a.atan()}})}),vv="atan2",$4=["typed","matrix","equalScalar","BigNumber","DenseMatrix"],L4=Z(vv,$4,e=>{var{typed:t,matrix:r,equalScalar:a,BigNumber:s,DenseMatrix:f}=e,v=mn({typed:t,equalScalar:a}),h=Er({typed:t}),n=Kb({typed:t,equalScalar:a}),u=dr({typed:t,equalScalar:a}),o=tr({typed:t,DenseMatrix:f}),i=Mt({typed:t,matrix:r});return t(vv,{"number, number":Math.atan2,"BigNumber, BigNumber":(l,c)=>s.atan2(l,c)},i({scalar:"number | BigNumber",SS:n,DS:h,SD:v,Ss:u,sS:o}))}),gv="atanh",z4=["typed","config","Complex"],U4=Z(gv,z4,e=>{var{typed:t,config:r,Complex:a}=e;return t(gv,{number:function(f){return f<=1&&f>=-1||r.predictable?kb(f):new a(f,0).atanh()},Complex:function(f){return f.atanh()},BigNumber:function(f){return f.atanh()}})}),uo=Z("trigUnit",["typed"],e=>{var{typed:t}=e;return{Unit:t.referToSelf(r=>a=>{if(!a.hasBase(a.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return t.find(r,a.valueType())(a.value)})}}),yv="cos",j4=["typed"],q4=Z(yv,j4,e=>{var{typed:t}=e,r=uo({typed:t});return t(yv,{number:Math.cos,"Complex | BigNumber":a=>a.cos()},r)}),bv="cosh",H4=["typed"],V4=Z(bv,H4,e=>{var{typed:t}=e;return t(bv,{number:QE,"Complex | BigNumber":r=>r.cosh()})}),wv="cot",G4=["typed","BigNumber"],W4=Z(wv,G4,e=>{var{typed:t,BigNumber:r}=e,a=uo({typed:t});return t(wv,{number:$b,Complex:s=>s.cot(),BigNumber:s=>new r(1).div(s.tan())},a)}),xv="coth",Y4=["typed","BigNumber"],X4=Z(xv,Y4,e=>{var{typed:t,BigNumber:r}=e;return t(xv,{number:Lb,Complex:a=>a.coth(),BigNumber:a=>new r(1).div(a.tanh())})}),Cv="csc",K4=["typed","BigNumber"],J4=Z(Cv,K4,e=>{var{typed:t,BigNumber:r}=e,a=uo({typed:t});return t(Cv,{number:zb,Complex:s=>s.csc(),BigNumber:s=>new r(1).div(s.sin())},a)}),Sv="csch",Z4=["typed","BigNumber"],Q4=Z(Sv,Z4,e=>{var{typed:t,BigNumber:r}=e;return t(Sv,{number:Ub,Complex:a=>a.csch(),BigNumber:a=>new r(1).div(a.sinh())})}),Ev="sec",eF=["typed","BigNumber"],tF=Z(Ev,eF,e=>{var{typed:t,BigNumber:r}=e,a=uo({typed:t});return t(Ev,{number:jb,Complex:s=>s.sec(),BigNumber:s=>new r(1).div(s.cos())},a)}),_v="sech",rF=["typed","BigNumber"],nF=Z(_v,rF,e=>{var{typed:t,BigNumber:r}=e;return t(_v,{number:qb,Complex:a=>a.sech(),BigNumber:a=>new r(1).div(a.cosh())})}),Dv="sin",iF=["typed"],aF=Z(Dv,iF,e=>{var{typed:t}=e,r=uo({typed:t});return t(Dv,{number:Math.sin,"Complex | BigNumber":a=>a.sin()},r)}),Av="sinh",oF=["typed"],sF=Z(Av,oF,e=>{var{typed:t}=e;return t(Av,{number:Hb,"Complex | BigNumber":r=>r.sinh()})}),Nv="tan",uF=["typed"],lF=Z(Nv,uF,e=>{var{typed:t}=e,r=uo({typed:t});return t(Nv,{number:Math.tan,"Complex | BigNumber":a=>a.tan()},r)}),cF="tanh",fF=["typed"],hF=Z(cF,fF,e=>{var{typed:t}=e;return t("tanh",{number:t_,"Complex | BigNumber":r=>r.tanh()})}),Tv="setCartesian",dF=["typed","size","subset","compareNatural","Index","DenseMatrix"],pF=Z(Tv,dF,e=>{var{typed:t,size:r,subset:a,compareNatural:s,Index:f,DenseMatrix:v}=e;return t(Tv,{"Array | Matrix, Array | Matrix":function(n,u){var o=[];if(a(r(n),new f(0))!==0&&a(r(u),new f(0))!==0){var i=yt(Array.isArray(n)?n:n.toArray()).sort(s),l=yt(Array.isArray(u)?u:u.toArray()).sort(s);o=[];for(var c=0;c<i.length;c++)for(var d=0;d<l.length;d++)o.push([i[c],l[d]])}return Array.isArray(n)&&Array.isArray(u)?o:new v(o)}})}),Ov="setDifference",mF=["typed","size","subset","compareNatural","Index","DenseMatrix"],vF=Z(Ov,mF,e=>{var{typed:t,size:r,subset:a,compareNatural:s,Index:f,DenseMatrix:v}=e;return t(Ov,{"Array | Matrix, Array | Matrix":function(n,u){var o;if(a(r(n),new f(0))===0)o=[];else{if(a(r(u),new f(0))===0)return yt(n.toArray());var i=Ga(yt(Array.isArray(n)?n:n.toArray()).sort(s)),l=Ga(yt(Array.isArray(u)?u:u.toArray()).sort(s));o=[];for(var c,d=0;d<i.length;d++){c=!1;for(var p=0;p<l.length;p++)if(s(i[d].value,l[p].value)===0&&i[d].identifier===l[p].identifier){c=!0;break}c||o.push(i[d])}}return Array.isArray(n)&&Array.isArray(u)?Bu(o):new v(Bu(o))}})}),Mv="setDistinct",gF=["typed","size","subset","compareNatural","Index","DenseMatrix"],yF=Z(Mv,gF,e=>{var{typed:t,size:r,subset:a,compareNatural:s,Index:f,DenseMatrix:v}=e;return t(Mv,{"Array | Matrix":function(n){var u;if(a(r(n),new f(0))===0)u=[];else{var o=yt(Array.isArray(n)?n:n.toArray()).sort(s);u=[],u.push(o[0]);for(var i=1;i<o.length;i++)s(o[i],o[i-1])!==0&&u.push(o[i])}return Array.isArray(n)?u:new v(u)}})}),Fv="setIntersect",bF=["typed","size","subset","compareNatural","Index","DenseMatrix"],wF=Z(Fv,bF,e=>{var{typed:t,size:r,subset:a,compareNatural:s,Index:f,DenseMatrix:v}=e;return t(Fv,{"Array | Matrix, Array | Matrix":function(n,u){var o;if(a(r(n),new f(0))===0||a(r(u),new f(0))===0)o=[];else{var i=Ga(yt(Array.isArray(n)?n:n.toArray()).sort(s)),l=Ga(yt(Array.isArray(u)?u:u.toArray()).sort(s));o=[];for(var c=0;c<i.length;c++)for(var d=0;d<l.length;d++)if(s(i[c].value,l[d].value)===0&&i[c].identifier===l[d].identifier){o.push(i[c]);break}}return Array.isArray(n)&&Array.isArray(u)?Bu(o):new v(Bu(o))}})}),Pv="setIsSubset",xF=["typed","size","subset","compareNatural","Index"],CF=Z(Pv,xF,e=>{var{typed:t,size:r,subset:a,compareNatural:s,Index:f}=e;return t(Pv,{"Array | Matrix, Array | Matrix":function(h,n){if(a(r(h),new f(0))===0)return!0;if(a(r(n),new f(0))===0)return!1;for(var u=Ga(yt(Array.isArray(h)?h:h.toArray()).sort(s)),o=Ga(yt(Array.isArray(n)?n:n.toArray()).sort(s)),i,l=0;l<u.length;l++){i=!1;for(var c=0;c<o.length;c++)if(s(u[l].value,o[c].value)===0&&u[l].identifier===o[c].identifier){i=!0;break}if(i===!1)return!1}return!0}})}),Bv="setMultiplicity",SF=["typed","size","subset","compareNatural","Index"],EF=Z(Bv,SF,e=>{var{typed:t,size:r,subset:a,compareNatural:s,Index:f}=e;return t(Bv,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(h,n){if(a(r(n),new f(0))===0)return 0;for(var u=yt(Array.isArray(n)?n:n.toArray()),o=0,i=0;i<u.length;i++)s(u[i],h)===0&&o++;return o}})}),Iv="setPowerset",_F=["typed","size","subset","compareNatural","Index"],DF=Z(Iv,_F,e=>{var{typed:t,size:r,subset:a,compareNatural:s,Index:f}=e;return t(Iv,{"Array | Matrix":function(u){if(a(r(u),new f(0))===0)return[];for(var o=yt(Array.isArray(u)?u:u.toArray()).sort(s),i=[],l=0;l.toString(2).length<=o.length;)i.push(v(o,l.toString(2).split("").reverse())),l++;return h(i)}});function v(n,u){for(var o=[],i=0;i<u.length;i++)u[i]==="1"&&o.push(n[i]);return o}function h(n){for(var u=[],o=n.length-1;o>0;o--)for(var i=0;i<o;i++)n[i].length>n[i+1].length&&(u=n[i],n[i]=n[i+1],n[i+1]=u);return n}}),Rv="setSize",AF=["typed","compareNatural"],NF=Z(Rv,AF,e=>{var{typed:t,compareNatural:r}=e;return t(Rv,{"Array | Matrix":function(s){return Array.isArray(s)?yt(s).length:yt(s.toArray()).length},"Array | Matrix, boolean":function(s,f){if(f===!1||s.length===0)return Array.isArray(s)?yt(s).length:yt(s.toArray()).length;for(var v=yt(Array.isArray(s)?s:s.toArray()).sort(r),h=1,n=1;n<v.length;n++)r(v[n],v[n-1])!==0&&h++;return h}})}),kv="setSymDifference",TF=["typed","size","concat","subset","setDifference","Index"],OF=Z(kv,TF,e=>{var{typed:t,size:r,concat:a,subset:s,setDifference:f,Index:v}=e;return t(kv,{"Array | Matrix, Array | Matrix":function(n,u){if(s(r(n),new v(0))===0)return yt(u);if(s(r(u),new v(0))===0)return yt(n);var o=yt(n),i=yt(u);return a(f(o,i),f(i,o))}})}),$v="setUnion",MF=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],FF=Z($v,MF,e=>{var{typed:t,size:r,concat:a,subset:s,setIntersect:f,setSymDifference:v,Index:h}=e;return t($v,{"Array | Matrix, Array | Matrix":function(u,o){if(s(r(u),new h(0))===0)return yt(o);if(s(r(o),new h(0))===0)return yt(u);var i=yt(u),l=yt(o);return a(v(i,l),f(i,l))}})}),Lv="add",PF=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],BF=Z(Lv,PF,e=>{var{typed:t,matrix:r,addScalar:a,equalScalar:s,DenseMatrix:f,SparseMatrix:v}=e,h=Mi({typed:t}),n=Mh({typed:t,equalScalar:s}),u=ia({typed:t,DenseMatrix:f}),o=Mt({typed:t,matrix:r});return t(Lv,{"any, any":a,"any, any, ...any":t.referToSelf(i=>(l,c,d)=>{for(var p=i(l,c),m=0;m<d.length;m++)p=i(p,d[m]);return p})},o({elop:a,DS:h,SS:n,Ss:u}))}),zv="hypot",IF=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],RF=Z(zv,IF,e=>{var{typed:t,abs:r,addScalar:a,divideScalar:s,multiplyScalar:f,sqrt:v,smaller:h,isPositive:n}=e;return t(zv,{"... number | BigNumber":u,Array:u,Matrix:o=>u(yt(o.toArray()))});function u(o){for(var i=0,l=0,c=0;c<o.length;c++){if(Wn(o[c]))throw new TypeError("Unexpected type of argument to hypot");var d=r(o[c]);h(l,d)?(i=f(i,f(s(l,d),s(l,d))),i=a(i,1),l=d):i=a(i,n(d)?f(s(d,l),s(d,l)):d)}return f(l,v(i))}}),Uv="norm",kF=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],$F=Z(Uv,kF,e=>{var{typed:t,abs:r,add:a,pow:s,conj:f,sqrt:v,multiply:h,equalScalar:n,larger:u,smaller:o,matrix:i,ctranspose:l,eigs:c}=e;return t(Uv,{number:Math.abs,Complex:function(E){return E.abs()},BigNumber:function(E){return E.abs()},boolean:function(E){return Math.abs(E)},Array:function(E){return C(i(E),2)},Matrix:function(E){return C(E,2)},"Array, number | BigNumber | string":function(E,A){return C(i(E),A)},"Matrix, number | BigNumber | string":function(E,A){return C(E,A)}});function d(S){var E=0;return S.forEach(function(A){var D=r(A);u(D,E)&&(E=D)},!0),E}function p(S){var E;return S.forEach(function(A){var D=r(A);(!E||o(D,E))&&(E=D)},!0),E||0}function m(S,E){if(E===Number.POSITIVE_INFINITY||E==="inf")return d(S);if(E===Number.NEGATIVE_INFINITY||E==="-inf")return p(S);if(E==="fro")return C(S,2);if(typeof E=="number"&&!isNaN(E)){if(!n(E,0)){var A=0;return S.forEach(function(D){A=a(s(r(D),E),A)},!0),s(A,1/E)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function g(S){var E=0;return S.forEach(function(A,D){E=a(E,h(A,f(A)))}),r(v(E))}function b(S){var E=[],A=0;return S.forEach(function(D,M){var B=M[1],O=a(E[B]||0,r(D));u(O,A)&&(A=O),E[B]=O},!0),A}function y(S){var E=S.size();if(E[0]!==E[1])throw new RangeError("Invalid matrix dimensions");var A=l(S),D=h(A,S),M=c(D).values.toArray(),B=M[M.length-1];return r(v(B))}function w(S){var E=[],A=0;return S.forEach(function(D,M){var B=M[0],O=a(E[B]||0,r(D));u(O,A)&&(A=O),E[B]=O},!0),A}function x(S,E){if(E===1)return b(S);if(E===Number.POSITIVE_INFINITY||E==="inf")return w(S);if(E==="fro")return g(S);if(E===2)return y(S);throw new Error("Unsupported parameter value "+E)}function C(S,E){var A=S.size();if(A.length===1)return m(S,E);if(A.length===2){if(A[0]&&A[1])return x(S,E);throw new RangeError("Invalid matrix dimensions")}}}),jv="dot",LF=["typed","addScalar","multiplyScalar","conj","size"],zF=Z(jv,LF,e=>{var{typed:t,addScalar:r,multiplyScalar:a,conj:s,size:f}=e;return t(jv,{"Array | DenseMatrix, Array | DenseMatrix":h,"SparseMatrix, SparseMatrix":n});function v(o,i){var l=u(o),c=u(i),d,p;if(l.length===1)d=l[0];else if(l.length===2&&l[1]===1)d=l[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+l.join(", ")+")");if(c.length===1)p=c[0];else if(c.length===2&&c[1]===1)p=c[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+c.join(", ")+")");if(d!==p)throw new RangeError("Vectors must have equal length ("+d+" != "+p+")");if(d===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return d}function h(o,i){var l=v(o,i),c=Ze(o)?o._data:o,d=Ze(o)?o._datatype:void 0,p=Ze(i)?i._data:i,m=Ze(i)?i._datatype:void 0,g=u(o).length===2,b=u(i).length===2,y=r,w=a;if(d&&m&&d===m&&typeof d=="string"){var x=d;y=t.find(r,[x,x]),w=t.find(a,[x,x])}if(!g&&!b){for(var C=w(s(c[0]),p[0]),S=1;S<l;S++)C=y(C,w(s(c[S]),p[S]));return C}if(!g&&b){for(var E=w(s(c[0]),p[0][0]),A=1;A<l;A++)E=y(E,w(s(c[A]),p[A][0]));return E}if(g&&!b){for(var D=w(s(c[0][0]),p[0]),M=1;M<l;M++)D=y(D,w(s(c[M][0]),p[M]));return D}if(g&&b){for(var B=w(s(c[0][0]),p[0][0]),O=1;O<l;O++)B=y(B,w(s(c[O][0]),p[O][0]));return B}}function n(o,i){v(o,i);for(var l=o._index,c=o._values,d=i._index,p=i._values,m=0,g=r,b=a,y=0,w=0;y<l.length&&w<d.length;){var x=l[y],C=d[w];if(x<C){y++;continue}if(x>C){w++;continue}x===C&&(m=g(m,b(c[y],p[w])),y++,w++)}return m}function u(o){return Ze(o)?o.size():f(o)}}),UF="trace",jF=["typed","matrix","add"],qF=Z(UF,jF,e=>{var{typed:t,matrix:r,add:a}=e;return t("trace",{Array:function(h){return s(r(h))},SparseMatrix:f,DenseMatrix:s,any:Je});function s(v){var h=v._size,n=v._data;switch(h.length){case 1:if(h[0]===1)return Je(n[0]);throw new RangeError("Matrix must be square (size: "+it(h)+")");case 2:{var u=h[0],o=h[1];if(u===o){for(var i=0,l=0;l<u;l++)i=a(i,n[l][l]);return i}else throw new RangeError("Matrix must be square (size: "+it(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+it(h)+")")}}function f(v){var h=v._values,n=v._index,u=v._ptr,o=v._size,i=o[0],l=o[1];if(i===l){var c=0;if(h.length>0)for(var d=0;d<l;d++)for(var p=u[d],m=u[d+1],g=p;g<m;g++){var b=n[g];if(b===d){c=a(c,h[g]);break}if(b>d)break}return c}throw new RangeError("Matrix must be square (size: "+it(o)+")")}}),qv="index",HF=["typed","Index"],VF=Z(qv,HF,e=>{var{typed:t,Index:r}=e;return t(qv,{"...number | string | BigNumber | Range | Array | Matrix":function(s){var f=s.map(function(h){return ct(h)?h.toNumber():Array.isArray(h)||Ze(h)?h.map(function(n){return ct(n)?n.toNumber():n}):h}),v=new r;return r.apply(v,f),v}})}),uw=new Set(["end"]),GF="Node",WF=["mathWithTransform"],YF=Z(GF,WF,e=>{var{mathWithTransform:t}=e;function r(s){for(var f of[...uw])if(s.has(f))throw new Error('Scope contains an illegal symbol, "'+f+'" is a reserved keyword')}class a{get type(){return"Node"}get isNode(){return!0}evaluate(f){return this.compile().evaluate(f)}compile(){var f=this._compile(t,{}),v={},h=null;function n(u){var o=Ra(u);return r(o),f(o,v,h)}return{evaluate:n}}_compile(f,v){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(f){throw new Error("Cannot run forEach on a Node interface")}map(f){throw new Error("Cannot run map on a Node interface")}_ifNode(f){if(!_t(f))throw new TypeError("Callback function must return a Node");return f}traverse(f){f(this,null,null);function v(h,n){h.forEach(function(u,o,i){n(u,o,i),v(u,n)})}v(this,f)}transform(f){function v(h,n,u){var o=f(h,n,u);return o!==h?o:h.map(v)}return v(this,null,null)}filter(f){var v=[];return this.traverse(function(h,n,u){f(h,n,u)&&v.push(h)}),v}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(f){return f.cloneDeep()})}equals(f){return f?this.type===f.type&&Jo(this,f):!1}toString(f){var v=this._getCustomString(f);return typeof v<"u"?v:this._toString(f)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(f){var v=this._getCustomString(f);return typeof v<"u"?v:this.toHTML(f)}_toString(){throw new Error("_toString not implemented for "+this.type)}toTex(f){var v=this._getCustomString(f);return typeof v<"u"?v:this._toTex(f)}_toTex(f){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(f){if(f&&typeof f=="object")switch(typeof f.handler){case"object":case"undefined":return;case"function":return f.handler(this,f);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return a},{isClass:!0,isNode:!0});function _r(e){return e&&e.isIndexError?new hn(e.index+1,e.min+1,e.max!==void 0?e.max+1:void 0):e}function lw(e){var{subset:t}=e;return function(a,s){try{if(Array.isArray(a))return t(a,s);if(a&&typeof a.subset=="function")return a.subset(s);if(typeof a=="string")return t(a,s);if(typeof a=="object"){if(!s.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Yr(a,s.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(f){throw _r(f)}}}var qs="AccessorNode",XF=["subset","Node"],KF=Z(qs,XF,e=>{var{subset:t,Node:r}=e,a=lw({subset:t});function s(v){return!(Ji(v)||jr(v)||gt(v)||bi(v)||El(v)||Zn(v)||ir(v))}class f extends r{constructor(h,n){if(super(),!_t(h))throw new TypeError('Node expected for parameter "object"');if(!no(n))throw new TypeError('IndexNode expected for parameter "index"');this.object=h,this.index=n}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return qs}get isAccessorNode(){return!0}_compile(h,n){var u=this.object._compile(h,n),o=this.index._compile(h,n);if(this.index.isObjectProperty()){var i=this.index.getObjectProperty();return function(c,d,p){return Yr(u(c,d,p),i)}}else return function(c,d,p){var m=u(c,d,p),g=o(c,d,m);return a(m,g)}}forEach(h){h(this.object,"object",this),h(this.index,"index",this)}map(h){return new f(this._ifNode(h(this.object,"object",this)),this._ifNode(h(this.index,"index",this)))}clone(){return new f(this.object,this.index)}_toString(h){var n=this.object.toString(h);return s(this.object)&&(n="("+n+")"),n+this.index.toString(h)}toHTML(h){var n=this.object.toHTML(h);return s(this.object)&&(n='<span class="math-parenthesis math-round-parenthesis">(</span>'+n+'<span class="math-parenthesis math-round-parenthesis">)</span>'),n+this.index.toHTML(h)}_toTex(h){var n=this.object.toTex(h);return s(this.object)&&(n="\\left(' + object + '\\right)"),n+this.index.toTex(h)}toJSON(){return{mathjs:qs,object:this.object,index:this.index}}static fromJSON(h){return new f(h.object,h.index)}}return ar(f,"name",qs),f},{isClass:!0,isNode:!0}),Hs="ArrayNode",JF=["Node"],ZF=Z(Hs,JF,e=>{var{Node:t}=e;class r extends t{constructor(s){if(super(),this.items=s||[],!Array.isArray(this.items)||!this.items.every(_t))throw new TypeError("Array containing Nodes expected")}get type(){return Hs}get isArrayNode(){return!0}_compile(s,f){var v=Yn(this.items,function(u){return u._compile(s,f)}),h=s.config.matrix!=="Array";if(h){var n=s.matrix;return function(o,i,l){return n(Yn(v,function(c){return c(o,i,l)}))}}else return function(o,i,l){return Yn(v,function(c){return c(o,i,l)})}}forEach(s){for(var f=0;f<this.items.length;f++){var v=this.items[f];s(v,"items["+f+"]",this)}}map(s){for(var f=[],v=0;v<this.items.length;v++)f[v]=this._ifNode(s(this.items[v],"items["+v+"]",this));return new r(f)}clone(){return new r(this.items.slice(0))}_toString(s){var f=this.items.map(function(v){return v.toString(s)});return"["+f.join(", ")+"]"}toJSON(){return{mathjs:Hs,items:this.items}}static fromJSON(s){return new r(s.items)}toHTML(s){var f=this.items.map(function(v){return v.toHTML(s)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+f.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(s){function f(v,h){var n=v.some(jr)&&!v.every(jr),u=h||n,o=u?"&":"\\\\",i=v.map(function(l){return l.items?f(l.items,!h):l.toTex(s)}).join(o);return n||!u||u&&!h?"\\begin{bmatrix}"+i+"\\end{bmatrix}":i}return f(this.items,!1)}}return ar(r,"name",Hs),r},{isClass:!0,isNode:!0});function QF(e){var{subset:t,matrix:r}=e;return function(s,f,v){try{if(Array.isArray(s))return r(s).subset(f,v).valueOf();if(s&&typeof s.subset=="function")return s.subset(f,v);if(typeof s=="string")return t(s,f,v);if(typeof s=="object"){if(!f.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Wa(s,f.getObjectProperty(),v),s}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(h){throw _r(h)}}}var on=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function Vs(e,t){if(!t||t!=="auto")return e;for(var r=e;Zn(r);)r=r.content;return r}function Nt(e,t,r,a){var s=e;t!=="keep"&&(s=e.getContent());for(var f=s.getIdentifier(),v=null,h=0;h<on.length;h++)if(f in on[h]){v=h;break}if(f==="OperatorNode:multiply"&&s.implicit&&r!=="show"){var n=Vs(s.args[0],t);!(gt(n)&&a&&a.getIdentifier()==="OperatorNode:divide"&&Ff(Vs(a.args[0],t)))&&!(n.getIdentifier()==="OperatorNode:divide"&&Ff(Vs(n.args[0],t))&&gt(Vs(n.args[1])))&&(v+=1)}return v}function So(e,t){var r=e;t!=="keep"&&(r=e.getContent());var a=r.getIdentifier(),s=Nt(r,t);if(s===null)return null;var f=on[s][a];if(ze(f,"associativity")){if(f.associativity==="left")return"left";if(f.associativity==="right")return"right";throw Error("'"+a+"' has the invalid associativity '"+f.associativity+"'.")}return null}function Lc(e,t,r){var a=r!=="keep"?e.getContent():e,s=r!=="keep"?e.getContent():t,f=a.getIdentifier(),v=s.getIdentifier(),h=Nt(a,r);if(h===null)return null;var n=on[h][f];if(ze(n,"associativeWith")&&n.associativeWith instanceof Array){for(var u=0;u<n.associativeWith.length;u++)if(n.associativeWith[u]===v)return!0;return!1}return null}function e5(e){var t="OperatorNode:"+e;for(var r of on)if(t in r)return r[t].op;return null}var Gs="AssignmentNode",t5=["subset","?matrix","Node"],r5=Z(Gs,t5,e=>{var{subset:t,matrix:r,Node:a}=e,s=lw({subset:t}),f=QF({subset:t,matrix:r});function v(n,u,o){u||(u="keep");var i=Nt(n,u,o),l=Nt(n.value,u,o);return u==="all"||l!==null&&l<=i}class h extends a{constructor(u,o,i){if(super(),this.object=u,this.index=i?o:null,this.value=i||o,!ir(u)&&!Ji(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(ir(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!no(this.index))throw new TypeError('IndexNode expected as "index"');if(!_t(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return Gs}get isAssignmentNode(){return!0}_compile(u,o){var i=this.object._compile(u,o),l=this.index?this.index._compile(u,o):null,c=this.value._compile(u,o),d=this.object.name;if(this.index)if(this.index.isObjectProperty()){var p=this.index.getObjectProperty();return function(w,x,C){var S=i(w,x,C),E=c(w,x,C);return Wa(S,p,E),E}}else{if(ir(this.object))return function(w,x,C){var S=i(w,x,C),E=c(w,x,C),A=l(w,x,S);return w.set(d,f(S,A,E)),E};var m=this.object.object._compile(u,o);if(this.object.index.isObjectProperty()){var g=this.object.index.getObjectProperty();return function(w,x,C){var S=m(w,x,C),E=Yr(S,g),A=l(w,x,E),D=c(w,x,C);return Wa(S,g,f(E,A,D)),D}}else{var b=this.object.index._compile(u,o);return function(w,x,C){var S=m(w,x,C),E=b(w,x,S),A=s(S,E),D=l(w,x,A),M=c(w,x,C);return f(S,E,f(A,D,M)),M}}}else{if(!ir(this.object))throw new TypeError("SymbolNode expected as object");return function(w,x,C){var S=c(w,x,C);return w.set(d,S),S}}}forEach(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)}map(u){var o=this._ifNode(u(this.object,"object",this)),i=this.index?this._ifNode(u(this.index,"index",this)):null,l=this._ifNode(u(this.value,"value",this));return new h(o,i,l)}clone(){return new h(this.object,this.index,this.value)}_toString(u){var o=this.object.toString(u),i=this.index?this.index.toString(u):"",l=this.value.toString(u);return v(this,u&&u.parenthesis,u&&u.implicit)&&(l="("+l+")"),o+i+" = "+l}toJSON(){return{mathjs:Gs,object:this.object,index:this.index,value:this.value}}static fromJSON(u){return new h(u.object,u.index,u.value)}toHTML(u){var o=this.object.toHTML(u),i=this.index?this.index.toHTML(u):"",l=this.value.toHTML(u);return v(this,u&&u.parenthesis,u&&u.implicit)&&(l='<span class="math-paranthesis math-round-parenthesis">(</span>'+l+'<span class="math-paranthesis math-round-parenthesis">)</span>'),o+i+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+l}_toTex(u){var o=this.object.toTex(u),i=this.index?this.index.toTex(u):"",l=this.value.toTex(u);return v(this,u&&u.parenthesis,u&&u.implicit)&&(l="\\left(".concat(l,"\\right)")),o+i+":="+l}}return ar(h,"name",Gs),h},{isClass:!0,isNode:!0}),Ws="BlockNode",n5=["ResultSet","Node"],i5=Z(Ws,n5,e=>{var{ResultSet:t,Node:r}=e;class a extends r{constructor(f){if(super(),!Array.isArray(f))throw new Error("Array expected");this.blocks=f.map(function(v){var h=v&&v.node,n=v&&v.visible!==void 0?v.visible:!0;if(!_t(h))throw new TypeError('Property "node" must be a Node');if(typeof n!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:h,visible:n}})}get type(){return Ws}get isBlockNode(){return!0}_compile(f,v){var h=Yn(this.blocks,function(n){return{evaluate:n.node._compile(f,v),visible:n.visible}});return function(u,o,i){var l=[];return Al(h,function(d){var p=d.evaluate(u,o,i);d.visible&&l.push(p)}),new t(l)}}forEach(f){for(var v=0;v<this.blocks.length;v++)f(this.blocks[v].node,"blocks["+v+"].node",this)}map(f){for(var v=[],h=0;h<this.blocks.length;h++){var n=this.blocks[h],u=this._ifNode(f(n.node,"blocks["+h+"].node",this));v[h]={node:u,visible:n.visible}}return new a(v)}clone(){var f=this.blocks.map(function(v){return{node:v.node,visible:v.visible}});return new a(f)}_toString(f){return this.blocks.map(function(v){return v.node.toString(f)+(v.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:Ws,blocks:this.blocks}}static fromJSON(f){return new a(f.blocks)}toHTML(f){return this.blocks.map(function(v){return v.node.toHTML(f)+(v.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(f){return this.blocks.map(function(v){return v.node.toTex(f)+(v.visible?"":";")}).join(`\\;\\;
`)}}return ar(a,"name",Ws),a},{isClass:!0,isNode:!0}),Ys="ConditionalNode",a5=["Node"],o5=Z(Ys,a5,e=>{var{Node:t}=e;function r(s){if(typeof s=="number"||typeof s=="boolean"||typeof s=="string")return!!s;if(s){if(ct(s))return!s.isZero();if(Wn(s))return!!(s.re||s.im);if(zn(s))return!!s.value}if(s==null)return!1;throw new TypeError('Unsupported type of condition "'+Bt(s)+'"')}class a extends t{constructor(f,v,h){if(super(),!_t(f))throw new TypeError("Parameter condition must be a Node");if(!_t(v))throw new TypeError("Parameter trueExpr must be a Node");if(!_t(h))throw new TypeError("Parameter falseExpr must be a Node");this.condition=f,this.trueExpr=v,this.falseExpr=h}get type(){return Ys}get isConditionalNode(){return!0}_compile(f,v){var h=this.condition._compile(f,v),n=this.trueExpr._compile(f,v),u=this.falseExpr._compile(f,v);return function(i,l,c){return r(h(i,l,c))?n(i,l,c):u(i,l,c)}}forEach(f){f(this.condition,"condition",this),f(this.trueExpr,"trueExpr",this),f(this.falseExpr,"falseExpr",this)}map(f){return new a(this._ifNode(f(this.condition,"condition",this)),this._ifNode(f(this.trueExpr,"trueExpr",this)),this._ifNode(f(this.falseExpr,"falseExpr",this)))}clone(){return new a(this.condition,this.trueExpr,this.falseExpr)}_toString(f){var v=f&&f.parenthesis?f.parenthesis:"keep",h=Nt(this,v,f&&f.implicit),n=this.condition.toString(f),u=Nt(this.condition,v,f&&f.implicit);(v==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=h)&&(n="("+n+")");var o=this.trueExpr.toString(f),i=Nt(this.trueExpr,v,f&&f.implicit);(v==="all"||this.trueExpr.type==="OperatorNode"||i!==null&&i<=h)&&(o="("+o+")");var l=this.falseExpr.toString(f),c=Nt(this.falseExpr,v,f&&f.implicit);return(v==="all"||this.falseExpr.type==="OperatorNode"||c!==null&&c<=h)&&(l="("+l+")"),n+" ? "+o+" : "+l}toJSON(){return{mathjs:Ys,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(f){return new a(f.condition,f.trueExpr,f.falseExpr)}toHTML(f){var v=f&&f.parenthesis?f.parenthesis:"keep",h=Nt(this,v,f&&f.implicit),n=this.condition.toHTML(f),u=Nt(this.condition,v,f&&f.implicit);(v==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=h)&&(n='<span class="math-parenthesis math-round-parenthesis">(</span>'+n+'<span class="math-parenthesis math-round-parenthesis">)</span>');var o=this.trueExpr.toHTML(f),i=Nt(this.trueExpr,v,f&&f.implicit);(v==="all"||this.trueExpr.type==="OperatorNode"||i!==null&&i<=h)&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>');var l=this.falseExpr.toHTML(f),c=Nt(this.falseExpr,v,f&&f.implicit);return(v==="all"||this.falseExpr.type==="OperatorNode"||c!==null&&c<=h)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),n+'<span class="math-operator math-conditional-operator">?</span>'+o+'<span class="math-operator math-conditional-operator">:</span>'+l}_toTex(f){return"\\begin{cases} {"+this.trueExpr.toTex(f)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(f)+"}\\\\{"+this.falseExpr.toTex(f)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return ar(a,"name",Ys),a},{isClass:!0,isNode:!0}),Hf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},s5={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},u5={"\u2013":"\\--","\u2014":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},l5=function(t,r){return Hf({},t,r)},c5=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.preserveFormatting,a=r===void 0?!1:r,s=t.escapeMapFn,f=s===void 0?l5:s,v=String(e),h="",n=f(Hf({},s5),a?Hf({},u5):{}),u=Object.keys(n),o=function(){var l=!1;u.forEach(function(c,d){l||v.length>=c.length&&v.slice(0,c.length)===c&&(h+=n[u[d]],v=v.slice(c.length,v.length),l=!0)}),l||(h+=v.slice(0,1),v=v.slice(1,v.length))};v;)o();return h};const f5=c5;var Vf={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},vt={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},Hv={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(vt.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(vt.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(vt.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(vt.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(vt.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(vt.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(vt.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(vt.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(vt.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(vt.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(vt.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(vt.bitAnd,"${args[1]}\\right)")},bitNot:{1:vt.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(vt.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(vt.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(vt.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(vt.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(vt.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(vt.and,"${args[1]}\\right)")},not:{1:vt.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(vt.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(vt.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(vt.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(vt.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(vt.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(vt.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(vt.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(vt.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(vt.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(vt.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(vt.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(vt.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(vt.to,"${args[1]}\\right)")},numeric:function(t,r){return t.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(Vf.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},h5="\\mathrm{${name}}\\left(${args}\\right)",Vv={deg:"^\\circ"};function Gf(e){return f5(e,{preserveFormatting:!0})}function cw(e,t){return t=typeof t>"u"?!1:t,t?ze(Vv,e)?Vv[e]:"\\mathrm{"+Gf(e)+"}":ze(Vf,e)?Vf[e]:Gf(e)}var Xs="ConstantNode",d5=["Node"],p5=Z(Xs,d5,e=>{var{Node:t}=e;class r extends t{constructor(s){super(),this.value=s}get type(){return Xs}get isConstantNode(){return!0}_compile(s,f){var v=this.value;return function(){return v}}forEach(s){}map(s){return this.clone()}clone(){return new r(this.value)}_toString(s){return it(this.value,s)}toHTML(s){var f=this._toString(s);switch(Bt(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+f+"</span>";case"string":return'<span class="math-string">'+f+"</span>";case"boolean":return'<span class="math-boolean">'+f+"</span>";case"null":return'<span class="math-null-symbol">'+f+"</span>";case"undefined":return'<span class="math-undefined">'+f+"</span>";default:return'<span class="math-symbol">'+f+"</span>"}}toJSON(){return{mathjs:Xs,value:this.value}}static fromJSON(s){return new r(s.value)}_toTex(s){var f=this._toString(s);switch(Bt(this.value)){case"string":return"\\mathtt{"+Gf(f)+"}";case"number":case"BigNumber":{if(!isFinite(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var v=f.toLowerCase().indexOf("e");if(v!==-1)return f.substring(0,v)+"\\cdot10^{"+f.substring(v+1)+"}"}return f;case"Fraction":return this.value.toLatex();default:return f}}}return ar(r,"name",Xs),r},{isClass:!0,isNode:!0}),Ks="FunctionAssignmentNode",m5=["typed","Node"],v5=Z(Ks,m5,e=>{var{typed:t,Node:r}=e;function a(f,v,h){var n=Nt(f,v,h),u=Nt(f.expr,v,h);return v==="all"||u!==null&&u<=n}class s extends r{constructor(v,h,n){if(super(),typeof v!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(h))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!_t(n))throw new TypeError('Node expected for parameter "expr"');if(uw.has(v))throw new Error('Illegal function name, "'+v+'" is a reserved keyword');var u=new Set;for(var o of h){var i=typeof o=="string"?o:o.name;if(u.has(i))throw new Error('Duplicate parameter name "'.concat(i,'"'));u.add(i)}this.name=v,this.params=h.map(function(l){return l&&l.name||l}),this.types=h.map(function(l){return l&&l.type||"any"}),this.expr=n}get type(){return Ks}get isFunctionAssignmentNode(){return!0}_compile(v,h){var n=Object.create(h);Al(this.params,function(d){n[d]=!0});var u=this.expr._compile(v,n),o=this.name,i=this.params,l=Gd(this.types,","),c=o+"("+Gd(this.params,", ")+")";return function(p,m,g){var b={};b[l]=function(){for(var w=Object.create(m),x=0;x<i.length;x++)w[i[x]]=arguments[x];return u(p,w,g)};var y=t(o,b);return y.syntax=c,p.set(o,y),y}}forEach(v){v(this.expr,"expr",this)}map(v){var h=this._ifNode(v(this.expr,"expr",this));return new s(this.name,this.params.slice(0),h)}clone(){return new s(this.name,this.params.slice(0),this.expr)}_toString(v){var h=v&&v.parenthesis?v.parenthesis:"keep",n=this.expr.toString(v);return a(this,h,v&&v.implicit)&&(n="("+n+")"),this.name+"("+this.params.join(", ")+") = "+n}toJSON(){var v=this.types;return{mathjs:Ks,name:this.name,params:this.params.map(function(h,n){return{name:h,type:v[n]}}),expr:this.expr}}static fromJSON(v){return new s(v.name,v.params,v.expr)}toHTML(v){for(var h=v&&v.parenthesis?v.parenthesis:"keep",n=[],u=0;u<this.params.length;u++)n.push('<span class="math-symbol math-parameter">'+Hr(this.params[u])+"</span>");var o=this.expr.toHTML(v);return a(this,h,v&&v.implicit)&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+Hr(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+n.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+o}_toTex(v){var h=v&&v.parenthesis?v.parenthesis:"keep",n=this.expr.toTex(v);return a(this,h,v&&v.implicit)&&(n="\\left(".concat(n,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(cw).join(",")+"\\right):="+n}}return ar(s,"name",Ks),s},{isClass:!0,isNode:!0}),Js="IndexNode",g5=["Node","size"],y5=Z(Js,g5,e=>{var{Node:t,size:r}=e;class a extends t{constructor(f,v){if(super(),this.dimensions=f,this.dotNotation=v||!1,!Array.isArray(f)||!f.every(_t))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return Js}get isIndexNode(){return!0}_compile(f,v){var h=Yn(this.dimensions,function(u,o){var i=u.filter(d=>d.isSymbolNode&&d.name==="end").length>0;if(i){var l=Object.create(v);l.end=!0;var c=u._compile(f,l);return function(p,m,g){if(!Ze(g)&&!Et(g)&&!Cr(g))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Bt(g));var b=r(g).valueOf(),y=Object.create(m);return y.end=b[o],c(p,y,g)}}else return u._compile(f,v)}),n=Yr(f,"index");return function(o,i,l){var c=Yn(h,function(d){return d(o,i,l)});return n(...c)}}forEach(f){for(var v=0;v<this.dimensions.length;v++)f(this.dimensions[v],"dimensions["+v+"]",this)}map(f){for(var v=[],h=0;h<this.dimensions.length;h++)v[h]=this._ifNode(f(this.dimensions[h],"dimensions["+h+"]",this));return new a(v,this.dotNotation)}clone(){return new a(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&gt(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(f){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:Js,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(f){return new a(f.dimensions,f.dotNotation)}toHTML(f){for(var v=[],h=0;h<this.dimensions.length;h++)v[h]=this.dimensions[h].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+Hr(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+v.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(f){var v=this.dimensions.map(function(h){return h.toTex(f)});return this.dotNotation?"."+this.getObjectProperty():"_{"+v.join(",")+"}"}}return ar(a,"name",Js),a},{isClass:!0,isNode:!0}),Zs="ObjectNode",b5=["Node"],w5=Z(Zs,b5,e=>{var{Node:t}=e;class r extends t{constructor(s){if(super(),this.properties=s||{},s&&(typeof s!="object"||!Object.keys(s).every(function(f){return _t(s[f])})))throw new TypeError("Object containing Nodes expected")}get type(){return Zs}get isObjectNode(){return!0}_compile(s,f){var v={};for(var h in this.properties)if(ze(this.properties,h)){var n=zs(h),u=JSON.parse(n);if(!_h(this.properties,u))throw new Error('No access to property "'+u+'"');v[u]=this.properties[h]._compile(s,f)}return function(i,l,c){var d={};for(var p in v)ze(v,p)&&(d[p]=v[p](i,l,c));return d}}forEach(s){for(var f in this.properties)ze(this.properties,f)&&s(this.properties[f],"properties["+zs(f)+"]",this)}map(s){var f={};for(var v in this.properties)ze(this.properties,v)&&(f[v]=this._ifNode(s(this.properties[v],"properties["+zs(v)+"]",this)));return new r(f)}clone(){var s={};for(var f in this.properties)ze(this.properties,f)&&(s[f]=this.properties[f]);return new r(s)}_toString(s){var f=[];for(var v in this.properties)ze(this.properties,v)&&f.push(zs(v)+": "+this.properties[v].toString(s));return"{"+f.join(", ")+"}"}toJSON(){return{mathjs:Zs,properties:this.properties}}static fromJSON(s){return new r(s.properties)}toHTML(s){var f=[];for(var v in this.properties)ze(this.properties,v)&&f.push('<span class="math-symbol math-property">'+Hr(v)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[v].toHTML(s));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+f.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(s){var f=[];for(var v in this.properties)ze(this.properties,v)&&f.push("\\mathbf{"+v+":} & "+this.properties[v].toTex(s)+"\\\\");var h="\\left\\{\\begin{array}{ll}"+f.join(`
`)+"\\end{array}\\right\\}";return h}}return ar(r,"name",Zs),r},{isClass:!0,isNode:!0}),Qs="OperatorNode",x5=["Node"],C5=Z(Qs,x5,e=>{var{Node:t}=e;function r(f,v){var h=f;if(v==="auto")for(;Zn(h);)h=h.content;return gt(h)?!0:Xt(h)?r(h.args[0],v):!1}function a(f,v,h,n,u){var o=Nt(f,v,h),i=So(f,v);if(v==="all"||n.length>2&&f.getIdentifier()!=="OperatorNode:add"&&f.getIdentifier()!=="OperatorNode:multiply")return n.map(function(D){switch(D.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var l;switch(n.length){case 0:l=[];break;case 1:{var c=Nt(n[0],v,h,f);if(u&&c!==null){var d,p;if(v==="keep"?(d=n[0].getIdentifier(),p=f.getIdentifier()):(d=n[0].getContent().getIdentifier(),p=f.getContent().getIdentifier()),on[o][p].latexLeftParens===!1){l=[!1];break}if(on[c][d].latexParens===!1){l=[!1];break}}if(c===null){l=[!1];break}if(c<=o){l=[!0];break}l=[!1]}break;case 2:{var m,g=Nt(n[0],v,h,f),b=Lc(f,n[0],v);g===null?m=!1:g===o&&i==="right"&&!b||g<o?m=!0:m=!1;var y,w=Nt(n[1],v,h,f),x=Lc(f,n[1],v);if(w===null?y=!1:w===o&&i==="left"&&!x||w<o?y=!0:y=!1,u){var C,S,E;v==="keep"?(C=f.getIdentifier(),S=f.args[0].getIdentifier(),E=f.args[1].getIdentifier()):(C=f.getContent().getIdentifier(),S=f.args[0].getContent().getIdentifier(),E=f.args[1].getContent().getIdentifier()),g!==null&&(on[o][C].latexLeftParens===!1&&(m=!1),on[g][S].latexParens===!1&&(m=!1)),w!==null&&(on[o][C].latexRightParens===!1&&(y=!1),on[w][E].latexParens===!1&&(y=!1))}l=[m,y]}break;default:(f.getIdentifier()==="OperatorNode:add"||f.getIdentifier()==="OperatorNode:multiply")&&(l=n.map(function(D){var M=Nt(D,v,h,f),B=Lc(f,D,v),O=So(D,v);return M===null?!1:o===M&&i===O&&!B?!0:M<o}));break}if(n.length>=2&&f.getIdentifier()==="OperatorNode:multiply"&&f.implicit&&v!=="all"&&h==="hide")for(var A=1;A<l.length;++A)r(n[A],v)&&!l[A-1]&&(v!=="keep"||!Zn(n[A-1]))&&(l[A]=!0);return l}class s extends t{constructor(v,h,n,u,o){if(super(),typeof v!="string")throw new TypeError('string expected for parameter "op"');if(typeof h!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(n)||!n.every(_t))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.isPercentage=o===!0,this.op=v,this.fn=h,this.args=n||[]}get type(){return Qs}get isOperatorNode(){return!0}_compile(v,h){if(typeof this.fn!="string"||!Dh(v,this.fn))throw v[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var n=Yr(v,this.fn),u=Yn(this.args,function(c){return c._compile(v,h)});if(u.length===1){var o=u[0];return function(d,p,m){return n(o(d,p,m))}}else if(u.length===2){var i=u[0],l=u[1];return function(d,p,m){return n(i(d,p,m),l(d,p,m))}}else return function(d,p,m){return n.apply(null,Yn(u,function(g){return g(d,p,m)}))}}forEach(v){for(var h=0;h<this.args.length;h++)v(this.args[h],"args["+h+"]",this)}map(v){for(var h=[],n=0;n<this.args.length;n++)h[n]=this._ifNode(v(this.args[n],"args["+n+"]",this));return new s(this.op,this.fn,h,this.implicit,this.isPercentage)}clone(){return new s(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(v){var h=v&&v.parenthesis?v.parenthesis:"keep",n=v&&v.implicit?v.implicit:"hide",u=this.args,o=a(this,h,n,u,!1);if(u.length===1){var i=So(this,h),l=u[0].toString(v);o[0]&&(l="("+l+")");var c=/[a-zA-Z]+/.test(this.op);return i==="right"?this.op+(c?" ":"")+l:i==="left"?l+(c?" ":"")+this.op:l+this.op}else if(u.length===2){var d=u[0].toString(v),p=u[1].toString(v);return o[0]&&(d="("+d+")"),o[1]&&(p="("+p+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&n==="hide"?d+" "+p:d+" "+this.op+" "+p}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var m=u.map(function(g,b){return g=g.toString(v),o[b]&&(g="("+g+")"),g});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&n==="hide"?m.join(" "):m.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:Qs,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(v){return new s(v.op,v.fn,v.args,v.implicit,v.isPercentage)}toHTML(v){var h=v&&v.parenthesis?v.parenthesis:"keep",n=v&&v.implicit?v.implicit:"hide",u=this.args,o=a(this,h,n,u,!1);if(u.length===1){var i=So(this,h),l=u[0].toHTML(v);return o[0]&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),i==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+Hr(this.op)+"</span>"+l:l+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+Hr(this.op)+"</span>"}else if(u.length===2){var c=u[0].toHTML(v),d=u[1].toHTML(v);return o[0]&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),o[1]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&n==="hide"?c+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+d:c+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Hr(this.op)+"</span>"+d}else{var p=u.map(function(m,g){return m=m.toHTML(v),o[g]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),m});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&n==="hide"?p.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):p.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Hr(this.op)+"</span>"):'<span class="math-function">'+Hr(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+p.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(v){var h=v&&v.parenthesis?v.parenthesis:"keep",n=v&&v.implicit?v.implicit:"hide",u=this.args,o=a(this,h,n,u,!0),i=vt[this.fn];if(i=typeof i>"u"?this.op:i,u.length===1){var l=So(this,h),c=u[0].toTex(v);return o[0]&&(c="\\left(".concat(c,"\\right)")),l==="right"?i+c:c+i}else if(u.length===2){var d=u[0],p=d.toTex(v);o[0]&&(p="\\left(".concat(p,"\\right)"));var m=u[1],g=m.toTex(v);o[1]&&(g="\\left(".concat(g,"\\right)"));var b;switch(h==="keep"?b=d.getIdentifier():b=d.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return i+"{"+p+"}{"+g+"}";case"OperatorNode:pow":switch(p="{"+p+"}",g="{"+g+"}",b){case"ConditionalNode":case"OperatorNode:divide":p="\\left(".concat(p,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&n==="hide")return p+"~"+g}return p+i+g}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=u.map(function(w,x){return w=w.toTex(v),o[x]&&(w="\\left(".concat(w,"\\right)")),w});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&n==="hide"?y.join("~"):y.join(i)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(w){return w.toTex(v)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return ar(s,"name",Qs),s},{isClass:!0,isNode:!0}),eu="ParenthesisNode",S5=["Node"],E5=Z(eu,S5,e=>{var{Node:t}=e;class r extends t{constructor(s){if(super(),!_t(s))throw new TypeError('Node expected for parameter "content"');this.content=s}get type(){return eu}get isParenthesisNode(){return!0}_compile(s,f){return this.content._compile(s,f)}getContent(){return this.content.getContent()}forEach(s){s(this.content,"content",this)}map(s){var f=s(this.content,"content",this);return new r(f)}clone(){return new r(this.content)}_toString(s){return!s||s&&!s.parenthesis||s&&s.parenthesis==="keep"?"("+this.content.toString(s)+")":this.content.toString(s)}toJSON(){return{mathjs:eu,content:this.content}}static fromJSON(s){return new r(s.content)}toHTML(s){return!s||s&&!s.parenthesis||s&&s.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(s)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(s)}_toTex(s){return!s||s&&!s.parenthesis||s&&s.parenthesis==="keep"?"\\left(".concat(this.content.toTex(s),"\\right)"):this.content.toTex(s)}}return ar(r,"name",eu),r},{isClass:!0,isNode:!0}),tu="RangeNode",_5=["Node"],D5=Z(tu,_5,e=>{var{Node:t}=e;function r(s,f,v){var h=Nt(s,f,v),n={},u=Nt(s.start,f,v);if(n.start=u!==null&&u<=h||f==="all",s.step){var o=Nt(s.step,f,v);n.step=o!==null&&o<=h||f==="all"}var i=Nt(s.end,f,v);return n.end=i!==null&&i<=h||f==="all",n}class a extends t{constructor(f,v,h){if(super(),!_t(f))throw new TypeError("Node expected");if(!_t(v))throw new TypeError("Node expected");if(h&&!_t(h))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=f,this.end=v,this.step=h||null}get type(){return tu}get isRangeNode(){return!0}needsEnd(){var f=this.filter(function(v){return ir(v)&&v.name==="end"});return f.length>0}_compile(f,v){var h=f.range,n=this.start._compile(f,v),u=this.end._compile(f,v);if(this.step){var o=this.step._compile(f,v);return function(l,c,d){return h(n(l,c,d),u(l,c,d),o(l,c,d))}}else return function(l,c,d){return h(n(l,c,d),u(l,c,d))}}forEach(f){f(this.start,"start",this),f(this.end,"end",this),this.step&&f(this.step,"step",this)}map(f){return new a(this._ifNode(f(this.start,"start",this)),this._ifNode(f(this.end,"end",this)),this.step&&this._ifNode(f(this.step,"step",this)))}clone(){return new a(this.start,this.end,this.step&&this.step)}_toString(f){var v=f&&f.parenthesis?f.parenthesis:"keep",h=r(this,v,f&&f.implicit),n,u=this.start.toString(f);if(h.start&&(u="("+u+")"),n=u,this.step){var o=this.step.toString(f);h.step&&(o="("+o+")"),n+=":"+o}var i=this.end.toString(f);return h.end&&(i="("+i+")"),n+=":"+i,n}toJSON(){return{mathjs:tu,start:this.start,end:this.end,step:this.step}}static fromJSON(f){return new a(f.start,f.end,f.step)}toHTML(f){var v=f&&f.parenthesis?f.parenthesis:"keep",h=r(this,v,f&&f.implicit),n,u=this.start.toHTML(f);if(h.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),n=u,this.step){var o=this.step.toHTML(f);h.step&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),n+='<span class="math-operator math-range-operator">:</span>'+o}var i=this.end.toHTML(f);return h.end&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>'),n+='<span class="math-operator math-range-operator">:</span>'+i,n}_toTex(f){var v=f&&f.parenthesis?f.parenthesis:"keep",h=r(this,v,f&&f.implicit),n=this.start.toTex(f);if(h.start&&(n="\\left(".concat(n,"\\right)")),this.step){var u=this.step.toTex(f);h.step&&(u="\\left(".concat(u,"\\right)")),n+=":"+u}var o=this.end.toTex(f);return h.end&&(o="\\left(".concat(o,"\\right)")),n+=":"+o,n}}return ar(a,"name",tu),a},{isClass:!0,isNode:!0}),ru="RelationalNode",A5=["Node"],N5=Z(ru,A5,e=>{var{Node:t}=e,r={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class a extends t{constructor(f,v){if(super(),!Array.isArray(f))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(v))throw new TypeError("Parameter params must be an array");if(f.length!==v.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=f,this.params=v}get type(){return ru}get isRelationalNode(){return!0}_compile(f,v){var h=this,n=this.params.map(u=>u._compile(f,v));return function(o,i,l){for(var c,d=n[0](o,i,l),p=0;p<h.conditionals.length;p++){c=d,d=n[p+1](o,i,l);var m=Yr(f,h.conditionals[p]);if(!m(c,d))return!1}return!0}}forEach(f){this.params.forEach((v,h)=>f(v,"params["+h+"]",this),this)}map(f){return new a(this.conditionals.slice(),this.params.map((v,h)=>this._ifNode(f(v,"params["+h+"]",this)),this))}clone(){return new a(this.conditionals,this.params)}_toString(f){for(var v=f&&f.parenthesis?f.parenthesis:"keep",h=Nt(this,v,f&&f.implicit),n=this.params.map(function(i,l){var c=Nt(i,v,f&&f.implicit);return v==="all"||c!==null&&c<=h?"("+i.toString(f)+")":i.toString(f)}),u=n[0],o=0;o<this.conditionals.length;o++)u+=" "+r[this.conditionals[o]],u+=" "+n[o+1];return u}toJSON(){return{mathjs:ru,conditionals:this.conditionals,params:this.params}}static fromJSON(f){return new a(f.conditionals,f.params)}toHTML(f){for(var v=f&&f.parenthesis?f.parenthesis:"keep",h=Nt(this,v,f&&f.implicit),n=this.params.map(function(i,l){var c=Nt(i,v,f&&f.implicit);return v==="all"||c!==null&&c<=h?'<span class="math-parenthesis math-round-parenthesis">(</span>'+i.toHTML(f)+'<span class="math-parenthesis math-round-parenthesis">)</span>':i.toHTML(f)}),u=n[0],o=0;o<this.conditionals.length;o++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Hr(r[this.conditionals[o]])+"</span>"+n[o+1];return u}_toTex(f){for(var v=f&&f.parenthesis?f.parenthesis:"keep",h=Nt(this,v,f&&f.implicit),n=this.params.map(function(i,l){var c=Nt(i,v,f&&f.implicit);return v==="all"||c!==null&&c<=h?"\\left("+i.toTex(f)+"\right)":i.toTex(f)}),u=n[0],o=0;o<this.conditionals.length;o++)u+=vt[this.conditionals[o]]+n[o+1];return u}}return ar(a,"name",ru),a},{isClass:!0,isNode:!0}),T5="SymbolNode",O5=["math","?Unit","Node"],M5=Z(T5,O5,e=>{var{math:t,Unit:r,Node:a}=e;function s(v){return r?r.isValuelessUnit(v):!1}class f extends a{constructor(h){if(super(),typeof h!="string")throw new TypeError('String expected for parameter "name"');this.name=h}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(h,n){var u=this.name;if(n[u]===!0)return function(i,l,c){return l[u]};if(u in h)return function(i,l,c){return i.has(u)?i.get(u):Yr(h,u)};var o=s(u);return function(i,l,c){return i.has(u)?i.get(u):o?new r(null,u):f.onUndefinedSymbol(u)}}forEach(h){}map(h){return this.clone()}static onUndefinedSymbol(h){throw new Error("Undefined symbol "+h)}clone(){return new f(this.name)}_toString(h){return this.name}toHTML(h){var n=Hr(this.name);return n==="true"||n==="false"?'<span class="math-symbol math-boolean">'+n+"</span>":n==="i"?'<span class="math-symbol math-imaginary-symbol">'+n+"</span>":n==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+n+"</span>":n==="NaN"?'<span class="math-symbol math-nan-symbol">'+n+"</span>":n==="null"?'<span class="math-symbol math-null-symbol">'+n+"</span>":n==="undefined"?'<span class="math-symbol math-undefined-symbol">'+n+"</span>":'<span class="math-symbol">'+n+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(h){return new f(h.name)}_toTex(h){var n=!1;typeof t[this.name]>"u"&&s(this.name)&&(n=!0);var u=cw(this.name,n);return u[0]==="\\"?u:" "+u}}return f},{isClass:!0,isNode:!0});function zo(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return typeof e.createSubScope=="function"?Wd(e.createSubScope(),...r):Wd(Ya(),e,...r)}var nu="FunctionNode",F5=["math","Node","SymbolNode"],P5=Z(nu,F5,e=>{var{math:t,Node:r,SymbolNode:a}=e,s=h=>it(h,{truncate:78});function f(h,n,u){for(var o="",i=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,l=0,c;(c=i.exec(h))!==null;)if(o+=h.substring(l,c.index),l=c.index,c[0]==="$$")o+="$",l++;else{l+=c[0].length;var d=n[c[1]];if(!d)throw new ReferenceError("Template: Property "+c[1]+" does not exist.");if(c[2]===void 0)switch(typeof d){case"string":o+=d;break;case"object":if(_t(d))o+=d.toTex(u);else if(Array.isArray(d))o+=d.map(function(p,m){if(_t(p))return p.toTex(u);throw new TypeError("Template: "+c[1]+"["+m+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+c[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+c[1]+" has to be a Node, String or array of Nodes")}else if(_t(d[c[2]]&&d[c[2]]))o+=d[c[2]].toTex(u);else throw new TypeError("Template: "+c[1]+"["+c[2]+"] is not a Node.")}return o+=h.slice(l),o}class v extends r{constructor(n,u){if(super(),typeof n=="string"&&(n=new a(n)),!_t(n))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(u)||!u.every(_t))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=n,this.args=u||[]}get name(){return this.fn.name||""}get type(){return nu}get isFunctionNode(){return!0}_compile(n,u){var o=this.args.map(S=>S._compile(n,u));if(ir(this.fn)){var i=this.fn.name;if(u[i]){var m=this.args;return function(E,A,D){var M=A[i];if(typeof M!="function")throw new TypeError("Argument '".concat(i,"' was not a function; received: ").concat(s(M)));if(M.rawArgs)return M(m,n,zo(E,A),E);var B=o.map(O=>O(E,A,D));return M.apply(M,B)}}else{var l=i in n?Yr(n,i):void 0,c=typeof l=="function"&&l.rawArgs===!0,d=S=>{var E;if(S.has(i))E=S.get(i);else if(i in n)E=Yr(n,i);else return v.onUndefinedFunction(i);if(typeof E=="function")return E;throw new TypeError("'".concat(i,`' is not a function; its value is:
  `).concat(s(E)))};if(c){var p=this.args;return function(E,A,D){var M=d(E);return M(p,n,zo(E,A),E)}}else switch(o.length){case 0:return function(E,A,D){var M=d(E);return M()};case 1:return function(E,A,D){var M=d(E),B=o[0];return M(B(E,A,D))};case 2:return function(E,A,D){var M=d(E),B=o[0],O=o[1];return M(B(E,A,D),O(E,A,D))};default:return function(E,A,D){var M=d(E),B=o.map(O=>O(E,A,D));return M(...B)}}}}else if(Ji(this.fn)&&no(this.fn.index)&&this.fn.index.isObjectProperty()){var g=this.fn.object._compile(n,u),b=this.fn.index.getObjectProperty(),y=this.args;return function(E,A,D){var M=g(E,A,D);p_(M,b);var B=M[b]&&M[b].rawArgs;if(B)return M[b](y,n,zo(E,A),E);var O=o.map(F=>F(E,A,D));return M[b].apply(M,O)}}else{var w=this.fn.toString(),x=this.fn._compile(n,u),C=this.args;return function(E,A,D){var M=x(E,A,D);if(typeof M!="function")throw new TypeError("Expression '".concat(w,"' did not evaluate to a function; value is:")+`
  `.concat(s(M)));if(M.rawArgs)return M(C,n,zo(E,A),E);var B=o.map(O=>O(E,A,D));return M.apply(M,B)}}}forEach(n){n(this.fn,"fn",this);for(var u=0;u<this.args.length;u++)n(this.args[u],"args["+u+"]",this)}map(n){for(var u=this._ifNode(n(this.fn,"fn",this)),o=[],i=0;i<this.args.length;i++)o[i]=this._ifNode(n(this.args[i],"args["+i+"]",this));return new v(u,o)}clone(){return new v(this.fn,this.args.slice(0))}toString(n){var u,o=this.fn.toString(n);return n&&typeof n.handler=="object"&&ze(n.handler,o)&&(u=n.handler[o](this,n)),typeof u<"u"?u:super.toString(n)}_toString(n){var u=this.args.map(function(i){return i.toString(n)}),o=ls(this.fn)?"("+this.fn.toString(n)+")":this.fn.toString(n);return o+"("+u.join(", ")+")"}toJSON(){return{mathjs:nu,fn:this.fn,args:this.args}}toHTML(n){var u=this.args.map(function(o){return o.toHTML(n)});return'<span class="math-function">'+Hr(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+u.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(n){var u;return n&&typeof n.handler=="object"&&ze(n.handler,this.name)&&(u=n.handler[this.name](this,n)),typeof u<"u"?u:super.toTex(n)}_toTex(n){var u=this.args.map(function(l){return l.toTex(n)}),o;Hv[this.name]&&(o=Hv[this.name]),t[this.name]&&(typeof t[this.name].toTex=="function"||typeof t[this.name].toTex=="object"||typeof t[this.name].toTex=="string")&&(o=t[this.name].toTex);var i;switch(typeof o){case"function":i=o(this,n);break;case"string":i=f(o,this,n);break;case"object":switch(typeof o[u.length]){case"function":i=o[u.length](this,n);break;case"string":i=f(o[u.length],this,n);break}}return typeof i<"u"?i:f(h5,this,n)}getIdentifier(){return this.type+":"+this.name}}return ar(v,"name",nu),ar(v,"onUndefinedFunction",function(h){throw new Error("Undefined function "+h)}),ar(v,"fromJSON",function(h){return new v(h.fn,h.args)}),v},{isClass:!0,isNode:!0}),Gv="parse",B5=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],I5=Z(Gv,B5,e=>{var{typed:t,numeric:r,config:a,AccessorNode:s,ArrayNode:f,AssignmentNode:v,BlockNode:h,ConditionalNode:n,ConstantNode:u,FunctionAssignmentNode:o,FunctionNode:i,IndexNode:l,ObjectNode:c,OperatorNode:d,ParenthesisNode:p,RangeNode:m,RelationalNode:g,SymbolNode:b}=e,y=t(Gv,{string:function(oe){return I(oe,{})},"Array | Matrix":function(oe){return w(oe,{})},"string, Object":function(oe,ye){var Ne=ye.nodes!==void 0?ye.nodes:{};return I(oe,Ne)},"Array | Matrix, Object":w});function w(R){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye=oe.nodes!==void 0?oe.nodes:{};return st(R,function(Ne){if(typeof Ne!="string")throw new TypeError("String expected");return I(Ne,ye)})}var x={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},C={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},S={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},E={true:!0,false:!1,null:null,undefined:void 0},A=["NaN","Infinity"];function D(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:x.NULL,nestingLevel:0,conditionalLevel:null}}function M(R,oe){return R.expression.substr(R.index,oe)}function B(R){return M(R,1)}function O(R){R.index++}function F(R){return R.expression.charAt(R.index-1)}function z(R){return R.expression.charAt(R.index+1)}function N(R){for(R.tokenType=x.NULL,R.token="",R.comment="";;){if(B(R)==="#")for(;B(R)!==`
`&&B(R)!=="";)R.comment+=B(R),O(R);if(y.isWhitespace(B(R),R.nestingLevel))O(R);else break}if(B(R)===""){R.tokenType=x.DELIMITER;return}if(B(R)===`
`&&!R.nestingLevel){R.tokenType=x.DELIMITER,R.token=B(R),O(R);return}var oe=B(R),ye=M(R,2),Ne=M(R,3);if(Ne.length===3&&C[Ne]){R.tokenType=x.DELIMITER,R.token=Ne,O(R),O(R),O(R);return}if(ye.length===2&&C[ye]){R.tokenType=x.DELIMITER,R.token=ye,O(R),O(R);return}if(C[oe]){R.tokenType=x.DELIMITER,R.token=oe,O(R);return}if(y.isDigitDot(oe)){R.tokenType=x.NUMBER;var He=M(R,2);if(He==="0b"||He==="0o"||He==="0x"){for(R.token+=B(R),O(R),R.token+=B(R),O(R);y.isHexDigit(B(R));)R.token+=B(R),O(R);if(B(R)===".")for(R.token+=".",O(R);y.isHexDigit(B(R));)R.token+=B(R),O(R);else if(B(R)==="i")for(R.token+="i",O(R);y.isDigit(B(R));)R.token+=B(R),O(R);return}if(B(R)==="."){if(R.token+=B(R),O(R),!y.isDigit(B(R))){R.tokenType=x.DELIMITER;return}}else{for(;y.isDigit(B(R));)R.token+=B(R),O(R);y.isDecimalMark(B(R),z(R))&&(R.token+=B(R),O(R))}for(;y.isDigit(B(R));)R.token+=B(R),O(R);if(B(R)==="E"||B(R)==="e"){if(y.isDigit(z(R))||z(R)==="-"||z(R)==="+"){if(R.token+=B(R),O(R),(B(R)==="+"||B(R)==="-")&&(R.token+=B(R),O(R)),!y.isDigit(B(R)))throw et(R,'Digit expected, got "'+B(R)+'"');for(;y.isDigit(B(R));)R.token+=B(R),O(R);if(y.isDecimalMark(B(R),z(R)))throw et(R,'Digit expected, got "'+B(R)+'"')}else if(z(R)===".")throw O(R),et(R,'Digit expected, got "'+B(R)+'"')}return}if(y.isAlpha(B(R),F(R),z(R))){for(;y.isAlpha(B(R),F(R),z(R))||y.isDigit(B(R));)R.token+=B(R),O(R);ze(S,R.token)?R.tokenType=x.DELIMITER:R.tokenType=x.SYMBOL;return}for(R.tokenType=x.UNKNOWN;B(R)!=="";)R.token+=B(R),O(R);throw et(R,'Syntax error in part "'+R.token+'"')}function T(R){do N(R);while(R.token===`
`)}function q(R){R.nestingLevel++}function _(R){R.nestingLevel--}y.isAlpha=function(oe,ye,Ne){return y.isValidLatinOrGreek(oe)||y.isValidMathSymbol(oe,Ne)||y.isValidMathSymbol(ye,oe)},y.isValidLatinOrGreek=function(oe){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(oe)},y.isValidMathSymbol=function(oe,ye){return/^[\uD835]$/.test(oe)&&/^[\uDC00-\uDFFF]$/.test(ye)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(ye)},y.isWhitespace=function(oe,ye){return oe===" "||oe==="	"||oe===`
`&&ye>0},y.isDecimalMark=function(oe,ye){return oe==="."&&ye!=="/"&&ye!=="*"&&ye!=="^"},y.isDigitDot=function(oe){return oe>="0"&&oe<="9"||oe==="."},y.isDigit=function(oe){return oe>="0"&&oe<="9"},y.isHexDigit=function(oe){return oe>="0"&&oe<="9"||oe>="a"&&oe<="f"||oe>="A"&&oe<="F"};function I(R,oe){var ye=D();ur(ye,{expression:R,extraNodes:oe}),N(ye);var Ne=U(ye);if(ye.token!=="")throw ye.tokenType===x.DELIMITER?Ct(ye,"Unexpected operator "+ye.token):et(ye,'Unexpected part "'+ye.token+'"');return Ne}function U(R){var oe,ye=[],Ne;for(R.token!==""&&R.token!==`
`&&R.token!==";"&&(oe=j(R),R.comment&&(oe.comment=R.comment));R.token===`
`||R.token===";";)ye.length===0&&oe&&(Ne=R.token!==";",ye.push({node:oe,visible:Ne})),N(R),R.token!==`
`&&R.token!==";"&&R.token!==""&&(oe=j(R),R.comment&&(oe.comment=R.comment),Ne=R.token!==";",ye.push({node:oe,visible:Ne}));return ye.length>0?new h(ye):(oe||(oe=new u(void 0),R.comment&&(oe.comment=R.comment)),oe)}function j(R){var oe,ye,Ne,He,We=L(R);if(R.token==="="){if(ir(We))return oe=We.name,T(R),Ne=j(R),new v(new b(oe),Ne);if(Ji(We))return T(R),Ne=j(R),new v(We.object,We.index,Ne);if(bi(We)&&ir(We.fn)&&(He=!0,ye=[],oe=We.name,We.args.forEach(function(Vt,rr){ir(Vt)?ye[rr]=Vt.name:He=!1}),He))return T(R),Ne=j(R),new o(oe,ye,Ne);throw et(R,"Invalid left hand side of assignment operator =")}return We}function L(R){for(var oe=P(R);R.token==="?";){var ye=R.conditionalLevel;R.conditionalLevel=R.nestingLevel,T(R);var Ne=oe,He=j(R);if(R.token!==":")throw et(R,"False part of conditional expression expected");R.conditionalLevel=null,T(R);var We=j(R);oe=new n(Ne,He,We),R.conditionalLevel=ye}return oe}function P(R){for(var oe=k(R);R.token==="or";)T(R),oe=new d("or","or",[oe,k(R)]);return oe}function k(R){for(var oe=V(R);R.token==="xor";)T(R),oe=new d("xor","xor",[oe,V(R)]);return oe}function V(R){for(var oe=Q(R);R.token==="and";)T(R),oe=new d("and","and",[oe,Q(R)]);return oe}function Q(R){for(var oe=ne(R);R.token==="|";)T(R),oe=new d("|","bitOr",[oe,ne(R)]);return oe}function ne(R){for(var oe=re(R);R.token==="^|";)T(R),oe=new d("^|","bitXor",[oe,re(R)]);return oe}function re(R){for(var oe=ie(R);R.token==="&";)T(R),oe=new d("&","bitAnd",[oe,ie(R)]);return oe}function ie(R){for(var oe=[de(R)],ye=[],Ne={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};ze(Ne,R.token);){var He={name:R.token,fn:Ne[R.token]};ye.push(He),T(R),oe.push(de(R))}return oe.length===1?oe[0]:oe.length===2?new d(ye[0].name,ye[0].fn,oe):new g(ye.map(We=>We.fn),oe)}function de(R){var oe,ye,Ne,He;oe=ve(R);for(var We={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};ze(We,R.token);)ye=R.token,Ne=We[ye],T(R),He=[oe,ve(R)],oe=new d(ye,Ne,He);return oe}function ve(R){var oe,ye,Ne,He;oe=ce(R);for(var We={to:"to",in:"to"};ze(We,R.token);)ye=R.token,Ne=We[ye],T(R),ye==="in"&&R.token===""?oe=new d("*","multiply",[oe,new b("in")],!0):(He=[oe,ce(R)],oe=new d(ye,Ne,He));return oe}function ce(R){var oe,ye=[];if(R.token===":"?oe=new u(1):oe=ae(R),R.token===":"&&R.conditionalLevel!==R.nestingLevel){for(ye.push(oe);R.token===":"&&ye.length<3;)T(R),R.token===")"||R.token==="]"||R.token===","||R.token===""?ye.push(new b("end")):ye.push(ae(R));ye.length===3?oe=new m(ye[0],ye[2],ye[1]):oe=new m(ye[0],ye[1])}return oe}function ae(R){var oe,ye,Ne,He;oe=G(R);for(var We={"+":"add","-":"subtract"};ze(We,R.token);){ye=R.token,Ne=We[ye],T(R);var Vt=G(R);Vt.isPercentage?He=[oe,new d("*","multiply",[oe,Vt])]:He=[oe,Vt],oe=new d(ye,Ne,He)}return oe}function G(R){var oe,ye,Ne,He;oe=X(R),ye=oe;for(var We={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};ze(We,R.token);)Ne=R.token,He=We[Ne],T(R),ye=X(R),oe=new d(Ne,He,[oe,ye]);return oe}function X(R){var oe,ye;for(oe=te(R),ye=oe;R.tokenType===x.SYMBOL||R.token==="in"&&gt(oe)||R.tokenType===x.NUMBER&&!gt(ye)&&(!Xt(ye)||ye.op==="!")||R.token==="(";)ye=te(R),oe=new d("*","multiply",[oe,ye],!0);return oe}function te(R){for(var oe=W(R),ye=oe,Ne=[];R.token==="/"&&Ff(ye);)if(Ne.push(ur({},R)),T(R),R.tokenType===x.NUMBER)if(Ne.push(ur({},R)),T(R),R.tokenType===x.SYMBOL||R.token==="(")ur(R,Ne.pop()),Ne.pop(),ye=W(R),oe=new d("/","divide",[oe,ye]);else{Ne.pop(),ur(R,Ne.pop());break}else{ur(R,Ne.pop());break}return oe}function W(R){var oe,ye,Ne,He;oe=ee(R);for(var We={"%":"mod",mod:"mod"};ze(We,R.token);)ye=R.token,Ne=We[ye],T(R),ye==="%"&&R.tokenType===x.DELIMITER&&R.token!=="("?oe=new d("/","divide",[oe,new u(100)],!1,!0):(He=[oe,ee(R)],oe=new d(ye,Ne,He));return oe}function ee(R){var oe,ye,Ne,He={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return ze(He,R.token)?(Ne=He[R.token],oe=R.token,T(R),ye=[ee(R)],new d(oe,Ne,ye)):he(R)}function he(R){var oe,ye,Ne,He;return oe=pe(R),(R.token==="^"||R.token===".^")&&(ye=R.token,Ne=ye==="^"?"pow":"dotPow",T(R),He=[oe,ee(R)],oe=new d(ye,Ne,He)),oe}function pe(R){var oe,ye,Ne,He;oe=ue(R);for(var We={"!":"factorial","'":"ctranspose"};ze(We,R.token);)ye=R.token,Ne=We[ye],N(R),He=[oe],oe=new d(ye,Ne,He),oe=K(R,oe);return oe}function ue(R){var oe=[];if(R.tokenType===x.SYMBOL&&ze(R.extraNodes,R.token)){var ye=R.extraNodes[R.token];if(N(R),R.token==="("){if(oe=[],q(R),N(R),R.token!==")")for(oe.push(j(R));R.token===",";)N(R),oe.push(j(R));if(R.token!==")")throw et(R,"Parenthesis ) expected");_(R),N(R)}return new ye(oe)}return Y(R)}function Y(R){var oe,ye;return R.tokenType===x.SYMBOL||R.tokenType===x.DELIMITER&&R.token in S?(ye=R.token,N(R),ze(E,ye)?oe=new u(E[ye]):A.indexOf(ye)!==-1?oe=new u(r(ye,"number")):oe=new b(ye),oe=K(R,oe),oe):fe(R)}function K(R,oe,ye){for(var Ne;(R.token==="("||R.token==="["||R.token===".")&&(!ye||ye.indexOf(R.token)!==-1);)if(Ne=[],R.token==="(")if(ir(oe)||Ji(oe)){if(q(R),N(R),R.token!==")")for(Ne.push(j(R));R.token===",";)N(R),Ne.push(j(R));if(R.token!==")")throw et(R,"Parenthesis ) expected");_(R),N(R),oe=new i(oe,Ne)}else return oe;else if(R.token==="["){if(q(R),N(R),R.token!=="]")for(Ne.push(j(R));R.token===",";)N(R),Ne.push(j(R));if(R.token!=="]")throw et(R,"Parenthesis ] expected");_(R),N(R),oe=new s(oe,new l(Ne))}else{if(N(R),R.tokenType!==x.SYMBOL)throw et(R,"Property name expected after dot");Ne.push(new u(R.token)),N(R);var He=!0;oe=new s(oe,new l(Ne,He))}return oe}function fe(R){var oe,ye;return R.token==='"'?(ye=me(R),oe=new u(ye),oe=K(R,oe),oe):be(R)}function me(R){for(var oe="";B(R)!==""&&B(R)!=='"';)B(R)==="\\"&&(oe+=B(R),O(R)),oe+=B(R),O(R);if(N(R),R.token!=='"')throw et(R,'End of string " expected');return N(R),JSON.parse('"'+oe+'"')}function be(R){var oe,ye;return R.token==="'"?(ye=Se(R),oe=new u(ye),oe=K(R,oe),oe):xe(R)}function Se(R){for(var oe="";B(R)!==""&&B(R)!=="'";)B(R)==="\\"&&(oe+=B(R),O(R)),oe+=B(R),O(R);if(N(R),R.token!=="'")throw et(R,"End of string ' expected");return N(R),JSON.parse('"'+oe+'"')}function xe(R){var oe,ye,Ne,He;if(R.token==="["){if(q(R),N(R),R.token!=="]"){var We=Ce(R);if(R.token===";"){for(Ne=1,ye=[We];R.token===";";)N(R),ye[Ne]=Ce(R),Ne++;if(R.token!=="]")throw et(R,"End of matrix ] expected");_(R),N(R),He=ye[0].items.length;for(var Vt=1;Vt<Ne;Vt++)if(ye[Vt].items.length!==He)throw Ct(R,"Column dimensions mismatch ("+ye[Vt].items.length+" !== "+He+")");oe=new f(ye)}else{if(R.token!=="]")throw et(R,"End of matrix ] expected");_(R),N(R),oe=We}}else _(R),N(R),oe=new f([]);return K(R,oe)}return _e(R)}function Ce(R){for(var oe=[j(R)],ye=1;R.token===",";)N(R),oe[ye]=j(R),ye++;return new f(oe)}function _e(R){if(R.token==="{"){q(R);var oe,ye={};do if(N(R),R.token!=="}"){if(R.token==='"')oe=me(R);else if(R.token==="'")oe=Se(R);else if(R.tokenType===x.SYMBOL||R.tokenType===x.DELIMITER&&R.token in S)oe=R.token,N(R);else throw et(R,"Symbol or string expected as object key");if(R.token!==":")throw et(R,"Colon : expected after object key");N(R),ye[oe]=j(R)}while(R.token===",");if(R.token!=="}")throw et(R,"Comma , or bracket } expected after object value");_(R),N(R);var Ne=new c(ye);return Ne=K(R,Ne),Ne}return ke(R)}function ke(R){var oe;return R.tokenType===x.NUMBER?(oe=R.token,N(R),new u(r(oe,a.number))):Ye(R)}function Ye(R){var oe;if(R.token==="("){if(q(R),N(R),oe=j(R),R.token!==")")throw et(R,"Parenthesis ) expected");return _(R),N(R),oe=new p(oe),oe=K(R,oe),oe}return Fe(R)}function Fe(R){throw R.token===""?et(R,"Unexpected end of expression"):et(R,"Value expected")}function wt(R){return R.index-R.token.length+1}function et(R,oe){var ye=wt(R),Ne=new SyntaxError(oe+" (char "+ye+")");return Ne.char=ye,Ne}function Ct(R,oe){var ye=wt(R),Ne=new SyntaxError(oe+" (char "+ye+")");return Ne.char=ye,Ne}return t.addConversion({from:"string",to:"Node",convert:y}),y}),Wv="compile",R5=["typed","parse"],k5=Z(Wv,R5,e=>{var{typed:t,parse:r}=e;return t(Wv,{string:function(s){return r(s).compile()},"Array | Matrix":function(s){return st(s,function(f){return r(f).compile()})}})}),Yv="evaluate",$5=["typed","parse"],L5=Z(Yv,$5,e=>{var{typed:t,parse:r}=e;return t(Yv,{string:function(s){var f=Ya();return r(s).compile().evaluate(f)},"string, Map | Object":function(s,f){return r(s).compile().evaluate(f)},"Array | Matrix":function(s){var f=Ya();return st(s,function(v){return r(v).compile().evaluate(f)})},"Array | Matrix, Map | Object":function(s,f){return st(s,function(v){return r(v).compile().evaluate(f)})}})}),z5="Parser",U5=["evaluate"],j5=Z(z5,U5,e=>{var{evaluate:t}=e;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:Ya(),writable:!1})}return r.prototype.type="Parser",r.prototype.isParser=!0,r.prototype.evaluate=function(a){return t(a,this.scope)},r.prototype.get=function(a){if(this.scope.has(a))return this.scope.get(a)},r.prototype.getAll=function(){return g_(this.scope)},r.prototype.getAllAsMap=function(){return this.scope},r.prototype.set=function(a,s){return this.scope.set(a,s),s},r.prototype.remove=function(a){this.scope.delete(a)},r.prototype.clear=function(){this.scope.clear()},r},{isClass:!0}),Xv="parser",q5=["typed","Parser"],H5=Z(Xv,q5,e=>{var{typed:t,Parser:r}=e;return t(Xv,{"":function(){return new r}})}),Kv="lup",V5=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],G5=Z(Kv,V5,e=>{var{typed:t,matrix:r,abs:a,addScalar:s,divideScalar:f,multiplyScalar:v,subtract:h,larger:n,equalScalar:u,unaryMinus:o,DenseMatrix:i,SparseMatrix:l,Spa:c}=e;return t(Kv,{DenseMatrix:function(g){return d(g)},SparseMatrix:function(g){return p(g)},Array:function(g){var b=r(g),y=d(b);return{L:y.L.valueOf(),U:y.U.valueOf(),p:y.p}}});function d(m){var g=m._size[0],b=m._size[1],y=Math.min(g,b),w=Je(m._data),x=[],C=[g,y],S=[],E=[y,b],A,D,M,B=[];for(A=0;A<g;A++)B[A]=A;for(D=0;D<b;D++){if(D>0)for(A=0;A<g;A++){var O=Math.min(A,D),F=0;for(M=0;M<O;M++)F=s(F,v(w[A][M],w[M][D]));w[A][D]=h(w[A][D],F)}var z=D,N=0,T=0;for(A=D;A<g;A++){var q=w[A][D],_=a(q);n(_,N)&&(z=A,N=_,T=q)}if(D!==z&&(B[D]=[B[z],B[z]=B[D]][0],i._swapRows(D,z,w)),D<g)for(A=D+1;A<g;A++){var I=w[A][D];u(I,0)||(w[A][D]=f(w[A][D],T))}}for(D=0;D<b;D++)for(A=0;A<g;A++){if(D===0&&(A<b&&(S[A]=[]),x[A]=[]),A<D){A<b&&(S[A][D]=w[A][D]),D<g&&(x[A][D]=0);continue}if(A===D){A<b&&(S[A][D]=w[A][D]),D<g&&(x[A][D]=1);continue}A<b&&(S[A][D]=0),D<g&&(x[A][D]=w[A][D])}var U=new i({data:x,size:C}),j=new i({data:S,size:E}),L=[];for(A=0,y=B.length;A<y;A++)L[B[A]]=A;return{L:U,U:j,p:L,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function p(m){var g=m._size[0],b=m._size[1],y=Math.min(g,b),w=m._values,x=m._index,C=m._ptr,S=[],E=[],A=[],D=[g,y],M=[],B=[],O=[],F=[y,b],z,N,T,q=[],_=[];for(z=0;z<g;z++)q[z]=z,_[z]=z;var I=function(L,P){var k=_[L],V=_[P];q[k]=P,q[V]=L,_[L]=V,_[P]=k},U=function(){var L=new c;N<g&&(A.push(S.length),S.push(1),E.push(N)),O.push(M.length);var P=C[N],k=C[N+1];for(T=P;T<k;T++)z=x[T],L.set(q[z],w[T]);N>0&&L.forEach(0,N-1,function(re,ie){l._forEachRow(re,S,E,A,function(de,ve){de>re&&L.accumulate(de,o(v(ve,ie)))})});var V=N,Q=L.get(N),ne=a(Q);L.forEach(N+1,g-1,function(re,ie){var de=a(ie);n(de,ne)&&(V=re,ne=de,Q=ie)}),N!==V&&(l._swapRows(N,V,D[1],S,E,A),l._swapRows(N,V,F[1],M,B,O),L.swap(N,V),I(N,V)),L.forEach(0,g-1,function(re,ie){re<=N?(M.push(ie),B.push(re)):(ie=f(ie,Q),u(ie,0)||(S.push(ie),E.push(re)))})};for(N=0;N<b;N++)U();return O.push(M.length),A.push(S.length),{L:new l({values:S,index:E,ptr:A,size:D}),U:new l({values:M,index:B,ptr:O,size:F}),p:q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),Jv="qr",W5=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtract","complex"],Y5=Z(Jv,W5,e=>{var{typed:t,matrix:r,zeros:a,identity:s,isZero:f,equal:v,sign:h,sqrt:n,conj:u,unaryMinus:o,addScalar:i,divideScalar:l,multiplyScalar:c,subtract:d,complex:p}=e;return ur(t(Jv,{DenseMatrix:function(w){return g(w)},SparseMatrix:function(w){return b()},Array:function(w){var x=r(w),C=g(x);return{Q:C.Q.valueOf(),R:C.R.valueOf()}}}),{_denseQRimpl:m});function m(y){var w=y._size[0],x=y._size[1],C=s([w],"dense"),S=C._data,E=y.clone(),A=E._data,D,M,B,O=a([w],"");for(B=0;B<Math.min(x,w);++B){var F=A[B][B],z=o(v(F,0)?1:h(F)),N=u(z),T=0;for(D=B;D<w;D++)T=i(T,c(A[D][B],u(A[D][B])));var q=c(z,n(T));if(!f(q)){var _=d(F,q);for(O[B]=1,D=B+1;D<w;D++)O[D]=l(A[D][B],_);var I=o(u(l(_,q))),U=void 0;for(M=B;M<x;M++){for(U=0,D=B;D<w;D++)U=i(U,c(u(O[D]),A[D][M]));for(U=c(U,I),D=B;D<w;D++)A[D][M]=c(d(A[D][M],c(O[D],U)),N)}for(D=0;D<w;D++){for(U=0,M=B;M<w;M++)U=i(U,c(S[D][M],O[M]));for(U=c(U,I),M=B;M<w;++M)S[D][M]=l(d(S[D][M],c(U,u(O[M]))),N)}}}return{Q:C,R:E,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function g(y){var w=m(y),x=w.R._data;if(y._data.length>0)for(var C=x[0][0].type==="Complex"?p(0):0,S=0;S<x.length;++S)for(var E=0;E<S&&E<(x[0]||[]).length;++E)x[S][E]=C;return w}function b(y){throw new Error("qr not implemented for sparse matrices yet")}});function X5(e,t,r,a){for(var s=e._values,f=e._index,v=e._ptr,h=e._size,n=e._datatype,u=h[0],o=h[1],i=a&&e._values?[]:null,l=[],c=[],d=0,p=0;p<o;p++){c[p]=d;for(var m=r?r[p]:p,g=v[m],b=v[m+1],y=g;y<b;y++){var w=t?t[f[y]]:f[y];l[d]=w,i&&(i[d]=s[y]),d++}}return c[o]=d,e.createSparseMatrix({values:i,index:l,ptr:c,size:[u,o],datatype:n})}function fw(e,t,r,a,s,f,v){var h=0;for(r[v]=e;h>=0;){var n=r[v+h],u=r[a+n];u===-1?(h--,f[t++]=n):(r[a+n]=r[s+u],++h,r[v+h]=u)}return t}function K5(e,t){if(!e)return null;var r=0,a,s=[],f=[],v=0,h=t,n=2*t;for(a=0;a<t;a++)f[v+a]=-1;for(a=t-1;a>=0;a--)e[a]!==-1&&(f[h+a]=f[v+e[a]],f[v+e[a]]=a);for(a=0;a<t;a++)e[a]===-1&&(r=fw(a,r,f,v,h,s,n));return s}function J5(e,t){if(!e)return null;var r=e._index,a=e._ptr,s=e._size,f=s[0],v=s[1],h=[],n=[],u=0,o=v,i,l;if(t)for(i=0;i<f;i++)n[o+i]=-1;for(var c=0;c<v;c++){h[c]=-1,n[u+c]=-1;for(var d=a[c],p=a[c+1],m=d;m<p;m++){var g=r[m];for(i=t?n[o+g]:g;i!==-1&&i<c;i=l)l=n[u+i],n[u+i]=c,l===-1&&(h[i]=c);t&&(n[o+g]=c)}}return h}function Z5(e,t,r){for(var a=e._values,s=e._index,f=e._ptr,v=e._size,h=v[1],n=0,u=0;u<h;u++){var o=f[u];for(f[u]=n;o<f[u+1];o++)t(s[o],u,a?a[o]:1,r)&&(s[n]=s[o],a&&(a[n]=a[o]),n++)}return f[h]=n,s.splice(n,s.length-n),a&&a.splice(n,a.length-n),n}function di(e){return-e-2}var Q5="csAmd",eP=["add","multiply","transpose"],tP=Z(Q5,eP,e=>{var{add:t,multiply:r,transpose:a}=e;return function(o,i){if(!i||o<=0||o>3)return null;var l=i._size,c=l[0],d=l[1],p=0,m=Math.max(16,10*Math.sqrt(d));m=Math.min(d-2,m);var g=s(o,i,c,d,m);Z5(g,n,null);for(var b=g._index,y=g._ptr,w=y[d],x=[],C=[],S=0,E=d+1,A=2*(d+1),D=3*(d+1),M=4*(d+1),B=5*(d+1),O=6*(d+1),F=7*(d+1),z=x,N=f(d,y,C,S,D,z,A,F,E,O,M,B),T=v(d,y,C,B,M,O,m,E,D,z,A),q=0,_,I,U,j,L,P,k,V,Q,ne,re,ie,de,ve,ce,ae;T<d;){for(U=-1;q<d&&(U=C[D+q])===-1;q++);C[A+U]!==-1&&(z[C[A+U]]=-1),C[D+q]=C[A+U];var G=C[M+U],X=C[E+U];T+=X;var te=0;C[E+U]=-X;var W=y[U],ee=G===0?W:w,he=ee;for(j=1;j<=G+1;j++){for(j>G?(P=U,k=W,V=C[S+U]-G):(P=b[W++],k=y[P],V=C[S+P]),L=1;L<=V;L++)_=b[k++],!((Q=C[E+_])<=0)&&(te+=Q,C[E+_]=-Q,b[he++]=_,C[A+_]!==-1&&(z[C[A+_]]=z[_]),z[_]!==-1?C[A+z[_]]=C[A+_]:C[D+C[B+_]]=C[A+_]);P!==U&&(y[P]=di(U),C[O+P]=0)}for(G!==0&&(w=he),C[B+U]=te,y[U]=ee,C[S+U]=he-ee,C[M+U]=-2,N=h(N,p,C,O,d),ne=ee;ne<he;ne++)if(_=b[ne],!((re=C[M+_])<=0)){Q=-C[E+_];var pe=N-Q;for(W=y[_],ie=y[_]+re-1;W<=ie;W++)P=b[W],C[O+P]>=N?C[O+P]-=Q:C[O+P]!==0&&(C[O+P]=C[B+P]+pe)}for(ne=ee;ne<he;ne++){for(_=b[ne],ie=y[_],de=ie+C[M+_]-1,ve=ie,ce=0,ae=0,W=ie;W<=de;W++)if(P=b[W],C[O+P]!==0){var ue=C[O+P]-N;ue>0?(ae+=ue,b[ve++]=P,ce+=P):(y[P]=di(U),C[O+P]=0)}C[M+_]=ve-ie+1;var Y=ve,K=ie+C[S+_];for(W=de+1;W<K;W++){I=b[W];var fe=C[E+I];fe<=0||(ae+=fe,b[ve++]=I,ce+=I)}ae===0?(y[_]=di(U),Q=-C[E+_],te-=Q,X+=Q,T+=Q,C[E+_]=0,C[M+_]=-1):(C[B+_]=Math.min(C[B+_],ae),b[ve]=b[Y],b[Y]=b[ie],b[ie]=U,C[S+_]=ve-ie+1,ce=(ce<0?-ce:ce)%d,C[A+_]=C[F+ce],C[F+ce]=_,z[_]=ce)}for(C[B+U]=te,p=Math.max(p,te),N=h(N+p,p,C,O,d),ne=ee;ne<he;ne++)if(_=b[ne],!(C[E+_]>=0))for(ce=z[_],_=C[F+ce],C[F+ce]=-1;_!==-1&&C[A+_]!==-1;_=C[A+_],N++){for(V=C[S+_],re=C[M+_],W=y[_]+1;W<=y[_]+V-1;W++)C[O+b[W]]=N;var me=_;for(I=C[A+_];I!==-1;){var be=C[S+I]===V&&C[M+I]===re;for(W=y[I]+1;be&&W<=y[I]+V-1;W++)C[O+b[W]]!==N&&(be=0);be?(y[I]=di(_),C[E+_]+=C[E+I],C[E+I]=0,C[M+I]=-1,I=C[A+I],C[A+me]=I):(me=I,I=C[A+I])}}for(W=ee,ne=ee;ne<he;ne++)_=b[ne],!((Q=-C[E+_])<=0)&&(C[E+_]=Q,ae=C[B+_]+te-Q,ae=Math.min(ae,d-T-Q),C[D+ae]!==-1&&(z[C[D+ae]]=_),C[A+_]=C[D+ae],z[_]=-1,C[D+ae]=_,q=Math.min(q,ae),C[B+_]=ae,b[W++]=_);C[E+U]=X,(C[S+U]=W-ee)===0&&(y[U]=-1,C[O+U]=0),G!==0&&(w=W)}for(_=0;_<d;_++)y[_]=di(y[_]);for(I=0;I<=d;I++)C[D+I]=-1;for(I=d;I>=0;I--)C[E+I]>0||(C[A+I]=C[D+y[I]],C[D+y[I]]=I);for(P=d;P>=0;P--)C[E+P]<=0||y[P]!==-1&&(C[A+P]=C[D+y[P]],C[D+y[P]]=P);for(U=0,_=0;_<=d;_++)y[_]===-1&&(U=fw(_,U,C,D,A,x,O));return x.splice(x.length-1,1),x};function s(u,o,i,l,c){var d=a(o);if(u===1&&l===i)return t(o,d);if(u===2){for(var p=d._index,m=d._ptr,g=0,b=0;b<i;b++){var y=m[b];if(m[b]=g,!(m[b+1]-y>c))for(var w=m[b+1];y<w;y++)p[g++]=p[y]}return m[i]=g,o=a(d),r(d,o)}return r(d,o)}function f(u,o,i,l,c,d,p,m,g,b,y,w){for(var x=0;x<u;x++)i[l+x]=o[x+1]-o[x];i[l+u]=0;for(var C=0;C<=u;C++)i[c+C]=-1,d[C]=-1,i[p+C]=-1,i[m+C]=-1,i[g+C]=1,i[b+C]=1,i[y+C]=0,i[w+C]=i[l+C];var S=h(0,0,i,b,u);return i[y+u]=-2,o[u]=-1,i[b+u]=0,S}function v(u,o,i,l,c,d,p,m,g,b,y){for(var w=0,x=0;x<u;x++){var C=i[l+x];if(C===0)i[c+x]=-2,w++,o[x]=-1,i[d+x]=0;else if(C>p)i[m+x]=0,i[c+x]=-1,w++,o[x]=di(u),i[m+u]++;else{var S=i[g+C];S!==-1&&(b[S]=x),i[y+x]=i[g+C],i[g+C]=x}}return w}function h(u,o,i,l,c){if(u<2||u+o<0){for(var d=0;d<c;d++)i[l+d]!==0&&(i[l+d]=1);u=2}return u}function n(u,o){return u!==o}});function rP(e,t,r,a,s,f,v){var h,n,u=0,o;if(e<=t||r[a+t]<=r[s+e])return-1;r[s+e]=r[a+t];var i=r[f+e];if(r[f+e]=t,i===-1)u=1,o=e;else{for(u=2,o=i;o!==r[v+o];o=r[v+o]);for(h=i;h!==o;h=n)n=r[v+h],r[v+h]=o}return{jleaf:u,q:o}}var nP="csCounts",iP=["transpose"],aP=Z(nP,iP,e=>{var{transpose:t}=e;return function(r,a,s,f){if(!r||!a||!s)return null;var v=r._size,h=v[0],n=v[1],u,o,i,l,c,d,p,m=4*n+(f?n+h+1:0),g=[],b=0,y=n,w=2*n,x=3*n,C=4*n,S=5*n+1;for(i=0;i<m;i++)g[i]=-1;var E=[],A=t(r),D=A._index,M=A._ptr;for(i=0;i<n;i++)for(o=s[i],E[o]=g[x+o]===-1?1:0;o!==-1&&g[x+o]===-1;o=a[o])g[x+o]=i;if(f){for(i=0;i<n;i++)g[s[i]]=i;for(u=0;u<h;u++){for(i=n,d=M[u],p=M[u+1],c=d;c<p;c++)i=Math.min(i,g[D[c]]);g[S+u]=g[C+i],g[C+i]=u}}for(u=0;u<n;u++)g[b+u]=u;for(i=0;i<n;i++){for(o=s[i],a[o]!==-1&&E[a[o]]--,l=f?g[C+i]:o;l!==-1;l=f?g[S+l]:-1)for(c=M[l];c<M[l+1];c++){u=D[c];var B=rP(u,o,g,x,y,w,b);B.jleaf>=1&&E[o]++,B.jleaf===2&&E[B.q]--}a[o]!==-1&&(g[b+o]=a[o])}for(o=0;o<n;o++)a[o]!==-1&&(E[a[o]]+=E[o]);return E}}),oP="csSqr",sP=["add","multiply","transpose"],uP=Z(oP,sP,e=>{var{add:t,multiply:r,transpose:a}=e,s=tP({add:t,multiply:r,transpose:a}),f=aP({transpose:a});return function(n,u,o){var i=u._ptr,l=u._size,c=l[1],d,p={};if(p.q=s(n,u),n&&!p.q)return null;if(o){var m=n?X5(u,null,p.q,0):u;p.parent=J5(m,1);var g=K5(p.parent,c);if(p.cp=f(m,p.parent,g,1),m&&p.parent&&p.cp&&v(m,p))for(p.unz=0,d=0;d<c;d++)p.unz+=p.cp[d]}else p.unz=4*i[c]+c,p.lnz=p.unz;return p};function v(h,n){var u=h._ptr,o=h._index,i=h._size,l=i[0],c=i[1];n.pinv=[],n.leftmost=[];var d=n.parent,p=n.pinv,m=n.leftmost,g=[],b=0,y=l,w=l+c,x=l+2*c,C,S,E,A,D;for(S=0;S<c;S++)g[y+S]=-1,g[w+S]=-1,g[x+S]=0;for(C=0;C<l;C++)m[C]=-1;for(S=c-1;S>=0;S--)for(A=u[S],D=u[S+1],E=A;E<D;E++)m[o[E]]=S;for(C=l-1;C>=0;C--)p[C]=-1,S=m[C],S!==-1&&(g[x+S]++===0&&(g[w+S]=C),g[b+C]=g[y+S],g[y+S]=C);for(n.lnz=0,n.m2=l,S=0;S<c;S++)if(C=g[y+S],n.lnz++,C<0&&(C=n.m2++),p[C]=S,!(--x[S]<=0)){n.lnz+=g[x+S];var M=d[S];M!==-1&&(g[x+M]===0&&(g[w+M]=g[w+S]),g[b+g[w+S]]=g[y+M],g[y+M]=g[b+C],g[x+M]+=g[x+S])}for(C=0;C<l;C++)p[C]<0&&(p[C]=S++);return!0}});function Wf(e,t){return e[t]<0}function hw(e,t){e[t]=di(e[t])}function Zv(e){return e<0?di(e):e}function lP(e,t,r,a,s){var f=t._index,v=t._ptr,h=t._size,n=h[1],u,o,i,l=0;for(a[0]=e;l>=0;){e=a[l];var c=s?s[e]:e;Wf(v,e)||(hw(v,e),a[n+l]=c<0?0:Zv(v[c]));var d=1;for(o=a[n+l],i=c<0?0:Zv(v[c+1]);o<i;o++)if(u=f[o],!Wf(v,u)){a[n+l]=o,a[++l]=u,d=0;break}d&&(l--,a[--r]=e)}return r}function cP(e,t,r,a,s){var f=e._ptr,v=e._size,h=t._index,n=t._ptr,u=v[1],o,i,l,c=u;for(i=n[r],l=n[r+1],o=i;o<l;o++){var d=h[o];Wf(f,d)||(c=lP(d,e,c,a,s))}for(o=c;o<u;o++)hw(f,a[o]);return c}var fP="csSpsolve",hP=["divideScalar","multiply","subtract"],dP=Z(fP,hP,e=>{var{divideScalar:t,multiply:r,subtract:a}=e;return function(f,v,h,n,u,o,i){var l=f._values,c=f._index,d=f._ptr,p=f._size,m=p[1],g=v._values,b=v._index,y=v._ptr,w,x,C,S,E=cP(f,v,h,n,o);for(w=E;w<m;w++)u[n[w]]=0;for(x=y[h],C=y[h+1],w=x;w<C;w++)u[b[w]]=g[w];for(var A=E;A<m;A++){var D=n[A],M=o?o[D]:D;if(!(M<0))for(x=d[M],C=d[M+1],u[D]=t(u[D],l[i?x:C-1]),w=i?x+1:x,S=i?C:C-1;w<S;w++){var B=c[w];u[B]=a(u[B],r(l[w],u[D]))}}return E}}),pP="csLu",mP=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],vP=Z(pP,mP,e=>{var{abs:t,divideScalar:r,multiply:a,subtract:s,larger:f,largerEq:v,SparseMatrix:h}=e,n=dP({divideScalar:r,multiply:a,subtract:s});return function(o,i,l){if(!o)return null;var c=o._size,d=c[1],p,m=100,g=100;i&&(p=i.q,m=i.lnz||m,g=i.unz||g);var b=[],y=[],w=[],x=new h({values:b,index:y,ptr:w,size:[d,d]}),C=[],S=[],E=[],A=new h({values:C,index:S,ptr:E,size:[d,d]}),D=[],M,B,O=[],F=[];for(M=0;M<d;M++)O[M]=0,D[M]=-1,w[M+1]=0;m=0,g=0;for(var z=0;z<d;z++){w[z]=m,E[z]=g;var N=p?p[z]:z,T=n(x,o,N,F,O,D,1),q=-1,_=-1;for(B=T;B<d;B++)if(M=F[B],D[M]<0){var I=t(O[M]);f(I,_)&&(_=I,q=M)}else S[g]=D[M],C[g++]=O[M];if(q===-1||_<=0)return null;D[N]<0&&v(t(O[N]),a(_,l))&&(q=N);var U=O[q];for(S[g]=z,C[g++]=U,D[q]=z,y[m]=q,b[m++]=1,B=T;B<d;B++)M=F[B],D[M]<0&&(y[m]=M,b[m++]=r(O[M],U)),O[M]=0}for(w[d]=m,E[d]=g,B=0;B<m;B++)y[B]=D[y[B]];return b.splice(m,b.length-m),y.splice(m,y.length-m),C.splice(g,C.length-g),S.splice(g,S.length-g),{L:x,U:A,pinv:D}}}),Qv="slu",gP=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],yP=Z(Qv,gP,e=>{var{typed:t,abs:r,add:a,multiply:s,transpose:f,divideScalar:v,subtract:h,larger:n,largerEq:u,SparseMatrix:o}=e,i=uP({add:a,multiply:s,transpose:f}),l=vP({abs:r,divideScalar:v,multiply:s,subtract:h,larger:n,largerEq:u,SparseMatrix:o});return t(Qv,{"SparseMatrix, number, number":function(d,p,m){if(!qe(p)||p<0||p>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(m<0||m>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var g=i(p,d,!1),b=l(d,g,m);return{L:b.L,U:b.U,p:b.pinv,q:g.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function eg(e,t){var r,a=t.length,s=[];if(e)for(r=0;r<a;r++)s[e[r]]=t[r];else for(r=0;r<a;r++)s[r]=t[r];return s}var tg="lusolve",bP=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],wP=Z(tg,bP,e=>{var{typed:t,matrix:r,lup:a,slu:s,usolve:f,lsolve:v,DenseMatrix:h}=e,n=fs({DenseMatrix:h});return t(tg,{"Array, Array | Matrix":function(l,c){l=r(l);var d=a(l),p=o(d.L,d.U,d.p,null,c);return p.valueOf()},"DenseMatrix, Array | Matrix":function(l,c){var d=a(l);return o(d.L,d.U,d.p,null,c)},"SparseMatrix, Array | Matrix":function(l,c){var d=a(l);return o(d.L,d.U,d.p,null,c)},"SparseMatrix, Array | Matrix, number, number":function(l,c,d,p){var m=s(l,d,p);return o(m.L,m.U,m.p,m.q,c)},"Object, Array | Matrix":function(l,c){return o(l.L,l.U,l.p,l.q,c)}});function u(i){if(Ze(i))return i;if(Et(i))return r(i);throw new TypeError("Invalid Matrix LU decomposition")}function o(i,l,c,d,p){i=u(i),l=u(l),c&&(p=n(i,p,!0),p._data=eg(c,p._data));var m=v(i,p),g=f(l,m);return d&&(g._data=eg(d,g._data)),g}}),rg="polynomialRoot",xP=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],CP=Z(rg,xP,e=>{var{typed:t,isZero:r,equalScalar:a,add:s,subtract:f,multiply:v,divide:h,sqrt:n,unaryMinus:u,cbrt:o,typeOf:i,im:l,re:c}=e;return t(rg,{"number|Complex, ...number|Complex":(d,p)=>{for(var m=[d,...p];m.length>0&&r(m[m.length-1]);)m.pop();if(m.length<2)throw new RangeError("Polynomial [".concat(d,", ").concat(p,"] must have a non-zero non-constant coefficient"));switch(m.length){case 2:return[u(h(m[0],m[1]))];case 3:{var[g,b,y]=m,w=v(2,y),x=v(b,b),C=v(4,y,g);if(a(x,C))return[h(u(b),w)];var S=n(f(x,C));return[h(f(S,b),w),h(f(u(S),b),w)]}case 4:{var[E,A,D,M]=m,B=u(v(3,M)),O=v(D,D),F=v(3,M,A),z=s(v(2,D,D,D),v(27,M,M,E)),N=v(9,M,D,A);if(a(O,F)&&a(z,N))return[h(D,B)];var T=f(O,F),q=f(z,N),_=s(v(18,M,D,A,E),v(D,D,A,A)),I=s(v(4,D,D,D,E),v(4,M,A,A,A),v(27,M,M,E,E));if(a(_,I))return[h(f(v(4,M,D,A),s(v(9,M,M,E),v(D,D,D))),v(M,T)),h(f(v(9,M,E),v(D,A)),v(2,T))];var U;a(O,F)?U=q:U=h(s(q,n(f(v(q,q),v(4,T,T,T)))),2);var j=!0,L=o(U,j).toArray().map(P=>h(s(D,P,h(T,P)),B));return L.map(P=>i(P)==="Complex"&&a(c(P),c(P)+l(P))?c(P):P)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(m))}}})}),SP="Help",EP=["parse"],_P=Z(SP,EP,e=>{var{parse:t}=e;function r(a){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!a)throw new Error('Argument "doc" missing');this.doc=a}return r.prototype.type="Help",r.prototype.isHelp=!0,r.prototype.toString=function(){var a=this.doc||{},s=`
`;if(a.name&&(s+="Name: "+a.name+`

`),a.category&&(s+="Category: "+a.category+`

`),a.description&&(s+=`Description:
    `+a.description+`

`),a.syntax&&(s+=`Syntax:
    `+a.syntax.join(`
    `)+`

`),a.examples){s+=`Examples:
`;for(var f={},v=0;v<a.examples.length;v++){var h=a.examples[v];s+="    "+h+`
`;var n=void 0;try{n=t(h).compile().evaluate(f)}catch(u){n=u}n!==void 0&&!C1(n)&&(s+="        "+it(n,{precision:14})+`
`)}s+=`
`}return a.mayThrow&&a.mayThrow.length&&(s+="Throws: "+a.mayThrow.join(", ")+`

`),a.seealso&&a.seealso.length&&(s+="See also: "+a.seealso.join(", ")+`
`),s},r.prototype.toJSON=function(){var a=Je(this.doc);return a.mathjs="Help",a},r.fromJSON=function(a){var s={};return Object.keys(a).filter(f=>f!=="mathjs").forEach(f=>{s[f]=a[f]}),new r(s)},r.prototype.valueOf=r.prototype.toString,r},{isClass:!0}),DP="Chain",AP=["?on","math","typed"],NP=Z(DP,AP,e=>{var{on:t,math:r,typed:a}=e;function s(u){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");S1(u)?this.value=u.value:this.value=u}s.prototype.type="Chain",s.prototype.isChain=!0,s.prototype.done=function(){return this.value},s.prototype.valueOf=function(){return this.value},s.prototype.toString=function(){return it(this.value)},s.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},s.fromJSON=function(u){return new s(u.value)};function f(u,o){typeof o=="function"&&(s.prototype[u]=h(o))}function v(u,o){RE(s.prototype,u,function(){var l=o();if(typeof l=="function")return h(l)})}function h(u){return function(){if(arguments.length===0)return new s(u(this.value));for(var o=[this.value],i=0;i<arguments.length;i++)o[i+1]=arguments[i];if(a.isTypedFunction(u)){var l=a.resolve(u,o);if(l.params.length===1)throw new Error("chain function "+u.name+" cannot match rest parameter between chain value and additional arguments.");return new s(l.implementation.apply(u,o))}return new s(u.apply(u,o))}}s.createProxy=function(u,o){if(typeof u=="string")f(u,o);else{var i=function(d){ze(u,d)&&n[d]===void 0&&v(d,()=>u[d])};for(var l in u)i(l)}};var n={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return s.createProxy(r),t&&t("import",function(u,o,i){i||v(u,o)}),s},{isClass:!0}),ng={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},TP={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},OP={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},MP={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},FP={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},PP={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},BP={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},IP={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},RP={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},kP={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},$P={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},ig={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},LP={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},zP={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},UP={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},jP={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},qP={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},HP={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},VP={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},GP={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},WP={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},YP={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},XP={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["[1, 2, 3]","A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = ones(2, 2)"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},KP={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},JP={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},ZP={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},QP={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},eB={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},tB={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},rB={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},nB={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},iB={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x })',"double(2)",'double("hello")'],seealso:[]},aB={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},oB={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},sB={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},uB={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},lB={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},cB={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},fB={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6 1)"],seealso:["cbrt","sqrt"]},hB={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},dB={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},pB={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},mB={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},vB={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConatant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},gB={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},yB={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},bB={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},wB={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},xB={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},CB={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},SB={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},EB={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},_B={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},DB={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},AB={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},NB={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},TB={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},OB={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},MB={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},FB={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},PB={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},BB={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},IB={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},RB={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},kB={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},$B={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax \u2263 1 (mod b)",examples:["invmod(8, 12)=NaN","invmod(7, 13)=2","math.invmod(15151, 15122)=10429"],seealso:["gcd","xgcd"]},LB={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},zB={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},UB={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},jB={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},qB={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},HB={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},VB={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},GB={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},WB={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},YB={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},XB={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","math.pow([[1, 2], [4, 3]], 2)","math.pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},KB={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)"],seealso:["ceil","floor","fix"]},JB={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},ZB={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},QB={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},eI={name:"sylvester",category:"Matrix",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","sylvester(A,B,C)"],seealso:["schur","lyap"]},tI={name:"schur",category:"Matrix",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","schur(A)"],seealso:["lyap","sylvester"]},rI={name:"lyap",category:"Matrix",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","lyap(A,Q)"],seealso:["schur","sylvester"]},nI={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},iI={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},aI={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},oI={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},sI={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},uI={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},lI={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},cI={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},fI={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},hI={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},dI={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},pI={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},mI={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},vI={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},gI={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},yI={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},bI={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},wI={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},xI={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},CI={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},SI={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate([expr1, expr2, expr3, ...])"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(" + 4 + ")")'],seealso:[]},EI={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},_I={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},DI={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},AI={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},NI={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},TI={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},OI={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},MI={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},FI={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},PI={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},BI={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},II={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},RI={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},kI={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},$I={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["diff([1, 2, 4, 7, 0])","diff([1, 2, 4, 7, 0], 0)","diff(matrix([1, 2, 4, 7, 0]))","diff([[1, 2], [3, 4]])","diff([[1, 2], [3, 4]], 0)","diff([[1, 2], [3, 4]], 1)","diff([[1, 2], [3, 4]], bignumber(1))","diff(matrix([[1, 2], [3, 4]]), 1)","diff([[1, 2], matrix([3, 4])], 1)"],seealso:["subtract","partitionSelect"]},LI={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},zI={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and eigenvectors of a real symmetric matrix",examples:["eigs([[5, 2.3], [2.3, 1]])"],seealso:["inv"]},UI={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},jI={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},qI={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},HI={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},VI={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},GI={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},WI={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the Moore\u2013Penrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},YI={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},XI={name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},KI={name:"matrixFromColumns",category:"Matrix",syntax:["math.matrixFromColumns(...arr)","math.matrixFromColumns(row1, row2)","math.matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},JI={name:"matrixFromFunction",category:"Matrix",syntax:["math.matrixFromFunction(size, fn)","math.matrixFromFunction(size, fn, format)","math.matrixFromFunction(size, fn, format, datatype)","math.matrixFromFunction(size, format, fn)","math.matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},ZI={name:"matrixFromRows",category:"Matrix",syntax:["math.matrixFromRows(...arr)","math.matrixFromRows(row1, row2)","math.matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},QI={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},e8={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1)'],seealso:["sort"]},t8={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},r8={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])"],seealso:["size","squeeze","resize"]},n8={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},i8={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], math.pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},a8={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},o8={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},s8={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},u8={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"])',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},l8={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},c8={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},f8={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},h8={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},d8={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},p8={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},m8={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},v8={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},g8={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},y8={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},b8={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},w8={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(math.i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},x8={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},C8={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},S8={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},E8={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},_8={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},D8={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},A8={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},N8={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},T8={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},O8={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},M8={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},F8={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},P8={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},B8={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},I8={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},R8={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},k8={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},$8={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},L8={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},z8={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},U8={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},j8={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},q8={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},H8={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},V8={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},G8={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},W8={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},Y8={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},X8={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},K8={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dim)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},J8={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dim)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},Z8={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},Q8={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dim)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},e6={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},t6={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},r6={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},n6={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},i6={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},a6={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},o6={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},s6={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},u6={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},l6={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},c6={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},f6={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},h6={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},d6={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},p6={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},m6={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},v6={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},g6={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},y6={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},b6={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},w6={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},x6={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},C6={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},S6={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},E6={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},_6={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},D6={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},A6={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},N6={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},T6={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},O6={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},M6={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},F6={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},P6={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},B6={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},I6={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},R6={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},k6={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},$6={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},L6={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},z6={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},U6={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},j6={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},q6={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},H6={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},V6={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction)','numeric(4, "Fraction")','numeric(fraction(2, 5), "number)'],seealso:["number","fraction","bignumber","string","format"]},G6={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},W6={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $0, $1, $2", [6, 9, 4])'],seealso:["format"]},Y6={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},X6={bignumber:HP,boolean:VP,complex:GP,createUnit:WP,fraction:YP,index:XP,matrix:KP,number:JP,sparse:ZP,splitUnit:QP,string:eB,unit:tB,e:ng,E:ng,false:TP,i:OP,Infinity:MP,LN2:PP,LN10:FP,LOG2E:IP,LOG10E:BP,NaN:RP,null:kP,pi:ig,PI:ig,phi:$P,SQRT1_2:LP,SQRT2:zP,tau:UP,true:jP,version:qP,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:aB,lsolve:sB,lsolveAll:uB,lup:lB,lusolve:cB,leafCount:oB,polynomialRoot:fB,resolve:pB,simplify:mB,simplifyConstant:vB,simplifyCore:gB,symbolicEqual:bB,rationalize:dB,slu:yB,usolve:wB,usolveAll:xB,qr:hB,abs:CB,add:SB,cbrt:EB,ceil:_B,cube:DB,divide:AB,dotDivide:NB,dotMultiply:TB,dotPow:OB,exp:MB,expm:FB,expm1:PB,fix:BB,floor:IB,gcd:RB,hypot:kB,lcm:LB,log:zB,log2:qB,log1p:jB,log10:UB,mod:HB,multiply:VB,norm:GB,nthRoot:WB,nthRoots:YB,pow:XB,round:KB,sign:JB,sqrt:ZB,sqrtm:QB,square:nI,subtract:iI,unaryMinus:aI,unaryPlus:oI,xgcd:sI,invmod:$B,bitAnd:uI,bitNot:lI,bitOr:cI,bitXor:fI,leftShift:hI,rightArithShift:dI,rightLogShift:pI,bellNumbers:mI,catalan:vI,composition:gI,stirlingS2:yI,config:rB,import:nB,typed:iB,arg:bI,conj:wI,re:CI,im:xI,evaluate:SI,help:EI,distance:_I,intersect:DI,and:AI,not:NI,or:TI,xor:OI,concat:FI,count:PI,cross:BI,column:MI,ctranspose:II,det:RI,diag:kI,diff:$I,dot:LI,getMatrixDataType:HI,identity:VI,filter:UI,flatten:jI,forEach:qI,inv:GI,pinv:WI,eigs:zI,kron:YI,matrixFromFunction:JI,matrixFromRows:ZI,matrixFromColumns:KI,map:XI,ones:QI,partitionSelect:e8,range:t8,resize:n8,reshape:r8,rotate:i8,rotationMatrix:a8,row:o8,size:s8,sort:u8,squeeze:l8,subset:c8,trace:f8,transpose:h8,zeros:d8,fft:p8,ifft:m8,sylvester:eI,schur:tI,lyap:rI,combinations:v8,combinationsWithRep:g8,factorial:y8,gamma:b8,kldivergence:x8,lgamma:w8,multinomial:C8,permutations:S8,pickRandom:E8,random:_8,randomInt:D8,compare:A8,compareNatural:N8,compareText:T8,deepEqual:O8,equal:M8,equalText:F8,larger:P8,largerEq:B8,smaller:I8,smallerEq:R8,unequal:k8,setCartesian:$8,setDifference:L8,setDistinct:z8,setIntersect:U8,setIsSubset:j8,setMultiplicity:q8,setPowerset:H8,setSize:V8,setSymDifference:G8,setUnion:W8,erf:Y8,cumsum:i6,mad:X8,max:K8,mean:J8,median:Z8,min:Q8,mode:e6,prod:t6,quantileSeq:r6,std:n6,sum:a6,variance:o6,acos:s6,acosh:u6,acot:l6,acoth:c6,acsc:f6,acsch:h6,asec:d6,asech:p6,asin:m6,asinh:v6,atan:g6,atanh:b6,atan2:y6,cos:w6,cosh:x6,cot:C6,coth:S6,csc:E6,csch:_6,sec:D6,sech:A6,sin:N6,sinh:T6,tan:O6,tanh:M6,to:F6,clone:B6,format:I6,bin:P6,oct:G6,hex:k6,isNaN:L6,isInteger:$6,isNegative:z6,isNumeric:U6,hasNumericValue:R6,isPositive:j6,isPrime:q6,isZero:H6,print:W6,typeOf:Y6,numeric:V6},ag="help",K6=["typed","mathWithTransform","Help"],J6=Z(ag,K6,e=>{var{typed:t,mathWithTransform:r,Help:a}=e;return t(ag,{any:function(f){var v,h=f;if(typeof f!="string"){for(v in r)if(ze(r,v)&&f===r[v]){h=v;break}}var n=Yr(X6,h);if(!n){var u=typeof h=="function"?h.name:h;throw new Error('No documentation found on "'+u+'"')}return new a(n)}})}),og="chain",Z6=["typed","Chain"],Q6=Z(og,Z6,e=>{var{typed:t,Chain:r}=e;return t(og,{"":function(){return new r},any:function(s){return new r(s)}})}),sg="det",eR=["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],tR=Z(sg,eR,e=>{var{typed:t,matrix:r,subtract:a,multiply:s,divideScalar:f,isZero:v,unaryMinus:h}=e;return t(sg,{any:function(o){return Je(o)},"Array | Matrix":function(o){var i;switch(Ze(o)?i=o.size():Array.isArray(o)?(o=r(o),i=o.size()):i=[],i.length){case 0:return Je(o);case 1:if(i[0]===1)return Je(o.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+it(i)+")");case 2:{var l=i[0],c=i[1];if(l===c)return n(o.clone().valueOf(),l);throw new RangeError("Matrix must be square (size: "+it(i)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+it(i)+")")}}});function n(u,o,i){if(o===1)return Je(u[0][0]);if(o===2)return a(s(u[0][0],u[1][1]),s(u[1][0],u[0][1]));for(var l=!1,c=new Array(o).fill(0).map((S,E)=>E),d=0;d<o;d++){var p=c[d];if(v(u[p][d])){var m=void 0;for(m=d+1;m<o;m++)if(!v(u[c[m]][d])){p=c[m],c[m]=c[d],c[d]=p,l=!l;break}if(m===o)return u[p][d]}for(var g=u[p][d],b=d===0?1:u[c[d-1]][d-1],y=d+1;y<o;y++)for(var w=c[y],x=d+1;x<o;x++)u[w][x]=f(a(s(u[w][x],g),s(u[w][d],u[p][x])),b)}var C=u[c[o-1]][o-1];return l?h(C):C}}),ug="inv",rR=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],nR=Z(ug,rR,e=>{var{typed:t,matrix:r,divideScalar:a,addScalar:s,multiply:f,unaryMinus:v,det:h,identity:n,abs:u}=e;return t(ug,{"Array | Matrix":function(l){var c=Ze(l)?l.size():ut(l);switch(c.length){case 1:if(c[0]===1)return Ze(l)?r([a(1,l.valueOf()[0])]):[a(1,l[0])];throw new RangeError("Matrix must be square (size: "+it(c)+")");case 2:{var d=c[0],p=c[1];if(d===p)return Ze(l)?r(o(l.valueOf(),d,p),l.storage()):o(l,d,p);throw new RangeError("Matrix must be square (size: "+it(c)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+it(c)+")")}},any:function(l){return a(1,l)}});function o(i,l,c){var d,p,m,g,b;if(l===1){if(g=i[0][0],g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[a(1,g)]]}else if(l===2){var y=h(i);if(y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[a(i[1][1],y),a(v(i[0][1]),y)],[a(v(i[1][0]),y),a(i[0][0],y)]]}else{var w=i.concat();for(d=0;d<l;d++)w[d]=w[d].concat();for(var x=n(l).valueOf(),C=0;C<c;C++){var S=u(w[C][C]),E=C;for(d=C+1;d<l;)u(w[d][C])>S&&(S=u(w[d][C]),E=d),d++;if(S===0)throw Error("Cannot calculate inverse, determinant is zero");d=E,d!==C&&(b=w[C],w[C]=w[d],w[d]=b,b=x[C],x[C]=x[d],x[d]=b);var A=w[C],D=x[C];for(d=0;d<l;d++){var M=w[d],B=x[d];if(d!==C){if(M[C]!==0){for(m=a(v(M[C]),A[C]),p=C;p<c;p++)M[p]=s(M[p],f(m,A[p]));for(p=0;p<c;p++)B[p]=s(B[p],f(m,D[p]))}}else{for(m=A[C],p=C;p<c;p++)M[p]=a(M[p],m);for(p=0;p<c;p++)B[p]=a(B[p],m)}}}return x}}}),lg="pinv",iR=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],aR=Z(lg,iR,e=>{var{typed:t,matrix:r,inv:a,deepEqual:s,equal:f,dotDivide:v,dot:h,ctranspose:n,divideScalar:u,multiply:o,add:i,Complex:l}=e;return t(lg,{"Array | Matrix":function(y){var w=Ze(y)?y.size():ut(y);switch(w.length){case 1:return g(y)?n(y):w[0]===1?a(y):v(n(y),h(y,y));case 2:{if(g(y))return n(y);var x=w[0],C=w[1];if(x===C)try{return a(y)}catch(S){if(!(S instanceof Error&&S.message.match(/Cannot calculate inverse, determinant is zero/)))throw S}return Ze(y)?r(c(y.valueOf(),x,C),y.storage()):c(y,x,C)}default:throw new RangeError("Matrix must be two dimensional (size: "+it(w)+")")}},any:function(y){return f(y,0)?Je(y):u(1,y)}});function c(b,y,w){var{C:x,F:C}=p(b,y,w),S=o(a(o(n(x),x)),n(x)),E=o(n(C),a(o(C,n(C))));return o(E,S)}function d(b,y,w){for(var x=Je(b),C=0,S=0;S<y;S++){if(w<=C)return x;for(var E=S;m(x[E][C]);)if(E++,y===E&&(E=S,C++,w===C))return x;[x[E],x[S]]=[x[S],x[E]];for(var A=x[S][C],D=0;D<w;D++)x[S][D]=v(x[S][D],A);for(var M=0;M<y;M++)if(M!==S){A=x[M][C];for(var B=0;B<w;B++)x[M][B]=i(x[M][B],o(-1,o(A,x[S][B])))}C++}return x}function p(b,y,w){var x=d(b,y,w),C=b.map((E,A)=>E.filter((D,M)=>M<y&&!m(h(x[M],x[M])))),S=x.filter((E,A)=>!m(h(x[A],x[A])));return{C,F:S}}function m(b){return f(i(b,l(1,1)),i(0,l(1,1)))}function g(b){return s(i(b,l(1,1)),i(o(b,0),l(1,1)))}});function oR(e){var{addScalar:t,subtract:r,flatten:a,multiply:s,multiplyScalar:f,divideScalar:v,sqrt:h,abs:n,bignumber:u,diag:o,inv:i,qr:l,usolve:c,usolveAll:d,equal:p,complex:m,larger:g,smaller:b,matrixFromColumns:y,dot:w}=e;function x(I,U,j,L,P){P===void 0&&(P=!0);var k=C(I,U,j,L,P);S(I,U,j,L,P,k);var{values:V,C:Q}=E(I,U,j,L,P),ne;return P&&(ne=A(I,U,Q,k,V,j,L),ne=y(...ne)),{values:V,vectors:ne}}function C(I,U,j,L,P){var k=L==="BigNumber",V=L==="Complex",Q=k?u(0):0,ne=k?u(1):V?m(1):1,re=k?u(1):1,ie=k?u(10):2,de=f(ie,ie),ve;P&&(ve=Array(U).fill(ne));for(var ce=!1;!ce;){ce=!0;for(var ae=0;ae<U;ae++){for(var G=Q,X=Q,te=0;te<U;te++)if(ae!==te){var W=n(I[ae][te]);G=t(G,W),X=t(X,W)}if(!p(G,0)&&!p(X,0)){for(var ee=re,he=G,pe=v(X,ie),ue=f(X,ie);b(he,pe);)he=f(he,de),ee=f(ee,ie);for(;g(he,ue);)he=v(he,de),ee=v(ee,ie);var Y=b(v(t(he,X),ee),f(t(G,X),.95));if(Y){ce=!1;for(var K=v(1,ee),fe=0;fe<U;fe++)ae!==fe&&(I[ae][fe]=f(I[ae][fe],ee),I[fe][ae]=f(I[fe][ae],K));P&&(ve[ae]=f(ve[ae],ee))}}}}return o(ve)}function S(I,U,j,L,P,k){var V=L==="BigNumber",Q=L==="Complex",ne=V?u(0):Q?m(0):0;V&&(j=u(j));for(var re=0;re<U-2;re++){for(var ie=0,de=ne,ve=re+1;ve<U;ve++){var ce=I[ve][re];b(n(de),n(ce))&&(de=ce,ie=ve)}if(!b(n(de),j)){if(ie!==re+1){var ae=I[ie];I[ie]=I[re+1],I[re+1]=ae;for(var G=0;G<U;G++){var X=I[G][ie];I[G][ie]=I[G][re+1],I[G][re+1]=X}if(P){var te=k[ie];k[ie]=k[re+1],k[re+1]=te}}for(var W=re+2;W<U;W++){var ee=v(I[W][re],de);if(ee!==0){for(var he=0;he<U;he++)I[W][he]=r(I[W][he],f(ee,I[re+1][he]));for(var pe=0;pe<U;pe++)I[pe][re+1]=t(I[pe][re+1],f(ee,I[pe][W]));if(P)for(var ue=0;ue<U;ue++)k[W][ue]=r(k[W][ue],f(ee,k[re+1][ue]))}}}}return k}function E(I,U,j,L,P){var k=L==="BigNumber",V=L==="Complex",Q=k?u(1):V?m(1):1;k&&(j=u(j));for(var ne=Je(I),re=[],ie=U,de=[],ve=P?o(Array(U).fill(Q)):void 0,ce=P?o(Array(ie).fill(Q)):void 0,ae=0;ae<=100;){ae+=1;for(var G=0,X=0;X<ie;X++)ne[X][X]=r(ne[X][X],G);var{Q:te,R:W}=l(ne);ne=s(W,te);for(var ee=0;ee<ie;ee++)ne[ee][ee]=t(ne[ee][ee],G);if(P&&(ce=s(ce,te)),ie===1||b(n(ne[ie-1][ie-2]),j)){ae=0,re.push(ne[ie-1][ie-1]),P&&(de.unshift([[1]]),B(ce,U),ve=s(ve,ce),ie>1&&(ce=o(Array(ie-1).fill(Q)))),ie-=1,ne.pop();for(var he=0;he<ie;he++)ne[he].pop()}else if(ie===2||b(n(ne[ie-2][ie-3]),j)){ae=0;var pe=D(ne[ie-2][ie-2],ne[ie-2][ie-1],ne[ie-1][ie-2],ne[ie-1][ie-1]);re.push(...pe),P&&(de.unshift(M(ne[ie-2][ie-2],ne[ie-2][ie-1],ne[ie-1][ie-2],ne[ie-1][ie-1],pe[0],pe[1],j,L)),B(ce,U),ve=s(ve,ce),ie>2&&(ce=o(Array(ie-2).fill(Q)))),ie-=2,ne.pop(),ne.pop();for(var ue=0;ue<ie;ue++)ne[ue].pop(),ne[ue].pop()}if(ie===0)break}if(re.sort((fe,me)=>+r(n(fe),n(me))),ae>100){var Y=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+re.join(", "));throw Y.values=re,Y.vectors=[],Y}var K=P?s(ve,O(de,U)):void 0;return{values:re,C:K}}function A(I,U,j,L,P,k,V){var Q=i(j),ne=s(Q,I,j),re=V==="BigNumber",ie=V==="Complex",de=re?u(0):ie?m(0):0,ve=re?u(1):ie?m(1):1,ce=[],ae=[];for(var G of P){var X=F(ce,G,p);X===-1?(ce.push(G),ae.push(1)):ae[X]+=1}for(var te=[],W=ce.length,ee=Array(U).fill(de),he=o(Array(U).fill(ve)),pe=[],ue=function(me){var be=ce[me],Se=r(ne,s(be,he)),xe=d(Se,ee);for(xe.shift();xe.length<ae[me];){var Ce=z(Se,U,xe,k,V);if(Ce==null){pe.push(be);break}xe.push(Ce)}var _e=s(i(L),j);xe=xe.map(ke=>s(_e,ke)),te.push(...xe.map(ke=>a(ke)))},Y=0;Y<W;Y++)ue(Y);if(pe.length!==0){var K=new Error("Failed to find eigenvectors for the following eigenvalues: "+pe.join(", "));throw K.values=P,K.vectors=te,K}return te}function D(I,U,j,L){var P=t(I,L),k=r(f(I,L),f(U,j)),V=f(P,.5),Q=f(h(r(f(P,P),f(4,k))),.5);return[t(V,Q),r(V,Q)]}function M(I,U,j,L,P,k,V,Q){var ne=Q==="BigNumber",re=Q==="Complex",ie=ne?u(0):re?m(0):0,de=ne?u(1):re?m(1):1;if(b(n(j),V))return[[de,ie],[ie,de]];if(g(n(r(P,k)),V))return[[r(P,L),r(k,L)],[j,j]];var ve=r(I,P),ce=r(U,P),ae=r(j,P),G=r(L,P);return b(n(ce),V)?[[ve,de],[ae,ie]]:[[ce,ie],[G,de]]}function B(I,U){for(var j=0;j<I.length;j++)I[j].push(...Array(U-I[j].length).fill(0));for(var L=I.length;L<U;L++)I.push(Array(U).fill(0)),I[L][L]=1;return I}function O(I,U){for(var j=[],L=0;L<U;L++)j[L]=Array(U).fill(0);var P=0;for(var k of I){for(var V=k.length,Q=0;Q<V;Q++)for(var ne=0;ne<V;ne++)j[P+Q][P+ne]=k[Q][ne];P+=V}return j}function F(I,U,j){for(var L=0;L<I.length;L++)if(j(I[L],U))return L;return-1}function z(I,U,j,L,P){for(var k=P==="BigNumber"?u(1e3):1e3,V,Q=0;V=N(U,j,P),V=c(I,V),!g(q(V),k);)if(++Q>=5)return null;for(Q=0;;){var ne=c(I,V);if(b(q(T(V,[ne])),L))break;if(++Q>=10)return null;V=_(ne)}return V}function N(I,U,j){var L=j==="BigNumber",P=j==="Complex",k=Array(I).fill(0).map(V=>2*Math.random()-1);return L&&(k=k.map(V=>u(V))),P&&(k=k.map(V=>m(V))),k=T(k,U),_(k,j)}function T(I,U){for(var j of U)I=r(I,s(v(w(j,I),w(j,j)),j));return I}function q(I){return n(h(w(I,I)))}function _(I,U){var j=U==="BigNumber",L=U==="Complex",P=j?u(1):L?m(1):1;return s(v(P,q(I)),I)}return x}function sR(e){var{config:t,addScalar:r,subtract:a,abs:s,atan:f,cos:v,sin:h,multiplyScalar:n,inv:u,bignumber:o,multiply:i,add:l}=e;function c(D,M){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.epsilon,O=arguments.length>3?arguments[3]:void 0;if(O==="number")return d(D,B);if(O==="BigNumber")return p(D,B);throw TypeError("Unsupported data type: "+O)}function d(D,M){for(var B=D.length,O=Math.abs(M/B),F,z=new Array(B),N=0;N<B;N++)z[N]=A(B,0),z[N][N]=1;for(var T=C(D);Math.abs(T[1])>=Math.abs(O);){var q=T[0][0],_=T[0][1];F=m(D[q][q],D[_][_],D[q][_]),D=x(D,F,q,_),z=b(z,F,q,_),T=C(D)}for(var I=A(B,0),U=0;U<B;U++)I[U]=D[U][U];return E(Je(I),Je(z))}function p(D,M){for(var B=D.length,O=s(M/B),F,z=new Array(B),N=0;N<B;N++)z[N]=A(B,0),z[N][N]=1;for(var T=S(D);s(T[1])>=s(O);){var q=T[0][0],_=T[0][1];F=g(D[q][q],D[_][_],D[q][_]),D=w(D,F,q,_),z=y(z,F,q,_),T=S(D)}for(var I=A(B,0),U=0;U<B;U++)I[U]=D[U][U];return E(Je(I),Je(z))}function m(D,M,B){var O=M-D;return Math.abs(O)<=t.epsilon?Math.PI/4:.5*Math.atan(2*B/(M-D))}function g(D,M,B){var O=a(M,D);return s(O)<=t.epsilon?o(-1).acos().div(4):n(.5,f(i(2,B,u(O))))}function b(D,M,B,O){for(var F=D.length,z=Math.cos(M),N=Math.sin(M),T=A(F,0),q=A(F,0),_=0;_<F;_++)T[_]=z*D[_][B]-N*D[_][O],q[_]=N*D[_][B]+z*D[_][O];for(var I=0;I<F;I++)D[I][B]=T[I],D[I][O]=q[I];return D}function y(D,M,B,O){for(var F=D.length,z=v(M),N=h(M),T=A(F,o(0)),q=A(F,o(0)),_=0;_<F;_++)T[_]=a(n(z,D[_][B]),n(N,D[_][O])),q[_]=r(n(N,D[_][B]),n(z,D[_][O]));for(var I=0;I<F;I++)D[I][B]=T[I],D[I][O]=q[I];return D}function w(D,M,B,O){for(var F=D.length,z=o(v(M)),N=o(h(M)),T=n(z,z),q=n(N,N),_=A(F,o(0)),I=A(F,o(0)),U=i(o(2),z,N,D[B][O]),j=r(a(n(T,D[B][B]),U),n(q,D[O][O])),L=l(n(q,D[B][B]),U,n(T,D[O][O])),P=0;P<F;P++)_[P]=a(n(z,D[B][P]),n(N,D[O][P])),I[P]=r(n(N,D[B][P]),n(z,D[O][P]));D[B][B]=j,D[O][O]=L,D[B][O]=o(0),D[O][B]=o(0);for(var k=0;k<F;k++)k!==B&&k!==O&&(D[B][k]=_[k],D[k][B]=_[k],D[O][k]=I[k],D[k][O]=I[k]);return D}function x(D,M,B,O){for(var F=D.length,z=Math.cos(M),N=Math.sin(M),T=z*z,q=N*N,_=A(F,0),I=A(F,0),U=T*D[B][B]-2*z*N*D[B][O]+q*D[O][O],j=q*D[B][B]+2*z*N*D[B][O]+T*D[O][O],L=0;L<F;L++)_[L]=z*D[B][L]-N*D[O][L],I[L]=N*D[B][L]+z*D[O][L];D[B][B]=U,D[O][O]=j,D[B][O]=0,D[O][B]=0;for(var P=0;P<F;P++)P!==B&&P!==O&&(D[B][P]=_[P],D[P][B]=_[P],D[O][P]=I[P],D[P][O]=I[P]);return D}function C(D){for(var M=D.length,B=0,O=[0,1],F=0;F<M;F++)for(var z=F+1;z<M;z++)Math.abs(B)<Math.abs(D[F][z])&&(B=Math.abs(D[F][z]),O=[F,z]);return[O,B]}function S(D){for(var M=D.length,B=0,O=[0,1],F=0;F<M;F++)for(var z=F+1;z<M;z++)s(B)<s(D[F][z])&&(B=s(D[F][z]),O=[F,z]);return[O,B]}function E(D,M){for(var B=D.length,O=Array(B),F=Array(B),z=0;z<B;z++)F[z]=Array(B);for(var N=0;N<B;N++){for(var T=0,q=D[0],_=0;_<D.length;_++)s(D[_])<s(q)&&(T=_,q=D[T]);O[N]=D.splice(T,1)[0];for(var I=0;I<B;I++)F[I][N]=M[I][T],M[I].splice(T,1)}return{values:O,vectors:F}}function A(D,M){for(var B=new Array(D),O=0;O<D;O++)B[O]=M;return B}return c}var uR="eigs",lR=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],cR=Z(uR,lR,e=>{var{config:t,typed:r,matrix:a,addScalar:s,subtract:f,equal:v,abs:h,atan:n,cos:u,sin:o,multiplyScalar:i,divideScalar:l,inv:c,bignumber:d,multiply:p,add:m,larger:g,column:b,flatten:y,number:w,complex:x,sqrt:C,diag:S,qr:E,usolve:A,usolveAll:D,im:M,re:B,smaller:O,matrixFromColumns:F,dot:z}=e,N=sR({config:t,addScalar:s,subtract:f,column:b,flatten:y,equal:v,abs:h,atan:n,cos:u,sin:o,multiplyScalar:i,inv:c,bignumber:d,complex:x,multiply:p,add:m}),T=oR({config:t,addScalar:s,subtract:f,multiply:p,multiplyScalar:i,flatten:y,divideScalar:l,sqrt:C,abs:h,bignumber:d,diag:S,qr:E,inv:c,usolve:A,usolveAll:D,equal:v,complex:x,larger:g,smaller:O,matrixFromColumns:F,dot:z});return r("eigs",{Array:function(P){var k=a(P);return q(k)},"Array, number|BigNumber":function(P,k){var V=a(P);return q(V,k)},Matrix:function(P){var{values:k,vectors:V}=q(P);return{values:a(k),vectors:a(V)}},"Matrix, number|BigNumber":function(P,k){var{values:V,vectors:Q}=q(P,k);return{values:a(V),vectors:a(Q)}}});function q(L,P){P===void 0&&(P=t.epsilon);var k=L.size();if(k.length!==2||k[0]!==k[1])throw new RangeError("Matrix must be square (size: "+it(k)+")");var V=L.toArray(),Q=k[0];if(I(V,Q,P)&&(U(V,Q),_(V,Q,P))){var ne=j(L,V,Q);return N(V,Q,P,ne)}var re=j(L,V,Q);return T(V,Q,P,re)}function _(L,P,k){for(var V=0;V<P;V++)for(var Q=V;Q<P;Q++)if(g(d(h(f(L[V][Q],L[Q][V]))),k))return!1;return!0}function I(L,P,k){for(var V=0;V<P;V++)for(var Q=0;Q<P;Q++)if(g(d(h(M(L[V][Q]))),k))return!1;return!0}function U(L,P){for(var k=0;k<P;k++)for(var V=0;V<P;V++)L[k][V]=B(L[k][V])}function j(L,P,k){var V=L.datatype();if(V==="number"||V==="BigNumber"||V==="Complex")return V;for(var Q=!1,ne=!1,re=!1,ie=0;ie<k;ie++)for(var de=0;de<k;de++){var ve=P[ie][de];if(dt(ve)||us(ve))Q=!0;else if(ct(ve))ne=!0;else if(Wn(ve))re=!0;else throw TypeError("Unsupported type in Matrix: "+Bt(ve))}if(ne&&re&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),re){for(var ce=0;ce<k;ce++)for(var ae=0;ae<k;ae++)P[ce][ae]=x(P[ce][ae]);return"Complex"}if(ne){for(var G=0;G<k;G++)for(var X=0;X<k;X++)P[G][X]=d(P[G][X]);return"BigNumber"}if(Q){for(var te=0;te<k;te++)for(var W=0;W<k;W++)P[te][W]=w(P[te][W]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),cg="expm",fR=["typed","abs","add","identity","inv","multiply"],hR=Z(cg,fR,e=>{var{typed:t,abs:r,add:a,identity:s,inv:f,multiply:v}=e;return t(cg,{Matrix:function(i){var l=i.size();if(l.length!==2||l[0]!==l[1])throw new RangeError("Matrix must be square (size: "+it(l)+")");for(var c=l[0],d=1e-15,p=h(i),m=n(p,d),g=m.q,b=m.j,y=v(i,Math.pow(2,-b)),w=s(c),x=s(c),C=1,S=y,E=-1,A=1;A<=g;A++)A>1&&(S=v(S,y),E=-E),C=C*(g-A+1)/((2*g-A+1)*A),w=a(w,v(C,S)),x=a(x,v(C*E,S));for(var D=v(f(x),w),M=0;M<b;M++)D=v(D,D);return Gi(i)?i.createSparseMatrix(D):D}});function h(o){for(var i=o.size()[0],l=0,c=0;c<i;c++){for(var d=0,p=0;p<i;p++)d+=r(o.get([c,p]));l=Math.max(d,l)}return l}function n(o,i){for(var l=30,c=0;c<l;c++)for(var d=0;d<=c;d++){var p=c-d;if(u(o,d,p)<i)return{q:d,j:p}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function u(o,i,l){for(var c=1,d=2;d<=i;d++)c*=d;for(var p=c,m=i+1;m<=2*i;m++)p*=m;var g=p*(2*i+1);return 8*Math.pow(o/Math.pow(2,l),2*i)*c*c/(p*g)}}),fg="sqrtm",dR=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],pR=Z(fg,dR,e=>{var{typed:t,abs:r,add:a,multiply:s,map:f,sqrt:v,subtract:h,inv:n,size:u,max:o,identity:i}=e,l=1e3,c=1e-6;function d(p){var m,g=0,b=p,y=i(u(p));do{var w=b;if(b=s(.5,a(w,n(y))),y=s(.5,a(y,n(w))),m=o(r(h(b,w))),m>c&&++g>l)throw new Error("computing square root of matrix: iterative method could not converge")}while(m>c);return b}return t(fg,{"Array | Matrix":function(m){var g=Ze(m)?m.size():ut(m);switch(g.length){case 1:if(g[0]===1)return f(m,v);throw new RangeError("Matrix must be square (size: "+it(g)+")");case 2:{var b=g[0],y=g[1];if(b===y)return d(m);throw new RangeError("Matrix must be square (size: "+it(g)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+it(g)+")")}}})}),hg="sylvester",mR=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],vR=Z(hg,mR,e=>{var{typed:t,schur:r,matrixFromColumns:a,matrix:s,multiply:f,range:v,concat:h,transpose:n,index:u,subset:o,add:i,subtract:l,identity:c,lusolve:d,abs:p}=e;return t(hg,{"Matrix, Matrix, Matrix":m,"Array, Matrix, Matrix":function(b,y,w){return m(s(b),y,w)},"Array, Array, Matrix":function(b,y,w){return m(s(b),s(y),w)},"Array, Matrix, Array":function(b,y,w){return m(s(b),y,s(w))},"Matrix, Array, Matrix":function(b,y,w){return m(b,s(y),w)},"Matrix, Array, Array":function(b,y,w){return m(b,s(y),s(w))},"Matrix, Matrix, Array":function(b,y,w){return m(b,y,s(w))},"Array, Array, Array":function(b,y,w){return m(s(b),s(y),s(w)).toArray()}});function m(g,b,y){for(var w=b.size()[0],x=g.size()[0],C=r(g),S=C.T,E=C.U,A=r(f(-1,b)),D=A.T,M=A.U,B=f(f(n(E),y),M),O=v(0,x),F=[],z=(ve,ce)=>h(ve,ce,1),N=(ve,ce)=>h(ve,ce,0),T=0;T<w;T++)if(T<w-1&&p(o(D,u(T+1,T)))>1e-5){for(var q=N(o(B,u(O,T)),o(B,u(O,T+1))),_=0;_<T;_++)q=i(q,N(f(F[_],o(D,u(_,T))),f(F[_],o(D,u(_,T+1)))));var I=f(c(x),f(-1,o(D,u(T,T)))),U=f(c(x),f(-1,o(D,u(T+1,T)))),j=f(c(x),f(-1,o(D,u(T,T+1)))),L=f(c(x),f(-1,o(D,u(T+1,T+1)))),P=N(z(i(S,I),U),z(j,i(S,L))),k=d(P,q);F[T]=k.subset(u(v(0,x),0)),F[T+1]=k.subset(u(v(x,2*x),0)),T++}else{for(var V=o(B,u(O,T)),Q=0;Q<T;Q++)V=i(V,f(F[Q],o(D,u(Q,T))));var ne=o(D,u(T,T)),re=l(S,f(ne,c(x)));F[T]=d(re,V)}var ie=s(a(...F)),de=f(E,f(ie,n(M)));return de}}),dg="schur",gR=["typed","matrix","identity","multiply","qr","norm","subtract"],yR=Z(dg,gR,e=>{var{typed:t,matrix:r,identity:a,multiply:s,qr:f,norm:v,subtract:h}=e;return t(dg,{Array:function(o){var i=n(r(o));return{U:i.U.valueOf(),T:i.T.valueOf()}},Matrix:function(o){return n(o)}});function n(u){var o=u.size()[0],i=u,l=a(o),c=0,d;do{d=i;var p=f(i),m=p.Q,g=p.R;if(i=s(g,m),l=s(l,m),c++>100)break}while(v(h(i,d))>1e-4);return{U:l,T:i}}}),pg="lyap",bR=["typed","matrix","sylvester","multiply","transpose"],wR=Z(pg,bR,e=>{var{typed:t,matrix:r,sylvester:a,multiply:s,transpose:f}=e;return t(pg,{"Matrix, Matrix":function(h,n){return a(h,f(h),s(-1,n))},"Array, Matrix":function(h,n){return a(r(h),f(r(h)),s(-1,n))},"Matrix, Array":function(h,n){return a(h,f(r(h)),r(s(-1,n)))},"Array, Array":function(h,n){return a(r(h),f(r(h)),r(s(-1,n))).toArray()}})}),xR="divide",CR=["typed","matrix","multiply","equalScalar","divideScalar","inv"],SR=Z(xR,CR,e=>{var{typed:t,matrix:r,multiply:a,equalScalar:s,divideScalar:f,inv:v}=e,h=dr({typed:t,equalScalar:s}),n=pn({typed:t});return t("divide",E1({"Array | Matrix, Array | Matrix":function(o,i){return a(o,v(i))},"DenseMatrix, any":function(o,i){return n(o,i,f,!1)},"SparseMatrix, any":function(o,i){return h(o,i,f,!1)},"Array, any":function(o,i){return n(r(o),i,f,!1).valueOf()},"any, Array | Matrix":function(o,i){return a(o,v(i))}},f.signatures))}),mg="distance",ER=["typed","addScalar","subtract","divideScalar","multiplyScalar","unaryMinus","sqrt","abs"],_R=Z(mg,ER,e=>{var{typed:t,addScalar:r,subtract:a,multiplyScalar:s,divideScalar:f,unaryMinus:v,sqrt:h,abs:n}=e;return t(mg,{"Array, Array, Array":function(x,C,S){if(x.length===2&&C.length===2&&S.length===2){if(!o(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!o(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!o(S))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");var E=f(a(S[1],S[0]),a(C[1],C[0])),A=s(s(E,E),C[0]),D=v(s(E,C[0])),M=x[1];return m(x[0],x[1],A,D,M)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(x,C,S){if(Object.keys(x).length===2&&Object.keys(C).length===2&&Object.keys(S).length===2){if(!o(x))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!o(C))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!o(S))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"lineOnePtX"in C&&"lineOnePtY"in C&&"lineTwoPtX"in S&&"lineTwoPtY"in S){var E=f(a(S.lineTwoPtY,S.lineTwoPtX),a(C.lineOnePtY,C.lineOnePtX)),A=s(s(E,E),C.lineOnePtX),D=v(s(E,C.lineOnePtX)),M=x.pointX;return m(x.pointX,x.pointY,A,D,M)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(x,C){if(x.length===2&&C.length===3){if(!o(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!i(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return m(x[0],x[1],C[0],C[1],C[2])}else if(x.length===3&&C.length===6){if(!i(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!c(C))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return g(x[0],x[1],x[2],C[0],C[1],C[2],C[3],C[4],C[5])}else if(x.length===C.length&&x.length>0){if(!l(x))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!l(C))throw new TypeError("All values of an array should be numbers or BigNumbers");return b(x,C)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(x,C){if(Object.keys(x).length===2&&Object.keys(C).length===3){if(!o(x))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!i(C))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"xCoeffLine"in C&&"yCoeffLine"in C&&"constant"in C)return m(x.pointX,x.pointY,C.xCoeffLine,C.yCoeffLine,C.constant);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===3&&Object.keys(C).length===6){if(!i(x))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!c(C))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"x0"in C&&"y0"in C&&"z0"in C&&"a"in C&&"b"in C&&"c"in C)return g(x.pointX,x.pointY,x.pointZ,C.x0,C.y0,C.z0,C.a,C.b,C.c);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===2&&Object.keys(C).length===2){if(!o(x))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!o(C))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in x&&"pointOneY"in x&&"pointTwoX"in C&&"pointTwoY"in C)return b([x.pointOneX,x.pointOneY],[C.pointTwoX,C.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===3&&Object.keys(C).length===3){if(!i(x))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!i(C))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in x&&"pointOneY"in x&&"pointOneZ"in x&&"pointTwoX"in C&&"pointTwoY"in C&&"pointTwoZ"in C)return b([x.pointOneX,x.pointOneY,x.pointOneZ],[C.pointTwoX,C.pointTwoY,C.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(x){if(!p(x))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return y(x)}});function u(w){return typeof w=="number"||ct(w)}function o(w){return w.constructor!==Array&&(w=d(w)),u(w[0])&&u(w[1])}function i(w){return w.constructor!==Array&&(w=d(w)),u(w[0])&&u(w[1])&&u(w[2])}function l(w){return Array.isArray(w)||(w=d(w)),w.every(u)}function c(w){return w.constructor!==Array&&(w=d(w)),u(w[0])&&u(w[1])&&u(w[2])&&u(w[3])&&u(w[4])&&u(w[5])}function d(w){for(var x=Object.keys(w),C=[],S=0;S<x.length;S++)C.push(w[x[S]]);return C}function p(w){if(w[0].length===2&&u(w[0][0])&&u(w[0][1])){if(w.some(x=>x.length!==2||!u(x[0])||!u(x[1])))return!1}else if(w[0].length===3&&u(w[0][0])&&u(w[0][1])&&u(w[0][2])){if(w.some(x=>x.length!==3||!u(x[0])||!u(x[1])||!u(x[2])))return!1}else return!1;return!0}function m(w,x,C,S,E){var A=n(r(r(s(C,w),s(S,x)),E)),D=h(r(s(C,C),s(S,S)));return f(A,D)}function g(w,x,C,S,E,A,D,M,B){var O=[a(s(a(E,x),B),s(a(A,C),M)),a(s(a(A,C),D),s(a(S,w),B)),a(s(a(S,w),M),s(a(E,x),D))];O=h(r(r(s(O[0],O[0]),s(O[1],O[1])),s(O[2],O[2])));var F=h(r(r(s(D,D),s(M,M)),s(B,B)));return f(O,F)}function b(w,x){for(var C=w.length,S=0,E=0,A=0;A<C;A++)E=a(w[A],x[A]),S=r(s(E,E),S);return h(S)}function y(w){for(var x=[],C=[],S=[],E=0;E<w.length-1;E++)for(var A=E+1;A<w.length;A++)w[0].length===2?(C=[w[E][0],w[E][1]],S=[w[A][0],w[A][1]]):w[0].length===3&&(C=[w[E][0],w[E][1],w[E][2]],S=[w[A][0],w[A][1],w[A][2]]),x.push(b(C,S));return x}}),DR="intersect",AR=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],NR=Z(DR,AR,e=>{var{typed:t,config:r,abs:a,add:s,addScalar:f,matrix:v,multiply:h,multiplyScalar:n,divideScalar:u,subtract:o,smaller:i,equalScalar:l,flatten:c,isZero:d,isNumeric:p}=e;return t("intersect",{"Array, Array, Array":m,"Array, Array, Array, Array":g,"Matrix, Matrix, Matrix":function(M,B,O){var F=m(M.valueOf(),B.valueOf(),O.valueOf());return F===null?null:v(F)},"Matrix, Matrix, Matrix, Matrix":function(M,B,O,F){var z=g(M.valueOf(),B.valueOf(),O.valueOf(),F.valueOf());return z===null?null:v(z)}});function m(D,M,B){if(D=b(D),M=b(M),B=b(B),!w(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!w(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!x(B))throw new TypeError("Array with 4 numbers expected as third argument");return A(D[0],D[1],D[2],M[0],M[1],M[2],B[0],B[1],B[2],B[3])}function g(D,M,B,O){if(D=b(D),M=b(M),B=b(B),O=b(O),D.length===2){if(!y(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!y(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!y(B))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!y(O))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return C(D,M,B,O)}else if(D.length===3){if(!w(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!w(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!w(B))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!w(O))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return E(D[0],D[1],D[2],M[0],M[1],M[2],B[0],B[1],B[2],O[0],O[1],O[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function b(D){return D.length===1?D[0]:D.length>1&&Array.isArray(D[0])&&D.every(M=>Array.isArray(M)&&M.length===1)?c(D):D}function y(D){return D.length===2&&p(D[0])&&p(D[1])}function w(D){return D.length===3&&p(D[0])&&p(D[1])&&p(D[2])}function x(D){return D.length===4&&p(D[0])&&p(D[1])&&p(D[2])&&p(D[3])}function C(D,M,B,O){var F=D,z=B,N=o(F,M),T=o(z,O),q=o(n(N[0],T[1]),n(T[0],N[1]));if(d(q)||i(a(q),r.epsilon))return null;var _=n(T[0],F[1]),I=n(T[1],F[0]),U=n(T[0],z[1]),j=n(T[1],z[0]),L=u(f(o(o(_,I),U),j),q);return s(h(N,L),F)}function S(D,M,B,O,F,z,N,T,q,_,I,U){var j=n(o(D,M),o(B,O)),L=n(o(F,z),o(N,T)),P=n(o(q,_),o(I,U));return f(f(j,L),P)}function E(D,M,B,O,F,z,N,T,q,_,I,U){var j=S(D,N,_,N,M,T,I,T,B,q,U,q),L=S(_,N,O,D,I,T,F,M,U,q,z,B),P=S(D,N,O,D,M,T,F,M,B,q,z,B),k=S(_,N,_,N,I,T,I,T,U,q,U,q),V=S(O,D,O,D,F,M,F,M,z,B,z,B),Q=o(n(j,L),n(P,k)),ne=o(n(V,k),n(L,L));if(d(ne))return null;var re=u(Q,ne),ie=u(f(j,n(re,L)),k),de=f(D,n(re,o(O,D))),ve=f(M,n(re,o(F,M))),ce=f(B,n(re,o(z,B))),ae=f(N,n(ie,o(_,N))),G=f(T,n(ie,o(I,T))),X=f(q,n(ie,o(U,q)));return l(de,ae)&&l(ve,G)&&l(ce,X)?[de,ve,ce]:null}function A(D,M,B,O,F,z,N,T,q,_){var I=n(D,N),U=n(O,N),j=n(M,T),L=n(F,T),P=n(B,q),k=n(z,q),V=o(o(o(_,I),j),P),Q=o(o(o(f(f(U,L),k),I),j),P),ne=u(V,Q),re=f(D,n(ne,o(O,D))),ie=f(M,n(ne,o(F,M))),de=f(B,n(ne,o(z,B)));return[re,ie,de]}}),vg="sum",TR=["typed","config","add","numeric"],dw=Z(vg,TR,e=>{var{typed:t,config:r,add:a,numeric:s}=e;return t(vg,{"Array | Matrix":f,"Array | Matrix, number | BigNumber":v,"...":function(n){if(io(n))throw new TypeError("Scalar values expected in function sum");return f(n)}});function f(h){var n;return Qn(h,function(u){try{n=n===void 0?u:a(n,u)}catch(o){throw Sr(o,"sum",u)}}),n===void 0&&(n=s(0,r.number)),typeof n=="string"&&(n=s(n,r.number)),n}function v(h,n){try{var u=Ml(h,n,a);return u}catch(o){throw Sr(o,"sum")}}}),iu="cumsum",OR=["typed","add","unaryPlus"],pw=Z(iu,OR,e=>{var{typed:t,add:r,unaryPlus:a}=e;return t(iu,{Array:s,Matrix:function(u){return u.create(s(u.valueOf()))},"Array, number | BigNumber":v,"Matrix, number | BigNumber":function(u,o){return u.create(v(u.valueOf(),o))},"...":function(u){if(io(u))throw new TypeError("All values expected to be scalar in function cumsum");return s(u)}});function s(n){try{return f(n)}catch(u){throw Sr(u,iu)}}function f(n){if(n.length===0)return[];for(var u=[a(n[0])],o=1;o<n.length;++o)u.push(r(u[o-1],n[o]));return u}function v(n,u){var o=ut(n);if(u<0||u>=o.length)throw new hn(u,o.length);try{return h(n,u)}catch(i){throw Sr(i,iu)}}function h(n,u){var o,i,l;if(u<=0){var c=n[0][0];if(Array.isArray(c)){for(l=Z1(n),i=[],o=0;o<l.length;o++)i[o]=h(l[o],u-1);return i}else return f(n)}else{for(i=[],o=0;o<n.length;o++)i[o]=h(n[o],u-1);return i}}}),gg="mean",MR=["typed","add","divide"],mw=Z(gg,MR,e=>{var{typed:t,add:r,divide:a}=e;return t(gg,{"Array | Matrix":f,"Array | Matrix, number | BigNumber":s,"...":function(h){if(io(h))throw new TypeError("Scalar values expected in function mean");return f(h)}});function s(v,h){try{var n=Ml(v,h,r),u=Array.isArray(v)?ut(v):v.size();return a(n,u[h])}catch(o){throw Sr(o,"mean")}}function f(v){var h,n=0;if(Qn(v,function(u){try{h=h===void 0?u:r(h,u),n++}catch(o){throw Sr(o,"mean",u)}}),n===0)throw new Error("Cannot calculate the mean of an empty array");return a(h,n)}}),yg="median",FR=["typed","add","divide","compare","partitionSelect"],PR=Z(yg,FR,e=>{var{typed:t,add:r,divide:a,compare:s,partitionSelect:f}=e;function v(u){try{u=yt(u.valueOf());var o=u.length;if(o===0)throw new Error("Cannot calculate median of an empty array");if(o%2===0){for(var i=o/2-1,l=f(u,i+1),c=u[i],d=0;d<i;++d)s(u[d],c)>0&&(c=u[d]);return n(c,l)}else{var p=f(u,(o-1)/2);return h(p)}}catch(m){throw Sr(m,"median")}}var h=t({"number | BigNumber | Complex | Unit":function(o){return o}}),n=t({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(o,i){return a(r(o,i),2)}});return t(yg,{"Array | Matrix":v,"Array | Matrix, number | BigNumber":function(o,i){throw new Error("median(A, dim) is not yet supported")},"...":function(o){if(io(o))throw new TypeError("Scalar values expected in function median");return v(o)}})}),bg="mad",BR=["typed","abs","map","median","subtract"],IR=Z(bg,BR,e=>{var{typed:t,abs:r,map:a,median:s,subtract:f}=e;return t(bg,{"Array | Matrix":v,"...":function(n){return v(n)}});function v(h){if(h=yt(h.valueOf()),h.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var n=s(h);return s(a(h,function(u){return r(f(u,n))}))}catch(u){throw u instanceof TypeError&&u.message.indexOf("median")!==-1?new TypeError(u.message.replace("median","mad")):Sr(u,"mad")}}}),zc="unbiased",wg="variance",RR=["typed","add","subtract","multiply","divide","apply","isNaN"],vw=Z(wg,RR,e=>{var{typed:t,add:r,subtract:a,multiply:s,divide:f,apply:v,isNaN:h}=e;return t(wg,{"Array | Matrix":function(i){return n(i,zc)},"Array | Matrix, string":n,"Array | Matrix, number | BigNumber":function(i,l){return u(i,l,zc)},"Array | Matrix, number | BigNumber, string":u,"...":function(i){return n(i,zc)}});function n(o,i){var l,c=0;if(o.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Qn(o,function(m){try{l=l===void 0?m:r(l,m),c++}catch(g){throw Sr(g,"variance",m)}}),c===0)throw new Error("Cannot calculate variance of an empty array");var d=f(l,c);if(l=void 0,Qn(o,function(m){var g=a(m,d);l=l===void 0?s(g,g):r(l,s(g,g))}),h(l))return l;switch(i){case"uncorrected":return f(l,c);case"biased":return f(l,c+1);case"unbiased":{var p=ct(l)?l.mul(0):0;return c===1?p:f(l,c-1)}default:throw new Error('Unknown normalization "'+i+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(o,i,l){try{if(o.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return v(o,i,c=>n(c,l))}catch(c){throw Sr(c,"variance")}}}),kR="quantileSeq",$R=["typed","add","multiply","partitionSelect","compare"],LR=Z(kR,$R,e=>{var{typed:t,add:r,multiply:a,partitionSelect:s,compare:f}=e;function v(u,o,i){var l,c,d;if(arguments.length<2||arguments.length>3)throw new SyntaxError("Function quantileSeq requires two or three parameters");if(Jn(u)){if(i=i||!1,typeof i=="boolean"){if(c=u.valueOf(),dt(o)){if(o<0)throw new Error("N/prob must be non-negative");if(o<=1)return h(c,o,i);if(o>1){if(!qe(o))throw new Error("N must be a positive integer");var p=o+1;l=new Array(o);for(var m=0;m<o;)l[m]=h(c,++m/p,i);return l}}if(ct(o)){var g=o.constructor;if(o.isNegative())throw new Error("N/prob must be non-negative");if(d=new g(1),o.lte(d))return new g(h(c,o,i));if(o.gt(d)){if(!o.isInteger())throw new Error("N must be a positive integer");var b=o.toNumber();if(b>4294967295)throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var y=new g(b+1);l=new Array(b);for(var w=0;w<b;)l[w]=new g(h(c,new g(++w).div(y),i));return l}}if(Array.isArray(o)){l=new Array(o.length);for(var x=0;x<l.length;++x){var C=o[x];if(dt(C)){if(C<0||C>1)throw new Error("Probability must be between 0 and 1, inclusive")}else if(ct(C)){if(d=new C.constructor(1),C.isNegative()||C.gt(d))throw new Error("Probability must be between 0 and 1, inclusive")}else throw new TypeError("Unexpected type of argument in function quantileSeq");l[x]=h(c,C,i)}return l}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}function h(u,o,i){var l=yt(u),c=l.length;if(c===0)throw new Error("Cannot calculate quantile of an empty sequence");if(dt(o)){var d=o*(c-1),p=d%1;if(p===0){var m=i?l[d]:s(l,d);return n(m),m}var g=Math.floor(d),b,y;if(i)b=l[g],y=l[g+1];else{y=s(l,g+1),b=l[g];for(var w=0;w<g;++w)f(l[w],b)>0&&(b=l[w])}return n(b),n(y),r(a(b,1-p),a(y,p))}var x=o.times(c-1);if(x.isInteger()){x=x.toNumber();var C=i?l[x]:s(l,x);return n(C),C}var S=x.floor(),E=x.minus(S),A=S.toNumber(),D,M;if(i)D=l[A],M=l[A+1];else{M=s(l,A+1),D=l[A];for(var B=0;B<A;++B)f(l[B],D)>0&&(D=l[B])}n(D),n(M);var O=new E.constructor(1);return r(a(D,O.minus(E)),a(M,E))}var n=t({"number | BigNumber | Unit":function(o){return o}});return v}),xg="std",zR=["typed","map","sqrt","variance"],gw=Z(xg,zR,e=>{var{typed:t,map:r,sqrt:a,variance:s}=e;return t(xg,{"Array | Matrix":f,"Array | Matrix, string":f,"Array | Matrix, number | BigNumber":f,"Array | Matrix, number | BigNumber, string":f,"...":function(h){return f(h)}});function f(v,h){if(v.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var n=s.apply(null,arguments);return Jn(n)?r(n,a):a(n)}catch(u){throw u instanceof TypeError&&u.message.indexOf(" variance")!==-1?new TypeError(u.message.replace(" variance"," std")):u}}}),Cg="combinations",UR=["typed"],jR=Z(Cg,UR,e=>{var{typed:t}=e;return t(Cg,{"number, number":Cb,"BigNumber, BigNumber":function(a,s){var f=a.constructor,v,h,n=a.minus(s),u=new f(1);if(!Sg(a)||!Sg(s))throw new TypeError("Positive integer value expected in function combinations");if(s.gt(a))throw new TypeError("k must be less than n in function combinations");if(v=u,s.lt(n))for(h=u;h.lte(n);h=h.plus(u))v=v.times(s.plus(h)).dividedBy(h);else for(h=u;h.lte(s);h=h.plus(u))v=v.times(n.plus(h)).dividedBy(h);return v}})});function Sg(e){return e.isInteger()&&e.gte(0)}var Eg="combinationsWithRep",qR=["typed"],HR=Z(Eg,qR,e=>{var{typed:t}=e;return t(Eg,{"number, number":function(a,s){if(!qe(a)||a<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!qe(s)||s<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(a<1)throw new TypeError("k must be less than or equal to n + k - 1");if(s<a-1){var f=Hn(a,a+s-1);return f/Hn(1,s)}var v=Hn(s+1,a+s-1);return v/Hn(1,a-1)},"BigNumber, BigNumber":function(a,s){var f=a.constructor,v,h,n=new f(1),u=a.minus(n);if(!_g(a)||!_g(s))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(a.lt(n))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(v=n,s.lt(u))for(h=n;h.lte(u);h=h.plus(n))v=v.times(s.plus(h)).dividedBy(h);else for(h=n;h.lte(s);h=h.plus(n))v=v.times(u.plus(h)).dividedBy(h);return v}})});function _g(e){return e.isInteger()&&e.gte(0)}var Dg="gamma",VR=["typed","config","multiplyScalar","pow","BigNumber","Complex"],GR=Z(Dg,VR,e=>{var{typed:t,config:r,multiplyScalar:a,pow:s,BigNumber:f,Complex:v}=e;function h(u){if(u.im===0)return Lu(u.re);if(u.re<.5){var o=new v(1-u.re,-u.im),i=new v(Math.PI*u.re,Math.PI*u.im);return new v(Math.PI).div(i.sin()).div(h(o))}u=new v(u.re-1,u.im);for(var l=new v(ka[0],0),c=1;c<ka.length;++c){var d=new v(ka[c],0);l=l.add(d.div(u.add(c)))}var p=new v(u.re+Ab+.5,u.im),m=Math.sqrt(2*Math.PI),g=p.pow(u.add(.5)),b=p.neg().exp();return l.mul(m).mul(g).mul(b)}return t(Dg,{number:Lu,Complex:h,BigNumber:function(o){if(o.isInteger())return o.isNegative()||o.isZero()?new f(1/0):n(o.minus(1));if(!o.isFinite())return new f(o.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function n(u){if(u<8)return new f([1,1,2,6,24,120,720,5040][u]);var o=r.precision+(Math.log(u.toNumber())|0),i=f.clone({precision:o});if(u%2===1)return u.times(n(new f(u-1)));for(var l=u,c=new i(u),d=u.toNumber();l>2;)l-=2,d+=l,c=c.times(d);return new f(c.toPrecision(f.precision))}}),Ag="lgamma",WR=["Complex","typed"],YR=Z(Ag,WR,e=>{var{Complex:t,typed:r}=e,a=7,s=7,f=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return r(Ag,{number:zu,Complex:v,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function v(u){var o=6.283185307179586,i=1.1447298858494002,l=.1;if(u.isNaN())return new t(NaN,NaN);if(u.im===0)return new t(zu(u.re),0);if(u.re>=a||Math.abs(u.im)>=s)return h(u);if(u.re<=l){var c=r_(o,u.im)*Math.floor(.5*u.re+.25),d=u.mul(Math.PI).sin().log(),p=v(new t(1-u.re,-u.im));return new t(i,c).sub(d).sub(p)}else return u.im>=0?n(u):n(u.conjugate()).conjugate()}function h(u){for(var o=u.sub(.5).mul(u.log()).sub(u).add(Nb),i=new t(1,0).div(u),l=i.div(u),c=f[0],d=f[1],p=2*l.re,m=l.re*l.re+l.im*l.im,g=2;g<8;g++){var b=d;d=-m*c+f[g],c=p*c+b}var y=i.mul(l.mul(c).add(d));return o.add(y)}function n(u){var o=0,i=0,l=u;for(u=u.add(1);u.re<=a;){l=l.mul(u);var c=l.im<0?1:0;c!==0&&i===0&&o++,i=c,u=u.add(1)}return h(u).sub(l.log()).sub(new t(0,o*2*Math.PI*1))}}),Ng="factorial",XR=["typed","gamma"],KR=Z(Ng,XR,e=>{var{typed:t,gamma:r}=e;return t(Ng,{number:function(s){if(s<0)throw new Error("Value must be non-negative");return r(s+1)},BigNumber:function(s){if(s.isNegative())throw new Error("Value must be non-negative");return r(s.plus(1))},"Array | Matrix":t.referToSelf(a=>s=>st(s,a))})}),Tg="kldivergence",JR=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],ZR=Z(Tg,JR,e=>{var{typed:t,matrix:r,divide:a,sum:s,multiply:f,map:v,dotDivide:h,log:n,isNumeric:u}=e;return t(Tg,{"Array, Array":function(l,c){return o(r(l),r(c))},"Matrix, Array":function(l,c){return o(l,r(c))},"Array, Matrix":function(l,c){return o(r(l),c)},"Matrix, Matrix":function(l,c){return o(l,c)}});function o(i,l){var c=l.size().length,d=i.size().length;if(c>1)throw new Error("first object must be one dimensional");if(d>1)throw new Error("second object must be one dimensional");if(c!==d)throw new Error("Length of two vectors must be equal");var p=s(i);if(p===0)throw new Error("Sum of elements in first object must be non zero");var m=s(l);if(m===0)throw new Error("Sum of elements in second object must be non zero");var g=a(i,s(i)),b=a(l,s(l)),y=s(f(g,v(h(g,b),w=>n(w))));return u(y)?y:Number.NaN}}),Og="multinomial",QR=["typed","add","divide","multiply","factorial","isInteger","isPositive"],ek=Z(Og,QR,e=>{var{typed:t,add:r,divide:a,multiply:s,factorial:f,isInteger:v,isPositive:h}=e;return t(Og,{"Array | Matrix":function(u){var o=0,i=1;return Qn(u,function(l){if(!v(l)||!h(l))throw new TypeError("Positive integer value expected in function multinomial");o=r(o,l),i=s(i,f(l))}),a(f(o),i)}})}),Mg="permutations",tk=["typed","factorial"],rk=Z(Mg,tk,e=>{var{typed:t,factorial:r}=e;return t(Mg,{"number | BigNumber":r,"number, number":function(s,f){if(!qe(s)||s<0)throw new TypeError("Positive integer value expected in function permutations");if(!qe(f)||f<0)throw new TypeError("Positive integer value expected in function permutations");if(f>s)throw new TypeError("second argument k must be less than or equal to first argument n");return Hn(s-f+1,s)},"BigNumber, BigNumber":function(s,f){var v,h;if(!Fg(s)||!Fg(f))throw new TypeError("Positive integer value expected in function permutations");if(f.gt(s))throw new TypeError("second argument k must be less than or equal to first argument n");var n=s.mul(0).add(1);for(v=n,h=s.minus(f).plus(1);h.lte(s);h=h.plus(1))v=v.times(h);return v}})});function Fg(e){return e.isInteger()&&e.gte(0)}var yw={exports:{}};(function(e){(function(t,r,a){function s(n){var u=this,o=h();u.next=function(){var i=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=i-(u.c=i|0)},u.c=1,u.s0=o(" "),u.s1=o(" "),u.s2=o(" "),u.s0-=o(n),u.s0<0&&(u.s0+=1),u.s1-=o(n),u.s1<0&&(u.s1+=1),u.s2-=o(n),u.s2<0&&(u.s2+=1),o=null}function f(n,u){return u.c=n.c,u.s0=n.s0,u.s1=n.s1,u.s2=n.s2,u}function v(n,u){var o=new s(n),i=u&&u.state,l=o.next;return l.int32=function(){return o.next()*4294967296|0},l.double=function(){return l()+(l()*2097152|0)*11102230246251565e-32},l.quick=l,i&&(typeof i=="object"&&f(i,o),l.state=function(){return f(o,{})}),l}function h(){var n=4022871197,u=function(o){o=String(o);for(var i=0;i<o.length;i++){n+=o.charCodeAt(i);var l=.02519603282416938*n;n=l>>>0,l-=n,l*=n,n=l>>>0,l-=n,n+=l*4294967296}return(n>>>0)*23283064365386963e-26};return u}r&&r.exports?r.exports=v:a&&a.amd?a(function(){return v}):this.alea=v})(En,e,!1)})(yw);var bw={exports:{}};(function(e){(function(t,r,a){function s(h){var n=this,u="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var i=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^i^i>>>8},h===(h|0)?n.x=h:u+=h;for(var o=0;o<u.length+64;o++)n.x^=u.charCodeAt(o)|0,n.next()}function f(h,n){return n.x=h.x,n.y=h.y,n.z=h.z,n.w=h.w,n}function v(h,n){var u=new s(h),o=n&&n.state,i=function(){return(u.next()>>>0)/4294967296};return i.double=function(){do var l=u.next()>>>11,c=(u.next()>>>0)/4294967296,d=(l+c)/(1<<21);while(d===0);return d},i.int32=u.next,i.quick=i,o&&(typeof o=="object"&&f(o,u),i.state=function(){return f(u,{})}),i}r&&r.exports?r.exports=v:a&&a.amd?a(function(){return v}):this.xor128=v})(En,e,!1)})(bw);var ww={exports:{}};(function(e){(function(t,r,a){function s(h){var n=this,u="";n.next=function(){var i=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^(i^i<<1))|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,h===(h|0)?n.x=h:u+=h;for(var o=0;o<u.length+64;o++)n.x^=u.charCodeAt(o)|0,o==u.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function f(h,n){return n.x=h.x,n.y=h.y,n.z=h.z,n.w=h.w,n.v=h.v,n.d=h.d,n}function v(h,n){var u=new s(h),o=n&&n.state,i=function(){return(u.next()>>>0)/4294967296};return i.double=function(){do var l=u.next()>>>11,c=(u.next()>>>0)/4294967296,d=(l+c)/(1<<21);while(d===0);return d},i.int32=u.next,i.quick=i,o&&(typeof o=="object"&&f(o,u),i.state=function(){return f(u,{})}),i}r&&r.exports?r.exports=v:a&&a.amd?a(function(){return v}):this.xorwow=v})(En,e,!1)})(ww);var xw={exports:{}};(function(e){(function(t,r,a){function s(h){var n=this;n.next=function(){var o=n.x,i=n.i,l,c;return l=o[i],l^=l>>>7,c=l^l<<24,l=o[i+1&7],c^=l^l>>>10,l=o[i+3&7],c^=l^l>>>3,l=o[i+4&7],c^=l^l<<7,l=o[i+7&7],l=l^l<<13,c^=l^l<<9,o[i]=c,n.i=i+1&7,c};function u(o,i){var l,c=[];if(i===(i|0))c[0]=i;else for(i=""+i,l=0;l<i.length;++l)c[l&7]=c[l&7]<<15^i.charCodeAt(l)+c[l+1&7]<<13;for(;c.length<8;)c.push(0);for(l=0;l<8&&c[l]===0;++l);for(l==8?c[7]=-1:c[l],o.x=c,o.i=0,l=256;l>0;--l)o.next()}u(n,h)}function f(h,n){return n.x=h.x.slice(),n.i=h.i,n}function v(h,n){h==null&&(h=+new Date);var u=new s(h),o=n&&n.state,i=function(){return(u.next()>>>0)/4294967296};return i.double=function(){do var l=u.next()>>>11,c=(u.next()>>>0)/4294967296,d=(l+c)/(1<<21);while(d===0);return d},i.int32=u.next,i.quick=i,o&&(o.x&&f(o,u),i.state=function(){return f(u,{})}),i}r&&r.exports?r.exports=v:a&&a.amd?a(function(){return v}):this.xorshift7=v})(En,e,!1)})(xw);var Cw={exports:{}};(function(e){(function(t,r,a){function s(h){var n=this;n.next=function(){var o=n.w,i=n.X,l=n.i,c,d;return n.w=o=o+1640531527|0,d=i[l+34&127],c=i[l=l+1&127],d^=d<<13,c^=c<<17,d^=d>>>15,c^=c>>>12,d=i[l]=d^c,n.i=l,d+(o^o>>>16)|0};function u(o,i){var l,c,d,p,m,g=[],b=128;for(i===(i|0)?(c=i,i=null):(i=i+"\0",c=0,b=Math.max(b,i.length)),d=0,p=-32;p<b;++p)i&&(c^=i.charCodeAt((p+32)%i.length)),p===0&&(m=c),c^=c<<10,c^=c>>>15,c^=c<<4,c^=c>>>13,p>=0&&(m=m+1640531527|0,l=g[p&127]^=c+m,d=l==0?d+1:0);for(d>=128&&(g[(i&&i.length||0)&127]=-1),d=127,p=4*128;p>0;--p)c=g[d+34&127],l=g[d=d+1&127],c^=c<<13,l^=l<<17,c^=c>>>15,l^=l>>>12,g[d]=c^l;o.w=m,o.X=g,o.i=d}u(n,h)}function f(h,n){return n.i=h.i,n.w=h.w,n.X=h.X.slice(),n}function v(h,n){h==null&&(h=+new Date);var u=new s(h),o=n&&n.state,i=function(){return(u.next()>>>0)/4294967296};return i.double=function(){do var l=u.next()>>>11,c=(u.next()>>>0)/4294967296,d=(l+c)/(1<<21);while(d===0);return d},i.int32=u.next,i.quick=i,o&&(o.X&&f(o,u),i.state=function(){return f(u,{})}),i}r&&r.exports?r.exports=v:a&&a.amd?a(function(){return v}):this.xor4096=v})(En,e,!1)})(Cw);var Sw={exports:{}};(function(e){(function(t,r,a){function s(h){var n=this,u="";n.next=function(){var i=n.b,l=n.c,c=n.d,d=n.a;return i=i<<25^i>>>7^l,l=l-c|0,c=c<<24^c>>>8^d,d=d-i|0,n.b=i=i<<20^i>>>12^l,n.c=l=l-c|0,n.d=c<<16^l>>>16^d,n.a=d-i|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,h===Math.floor(h)?(n.a=h/4294967296|0,n.b=h|0):u+=h;for(var o=0;o<u.length+20;o++)n.b^=u.charCodeAt(o)|0,n.next()}function f(h,n){return n.a=h.a,n.b=h.b,n.c=h.c,n.d=h.d,n}function v(h,n){var u=new s(h),o=n&&n.state,i=function(){return(u.next()>>>0)/4294967296};return i.double=function(){do var l=u.next()>>>11,c=(u.next()>>>0)/4294967296,d=(l+c)/(1<<21);while(d===0);return d},i.int32=u.next,i.quick=i,o&&(typeof o=="object"&&f(o,u),i.state=function(){return f(u,{})}),i}r&&r.exports?r.exports=v:a&&a.amd?a(function(){return v}):this.tychei=v})(En,e,!1)})(Sw);var Ew={exports:{}};const nk={},ik=Object.freeze(Object.defineProperty({__proto__:null,default:nk},Symbol.toStringTag,{value:"Module"})),wu=wD(ik);(function(e){(function(t,r,a){var s=256,f=6,v=52,h="random",n=a.pow(s,f),u=a.pow(2,v),o=u*2,i=s-1,l;function c(w,x,C){var S=[];x=x==!0?{entropy:!0}:x||{};var E=g(m(x.entropy?[w,y(r)]:w??b(),3),S),A=new d(S),D=function(){for(var M=A.g(f),B=n,O=0;M<u;)M=(M+O)*s,B*=s,O=A.g(1);for(;M>=o;)M/=2,B/=2,O>>>=1;return(M+O)/B};return D.int32=function(){return A.g(4)|0},D.quick=function(){return A.g(4)/4294967296},D.double=D,g(y(A.S),r),(x.pass||C||function(M,B,O,F){return F&&(F.S&&p(F,A),M.state=function(){return p(A,{})}),O?(a[h]=M,B):M})(D,E,"global"in x?x.global:this==a,x.state)}function d(w){var x,C=w.length,S=this,E=0,A=S.i=S.j=0,D=S.S=[];for(C||(w=[C++]);E<s;)D[E]=E++;for(E=0;E<s;E++)D[E]=D[A=i&A+w[E%C]+(x=D[E])],D[A]=x;(S.g=function(M){for(var B,O=0,F=S.i,z=S.j,N=S.S;M--;)B=N[F=i&F+1],O=O*s+N[i&(N[F]=N[z=i&z+B])+(N[z]=B)];return S.i=F,S.j=z,O})(s)}function p(w,x){return x.i=w.i,x.j=w.j,x.S=w.S.slice(),x}function m(w,x){var C=[],S=typeof w,E;if(x&&S=="object")for(E in w)try{C.push(m(w[E],x-1))}catch{}return C.length?C:S=="string"?w:w+"\0"}function g(w,x){for(var C=w+"",S,E=0;E<C.length;)x[i&E]=i&(S^=x[i&E]*19)+C.charCodeAt(E++);return y(x)}function b(){try{var w;return l&&(w=l.randomBytes)?w=w(s):(w=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(w)),y(w)}catch{var x=t.navigator,C=x&&x.plugins;return[+new Date,t,C,t.screen,y(r)]}}function y(w){return String.fromCharCode.apply(0,w)}if(g(a.random(),r),e.exports){e.exports=c;try{l=wu}catch{}}else a["seed"+h]=c})(typeof self<"u"?self:En,[],Math)})(Ew);var ak=yw.exports,ok=bw.exports,sk=ww.exports,uk=xw.exports,lk=Cw.exports,ck=Sw.exports,aa=Ew.exports;aa.alea=ak;aa.xor128=ok;aa.xorwow=sk;aa.xorshift7=uk;aa.xor4096=lk;aa.tychei=ck;var _w=aa,fk=_w(Date.now());function Ka(e){var t;function r(s){t=s===null?fk:_w(String(s))}r(e);function a(){return t()}return a}var Pg="pickRandom",hk=["typed","config","?on"],dk=Z(Pg,hk,e=>{var{typed:t,config:r,on:a}=e,s=Ka(r.randomSeed);return a&&a("config",function(v,h){v.randomSeed!==h.randomSeed&&(s=Ka(v.randomSeed))}),t(Pg,{"Array | Matrix":function(h){return f(h,{})},"Array | Matrix, Object":function(h,n){return f(h,n)},"Array | Matrix, number":function(h,n){return f(h,{number:n})},"Array | Matrix, Array | Matrix":function(h,n){return f(h,{weights:n})},"Array | Matrix, Array | Matrix, number":function(h,n,u){return f(h,{number:u,weights:n})},"Array | Matrix, number, Array | Matrix":function(h,n,u){return f(h,{number:n,weights:u})}});function f(v,h){var{number:n,weights:u,elementWise:o=!0}=h,i=typeof n>"u";i&&(n=1);var l=Ze(v)?v.create:Ze(u)?u.create:null;v=v.valueOf(),u&&(u=u.valueOf()),o===!0&&(v=yt(v),u=yt(u));var c=0;if(typeof u<"u"){if(u.length!==v.length)throw new Error("Weights must have the same length as possibles");for(var d=0,p=u.length;d<p;d++){if(!dt(u[d])||u[d]<0)throw new Error("Weights must be an array of positive numbers");c+=u[d]}}for(var m=v.length,g=[],b;g.length<n;){if(typeof u>"u")b=v[Math.floor(s()*m)];else for(var y=s()*c,w=0,x=v.length;w<x;w++)if(y-=u[w],y<0){b=v[w];break}g.push(b)}return i?g[0]:l?l(g):g}});function kh(e,t){var r=[];if(e=e.slice(0),e.length>1)for(var a=0,s=e.shift();a<s;a++)r.push(kh(e,t));else for(var f=0,v=e.shift();f<v;f++)r.push(t());return r}var Bg="random",pk=["typed","config","?on"],mk=Z(Bg,pk,e=>{var{typed:t,config:r,on:a}=e,s=Ka(r.randomSeed);return a&&a("config",function(h,n){h.randomSeed!==n.randomSeed&&(s=Ka(h.randomSeed))}),t(Bg,{"":()=>v(0,1),number:h=>v(0,h),"number, number":(h,n)=>v(h,n),"Array | Matrix":h=>f(h,0,1),"Array | Matrix, number":(h,n)=>f(h,0,n),"Array | Matrix, number, number":(h,n,u)=>f(h,n,u)});function f(h,n,u){var o=kh(h.valueOf(),()=>v(n,u));return Ze(h)?h.create(o):o}function v(h,n){return h+s()*(n-h)}}),Ig="randomInt",vk=["typed","config","?on"],gk=Z(Ig,vk,e=>{var{typed:t,config:r,on:a}=e,s=Ka(r.randomSeed);return a&&a("config",function(h,n){h.randomSeed!==n.randomSeed&&(s=Ka(h.randomSeed))}),t(Ig,{"":()=>v(0,1),number:h=>v(0,h),"number, number":(h,n)=>v(h,n),"Array | Matrix":h=>f(h,0,1),"Array | Matrix, number":(h,n)=>f(h,0,n),"Array | Matrix, number, number":(h,n,u)=>f(h,n,u)});function f(h,n,u){var o=kh(h.valueOf(),()=>v(n,u));return Ze(h)?h.create(o):o}function v(h,n){return Math.floor(h+s()*(n-h))}}),Rg="stirlingS2",yk=["typed","addScalar","subtract","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],bk=Z(Rg,yk,e=>{var{typed:t,addScalar:r,subtract:a,multiplyScalar:s,divideScalar:f,pow:v,factorial:h,combinations:n,isNegative:u,isInteger:o,number:i,bignumber:l,larger:c}=e,d=[],p=[];return t(Rg,{"number | BigNumber, number | BigNumber":function(g,b){if(!o(g)||u(g)||!o(b)||u(b))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(c(b,g))throw new TypeError("k must be less than or equal to n in function stirlingS2");var y=!(dt(g)&&dt(b)),w=y?p:d,x=y?l:i,C=i(g),S=i(b);if(w[C]&&w[C].length>S)return w[C][S];for(var E=0;E<=C;++E)if(w[E]||(w[E]=[x(E===0?1:0)]),E!==0)for(var A=w[E],D=w[E-1],M=A.length;M<=E&&M<=S;++M)M===E?A[M]=1:A[M]=r(s(x(M),D[M]),D[M-1]);return w[C][S]}})}),kg="bellNumbers",wk=["typed","addScalar","isNegative","isInteger","stirlingS2"],xk=Z(kg,wk,e=>{var{typed:t,addScalar:r,isNegative:a,isInteger:s,stirlingS2:f}=e;return t(kg,{"number | BigNumber":function(h){if(!s(h)||a(h))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var n=0,u=0;u<=h;u++)n=r(n,f(h,u));return n}})}),$g="catalan",Ck=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],Sk=Z($g,Ck,e=>{var{typed:t,addScalar:r,divideScalar:a,multiplyScalar:s,combinations:f,isNegative:v,isInteger:h}=e;return t($g,{"number | BigNumber":function(u){if(!h(u)||v(u))throw new TypeError("Non-negative integer value expected in function catalan");return a(f(s(u,2),u),r(u,1))}})}),Lg="composition",Ek=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],_k=Z(Lg,Ek,e=>{var{typed:t,addScalar:r,combinations:a,isPositive:s,isNegative:f,isInteger:v,larger:h}=e;return t(Lg,{"number | BigNumber, number | BigNumber":function(u,o){if(!v(u)||!s(u)||!v(o)||!s(o))throw new TypeError("Positive integer value expected in function composition");if(h(o,u))throw new TypeError("k must be less than or equal to n in function composition");return a(r(u,-1),r(o,-1))}})}),zg="leafCount",Dk=["parse","typed"],Ak=Z(zg,Dk,e=>{var{parse:t,typed:r}=e;function a(s){var f=0;return s.forEach(v=>{f+=a(v)}),f||1}return r(zg,{Node:function(f){return a(f)}})});function Ug(e){return gt(e)||Xt(e)&&e.isUnary()&&gt(e.args[0])}function Ku(e){return!!(gt(e)||(bi(e)||Xt(e))&&e.args.every(Ku)||Zn(e)&&Ku(e.content))}function jg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Uc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jg(Object(r),!0).forEach(function(a){ar(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jg(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}var Nk="simplifyUtil",Tk=["FunctionNode","OperatorNode","SymbolNode"],$h=Z(Nk,Tk,e=>{var{FunctionNode:t,OperatorNode:r,SymbolNode:a}=e,s=!0,f=!1,v="defaultF",h={add:{trivial:s,total:s,commutative:s,associative:s},unaryPlus:{trivial:s,total:s,commutative:s,associative:s},subtract:{trivial:f,total:s,commutative:f,associative:f},multiply:{trivial:s,total:s,commutative:s,associative:s},divide:{trivial:f,total:s,commutative:f,associative:f},paren:{trivial:s,total:s,commutative:s,associative:f},defaultF:{trivial:f,total:s,commutative:f,associative:f}},n={divide:{total:f},log:{total:f}},u={subtract:{total:f},abs:{trivial:s},log:{total:s}};function o(y,w){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h,C=v;if(typeof y=="string"?C=y:Xt(y)?C=y.fn.toString():bi(y)?C=y.name:Zn(y)&&(C="paren"),ze(x,C)){var S=x[C];if(ze(S,w))return S[w];if(ze(h,C))return h[C][w]}if(ze(x,v)){var E=x[v];return ze(E,w)?E[w]:h[v][w]}if(ze(h,C)){var A=h[C];if(ze(A,w))return A[w]}return h[v][w]}function i(y){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;return o(y,"commutative",w)}function l(y){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;return o(y,"associative",w)}function c(y,w){var x=Uc({},y);for(var C in w)ze(y,C)?x[C]=Uc(Uc({},w[C]),y[C]):x[C]=w[C];return x}function d(y,w){if(!y.args||y.args.length===0)return y;y.args=p(y,w);for(var x=0;x<y.args.length;x++)d(y.args[x],w)}function p(y,w){var x,C=[],S=function E(A){for(var D=0;D<A.args.length;D++){var M=A.args[D];Xt(M)&&x===M.op?E(M):C.push(M)}};return l(y,w)?(x=y.op,S(y),C):y.args}function m(y,w){if(!(!y.args||y.args.length===0)){for(var x=b(y),C=y.args.length,S=0;S<C;S++)m(y.args[S],w);if(C>2&&l(y,w)){for(var E=y.args.pop();y.args.length>0;)E=x([y.args.pop(),E]);y.args=E.args}}}function g(y,w){if(!(!y.args||y.args.length===0)){for(var x=b(y),C=y.args.length,S=0;S<C;S++)g(y.args[S],w);if(C>2&&l(y,w)){for(var E=y.args.shift();y.args.length>0;)E=x([E,y.args.shift()]);y.args=E.args}}}function b(y){return Xt(y)?function(w){try{return new r(y.op,y.fn,w,y.implicit)}catch(x){return console.error(x),[]}}:function(w){return new t(new a(y.name),w)}}return{createMakeNodeFunction:b,hasProperty:o,isCommutative:i,isAssociative:l,mergeContext:c,flatten:d,allChildren:p,unflattenr:m,unflattenl:g,defaultContext:h,realContext:n,positiveContext:u}}),Ok="simplify",Mk=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","resolve","simplifyConstant","simplifyCore","?fraction","?bignumber","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],Fk=Z(Ok,Mk,e=>{var{config:t,typed:r,parse:a,add:s,subtract:f,multiply:v,divide:h,pow:n,isZero:u,equal:o,resolve:i,simplifyConstant:l,simplifyCore:c,fraction:d,bignumber:p,mathWithTransform:m,matrix:g,AccessorNode:b,ArrayNode:y,ConstantNode:w,FunctionNode:x,IndexNode:C,ObjectNode:S,OperatorNode:E,ParenthesisNode:A,SymbolNode:D}=e,{hasProperty:M,isCommutative:B,isAssociative:O,mergeContext:F,flatten:z,unflattenr:N,unflattenl:T,createMakeNodeFunction:q,defaultContext:_,realContext:I,positiveContext:U}=$h({FunctionNode:x,OperatorNode:E,SymbolNode:D});r.addConversion({from:"Object",to:"Map",convert:Ra});var j=r("simplify",{Node:re,"Node, Map":(W,ee)=>re(W,!1,ee),"Node, Map, Object":(W,ee,he)=>re(W,!1,ee,he),"Node, Array":re,"Node, Array, Map":re,"Node, Array, Map, Object":re});r.removeConversion({from:"Object",to:"Map",convert:Ra}),j.defaultContext=_,j.realContext=I,j.positiveContext=U;function L(W){return W.transform(function(ee,he,pe){return Zn(ee)?L(ee.content):ee})}var P={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};j.rules=[c,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},l,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},l,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function k(W,ee){var he={};if(W.s){var pe=W.s.split("->");if(pe.length===2)he.l=pe[0],he.r=pe[1];else throw SyntaxError("Could not parse rule: "+W.s)}else he.l=W.l,he.r=W.r;he.l=L(a(he.l)),he.r=L(a(he.r));for(var ue of["imposeContext","repeat","assuming"])ue in W&&(he[ue]=W[ue]);if(W.evaluate&&(he.evaluate=a(W.evaluate)),O(he.l,ee)){var Y=q(he.l),K=ne();he.expanded={},he.expanded.l=Y([he.l.clone(),K]),z(he.expanded.l,ee),N(he.expanded.l,ee),he.expanded.r=Y([he.r,K])}return he}function V(W,ee){for(var he=[],pe=0;pe<W.length;pe++){var ue=W[pe],Y=void 0,K=typeof ue;switch(K){case"string":ue={s:ue};case"object":Y=k(ue,ee);break;case"function":Y=ue;break;default:throw TypeError("Unsupported type of rule: "+K)}he.push(Y)}return he}var Q=0;function ne(){return new D("_p"+Q++)}function re(W,ee){var he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ya(),pe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ue=pe.consoleDebug;ee=V(ee||j.rules,pe.context);var Y=i(W,he);Y=L(Y);for(var K={},fe=Y.toString({parenthesis:"all"});!K[fe];){K[fe]=!0,Q=0;var me=fe;ue&&console.log("Working on: ",fe);for(var be=0;be<ee.length;be++){var Se="";if(typeof ee[be]=="function"?(Y=ee[be](Y,pe),ue&&(Se=ee[be].name)):(z(Y,pe.context),Y=de(Y,ee[be],pe.context),ue&&(Se="".concat(ee[be].l.toString()," -> ").concat(ee[be].r.toString()))),ue){var xe=Y.toString({parenthesis:"all"});xe!==me&&(console.log("Applying",Se,"produced",xe),me=xe)}T(Y,pe.context)}fe=Y.toString({parenthesis:"all"})}return Y}function ie(W,ee,he){var pe=W;if(W)for(var ue=0;ue<W.length;++ue){var Y=de(W[ue],ee,he);Y!==W[ue]&&(pe===W&&(pe=W.slice()),pe[ue]=Y)}return pe}function de(W,ee,he){if(ee.assuming){for(var pe in ee.assuming)for(var ue in ee.assuming[pe])if(M(pe,ue,he)!==ee.assuming[pe][ue])return W}var Y=F(ee.imposeContext,he),K=W;if(K instanceof E||K instanceof x){var fe=ie(K.args,ee,he);fe!==K.args&&(K=K.clone(),K.args=fe)}else if(K instanceof A){if(K.content){var me=de(K.content,ee,he);me!==K.content&&(K=new A(me))}}else if(K instanceof y){var be=ie(K.items,ee,he);be!==K.items&&(K=new y(be))}else if(K instanceof b){var Se=K.object;K.object&&(Se=de(K.object,ee,he));var xe=K.index;K.index&&(xe=de(K.index,ee,he)),(Se!==K.object||xe!==K.index)&&(K=new b(Se,xe))}else if(K instanceof C){var Ce=ie(K.dimensions,ee,he);Ce!==K.dimensions&&(K=new C(Ce))}else if(K instanceof S){var _e=!1,ke={};for(var Ye in K.properties)ke[Ye]=de(K.properties[Ye],ee,he),ke[Ye]!==K.properties[Ye]&&(_e=!0);_e&&(K=new S(ke))}var Fe=ee.r,wt=X(ee.l,K,Y)[0];if(!wt&&ee.expanded&&(Fe=ee.expanded.r,wt=X(ee.expanded.l,K,Y)[0]),wt){var et=K.implicit;K=Fe.clone(),et&&"implicit"in Fe&&(K.implicit=!0),K=K.transform(function(Ct){return Ct.isSymbolNode&&ze(wt.placeholders,Ct.name)?wt.placeholders[Ct.name].clone():Ct})}return ee.repeat&&K!==W&&(K=de(K,ee,he)),K}function ve(W,ee){var he=[],pe,ue,Y=q(W);if(B(W,ee))for(var K=0;K<W.args.length;K++)ue=W.args.slice(0),ue.splice(K,1),pe=ue.length===1?ue[0]:Y(ue),he.push(Y([W.args[K],pe]));else for(var fe=1;fe<W.args.length;fe++){var me=W.args[0];fe>1&&(me=Y(W.args.slice(0,fe))),ue=W.args.slice(fe),pe=ue.length===1?ue[0]:Y(ue),he.push(Y([me,pe]))}return he}function ce(W,ee){var he={placeholders:{}};if(!W.placeholders&&!ee.placeholders)return he;if(W.placeholders){if(!ee.placeholders)return W}else return ee;for(var pe in W.placeholders)if(ze(W.placeholders,pe)&&(he.placeholders[pe]=W.placeholders[pe],ze(ee.placeholders,pe)&&!te(W.placeholders[pe],ee.placeholders[pe])))return null;for(var ue in ee.placeholders)ze(ee.placeholders,ue)&&(he.placeholders[ue]=ee.placeholders[ue]);return he}function ae(W,ee){var he=[];if(W.length===0||ee.length===0)return he;for(var pe,ue=0;ue<W.length;ue++)for(var Y=0;Y<ee.length;Y++)pe=ce(W[ue],ee[Y]),pe&&he.push(pe);return he}function G(W){if(W.length===0)return W;for(var ee=W.reduce(ae),he=[],pe={},ue=0;ue<ee.length;ue++){var Y=JSON.stringify(ee[ue]);pe[Y]||(pe[Y]=!0,he.push(ee[ue]))}return he}function X(W,ee,he,pe){var ue=[{placeholders:{}}];if(W instanceof E&&ee instanceof E||W instanceof x&&ee instanceof x){if(W instanceof E){if(W.op!==ee.op||W.fn!==ee.fn)return[]}else if(W instanceof x&&W.name!==ee.name)return[];if(ee.args.length===1&&W.args.length===1||!O(ee,he)&&ee.args.length===W.args.length||pe){for(var Y=[],K=0;K<W.args.length;K++){var fe=X(W.args[K],ee.args[K],he);if(fe.length===0)break;Y.push(fe)}if(Y.length!==W.args.length){if(!B(ee,he)||W.args.length===1)return[];if(W.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var me=X(W.args[0],ee.args[1],he);if(me.length===0)return[];var be=X(W.args[1],ee.args[0],he);if(be.length===0)return[];Y=[me,be]}ue=G(Y)}else if(ee.args.length>=2&&W.args.length===2){for(var Se=ve(ee,he),xe=[],Ce=0;Ce<Se.length;Ce++){var _e=X(W,Se[Ce],he,!0);xe=xe.concat(_e)}return xe}else{if(W.args.length>2)throw Error("Unexpected non-binary associative function: "+W.toString());return[]}}else if(W instanceof D){if(W.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(P[W.name]){if(W.name!==ee.name)return[]}else switch(W.name[1]>="a"&&W.name[1]<="z"?W.name.substring(0,2):W.name[0]){case"n":case"_p":ue[0].placeholders[W.name]=ee;break;case"c":case"cl":if(gt(ee))ue[0].placeholders[W.name]=ee;else return[];break;case"v":if(!gt(ee))ue[0].placeholders[W.name]=ee;else return[];break;case"vl":if(ir(ee))ue[0].placeholders[W.name]=ee;else return[];break;case"cd":if(Ug(ee))ue[0].placeholders[W.name]=ee;else return[];break;case"vd":if(!Ug(ee))ue[0].placeholders[W.name]=ee;else return[];break;case"ce":if(Ku(ee))ue[0].placeholders[W.name]=ee;else return[];break;case"ve":if(!Ku(ee))ue[0].placeholders[W.name]=ee;else return[];break;default:throw new Error("Invalid symbol in rule: "+W.name)}}else if(W instanceof w){if(!o(W.value,ee.value))return[]}else return[];return ue}function te(W,ee){if(W instanceof w&&ee instanceof w){if(!o(W.value,ee.value))return!1}else if(W instanceof D&&ee instanceof D){if(W.name!==ee.name)return!1}else if(W instanceof E&&ee instanceof E||W instanceof x&&ee instanceof x){if(W instanceof E){if(W.op!==ee.op||W.fn!==ee.fn)return!1}else if(W instanceof x&&W.name!==ee.name)return!1;if(W.args.length!==ee.args.length)return!1;for(var he=0;he<W.args.length;he++)if(!te(W.args[he],ee.args[he]))return!1}else return!1;return!0}return j}),Pk="simplifyConstant",Bk=["typed","parse","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],Ik=Z(Pk,Bk,e=>{var{typed:t,parse:r,config:a,mathWithTransform:s,matrix:f,fraction:v,bignumber:h,AccessorNode:n,ArrayNode:u,ConstantNode:o,FunctionNode:i,IndexNode:l,ObjectNode:c,OperatorNode:d,SymbolNode:p}=e,{isCommutative:m,isAssociative:g,allChildren:b,createMakeNodeFunction:y}=$h({FunctionNode:i,OperatorNode:d,SymbolNode:p}),w=t("simplifyConstant",{Node:N=>E(z(N,{})),"Node, Object":function(T,q){return E(z(T,q))}});function x(N){return us(N)?N.valueOf():N instanceof Array?N.map(x):Ze(N)?f(x(N.valueOf())):N}function C(N,T,q){try{return s[N].apply(null,T)}catch{return T=T.map(x),D(s[N].apply(null,T),q)}}var S=t({Fraction:B,number:function(T){return T<0?M(new o(-T)):new o(T)},BigNumber:function(T){return T<0?M(new o(-T)):new o(T)},Complex:function(T){throw new Error("Cannot convert Complex number to Node")},string:function(T){return new o(T)},Matrix:function(T){return new u(T.valueOf().map(q=>S(q)))}});function E(N){return _t(N)?N:S(N)}function A(N,T){var q=T&&T.exactFractions!==!1;if(q&&isFinite(N)&&v){var _=v(N),I=T&&typeof T.fractionsLimit=="number"?T.fractionsLimit:1/0;if(_.valueOf()===N&&_.n<I&&_.d<I)return _}return N}var D=t({"string, Object":function(T,q){if(a.number==="BigNumber")return h===void 0&&Ph(),h(T);if(a.number==="Fraction")return v===void 0&&tw(),v(T);var _=parseFloat(T);return A(_,q)},"Fraction, Object":function(T,q){return T},"BigNumber, Object":function(T,q){return T},"number, Object":function(T,q){return A(T,q)},"Complex, Object":function(T,q){return T.im!==0?T:A(T.re,q)},"Matrix, Object":function(T,q){return f(A(T.valueOf()))},"Array, Object":function(T,q){return T.map(A)}});function M(N){return new d("-","unaryMinus",[N])}function B(N){var T,q=N.s*N.n;return q<0?T=new d("-","unaryMinus",[new o(-q)]):T=new o(q),N.d===1?T:new d("/","divide",[T,new o(N.d)])}function O(N,T,q){if(!no(T))return new n(E(N),E(T));if(jr(N)||Ze(N)){for(var _=Array.from(T.dimensions);_.length>0;)if(gt(_[0])&&typeof _[0].value!="string"){var I=D(_.shift().value,q);jr(N)?N=N.items[I-1]:(N=N.valueOf()[I-1],N instanceof Array&&(N=f(N)))}else if(_.length>1&&gt(_[1])&&typeof _[1].value!="string"){var U=D(_[1].value,q),j=[],L=jr(N)?N.items:N.valueOf();for(var P of L)if(jr(P))j.push(P.items[U-1]);else if(Ze(N))j.push(P[U-1]);else break;if(j.length===L.length)jr(N)?N=new u(j):N=f(j),_.splice(1,1);else break}else break;return _.length===T.dimensions.length?new n(E(N),T):_.length>0?(T=new l(_),new n(E(N),T)):N}if(El(N)&&T.dimensions.length===1&&gt(T.dimensions[0])){var k=T.dimensions[0].value;return k in N.properties?N.properties[k]:new o}return new n(E(N),T)}function F(N,T,q,_){var I=T.shift(),U=T.reduce((j,L)=>{if(!_t(L)){var P=j.pop();if(_t(P))return[P,L];try{return j.push(C(N,[P,L],_)),j}catch{j.push(P)}}j.push(E(j.pop()));var k=j.length===1?j[0]:q(j);return[q([k,E(L)])]},[I]);return U.length===1?U[0]:q([U[0],S(U[1])])}function z(N,T){switch(N.type){case"SymbolNode":return N;case"ConstantNode":switch(typeof N.value){case"number":return D(N.value,T);case"string":return N.value;default:if(!isNaN(N.value))return D(N.value,T)}return N;case"FunctionNode":if(s[N.name]&&s[N.name].rawArgs)return N;{var q=["add","multiply"];if(q.indexOf(N.name)===-1){var _=N.args.map(ve=>z(ve,T));if(!_.some(_t))try{return C(N.name,_,T)}catch{}if(N.name==="size"&&_.length===1&&jr(_[0])){for(var I=[],U=_[0];jr(U);)I.push(U.items.length),U=U.items[0];return f(I)}return new i(N.name,_.map(E))}}case"OperatorNode":{var j=N.fn.toString(),L,P,k=y(N);if(Xt(N)&&N.isUnary())L=[z(N.args[0],T)],_t(L[0])?P=k(L):P=C(j,L,T);else if(g(N,T.context))if(L=b(N,T.context),L=L.map(ve=>z(ve,T)),m(j,T.context)){for(var V=[],Q=[],ne=0;ne<L.length;ne++)_t(L[ne])?Q.push(L[ne]):V.push(L[ne]);V.length>1?(P=F(j,V,k,T),Q.unshift(P),P=F(j,Q,k,T)):P=F(j,L,k,T)}else P=F(j,L,k,T);else L=N.args.map(ve=>z(ve,T)),P=F(j,L,k,T);return P}case"ParenthesisNode":return z(N.content,T);case"AccessorNode":return O(z(N.object,T),z(N.index,T),T);case"ArrayNode":{var re=N.items.map(ve=>z(ve,T));return re.some(_t)?new u(re.map(E)):f(re)}case"IndexNode":return new l(N.dimensions.map(ve=>w(ve,T)));case"ObjectNode":{var ie={};for(var de in N.properties)ie[de]=w(N.properties[de],T);return new c(ie)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(N.type))}}return w}),qg="simplifyCore",Rk=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],kk=Z(qg,Rk,e=>{var{typed:t,parse:r,equal:a,isZero:s,add:f,subtract:v,multiply:h,divide:n,pow:u,AccessorNode:o,ArrayNode:i,ConstantNode:l,FunctionNode:c,IndexNode:d,ObjectNode:p,OperatorNode:m,ParenthesisNode:g,SymbolNode:b}=e,y=new l(0),w=new l(1),x=new l(!0),C=new l(!1);function S(M){return Xt(M)&&["and","not","or"].includes(M.op)}var{hasProperty:E,isCommutative:A}=$h({FunctionNode:c,OperatorNode:m,SymbolNode:b});function D(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=B?B.context:void 0;if(E(M,"trivial",O)){if(bi(M)&&M.args.length===1)return D(M.args[0],B);var F=!1,z=0;if(M.forEach(V=>{++z,z===1&&(F=D(V,B))}),z===1)return F}var N=M;if(bi(N)){var T=e5(N.name);if(T){if(N.args.length>2&&E(N,"associative",O))for(;N.args.length>2;){var q=N.args.pop(),_=N.args.pop();N.args.push(new m(T,N.name,[q,_]))}N=new m(T,N.name,N.args)}else return new c(D(N.fn),N.args.map(V=>D(V,B)))}if(Xt(N)&&N.isUnary()){var I=D(N.args[0],B);if(N.op==="~"&&Xt(I)&&I.isUnary()&&I.op==="~"||N.op==="not"&&Xt(I)&&I.isUnary()&&I.op==="not"&&S(I.args[0]))return I.args[0];var U=!0;if(N.op==="-"&&Xt(I)&&(I.isBinary()&&I.fn==="subtract"&&(N=new m("-","subtract",[I.args[1],I.args[0]]),U=!1),I.isUnary()&&I.op==="-"))return I.args[0];if(U)return new m(N.op,N.fn,[I])}if(Xt(N)&&N.isBinary()){var j=D(N.args[0],B),L=D(N.args[1],B);if(N.op==="+"){if(gt(j)&&s(j.value))return L;if(gt(L)&&s(L.value))return j;Xt(L)&&L.isUnary()&&L.op==="-"&&(L=L.args[0],N=new m("-","subtract",[j,L]))}if(N.op==="-")return Xt(L)&&L.isUnary()&&L.op==="-"?D(new m("+","add",[j,L.args[0]]),B):gt(j)&&s(j.value)?D(new m("-","unaryMinus",[L])):gt(L)&&s(L.value)?j:new m(N.op,N.fn,[j,L]);if(N.op==="*"){if(gt(j)){if(s(j.value))return y;if(a(j.value,1))return L}if(gt(L)){if(s(L.value))return y;if(a(L.value,1))return j;if(A(N,O))return new m(N.op,N.fn,[L,j],N.implicit)}return new m(N.op,N.fn,[j,L],N.implicit)}if(N.op==="/")return gt(j)&&s(j.value)?y:gt(L)&&a(L.value,1)?j:new m(N.op,N.fn,[j,L]);if(N.op==="^"&&gt(L)){if(s(L.value))return w;if(a(L.value,1))return j}if(N.op==="and"){if(gt(j))if(j.value){if(S(L))return L}else return C;if(gt(L))if(L.value){if(S(j))return j}else return C}if(N.op==="or"){if(gt(j)){if(j.value)return x;if(S(L))return L}if(gt(L)){if(L.value)return x;if(S(j))return j}}return new m(N.op,N.fn,[j,L])}if(Xt(N))return new m(N.op,N.fn,N.args.map(V=>D(V,B)));if(jr(N))return new i(N.items.map(V=>D(V,B)));if(Ji(N))return new o(D(N.object,B),D(N.index,B));if(no(N))return new d(N.dimensions.map(V=>D(V,B)));if(El(N)){var P={};for(var k in N.properties)P[k]=D(N.properties[k],B);return new p(P)}return N}return t(qg,{Node:D,"Node,Object":D})}),$k="resolve",Lk=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],zk=Z($k,Lk,e=>{var{typed:t,parse:r,ConstantNode:a,FunctionNode:s,OperatorNode:f,ParenthesisNode:v}=e;function h(n,u){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!u)return n;if(ir(n)){if(o.has(n.name)){var i=Array.from(o).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(i,"}"))}var l=u.get(n.name);if(_t(l)){var c=new Set(o);return c.add(n.name),h(l,u,c)}else return typeof l=="number"?r(String(l)):l!==void 0?new a(l):n}else if(Xt(n)){var d=n.args.map(function(m){return h(m,u,o)});return new f(n.op,n.fn,d,n.implicit)}else{if(Zn(n))return new v(h(n.content,u,o));if(bi(n)){var p=n.args.map(function(m){return h(m,u,o)});return new s(n.name,p)}}return n.map(m=>h(m,u,o))}return t("resolve",{Node:h,"Node, Map | null | undefined":h,"Node, Object":(n,u)=>h(n,Ra(u)),"Array | Matrix":t.referToSelf(n=>u=>u.map(o=>n(o))),"Array | Matrix, null | undefined":t.referToSelf(n=>u=>u.map(o=>n(o))),"Array, Object":t.referTo("Array,Map",n=>(u,o)=>n(u,Ra(o))),"Matrix, Object":t.referTo("Matrix,Map",n=>(u,o)=>n(u,Ra(o))),"Array | Matrix, Map":t.referToSelf(n=>(u,o)=>u.map(i=>n(i,o)))})}),Hg="symbolicEqual",Uk=["parse","simplify","typed","OperatorNode"],jk=Z(Hg,Uk,e=>{var{parse:t,simplify:r,typed:a,OperatorNode:s}=e;function f(v,h){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new s("-","subtract",[v,h]),o=r(u,{},n);return gt(o)&&!o.value}return a(Hg,{"Node, Node":f,"Node, Node, Object":f})}),Vg="derivative",qk=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],Hk=Z(Vg,qk,e=>{var{typed:t,config:r,parse:a,simplify:s,equal:f,isZero:v,numeric:h,ConstantNode:n,FunctionNode:u,OperatorNode:o,ParenthesisNode:i,SymbolNode:l}=e;function c(w,x){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},S={};m(S,w,x.name);var E=g(w,S);return C.simplify?s(E):E}t.addConversion({from:"identifier",to:"SymbolNode",convert:a});var d=t(Vg,{"Node, SymbolNode":c,"Node, SymbolNode, Object":c});t.removeConversion({from:"identifier",to:"SymbolNode",convert:a}),d._simplify=!0,d.toTex=function(w){return p.apply(null,w.args)};var p=t("_derivTex",{"Node, SymbolNode":function(x,C){return gt(x)&&Bt(x.value)==="string"?p(a(x.value).toString(),C.toString(),1):p(x.toTex(),C.toString(),1)},"Node, ConstantNode":function(x,C){if(Bt(C.value)==="string")return p(x,a(C.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(x,C,S){return p(x.toString(),C.name,S.value)},"string, string, number":function(x,C,S){var E;return S===1?E="{d\\over d"+C+"}":E="{d^{"+S+"}\\over d"+C+"^{"+S+"}}",E+"\\left[".concat(x,"\\right]")}}),m=t("constTag",{"Object, ConstantNode, string":function(x,C){return x[C]=!0,!0},"Object, SymbolNode, string":function(x,C,S){return C.name!==S?(x[C]=!0,!0):!1},"Object, ParenthesisNode, string":function(x,C,S){return m(x,C.content,S)},"Object, FunctionAssignmentNode, string":function(x,C,S){return C.params.indexOf(S)===-1?(x[C]=!0,!0):m(x,C.expr,S)},"Object, FunctionNode | OperatorNode, string":function(x,C,S){if(C.args.length>0){for(var E=m(x,C.args[0],S),A=1;A<C.args.length;++A)E=m(x,C.args[A],S)&&E;if(E)return x[C]=!0,!0}return!1}}),g=t("_derivative",{"ConstantNode, Object":function(x){return y(0)},"SymbolNode, Object":function(x,C){return C[x]!==void 0?y(0):y(1)},"ParenthesisNode, Object":function(x,C){return new i(g(x.content,C))},"FunctionAssignmentNode, Object":function(x,C){return C[x]!==void 0?y(0):g(x.expr,C)},"FunctionNode, Object":function(x,C){if(x.args.length!==1&&b(x),C[x]!==void 0)return y(0);var S=x.args[0],E,A=!1,D=!1,M;switch(x.name){case"cbrt":A=!0,M=new o("*","multiply",[y(3),new o("^","pow",[S,new o("/","divide",[y(2),y(3)])])]);break;case"sqrt":case"nthRoot":if(x.args.length===1)A=!0,M=new o("*","multiply",[y(2),new u("sqrt",[S])]);else if(x.args.length===2)return E=new o("/","divide",[y(1),x.args[1]]),C[E]=C[x.args[1]],g(new o("^","pow",[S,E]),C);break;case"log10":E=y(10);case"log":if(!E&&x.args.length===1)M=S.clone(),A=!0;else if(x.args.length===1&&E||x.args.length===2&&C[x.args[1]]!==void 0)M=new o("*","multiply",[S.clone(),new u("log",[E||x.args[1]])]),A=!0;else if(x.args.length===2)return g(new o("/","divide",[new u("log",[S]),new u("log",[x.args[1]])]),C);break;case"pow":return C[E]=C[x.args[1]],g(new o("^","pow",[S,x.args[1]]),C);case"exp":M=new u("exp",[S.clone()]);break;case"sin":M=new u("cos",[S.clone()]);break;case"cos":M=new o("-","unaryMinus",[new u("sin",[S.clone()])]);break;case"tan":M=new o("^","pow",[new u("sec",[S.clone()]),y(2)]);break;case"sec":M=new o("*","multiply",[x,new u("tan",[S.clone()])]);break;case"csc":D=!0,M=new o("*","multiply",[x,new u("cot",[S.clone()])]);break;case"cot":D=!0,M=new o("^","pow",[new u("csc",[S.clone()]),y(2)]);break;case"asin":A=!0,M=new u("sqrt",[new o("-","subtract",[y(1),new o("^","pow",[S.clone(),y(2)])])]);break;case"acos":A=!0,D=!0,M=new u("sqrt",[new o("-","subtract",[y(1),new o("^","pow",[S.clone(),y(2)])])]);break;case"atan":A=!0,M=new o("+","add",[new o("^","pow",[S.clone(),y(2)]),y(1)]);break;case"asec":A=!0,M=new o("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new o("-","subtract",[new o("^","pow",[S.clone(),y(2)]),y(1)])])]);break;case"acsc":A=!0,D=!0,M=new o("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new o("-","subtract",[new o("^","pow",[S.clone(),y(2)]),y(1)])])]);break;case"acot":A=!0,D=!0,M=new o("+","add",[new o("^","pow",[S.clone(),y(2)]),y(1)]);break;case"sinh":M=new u("cosh",[S.clone()]);break;case"cosh":M=new u("sinh",[S.clone()]);break;case"tanh":M=new o("^","pow",[new u("sech",[S.clone()]),y(2)]);break;case"sech":D=!0,M=new o("*","multiply",[x,new u("tanh",[S.clone()])]);break;case"csch":D=!0,M=new o("*","multiply",[x,new u("coth",[S.clone()])]);break;case"coth":D=!0,M=new o("^","pow",[new u("csch",[S.clone()]),y(2)]);break;case"asinh":A=!0,M=new u("sqrt",[new o("+","add",[new o("^","pow",[S.clone(),y(2)]),y(1)])]);break;case"acosh":A=!0,M=new u("sqrt",[new o("-","subtract",[new o("^","pow",[S.clone(),y(2)]),y(1)])]);break;case"atanh":A=!0,M=new o("-","subtract",[y(1),new o("^","pow",[S.clone(),y(2)])]);break;case"asech":A=!0,D=!0,M=new o("*","multiply",[S.clone(),new u("sqrt",[new o("-","subtract",[y(1),new o("^","pow",[S.clone(),y(2)])])])]);break;case"acsch":A=!0,D=!0,M=new o("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new o("+","add",[new o("^","pow",[S.clone(),y(2)]),y(1)])])]);break;case"acoth":A=!0,D=!0,M=new o("-","subtract",[y(1),new o("^","pow",[S.clone(),y(2)])]);break;case"abs":M=new o("/","divide",[new u(new l("abs"),[S.clone()]),S.clone()]);break;case"gamma":default:throw new Error('Function "'+x.name+'" is not supported by derivative, or a wrong number of arguments is passed')}var B,O;A?(B="/",O="divide"):(B="*",O="multiply");var F=g(S,C);return D&&(F=new o("-","unaryMinus",[F])),new o(B,O,[F,M])},"OperatorNode, Object":function(x,C){if(C[x]!==void 0)return y(0);if(x.op==="+")return new o(x.op,x.fn,x.args.map(function(N){return g(N,C)}));if(x.op==="-"){if(x.isUnary())return new o(x.op,x.fn,[g(x.args[0],C)]);if(x.isBinary())return new o(x.op,x.fn,[g(x.args[0],C),g(x.args[1],C)])}if(x.op==="*"){var S=x.args.filter(function(N){return C[N]!==void 0});if(S.length>0){var E=x.args.filter(function(N){return C[N]===void 0}),A=E.length===1?E[0]:new o("*","multiply",E),D=S.concat(g(A,C));return new o("*","multiply",D)}return new o("+","add",x.args.map(function(N){return new o("*","multiply",x.args.map(function(T){return T===N?g(T,C):T.clone()}))}))}if(x.op==="/"&&x.isBinary()){var M=x.args[0],B=x.args[1];return C[B]!==void 0?new o("/","divide",[g(M,C),B]):C[M]!==void 0?new o("*","multiply",[new o("-","unaryMinus",[M]),new o("/","divide",[g(B,C),new o("^","pow",[B.clone(),y(2)])])]):new o("/","divide",[new o("-","subtract",[new o("*","multiply",[g(M,C),B.clone()]),new o("*","multiply",[M.clone(),g(B,C)])]),new o("^","pow",[B.clone(),y(2)])])}if(x.op==="^"&&x.isBinary()){var O=x.args[0],F=x.args[1];if(C[O]!==void 0)return gt(O)&&(v(O.value)||f(O.value,1))?y(0):new o("*","multiply",[x,new o("*","multiply",[new u("log",[O.clone()]),g(F.clone(),C)])]);if(C[F]!==void 0){if(gt(F)){if(v(F.value))return y(0);if(f(F.value,1))return g(O,C)}var z=new o("^","pow",[O.clone(),new o("-","subtract",[F,y(1)])]);return new o("*","multiply",[F.clone(),new o("*","multiply",[g(O,C),z])])}return new o("*","multiply",[new o("^","pow",[O.clone(),F.clone()]),new o("+","add",[new o("*","multiply",[g(O,C),new o("/","divide",[F.clone(),O.clone()])]),new o("*","multiply",[g(F,C),new u("log",[O.clone()])])])])}throw new Error('Operator "'+x.op+'" is not supported by derivative, or a wrong number of arguments is passed')}});function b(w){if(!((w.name==="log"||w.name==="nthRoot"||w.name==="pow")&&w.args.length===2)){for(var x=0;x<w.args.length;++x)w.args[x]=y(0);throw w.compile().evaluate(),new Error("Expected TypeError, but none found")}}function y(w,x){return new n(h(w,x||r.number))}return d}),Gg="rationalize",Vk=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],Gk=Z(Gg,Vk,e=>{var{config:t,typed:r,equal:a,isZero:s,add:f,subtract:v,multiply:h,divide:n,pow:u,parse:o,simplifyConstant:i,simplifyCore:l,simplify:c,fraction:d,bignumber:p,mathWithTransform:m,matrix:g,AccessorNode:b,ArrayNode:y,ConstantNode:w,FunctionNode:x,IndexNode:C,ObjectNode:S,OperatorNode:E,SymbolNode:A,ParenthesisNode:D}=e;function M(N){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,_=O(),I=B(N,T,!0,_.firstRules),U=I.variables.length,j={exactFractions:!1},L={exactFractions:!0};if(N=I.expression,U>=1){N=F(N);var P,k,V=!0,Q=!1;N=c(N,_.firstRules,{},j);for(var ne;k=V?_.distrDivRules:_.sucDivRules,N=c(N,k,{},L),V=!V,ne=N.toString(),ne!==P;)Q=!0,P=ne;Q&&(N=c(N,_.firstRulesAgain,{},j)),N=c(N,_.finalRules,{},j)}var re=[],ie={};return N.type==="OperatorNode"&&N.isBinary()&&N.op==="/"?(U===1&&(N.args[0]=z(N.args[0],re),N.args[1]=z(N.args[1])),q&&(ie.numerator=N.args[0],ie.denominator=N.args[1])):(U===1&&(N=z(N,re)),q&&(ie.numerator=N,ie.denominator=null)),q?(ie.coefficients=re,ie.variables=I.variables,ie.expression=N,ie):N}return r(Gg,{Node:M,"Node, boolean":(N,T)=>M(N,{},T),"Node, Object":M,"Node, Object, boolean":M});function B(N,T,q,_){var I=[],U=c(N,_,T,{exactFractions:!1});q=!!q;var j="+-*"+(q?"/":"");P(U);var L={};return L.expression=U,L.variables=I,L;function P(k){var V=k.type;if(V==="FunctionNode")throw new Error("There is an unsolved function call");if(V==="OperatorNode")if(k.op==="^"){if(k.args[1].type!=="ConstantNode"||!qe(parseFloat(k.args[1].value)))throw new Error("There is a non-integer exponent");P(k.args[0])}else{if(j.indexOf(k.op)===-1)throw new Error("Operator "+k.op+" invalid in polynomial expression");for(var Q=0;Q<k.args.length;Q++)P(k.args[Q])}else if(V==="SymbolNode"){var ne=k.name,re=I.indexOf(ne);re===-1&&I.push(ne)}else if(V==="ParenthesisNode")P(k.content);else if(V!=="ConstantNode")throw new Error("type "+V+" is not allowed in polynomial expression")}}function O(){var N=[l,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},i,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],T=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],q=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],_=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],I={};return I.firstRules=N.concat(T,_),I.distrDivRules=q,I.sucDivRules=_,I.firstRulesAgain=N.concat(T),I.finalRules=[l,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},i,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],I}function F(N,T,q){var _=N.type,I=arguments.length>1;if(_==="OperatorNode"&&N.isBinary()){var U=!1,j;if(N.op==="^"&&(N.args[0].type==="ParenthesisNode"||N.args[0].type==="OperatorNode")&&N.args[1].type==="ConstantNode"&&(j=parseFloat(N.args[1].value),U=j>=2&&qe(j)),U){if(j>2){var L=N.args[0],P=new E("^","pow",[N.args[0].cloneDeep(),new w(j-1)]);N=new E("*","multiply",[L,P])}else N=new E("*","multiply",[N.args[0],N.args[0].cloneDeep()]);I&&(q==="content"?T.content=N:T.args[q]=N)}}if(_==="ParenthesisNode")F(N.content,N,"content");else if(_!=="ConstantNode"&&_!=="SymbolNode")for(var k=0;k<N.args.length;k++)F(N.args[k],N,k);if(!I)return N}function z(N,T){T===void 0&&(T=[]),T[0]=0;var q={};q.cte=1,q.oper="+",q.fire="";var _=0,I="";ne(N,null,q),_=T.length-1;for(var U=!0,j,L=_;L>=0;L--)if(T[L]!==0){var P=new w(U?T[L]:Math.abs(T[L])),k=T[L]<0?"-":"+";if(L>0){var V=new A(I);if(L>1){var Q=new w(L);V=new E("^","pow",[V,Q])}T[L]===-1&&U?P=new E("-","unaryMinus",[V]):Math.abs(T[L])===1?P=V:P=new E("*","multiply",[P,V])}U?j=P:k==="+"?j=new E("+","add",[j,P]):j=new E("-","subtract",[j,P]),U=!1}if(U)return new w(0);return j;function ne(re,ie,de){var ve=re.type;if(ve==="FunctionNode")throw new Error("There is an unsolved function call");if(ve==="OperatorNode"){if("+-*^".indexOf(re.op)===-1)throw new Error("Operator "+re.op+" invalid");if(ie!==null){if((re.fn==="unaryMinus"||re.fn==="pow")&&ie.fn!=="add"&&ie.fn!=="subtract"&&ie.fn!=="multiply")throw new Error("Invalid "+re.op+" placing");if((re.fn==="subtract"||re.fn==="add"||re.fn==="multiply")&&ie.fn!=="add"&&ie.fn!=="subtract")throw new Error("Invalid "+re.op+" placing");if((re.fn==="subtract"||re.fn==="add"||re.fn==="unaryMinus")&&de.noFil!==0)throw new Error("Invalid "+re.op+" placing")}(re.op==="^"||re.op==="*")&&(de.fire=re.op);for(var ce=0;ce<re.args.length;ce++)re.fn==="unaryMinus"&&(de.oper="-"),(re.op==="+"||re.fn==="subtract")&&(de.fire="",de.cte=1,de.oper=ce===0?"+":re.op),de.noFil=ce,ne(re.args[ce],re,de)}else if(ve==="SymbolNode"){if(re.name!==I&&I!=="")throw new Error("There is more than one variable");if(I=re.name,ie===null){T[1]=1;return}if(ie.op==="^"&&de.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ie.op==="*"&&de.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(de.fire===""||de.fire==="*")&&(_<1&&(T[1]=0),T[1]+=de.cte*(de.oper==="+"?1:-1),_=Math.max(1,_))}else if(ve==="ConstantNode"){var ae=parseFloat(re.value);if(ie===null){T[0]=ae;return}if(ie.op==="^"){if(de.noFil!==1)throw new Error("Constant cannot be powered");if(!qe(ae)||ae<=0)throw new Error("Non-integer exponent is not allowed");for(var G=_+1;G<ae;G++)T[G]=0;ae>_&&(T[ae]=0),T[ae]+=de.cte*(de.oper==="+"?1:-1),_=Math.max(ae,_);return}de.cte=ae,de.fire===""&&(T[0]+=de.cte*(de.oper==="+"?1:-1))}else throw new Error("Type "+ve+" is not allowed")}}}),Wk="reviver",Yk=["classes"],Xk=Z(Wk,Yk,e=>{var{classes:t}=e;return function(a,s){var f=t[s&&s.mathjs];return f&&typeof f.fromJSON=="function"?f.fromJSON(s):s}}),Kk="replacer",Jk=[],Zk=Z(Kk,Jk,()=>function(t,r){return typeof r=="number"&&(!isFinite(r)||isNaN(r))?{mathjs:"number",value:String(r)}:r}),Qk="11.4.0",e7=Z("true",[],()=>!0),t7=Z("false",[],()=>!1),r7=Z("null",[],()=>null),n7=kr("Infinity",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return t.number==="BigNumber"?new r(1/0):1/0}),i7=kr("NaN",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return t.number==="BigNumber"?new r(NaN):NaN}),a7=kr("pi",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return t.number==="BigNumber"?Rh(r):qD}),o7=kr("tau",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return t.number==="BigNumber"?i4(r):HD}),s7=kr("e",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return t.number==="BigNumber"?r4(r):VD}),u7=kr("phi",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return t.number==="BigNumber"?n4(r):GD}),l7=kr("LN2",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return t.number==="BigNumber"?new r(2).ln():Math.LN2}),c7=kr("LN10",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return t.number==="BigNumber"?new r(10).ln():Math.LN10}),f7=kr("LOG2E",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return t.number==="BigNumber"?new r(1).div(new r(2).ln()):Math.LOG2E}),h7=kr("LOG10E",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return t.number==="BigNumber"?new r(1).div(new r(10).ln()):Math.LOG10E}),d7=kr("SQRT1_2",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return t.number==="BigNumber"?new r("0.5").sqrt():Math.SQRT1_2}),p7=kr("SQRT2",["config","?BigNumber"],e=>{var{config:t,BigNumber:r}=e;return t.number==="BigNumber"?new r(2).sqrt():Math.SQRT2}),m7=kr("i",["Complex"],e=>{var{Complex:t}=e;return t.I}),v7=Z("version",[],()=>Qk);function kr(e,t,r){return Z(e,t,r,{recreateOnConfigChange:!0})}var g7=rt("speedOfLight","299792458","m s^-1"),y7=rt("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),b7=rt("planckConstant","6.62607015e-34","J s"),w7=rt("reducedPlanckConstant","1.0545718176461565e-34","J s"),x7=rt("magneticConstant","1.25663706212e-6","N A^-2"),C7=rt("electricConstant","8.8541878128e-12","F m^-1"),S7=rt("vacuumImpedance","376.730313667","ohm"),E7=rt("coulomb","8.987551792261171e9","N m^2 C^-2"),_7=rt("elementaryCharge","1.602176634e-19","C"),D7=rt("bohrMagneton","9.2740100783e-24","J T^-1"),A7=rt("conductanceQuantum","7.748091729863649e-5","S"),N7=rt("inverseConductanceQuantum","12906.403729652257","ohm"),T7=rt("magneticFluxQuantum","2.0678338484619295e-15","Wb"),O7=rt("nuclearMagneton","5.0507837461e-27","J T^-1"),M7=rt("klitzing","25812.807459304513","ohm"),F7=rt("bohrRadius","5.29177210903e-11","m"),P7=rt("classicalElectronRadius","2.8179403262e-15","m"),B7=rt("electronMass","9.1093837015e-31","kg"),I7=rt("fermiCoupling","1.1663787e-5","GeV^-2"),R7=Rl("fineStructure",.0072973525693),k7=rt("hartreeEnergy","4.3597447222071e-18","J"),$7=rt("protonMass","1.67262192369e-27","kg"),L7=rt("deuteronMass","3.3435830926e-27","kg"),z7=rt("neutronMass","1.6749271613e-27","kg"),U7=rt("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),j7=rt("rydberg","10973731.568160","m^-1"),q7=rt("thomsonCrossSection","6.6524587321e-29","m^2"),H7=Rl("weakMixingAngle",.2229),V7=Rl("efimovFactor",22.7),G7=rt("atomicMass","1.66053906660e-27","kg"),W7=rt("avogadro","6.02214076e23","mol^-1"),Y7=rt("boltzmann","1.380649e-23","J K^-1"),X7=rt("faraday","96485.33212331001","C mol^-1"),K7=rt("firstRadiation","3.7417718521927573e-16","W m^2"),J7=rt("loschmidt","2.686780111798444e25","m^-3"),Z7=rt("gasConstant","8.31446261815324","J K^-1 mol^-1"),Q7=rt("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),e9=rt("molarVolume","0.022413969545014137","m^3 mol^-1"),t9=Rl("sackurTetrode",-1.16487052358),r9=rt("secondRadiation","0.014387768775039337","m K"),n9=rt("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),i9=rt("wienDisplacement","2.897771955e-3","m K"),a9=rt("molarMass","0.99999999965e-3","kg mol^-1"),o9=rt("molarMassC12","11.9999999958e-3","kg mol^-1"),s9=rt("gravity","9.80665","m s^-2"),u9=rt("planckLength","1.616255e-35","m"),l9=rt("planckMass","2.176435e-8","kg"),c9=rt("planckTime","5.391245e-44","s"),f9=rt("planckCharge","1.87554603778e-18","C"),h9=rt("planckTemperature","1.416785e+32","K");function rt(e,t,r){var a=["config","Unit","BigNumber"];return Z(e,a,s=>{var{config:f,Unit:v,BigNumber:h}=s,n=f.number==="BigNumber"?new h(t):parseFloat(t),u=new v(n,r);return u.fixPrefix=!0,u})}function Rl(e,t){var r=["config","BigNumber"];return Z(e,r,a=>{var{config:s,BigNumber:f}=a;return s.number==="BigNumber"?new f(t):t})}var d9="apply",p9=["typed","isInteger"],m9=Z(d9,p9,e=>{var{typed:t,isInteger:r}=e,a=Xb({typed:t,isInteger:r});return t("apply",{"...any":function(f){var v=f[1];dt(v)?f[1]=v-1:ct(v)&&(f[1]=v.minus(1));try{return a.apply(null,f)}catch(h){throw _r(h)}}})},{isTransformFunction:!0}),v9="column",g9=["typed","Index","matrix","range"],y9=Z(v9,g9,e=>{var{typed:t,Index:r,matrix:a,range:s}=e,f=Qb({typed:t,Index:r,matrix:a,range:s});return t("column",{"...any":function(h){var n=h.length-1,u=h[n];dt(u)&&(h[n]=u-1);try{return f.apply(null,h)}catch(o){throw _r(o)}}})},{isTransformFunction:!0});function Lh(e,t,r){var a=e.filter(function(h){return ir(h)&&!(h.name in t)&&!r.has(h.name)})[0];if(!a)throw new Error('No undefined variable found in inline expression "'+e+'"');var s=a.name,f=zo(r),v=e.compile();return function(n){return f.set(s,n),v.evaluate(f)}}var b9="filter",w9=["typed"],x9=Z(b9,w9,e=>{var{typed:t}=e;function r(s,f,v){var h,n;return s[0]&&(h=s[0].compile().evaluate(v)),s[1]&&(ir(s[1])||ls(s[1])?n=s[1].compile().evaluate(v):n=Lh(s[1],f,v)),a(h,n)}r.rawArgs=!0;var a=t("filter",{"Array, function":Wg,"Matrix, function":function(f,v){return f.create(Wg(f.toArray(),v))},"Array, RegExp":Pu,"Matrix, RegExp":function(f,v){return f.create(Pu(f.toArray(),v))}});return r},{isTransformFunction:!0});function Wg(e,t){var r=Oi(t);return I1(e,function(a,s,f){return r===1?t(a):r===2?t(a,[s+1]):t(a,[s+1],f)})}var C9="forEach",S9=["typed"],E9=Z(C9,S9,e=>{var{typed:t}=e;function r(s,f,v){var h,n;return s[0]&&(h=s[0].compile().evaluate(v)),s[1]&&(ir(s[1])||ls(s[1])?n=s[1].compile().evaluate(v):n=Lh(s[1],f,v)),a(h,n)}r.rawArgs=!0;var a=t("forEach",{"Array | Matrix, function":function(f,v){var h=Oi(v),n=function u(o,i){Array.isArray(o)?Al(o,function(l,c){u(l,i.concat(c+1))}):h===1?v(o):h===2?v(o,i):v(o,i,f)};n(f.valueOf(),[])}});return r},{isTransformFunction:!0}),_9="index",D9=["Index"],A9=Z(_9,D9,e=>{var{Index:t}=e;return function(){for(var a=[],s=0,f=arguments.length;s<f;s++){var v=arguments[s];if(Ch(v))v.start--,v.end-=v.step>0?0:2;else if(v&&v.isSet===!0)v=v.map(function(n){return n-1});else if(Et(v)||Ze(v))v=v.map(function(n){return n-1});else if(dt(v))v--;else if(ct(v))v=v.toNumber()-1;else if(typeof v!="string")throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");a[s]=v}var h=new t;return t.apply(h,a),h}},{isTransformFunction:!0}),N9="map",T9=["typed"],O9=Z(N9,T9,e=>{var{typed:t}=e;function r(s,f,v){var h,n;return s[0]&&(h=s[0].compile().evaluate(v)),s[1]&&(ir(s[1])||ls(s[1])?n=s[1].compile().evaluate(v):n=Lh(s[1],f,v)),a(h,n)}r.rawArgs=!0;var a=t("map",{"Array, function":function(f,v){return Yg(f,v,f)},"Matrix, function":function(f,v){return f.create(Yg(f.valueOf(),v,f))}});return r},{isTransformFunction:!0});function Yg(e,t,r){var a=Oi(t);function s(f,v){return Array.isArray(f)?Yn(f,function(h,n){return s(h,v.concat(n+1))}):a===1?t(f):a===2?t(f,v):t(f,v,r)}return s(e,[])}function oa(e){if(e.length===2&&Jn(e[0])){e=e.slice();var t=e[1];dt(t)?e[1]=t-1:ct(t)&&(e[1]=t.minus(1))}return e}var M9="max",F9=["typed","config","numeric","larger"],P9=Z(M9,F9,e=>{var{typed:t,config:r,numeric:a,larger:s}=e,f=ow({typed:t,config:r,numeric:a,larger:s});return t("max",{"...any":function(h){h=oa(h);try{return f.apply(null,h)}catch(n){throw _r(n)}}})},{isTransformFunction:!0}),B9="mean",I9=["typed","add","divide"],R9=Z(B9,I9,e=>{var{typed:t,add:r,divide:a}=e,s=mw({typed:t,add:r,divide:a});return t("mean",{"...any":function(v){v=oa(v);try{return s.apply(null,v)}catch(h){throw _r(h)}}})},{isTransformFunction:!0}),k9="min",$9=["typed","config","numeric","smaller"],L9=Z(k9,$9,e=>{var{typed:t,config:r,numeric:a,smaller:s}=e,f=sw({typed:t,config:r,numeric:a,smaller:s});return t("min",{"...any":function(h){h=oa(h);try{return f.apply(null,h)}catch(n){throw _r(n)}}})},{isTransformFunction:!0}),z9="range",U9=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],j9=Z(z9,U9,e=>{var{typed:t,config:r,matrix:a,bignumber:s,smaller:f,smallerEq:v,larger:h,largerEq:n}=e,u=nw({typed:t,config:r,matrix:a,bignumber:s,smaller:f,smallerEq:v,larger:h,largerEq:n});return t("range",{"...any":function(i){var l=i.length-1,c=i[l];return typeof c!="boolean"&&i.push(!0),u.apply(null,i)}})},{isTransformFunction:!0}),q9="row",H9=["typed","Index","matrix","range"],V9=Z(q9,H9,e=>{var{typed:t,Index:r,matrix:a,range:s}=e,f=iw({typed:t,Index:r,matrix:a,range:s});return t("row",{"...any":function(h){var n=h.length-1,u=h[n];dt(u)&&(h[n]=u-1);try{return f.apply(null,h)}catch(o){throw _r(o)}}})},{isTransformFunction:!0}),G9="subset",W9=["typed","matrix"],Y9=Z(G9,W9,e=>{var{typed:t,matrix:r}=e,a=aw({typed:t,matrix:r});return t("subset",{"...any":function(f){try{return a.apply(null,f)}catch(v){throw _r(v)}}})},{isTransformFunction:!0}),X9="concat",K9=["typed","matrix","isInteger"],J9=Z(X9,K9,e=>{var{typed:t,matrix:r,isInteger:a}=e,s=Jb({typed:t,matrix:r,isInteger:a});return t("concat",{"...any":function(v){var h=v.length-1,n=v[h];dt(n)?v[h]=n-1:ct(n)&&(v[h]=n.minus(1));try{return s.apply(null,v)}catch(u){throw _r(u)}}})},{isTransformFunction:!0}),Xg="diff",Z9=["typed","matrix","subtract","number","bignumber"],Q9=Z(Xg,Z9,e=>{var{typed:t,matrix:r,subtract:a,number:s,bignumber:f}=e,v=ew({typed:t,matrix:r,subtract:a,number:s,bignumber:f});return t(Xg,{"...any":function(n){n=oa(n);try{return v.apply(null,n)}catch(u){throw _r(u)}}})},{isTransformFunction:!0}),e$="std",t$=["typed","map","sqrt","variance"],r$=Z(e$,t$,e=>{var{typed:t,map:r,sqrt:a,variance:s}=e,f=gw({typed:t,map:r,sqrt:a,variance:s});return t("std",{"...any":function(h){h=oa(h);try{return f.apply(null,h)}catch(n){throw _r(n)}}})},{isTransformFunction:!0}),Kg="sum",n$=["typed","config","add","numeric"],i$=Z(Kg,n$,e=>{var{typed:t,config:r,add:a,numeric:s}=e,f=dw({typed:t,config:r,add:a,numeric:s});return t(Kg,{"...any":function(h){h=oa(h);try{return f.apply(null,h)}catch(n){throw _r(n)}}})},{isTransformFunction:!0}),Jg="cumsum",a$=["typed","add","unaryPlus"],o$=Z(Jg,a$,e=>{var{typed:t,add:r,unaryPlus:a}=e,s=pw({typed:t,add:r,unaryPlus:a});return t(Jg,{"...any":function(v){if(v.length===2&&Jn(v[0])){var h=v[1];dt(h)?v[1]=h-1:ct(h)&&(v[1]=h.minus(1))}try{return s.apply(null,v)}catch(n){throw _r(n)}}})},{isTransformFunction:!0}),Zg="variance",s$=["typed","add","subtract","multiply","divide","apply","isNaN"],u$=Z(Zg,s$,e=>{var{typed:t,add:r,subtract:a,multiply:s,divide:f,apply:v,isNaN:h}=e,n=vw({typed:t,add:r,subtract:a,multiply:s,divide:f,apply:v,isNaN:h});return t(Zg,{"...any":function(o){o=oa(o);try{return n.apply(null,o)}catch(i){throw _r(i)}}})},{isTransformFunction:!0}),Me=bD({config:Ee}),Rt=SD({}),Qg=s7({BigNumber:Me,config:Ee}),l$=t7({}),c$=R7({BigNumber:Me,config:Ee}),sa=DD({}),Dw=m7({Complex:Rt}),f$=n7({BigNumber:Me,config:Ee}),h$=c7({BigNumber:Me,config:Ee}),d$=h7({BigNumber:Me,config:Ee}),kl=FD({}),p$=i7({BigNumber:Me,config:Ee}),m$=r7({}),v$=u7({BigNumber:Me,config:Ee}),g$=TD({}),Aw=S_({}),y$=d7({BigNumber:Me,config:Ee}),b$=t9({BigNumber:Me,config:Ee}),Nw=o7({BigNumber:Me,config:Ee}),w$=e7({}),x$=v7({}),at=RD({Matrix:kl}),C$=V7({BigNumber:Me,config:Ee}),S$=l7({BigNumber:Me,config:Ee}),e0=a7({BigNumber:Me,config:Ee}),E$=Zk({}),_$=p7({BigNumber:Me,config:Ee}),se=b_({BigNumber:Me,Complex:Rt,DenseMatrix:at,Fraction:sa}),zh=WA({BigNumber:Me,config:Ee,typed:se}),D$=H7({BigNumber:Me,config:Ee}),Fr=XA({typed:se}),A$=m4({Complex:Rt,config:Ee,typed:se}),N$=b4({BigNumber:Me,typed:se}),T$=S4({BigNumber:Me,Complex:Rt,config:Ee,typed:se}),Jt=QA({typed:se}),O$=$T({typed:se}),M$=T4({BigNumber:Me,Complex:Rt,config:Ee,typed:se}),F$=B4({typed:se}),Tw=k4({typed:se}),P$=U4({Complex:Rt,config:Ee,typed:se}),Nn=AA({BigNumber:Me,typed:se}),B$=OT({typed:se}),I$=EA({typed:se}),R$=$D({typed:se}),$l=jR({typed:se}),Ll=OA({Complex:Rt,typed:se}),lo=zT({typed:se}),k$=V4({typed:se}),$$=X4({BigNumber:Me,typed:se}),L$=J4({BigNumber:Me,typed:se}),z$=hN({typed:se}),pt=hA({config:Ee,typed:se}),U$=nO({typed:se}),Ow=pN({typed:se}),j$=vN({Complex:Rt,typed:se}),q$=s3({typed:se}),H$=f3({typed:se}),hs=hO({typed:se}),V$=p3({typed:se}),G$=yO({format:hs,typed:se}),Uh=jT({typed:se}),Xr=zD({typed:se}),co=JD({typed:se}),zl=nA({typed:se}),vn=aA({typed:se}),W$=f7({BigNumber:Me,config:Ee}),Y$=YR({Complex:Rt,typed:se}),X$=qN({Complex:Rt,config:Ee,typed:se}),K$=VN({Complex:Rt,config:Ee,typed:se}),fo=w3({typed:se}),Yt=eT({typed:se}),Mw=GT({typed:se}),Fi=wA({typed:se}),J$=vO({format:hs,typed:se}),Z$=dk({config:Ee,typed:se}),Q$=wO({typed:se}),eL=mk({config:Ee,typed:se}),jh=HT({typed:se}),tL=tF({BigNumber:Me,typed:se}),Fw=oT({BigNumber:Me,Fraction:sa,complex:Ll,typed:se}),qh=aF({typed:se}),ri=mA({Matrix:kl,equalScalar:pt,typed:se}),rL=qA({typed:se}),nL=fT({typed:se}),iL=CA({typed:se}),aL=lF({typed:se}),Pw=lA({typed:se}),oL=g4({Complex:Rt,config:Ee,typed:se}),sL=_4({BigNumber:Me,typed:se}),Hh=Xb({isInteger:Xr,typed:se}),uL=A4({BigNumber:Me,Complex:Rt,config:Ee,typed:se}),lL=pO({format:hs,typed:se}),cL=HR({typed:se}),Vh=q4({typed:se}),fL=Q4({BigNumber:Me,typed:se}),ds=sA({typed:se}),hL=EO({typed:se}),dL=gk({config:Ee,typed:se}),pL=nF({BigNumber:Me,typed:se}),mL=sF({typed:se}),vL=f4({SparseMatrix:ri,typed:se}),Mn=lT({Complex:Rt,config:Ee,typed:se}),gL=hF({typed:se}),Fn=VA({typed:se}),yL=x4({BigNumber:Me,Complex:Rt,config:Ee,typed:se}),bL=W4({BigNumber:Me,typed:se}),ho=PA({Fraction:sa,typed:se}),ua=QD({typed:se}),Be=IA({DenseMatrix:at,Matrix:kl,SparseMatrix:ri,typed:se}),wL=kA({isZero:vn,matrix:Be,typed:se}),Bw=JN({DenseMatrix:at,equalScalar:pt,matrix:Be,typed:se}),xL=iT({BigNumber:Me,equalScalar:pt,matrix:Be,typed:se}),cn=AO({bignumber:Nn,fraction:ho,number:Fi}),CL=YT({DenseMatrix:at,equalScalar:pt,matrix:Be,typed:se}),Iw=cO({config:Ee,multiplyScalar:Yt,numeric:cn,typed:se}),SL=N3({isInteger:Xr,matrix:Be,typed:se}),yr=$3({matrix:Be,config:Ee,typed:se}),Kr=CM({DenseMatrix:at,config:Ee,matrix:Be,typed:se}),EL=z3({matrix:Be,typed:se}),$r=aw({matrix:Be,typed:se}),Pt=dT({DenseMatrix:at,addScalar:Jt,equalScalar:pt,matrix:Be,typed:se,unaryMinus:Fn}),_L=CO({matrix:Be,typed:se}),ps=G3({matrix:Be,typed:se}),Rw=mT({BigNumber:Me,config:Ee,matrix:Be,typed:se}),Pn=K3({BigNumber:Me,config:Ee,matrix:Be,typed:se}),DL=sM({equalScalar:pt,matrix:Be,not:Mw,typed:se,zeros:Pn}),AL=NT({equalScalar:pt,matrix:Be,typed:se}),NL=RT({DenseMatrix:at,matrix:Be,typed:se}),kw=tN({BigNumber:Me,Complex:Rt,Fraction:sa,config:Ee,isNegative:co,matrix:Be,typed:se,unaryMinus:Fn}),po=lM({BigNumber:Me,DenseMatrix:at,Fraction:sa,config:Ee,equalScalar:pt,matrix:Be,typed:se}),$w=mM({matrix:Be,typed:se}),Ul=Jb({isInteger:Xr,matrix:Be,typed:se}),TL=e3({prod:Iw,size:yr,typed:se}),Gh=Y3({conj:lo,transpose:ps,typed:se}),Lw=i3({DenseMatrix:at,SparseMatrix:ri,matrix:Be,typed:se}),qt=TO({numeric:cn,typed:se}),jl=qO({DenseMatrix:at,divideScalar:qt,equalScalar:pt,matrix:Be,typed:se}),gn=gM({DenseMatrix:at,equalScalar:pt,matrix:Be,typed:se}),zw=Z3({addScalar:Jt,divideScalar:qt,exp:Ow,i:Dw,matrix:Be,multiplyScalar:Yt,tau:Nw,typed:se}),ms=l3({matrix:Be,typed:se}),OL=IN({BigNumber:Me,DenseMatrix:at,equalScalar:pt,matrix:Be,typed:se}),ML=tA({isNumeric:ua,typed:se}),FL=RF({abs:Fr,addScalar:Jt,divideScalar:qt,isPositive:zl,multiplyScalar:Yt,smaller:Kr,sqrt:Mn,typed:se}),PL=eO({conj:lo,dotDivide:jl,fft:zw,typed:se}),BL=y3({matrix:Be,multiplyScalar:Yt,typed:se}),ql=MM({DenseMatrix:at,config:Ee,matrix:Be,typed:se}),IL=tM({DenseMatrix:at,equalScalar:pt,matrix:Be,typed:se,zeros:Pn}),Uw=VO({DenseMatrix:at,divideScalar:qt,equalScalar:pt,matrix:Be,multiplyScalar:Yt,subtract:Pt,typed:se}),Wh=UA({flatten:ms,matrix:Be,size:yr,typed:se}),RL=sw({config:Ee,numeric:cn,smaller:Kr,typed:se}),kL=uO({isNaN:ds,isNumeric:ua,typed:se}),$L=LO({Complex:Rt,config:Ee,divideScalar:qt,typed:se}),LL=_3({BigNumber:Me,config:Ee,matrix:Be,typed:se}),Yh=LM({compare:po,isNaN:ds,isNumeric:ua,typed:se}),zL=M3({config:Ee,matrix:Be}),UL=nM({DenseMatrix:at,equalScalar:pt,matrix:Be,typed:se,zeros:Pn}),Hl=PO({BigNumber:Me,DenseMatrix:at,equalScalar:pt,matrix:Be,typed:se,zeros:Pn}),Xh=_M({DenseMatrix:at,config:Ee,matrix:Be,typed:se}),jL=RM({DenseMatrix:at,config:Ee,equalScalar:pt,matrix:Be,typed:se}),Kh=WO({DenseMatrix:at,divideScalar:qt,equalScalar:pt,matrix:Be,multiplyScalar:Yt,subtract:Pt,typed:se}),qL=KT({DenseMatrix:at,matrix:Be,typed:se}),It=BF({DenseMatrix:at,SparseMatrix:ri,addScalar:Jt,equalScalar:pt,matrix:Be,typed:se}),HL=L4({BigNumber:Me,DenseMatrix:at,equalScalar:pt,matrix:Be,typed:se}),VL=FT({DenseMatrix:at,equalScalar:pt,matrix:Be,typed:se}),GL=Sk({addScalar:Jt,combinations:$l,divideScalar:qt,isInteger:Xr,isNegative:co,multiplyScalar:Yt,typed:se}),Bn=hM({compare:po,typed:se}),WL=pw({add:It,typed:se,unaryPlus:zh}),jw=BM({equal:gn,typed:se}),YL=ew({matrix:Be,number:Fi,subtract:Pt,typed:se}),Vl=zF({addScalar:Jt,conj:lo,multiplyScalar:Yt,size:yr,typed:se}),XL=wM({compareText:$w,isZero:vn,typed:se}),qw=CN({DenseMatrix:at,config:Ee,equalScalar:pt,matrix:Be,round:Hl,typed:se,zeros:Pn}),Pi=v3({BigNumber:Me,DenseMatrix:at,SparseMatrix:ri,config:Ee,matrix:Be,typed:se}),KL=gT({BigNumber:Me,add:It,config:Ee,equal:gn,isInteger:Xr,mod:Bw,smaller:Kr,typed:se,xgcd:Rw}),Jr=NM({DenseMatrix:at,config:Ee,matrix:Be,typed:se}),Jh=IO({Complex:Rt,config:Ee,divideScalar:qt,typed:se}),JL=XO({DenseMatrix:at,divideScalar:qt,equalScalar:pt,matrix:Be,multiplyScalar:Yt,subtract:Pt,typed:se}),ZL=LA({flatten:ms,matrix:Be,size:yr,typed:se}),kt=rT({addScalar:Jt,dot:Vl,equalScalar:pt,matrix:Be,multiplyScalar:Yt,typed:se}),Zh=Y5({addScalar:Jt,complex:Ll,conj:lo,divideScalar:qt,equal:gn,identity:Pi,isZero:vn,matrix:Be,multiplyScalar:Yt,sign:Fw,sqrt:Mn,subtract:Pt,typed:se,unaryMinus:Fn,zeros:Pn}),Ja=nw({bignumber:Nn,matrix:Be,config:Ee,larger:Jr,largerEq:ql,smaller:Kr,smallerEq:Xh,typed:se}),QL=aM({DenseMatrix:at,equalScalar:pt,matrix:Be,typed:se,zeros:Pn}),ez=NF({compareNatural:Bn,typed:se}),Hw=yP({SparseMatrix:ri,abs:Fr,add:It,divideScalar:qt,larger:Jr,largerEq:ql,multiply:kt,subtract:Pt,transpose:ps,typed:se}),Vw=dw({add:It,config:Ee,numeric:cn,typed:se}),tz=qF({add:It,matrix:Be,typed:se}),Gw=JO({DenseMatrix:at,divideScalar:qt,equalScalar:pt,matrix:Be,multiplyScalar:Yt,subtract:Pt,typed:se}),rz=M4({Complex:Rt,config:Ee,typed:se}),Ww=cN({DenseMatrix:at,config:Ee,equalScalar:pt,matrix:Be,round:Hl,typed:se,zeros:Pn}),nz=_k({addScalar:Jt,combinations:$l,isInteger:Xr,isNegative:co,isPositive:zl,larger:Jr,typed:se}),iz=r3({matrix:Be,multiply:kt,subtract:Pt,typed:se}),Yw=tR({divideScalar:qt,isZero:vn,matrix:Be,multiply:kt,subtract:Pt,typed:se,unaryMinus:Fn}),az=_R({abs:Fr,addScalar:Jt,divideScalar:qt,multiplyScalar:Yt,sqrt:Mn,subtract:Pt,typed:se,unaryMinus:Fn}),oz=xT({equalScalar:pt,matrix:Be,multiplyScalar:Yt,typed:se}),Xw=ZM({larger:Jr,smaller:Kr}),Kw=bN({Complex:Rt,DenseMatrix:at,ceil:Ww,equalScalar:pt,floor:qw,matrix:Be,typed:se,zeros:Pn}),Jw=GM({DenseMatrix:at,smaller:Kr}),mr=XM({ImmutableDenseMatrix:Jw}),sz=NR({abs:Fr,add:It,addScalar:Jt,config:Ee,divideScalar:qt,equalScalar:pt,flatten:ms,isNumeric:ua,isZero:vn,matrix:Be,multiply:kt,multiplyScalar:Yt,smaller:Kr,subtract:Pt,typed:se}),uz=UN({equalScalar:pt,matrix:Be,typed:se}),lz=kO({Complex:Rt,config:Ee,divideScalar:qt,log:Jh,typed:se}),Zw=ow({config:Ee,larger:Jr,numeric:cn,typed:se}),cz=LR({add:It,compare:po,multiply:kt,partitionSelect:Yh,typed:se}),fz=iw({Index:mr,matrix:Be,range:Ja,typed:se}),hz=pF({DenseMatrix:at,Index:mr,compareNatural:Bn,size:yr,subset:$r,typed:se}),dz=yF({DenseMatrix:at,Index:mr,compareNatural:Bn,size:yr,subset:$r,typed:se}),pz=CF({Index:mr,compareNatural:Bn,size:yr,subset:$r,typed:se}),mz=DF({Index:mr,compareNatural:Bn,size:yr,subset:$r,typed:se}),vz=UM({compare:po,compareNatural:Bn,matrix:Be,typed:se}),Qw=Qb({Index:mr,matrix:Be,range:Ja,typed:se}),ex=VF({Index:mr,typed:se}),la=nR({abs:Fr,addScalar:Jt,det:Yw,divideScalar:qt,identity:Pi,matrix:Be,multiply:kt,typed:se,unaryMinus:Fn}),gz=aR({Complex:Rt,add:It,ctranspose:Gh,deepEqual:jw,divideScalar:qt,dot:Vl,dotDivide:jl,equal:gn,inv:la,matrix:Be,multiply:kt,typed:se}),ni=MO({Complex:Rt,config:Ee,fraction:ho,identity:Pi,inv:la,matrix:Be,multiply:kt,number:Fi,typed:se}),tx=vF({DenseMatrix:at,Index:mr,compareNatural:Bn,size:yr,subset:$r,typed:se}),yz=EF({Index:mr,compareNatural:Bn,size:yr,subset:$r,typed:se}),rx=t4({FibonacciHeap:Xw,addScalar:Jt,equalScalar:pt}),bz=pR({abs:Fr,add:It,identity:Pi,inv:la,map:fo,max:Zw,multiply:kt,size:yr,sqrt:Mn,subtract:Pt,typed:se}),Qe=s4({BigNumber:Me,Complex:Rt,Fraction:sa,abs:Fr,addScalar:Jt,config:Ee,divideScalar:qt,equal:gn,fix:Kw,format:hs,isNumeric:ua,multiplyScalar:Yt,number:Fi,pow:ni,round:Hl,subtract:Pt}),wz=S7({BigNumber:Me,Unit:Qe,config:Ee}),xz=i9({BigNumber:Me,Unit:Qe,config:Ee}),Cz=G7({BigNumber:Me,Unit:Qe,config:Ee}),Sz=D7({BigNumber:Me,Unit:Qe,config:Ee}),Ez=Y7({BigNumber:Me,Unit:Qe,config:Ee}),_z=A7({BigNumber:Me,Unit:Qe,config:Ee}),Dz=d4({Unit:Qe,typed:se}),Az=L7({BigNumber:Me,Unit:Qe,config:Ee}),Nz=UO({DenseMatrix:at,equalScalar:pt,matrix:Be,pow:ni,typed:se}),Tz=C7({BigNumber:Me,Unit:Qe,config:Ee}),Oz=_7({BigNumber:Me,Unit:Qe,config:Ee}),Mz=hR({abs:Fr,add:It,identity:Pi,inv:la,multiply:kt,typed:se}),Fz=X7({BigNumber:Me,Unit:Qe,config:Ee}),Pz=K7({BigNumber:Me,Unit:Qe,config:Ee}),nx=GR({BigNumber:Me,Complex:Rt,config:Ee,multiplyScalar:Yt,pow:ni,typed:se}),Bz=y7({BigNumber:Me,Unit:Qe,config:Ee}),Iz=k7({BigNumber:Me,Unit:Qe,config:Ee}),Rz=M7({BigNumber:Me,Unit:Qe,config:Ee}),kz=J7({BigNumber:Me,Unit:Qe,config:Ee}),$z=x7({BigNumber:Me,Unit:Qe,config:Ee}),Lz=a9({BigNumber:Me,Unit:Qe,config:Ee}),zz=Q7({BigNumber:Me,Unit:Qe,config:Ee}),Uz=z7({BigNumber:Me,Unit:Qe,config:Ee}),jz=O7({BigNumber:Me,Unit:Qe,config:Ee}),qz=f9({BigNumber:Me,Unit:Qe,config:Ee}),Hz=u9({BigNumber:Me,Unit:Qe,config:Ee}),Vz=h9({BigNumber:Me,Unit:Qe,config:Ee}),Gz=$7({BigNumber:Me,Unit:Qe,config:Ee}),Wz=w7({BigNumber:Me,Unit:Qe,config:Ee}),Yz=j7({BigNumber:Me,Unit:Qe,config:Ee}),Xz=r9({BigNumber:Me,Unit:Qe,config:Ee}),ix=OF({Index:mr,concat:Ul,setDifference:tx,size:yr,subset:$r,typed:se}),Kz=g7({BigNumber:Me,Unit:Qe,config:Ee}),Jz=n9({BigNumber:Me,Unit:Qe,config:Ee}),Zz=q7({BigNumber:Me,Unit:Qe,config:Ee}),Qz=W7({BigNumber:Me,Unit:Qe,config:Ee}),eU=F7({BigNumber:Me,Unit:Qe,config:Ee}),tU=E7({BigNumber:Me,Unit:Qe,config:Ee}),Zr=SR({divideScalar:qt,equalScalar:pt,inv:la,matrix:Be,multiply:kt,typed:se}),rU=B7({BigNumber:Me,Unit:Qe,config:Ee}),Gl=KR({gamma:nx,typed:se}),nU=s9({BigNumber:Me,Unit:Qe,config:Ee}),iU=N7({BigNumber:Me,Unit:Qe,config:Ee}),ax=G5({DenseMatrix:at,Spa:rx,SparseMatrix:ri,abs:Fr,addScalar:Jt,divideScalar:qt,equalScalar:pt,larger:Jr,matrix:Be,multiplyScalar:Yt,subtract:Pt,typed:se,unaryMinus:Fn}),aU=T7({BigNumber:Me,Unit:Qe,config:Ee}),oU=o9({BigNumber:Me,Unit:Qe,config:Ee}),sU=ek({add:It,divide:Zr,factorial:Gl,isInteger:Xr,isPositive:zl,multiply:kt,typed:se}),uU=rk({factorial:Gl,typed:se}),lU=l9({BigNumber:Me,Unit:Qe,config:Ee}),cU=CP({add:It,cbrt:kw,divide:Zr,equalScalar:pt,im:Uh,isZero:vn,multiply:kt,re:jh,sqrt:Mn,subtract:Pt,typeOf:Pw,typed:se,unaryMinus:Fn}),ox=wF({DenseMatrix:at,Index:mr,compareNatural:Bn,size:yr,subset:$r,typed:se}),sx=bk({bignumber:Nn,addScalar:Jt,combinations:$l,divideScalar:qt,factorial:Gl,isInteger:Xr,isNegative:co,larger:Jr,multiplyScalar:Yt,number:Fi,pow:ni,subtract:Pt,typed:se}),fU=l4({Unit:Qe,typed:se}),hU=xk({addScalar:Jt,isInteger:Xr,isNegative:co,stirlingS2:sx,typed:se}),ux=cR({abs:Fr,add:It,addScalar:Jt,atan:Tw,bignumber:Nn,column:Qw,complex:Ll,config:Ee,cos:Vh,diag:Lw,divideScalar:qt,dot:Vl,equal:gn,flatten:ms,im:Uh,inv:la,larger:Jr,matrix:Be,matrixFromColumns:Wh,multiply:kt,multiplyScalar:Yt,number:Fi,qr:Zh,re:jh,sin:qh,smaller:Kr,sqrt:Mn,subtract:Pt,typed:se,usolve:Kh,usolveAll:Gw}),dU=I7({BigNumber:Me,Unit:Qe,config:Ee}),pU=mw({add:It,divide:Zr,typed:se}),mU=e9({BigNumber:Me,Unit:Qe,config:Ee}),vU=b7({BigNumber:Me,Unit:Qe,config:Ee}),gU=U7({BigNumber:Me,Unit:Qe,config:Ee}),yU=FF({Index:mr,concat:Ul,setIntersect:ox,setSymDifference:ix,size:yr,subset:$r,typed:se}),Qh=vw({add:It,apply:Hh,divide:Zr,isNaN:ds,multiply:kt,subtract:Pt,typed:se}),bU=P7({BigNumber:Me,Unit:Qe,config:Ee}),lx=wP({DenseMatrix:at,lsolve:Uw,lup:ax,matrix:Be,slu:Hw,typed:se,usolve:Kh}),cx=PR({add:It,compare:po,divide:Zr,partitionSelect:Yh,typed:se}),wU=ZR({divide:Zr,dotDivide:jl,isNumeric:ua,log:Jh,map:fo,matrix:Be,multiply:kt,sum:Vw,typed:se}),xU=IR({abs:Fr,map:fo,median:cx,subtract:Pt,typed:se}),CU=gw({map:fo,sqrt:Mn,typed:se,variance:Qh}),SU=Z7({BigNumber:Me,Unit:Qe,config:Ee}),ed=$F({abs:Fr,add:It,conj:lo,ctranspose:Gh,eigs:ux,equalScalar:pt,larger:Jr,matrix:Be,multiply:kt,pow:ni,smaller:Kr,sqrt:Mn,typed:se}),fx=I3({BigNumber:Me,DenseMatrix:at,SparseMatrix:ri,addScalar:Jt,config:Ee,cos:Vh,matrix:Be,multiplyScalar:Yt,norm:ed,sin:qh,typed:se,unaryMinus:Fn}),EU=c9({BigNumber:Me,Unit:Qe,config:Ee}),hx=yR({identity:Pi,matrix:Be,multiply:kt,norm:ed,qr:Zh,subtract:Pt,typed:se}),_U=P3({multiply:kt,rotationMatrix:fx,typed:se}),dx=vR({abs:Fr,add:It,concat:Ul,identity:Pi,index:ex,lusolve:lx,matrix:Be,matrixFromColumns:Wh,multiply:kt,range:Ja,schur:hx,subset:$r,subtract:Pt,transpose:ps,typed:se}),DU=wR({matrix:Be,multiply:kt,sylvester:dx,transpose:ps,typed:se}),mo={},vo={},px={},br=YF({mathWithTransform:vo}),go=w5({Node:br}),ii=C5({Node:br}),ca=E5({Node:br}),mx=N5({Node:br}),yo=ZF({Node:br}),vx=i5({Node:br,ResultSet:Aw}),gx=o5({Node:br}),Bi=p5({Node:br}),yx=D5({Node:br}),AU=Xk({classes:px}),td=NP({math:mo,typed:se}),bx=v5({Node:br,typed:se}),NU=Q6({Chain:td,typed:se}),bo=KF({Node:br,subset:$r}),wx=r5({matrix:Be,Node:br,subset:$r}),wo=y5({Node:br,size:yr}),Ii=M5({Unit:Qe,Node:br,math:mo}),Ri=P5({Node:br,SymbolNode:Ii,math:mo}),Qr=I5({AccessorNode:bo,ArrayNode:yo,AssignmentNode:wx,BlockNode:vx,ConditionalNode:gx,ConstantNode:Bi,FunctionAssignmentNode:bx,FunctionNode:Ri,IndexNode:wo,ObjectNode:go,OperatorNode:ii,ParenthesisNode:ca,RangeNode:yx,RelationalNode:mx,SymbolNode:Ii,config:Ee,numeric:cn,typed:se}),xx=zk({ConstantNode:Bi,FunctionNode:Ri,OperatorNode:ii,ParenthesisNode:ca,parse:Qr,typed:se}),rd=Ik({bignumber:Nn,fraction:ho,AccessorNode:bo,ArrayNode:yo,ConstantNode:Bi,FunctionNode:Ri,IndexNode:wo,ObjectNode:go,OperatorNode:ii,SymbolNode:Ii,config:Ee,mathWithTransform:vo,matrix:Be,parse:Qr,typed:se}),TU=k5({parse:Qr,typed:se}),Cx=_P({parse:Qr}),OU=Ak({parse:Qr,typed:se}),nd=kk({AccessorNode:bo,ArrayNode:yo,ConstantNode:Bi,FunctionNode:Ri,IndexNode:wo,ObjectNode:go,OperatorNode:ii,ParenthesisNode:ca,SymbolNode:Ii,add:It,divide:Zr,equal:gn,isZero:vn,multiply:kt,parse:Qr,pow:ni,subtract:Pt,typed:se}),id=L5({parse:Qr,typed:se}),MU=J6({Help:Cx,mathWithTransform:vo,typed:se}),Sx=j5({evaluate:id}),Wl=Fk({bignumber:Nn,fraction:ho,AccessorNode:bo,ArrayNode:yo,ConstantNode:Bi,FunctionNode:Ri,IndexNode:wo,ObjectNode:go,OperatorNode:ii,ParenthesisNode:ca,SymbolNode:Ii,add:It,config:Ee,divide:Zr,equal:gn,isZero:vn,mathWithTransform:vo,matrix:Be,multiply:kt,parse:Qr,pow:ni,resolve:xx,simplifyConstant:rd,simplifyCore:nd,subtract:Pt,typed:se}),FU=jk({OperatorNode:ii,parse:Qr,simplify:Wl,typed:se}),PU=Hk({ConstantNode:Bi,FunctionNode:Ri,OperatorNode:ii,ParenthesisNode:ca,SymbolNode:Ii,config:Ee,equal:gn,isZero:vn,numeric:cn,parse:Qr,simplify:Wl,typed:se}),BU=H5({Parser:Sx,typed:se}),IU=Gk({bignumber:Nn,fraction:ho,AccessorNode:bo,ArrayNode:yo,ConstantNode:Bi,FunctionNode:Ri,IndexNode:wo,ObjectNode:go,OperatorNode:ii,ParenthesisNode:ca,SymbolNode:Ii,add:It,config:Ee,divide:Zr,equal:gn,isZero:vn,mathWithTransform:vo,matrix:Be,multiply:kt,parse:Qr,pow:ni,simplify:Wl,simplifyConstant:rd,simplifyCore:nd,subtract:Pt,typed:se});ur(mo,{e:Qg,false:l$,fineStructure:c$,i:Dw,Infinity:f$,LN10:h$,LOG10E:d$,NaN:p$,null:m$,phi:v$,SQRT1_2:y$,sackurTetrode:b$,tau:Nw,true:w$,E:Qg,version:x$,efimovFactor:C$,LN2:S$,pi:e0,replacer:E$,reviver:AU,SQRT2:_$,typed:se,unaryPlus:zh,PI:e0,weakMixingAngle:D$,abs:Fr,acos:A$,acot:N$,acsc:T$,addScalar:Jt,arg:O$,asech:M$,asinh:F$,atan:Tw,atanh:P$,bignumber:Nn,bitNot:B$,boolean:I$,clone:R$,combinations:$l,complex:Ll,conj:lo,cosh:k$,coth:$$,csc:L$,cube:z$,equalScalar:pt,erf:U$,exp:Ow,expm1:j$,filter:q$,forEach:H$,format:hs,getMatrixDataType:V$,hex:G$,im:Uh,isInteger:Xr,isNegative:co,isPositive:zl,isZero:vn,LOG2E:W$,lgamma:Y$,log10:X$,log2:K$,map:fo,multiplyScalar:Yt,not:Mw,number:Fi,oct:J$,pickRandom:Z$,print:Q$,random:eL,re:jh,sec:tL,sign:Fw,sin:qh,splitUnit:rL,square:nL,string:iL,tan:aL,typeOf:Pw,acosh:oL,acsch:sL,apply:Hh,asec:uL,bin:lL,chain:NU,combinationsWithRep:cL,cos:Vh,csch:fL,isNaN:ds,isPrime:hL,randomInt:dL,sech:pL,sinh:mL,sparse:vL,sqrt:Mn,tanh:gL,unaryMinus:Fn,acoth:yL,cot:bL,fraction:ho,isNumeric:ua,matrix:Be,matrixFromFunction:wL,mod:Bw,nthRoot:xL,numeric:cn,or:CL,prod:Iw,reshape:SL,size:yr,smaller:Kr,squeeze:EL,subset:$r,subtract:Pt,to:_L,transpose:ps,xgcd:Rw,zeros:Pn,and:DL,bitAnd:AL,bitXor:NL,cbrt:kw,compare:po,compareText:$w,concat:Ul,count:TL,ctranspose:Gh,diag:Lw,divideScalar:qt,dotDivide:jl,equal:gn,fft:zw,flatten:ms,gcd:OL,hasNumericValue:ML,hypot:FL,ifft:PL,kron:BL,largerEq:ql,leftShift:IL,lsolve:Uw,matrixFromColumns:Wh,min:RL,mode:kL,nthRoots:$L,ones:LL,partitionSelect:Yh,resize:zL,rightArithShift:UL,round:Hl,smallerEq:Xh,unequal:jL,usolve:Kh,xor:qL,add:It,atan2:HL,bitOr:VL,catalan:GL,compareNatural:Bn,cumsum:WL,deepEqual:jw,diff:YL,dot:Vl,equalText:XL,floor:qw,identity:Pi,invmod:KL,larger:Jr,log:Jh,lsolveAll:JL,matrixFromRows:ZL,multiply:kt,qr:Zh,range:Ja,rightLogShift:QL,setSize:ez,slu:Hw,sum:Vw,trace:tz,usolveAll:Gw,asin:rz,ceil:Ww,composition:nz,cross:iz,det:Yw,distance:az,dotMultiply:oz,fix:Kw,intersect:sz,lcm:uz,log1p:lz,max:Zw,quantileSeq:cz,row:fz,setCartesian:hz,setDistinct:dz,setIsSubset:pz,setPowerset:mz,sort:vz,column:Qw,index:ex,inv:la,pinv:gz,pow:ni,setDifference:tx,setMultiplicity:yz,sqrtm:bz,vacuumImpedance:wz,wienDisplacement:xz,atomicMass:Cz,bohrMagneton:Sz,boltzmann:Ez,conductanceQuantum:_z,createUnit:Dz,deuteronMass:Az,dotPow:Nz,electricConstant:Tz,elementaryCharge:Oz,expm:Mz,faraday:Fz,firstRadiation:Pz,gamma:nx,gravitationConstant:Bz,hartreeEnergy:Iz,klitzing:Rz,loschmidt:kz,magneticConstant:$z,molarMass:Lz,molarPlanckConstant:zz,neutronMass:Uz,nuclearMagneton:jz,planckCharge:qz,planckLength:Hz,planckTemperature:Vz,protonMass:Gz,reducedPlanckConstant:Wz,rydberg:Yz,secondRadiation:Xz,setSymDifference:ix,speedOfLight:Kz,stefanBoltzmann:Jz,thomsonCrossSection:Zz,avogadro:Qz,bohrRadius:eU,coulomb:tU,divide:Zr,electronMass:rU,factorial:Gl,gravity:nU,inverseConductanceQuantum:iU,lup:ax,magneticFluxQuantum:aU,molarMassC12:oU,multinomial:sU,parse:Qr,permutations:uU,planckMass:lU,polynomialRoot:cU,resolve:xx,setIntersect:ox,simplifyConstant:rd,stirlingS2:sx,unit:fU,bellNumbers:hU,compile:TU,eigs:ux,fermiCoupling:dU,leafCount:OU,mean:pU,molarVolume:mU,planckConstant:vU,quantumOfCirculation:gU,setUnion:yU,simplifyCore:nd,variance:Qh,classicalElectronRadius:bU,evaluate:id,help:MU,lusolve:lx,median:cx,simplify:Wl,symbolicEqual:FU,derivative:PU,kldivergence:wU,mad:xU,parser:BU,rationalize:IU,std:CU,gasConstant:SU,norm:ed,rotationMatrix:fx,planckTime:EU,schur:hx,rotate:_U,sylvester:dx,lyap:DU,config:Ee});ur(vo,mo,{filter:x9({typed:se}),forEach:E9({typed:se}),map:O9({typed:se}),apply:m9({isInteger:Xr,typed:se}),diff:Q9({bignumber:Nn,matrix:Be,number:Fi,subtract:Pt,typed:se}),subset:Y9({matrix:Be,typed:se}),concat:J9({isInteger:Xr,matrix:Be,typed:se}),max:P9({config:Ee,larger:Jr,numeric:cn,typed:se}),min:L9({config:Ee,numeric:cn,smaller:Kr,typed:se}),range:j9({bignumber:Nn,matrix:Be,config:Ee,larger:Jr,largerEq:ql,smaller:Kr,smallerEq:Xh,typed:se}),sum:i$({add:It,config:Ee,numeric:cn,typed:se}),cumsum:o$({add:It,typed:se,unaryPlus:zh}),row:V9({Index:mr,matrix:Be,range:Ja,typed:se}),column:y9({Index:mr,matrix:Be,range:Ja,typed:se}),index:A9({Index:mr}),mean:R9({add:It,divide:Zr,typed:se}),variance:u$({add:It,apply:Hh,divide:Zr,isNaN:ds,multiply:kt,subtract:Pt,typed:se}),std:r$({map:fo,sqrt:Mn,typed:se,variance:Qh})});ur(px,{BigNumber:Me,Complex:Rt,Fraction:sa,Matrix:kl,Node:br,ObjectNode:go,OperatorNode:ii,ParenthesisNode:ca,Range:g$,RelationalNode:mx,ResultSet:Aw,ArrayNode:yo,BlockNode:vx,ConditionalNode:gx,ConstantNode:Bi,DenseMatrix:at,RangeNode:yx,Chain:td,FunctionAssignmentNode:bx,SparseMatrix:ri,AccessorNode:bo,AssignmentNode:wx,IndexNode:wo,FibonacciHeap:Xw,ImmutableDenseMatrix:Jw,Index:mr,Spa:rx,Unit:Qe,SymbolNode:Ii,FunctionNode:Ri,Help:Cx,Parser:Sx});td.createProxy(mo);/**
 * @dice-roller/rpg-dice-roller - An advanced JS based dice roller that can roll various types of dice and modifiers, along with mathematical equations.
 * 
 * @version 5.2.1
 * @license MIT
 * @author GreenImp Media <info@greenimp.co.uk> (http://greenimp.co.uk)
 * @link https://dice-roller.github.io/documentation
 */class ad extends TypeError{constructor(t){super(`Operator "${t}" is invalid`),TypeError.captureStackTrace&&TypeError.captureStackTrace(this,ad),this.name="CompareOperatorError",this.operator=t}}class Yl extends Error{constructor(t){super(`Invalid data format: ${t}`),Error.captureStackTrace&&Error.captureStackTrace(this,Yl),this.name="ImportError",this.data=t}}class Xl extends Error{constructor(t,r=null){super(`Die "${t}" must have more than 1 possible value to ${r||"do this action"}`),Error.captureStackTrace&&Error.captureStackTrace(this,Xl),this.name="DieActionValueError",this.action=r,this.die=t}}class Ju extends Error{constructor(t){super(`Notation "${t}" is invalid`),Error.captureStackTrace&&Error.captureStackTrace(this,Ju),this.name="NotationError",this.notation=t}}class Gr extends Error{constructor(t=null){super(`Missing argument${t?` "${t}"`:""}`),Error.captureStackTrace&&Error.captureStackTrace(this,Gr),this.argumentName=t}}const RU=(e,t,r)=>{const a=Number(e),s=Number(t);let f;if(Number.isNaN(a)||Number.isNaN(s))return!1;switch(r){case"=":case"==":f=a===s;break;case"<":f=a<s;break;case">":f=a>s;break;case"<=":f=a<=s;break;case">=":f=a>=s;break;case"!":case"!=":case"<>":f=a!==s;break;default:f=!1;break}return f},Ex=e=>id(e),Gt=e=>typeof e!="number"&&typeof e!="string"?!1:!Number.isNaN(e)&&Number.isFinite(Number(e)),jc=e=>{if(!Gt(e))return!1;const t=Number(e);return t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER},kU=e=>Array.isArray(e)?e.reduce((t,r)=>t+(Gt(r)?parseFloat(`${r}`):0),0):0,$U=(e,t=0)=>parseFloat(parseFloat(`${e}`).toFixed(t||0)),Qt=9007199254740992,Eo=Qt-1,Zu=-1>>>0,en=Zu+1,Xn=en/2,qc=Xn-1,vs=1<<21,Zi=vs-1;function od(e){return e.next()|0}function ci(e,t){return t===0?e:r=>e(r)+t}function Yf(e){const t=e.next()|0,r=e.next()>>>0;return(t&Zi)*en+r+(t&vs?-Qt:0)}function _x(e){for(;;){const t=e.next()|0;if(t&4194304){if((t&8388607)===4194304&&(e.next()|0)===0)return Qt}else{const r=e.next()>>>0;return(t&Zi)*en+r+(t&vs?-Qt:0)}}}function Dx(e){return e.next()>>>0}function Kl(e){const t=e.next()&Zi,r=e.next()>>>0;return t*en+r}function sd(e){for(;;){const t=e.next()|0;if(t&vs){if((t&Zi)===0&&(e.next()|0)===0)return Qt}else{const r=e.next()>>>0;return(t&Zi)*en+r}}}function Ax(e){return(e+1&e)===0}function LU(e){return t=>t.next()&e}function zU(e){const t=e+1,r=t*Math.floor(en/t);return a=>{let s=0;do s=a.next()>>>0;while(s>=r);return s%t}}function UU(e){return Ax(e)?LU(e):zU(e)}function jU(e){return(e|0)===0}function qU(e){return t=>{const r=t.next()&e,a=t.next()>>>0;return r*en+a}}function HU(e){const t=e*Math.floor(Qt/e);return r=>{let a=0;do{const s=r.next()&Zi,f=r.next()>>>0;a=s*en+f}while(a>=t);return a%e}}function VU(e){const t=e+1;if(jU(t)){const r=(t/en|0)-1;if(Ax(r))return qU(r)}return HU(t)}function t0(e,t){return r=>{let a=0;do{const s=r.next()|0,f=r.next()>>>0;a=(s&Zi)*en+f+(s&vs?-Qt:0)}while(a<e||a>t);return a}}function fa(e,t){if(e=Math.floor(e),t=Math.floor(t),e<-Qt||!isFinite(e))throw new RangeError(`Expected min to be at least ${-Qt}`);if(t>Qt||!isFinite(t))throw new RangeError(`Expected max to be at most ${Qt}`);const r=t-e;return r<=0||!isFinite(r)?()=>e:r===Zu?e===0?Dx:ci(od,e+Xn):r<Zu?ci(UU(r),e):r===Eo?ci(Kl,e):r<Eo?ci(VU(r),e):t-1-e===Eo?ci(sd,e):e===-Qt&&t===Qt?_x:e===-Qt&&t===Eo?Yf:e===-Eo&&t===Qt?ci(Yf,1):t===Qt?ci(t0(e-1,t-1),1):t0(e,t)}function GU(e){return(e.next()&1)===1}function Xf(e,t){return r=>e(r)<t}function WU(e){if(e<=0)return()=>!1;if(e>=1)return()=>!0;{const t=e*en;return t%1===0?Xf(od,t-Xn|0):Xf(Kl,Math.round(e*Qt))}}function YU(e,t){return t==null?e==null?GU:WU(e):e<=0?()=>!1:e>=t?()=>!0:Xf(fa(0,t-1),e)}function XU(e,t){const r=fa(+e,+t);return a=>new Date(r(a))}function Nx(e){return fa(1,e)}function KU(e,t){const r=Nx(e);return a=>{const s=[];for(let f=0;f<t;++f)s.push(r(a));return s}}const JU="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-";function ud(e=JU){const t=e.length;if(!t)throw new Error("Expected pool not to be an empty string");const r=fa(0,t-1);return(a,s)=>{let f="";for(let v=0;v<s;++v){const h=r(a);f+=e.charAt(h)}return f}}const Tx="0123456789abcdef",ZU=ud(Tx),QU=ud(Tx.toUpperCase());function ej(e){return e?QU:ZU}function r0(e,t){return e<0?Math.max(e+t,0):Math.min(e,t)}function n0(e){const t=+e;return t<0?Math.ceil(t):Math.floor(t)}function tj(e,t,r,a){const s=t.length;if(s===0)throw new RangeError("Cannot pick from an empty array");const f=r==null?0:r0(n0(r),s),v=a===void 0?s:r0(n0(a),s);if(f>=v)throw new RangeError(`Cannot pick between bounds ${f} and ${v}`);const h=fa(f,v-1);return t[h(e)]}function rj(e,t){return t===1?e:t===0?()=>0:r=>e(r)*t}function Ox(e){return Kl(e)/Qt}function Mx(e){return sd(e)/Qt}function nj(e,t,r=!1){if(isFinite(e)){if(!isFinite(t))throw new RangeError("Expected max to be a finite number")}else throw new RangeError("Expected min to be a finite number");return ci(rj(r?Mx:Ox,t-e),e)}const ij=Array.prototype.slice;function Kf(e,t,r=0){const a=t.length;if(a)for(let s=a-1>>>0;s>r;--s){const v=fa(0,s)(e);if(s!==v){const h=t[s];t[s]=t[v],t[v]=h}}return t}function aj(e,t,r){if(r<0||r>t.length||!isFinite(r))throw new RangeError("Expected sampleSize to be within 0 and the length of the population");if(r===0)return[];const a=ij.call(t),s=a.length;if(s===r)return Kf(e,a,0);const f=s-r;return Kf(e,a,f-1).slice(f)}const oj=(()=>{try{if("x".repeat(3)==="xxx")return(e,t)=>e.repeat(t)}catch{}return(e,t)=>{let r="";for(;t>0;)t&1&&(r+=e),t>>=1,e+=e;return r}})();function Da(e,t){return oj("0",t-e.length)+e}function sj(e){const t=e.next()>>>0,r=e.next()|0,a=e.next()|0,s=e.next()>>>0;return Da(t.toString(16),8)+"-"+Da((r&65535).toString(16),4)+"-"+Da((r>>4&4095|16384).toString(16),4)+"-"+Da((a&16383|32768).toString(16),4)+"-"+Da((a>>4&65535).toString(16),4)+Da(s.toString(16),8)}const $a={next(){return Math.random()*en|0}};class uj{constructor(t=$a){this.engine=t}int32(){return od(this.engine)}uint32(){return Dx(this.engine)}uint53(){return Kl(this.engine)}uint53Full(){return sd(this.engine)}int53(){return Yf(this.engine)}int53Full(){return _x(this.engine)}integer(t,r){return fa(t,r)(this.engine)}realZeroToOneInclusive(){return Mx(this.engine)}realZeroToOneExclusive(){return Ox(this.engine)}real(t,r,a=!1){return nj(t,r,a)(this.engine)}bool(t,r){return YU(t,r)(this.engine)}pick(t,r,a){return tj(this.engine,t,r,a)}shuffle(t){return Kf(this.engine,t)}sample(t,r){return aj(this.engine,t,r)}die(t){return Nx(t)(this.engine)}dice(t,r){return KU(t,r)(this.engine)}uuid4(){return sj(this.engine)}string(t,r){return ud(r)(this.engine,t)}hex(t,r){return ej(r)(this.engine,t)}date(t,r){return XU(t,r)(this.engine)}}const Fx=(()=>{try{const e=new ArrayBuffer(4),t=new Int32Array(e);if(t[0]=Xn,t[0]===-Xn)return Int32Array}catch{}return Array})();let au=null;const Jf=128;let Hc=Jf;const lj={next(){return Hc>=Jf&&(au===null&&(au=new Fx(Jf)),crypto.getRandomValues(au),Hc=0),au[Hc++]|0}};function cj(e=$a,t=16){const r=[];r.push(new Date().getTime()|0);for(let a=1;a<t;++a)r[a]=e.next()|0;return r}const Zf=(()=>{try{if(Math.imul(Zu,5)===-5)return Math.imul}catch{}const e=65535;return(t,r)=>{const a=t>>>16&e,s=t&e,f=r>>>16&e,v=r&e;return s*v+(a*v+s*f<<16>>>0)|0}})(),Cn=624,pi=Cn-1,Qf=397,i0=Cn-Qf,Vc=2567483615;class Ho{constructor(){this.data=new Fx(Cn),this.index=0,this.uses=0}static seed(t){return new Ho().seed(t)}static seedWithArray(t){return new Ho().seedWithArray(t)}static autoSeed(){return Ho.seedWithArray(cj())}next(){(this.index|0)>=Cn&&(Gc(this.data),this.index=0);const t=this.data[this.index];return this.index=this.index+1|0,this.uses+=1,fj(t)|0}getUseCount(){return this.uses}discard(t){if(t<=0)return this;for(this.uses+=t,(this.index|0)>=Cn&&(Gc(this.data),this.index=0);t+this.index>Cn;)t-=Cn-this.index,Gc(this.data),this.index=0;return this.index=this.index+t|0,this}seed(t){let r=0;this.data[0]=r=t|0;for(let a=1;a<Cn;a=a+1|0)this.data[a]=r=Zf(r^r>>>30,1812433253)+a|0;return this.index=Cn,this.uses=0,this}seedWithArray(t){return this.seed(19650218),hj(this.data,t),this}}function Gc(e){let t=0,r=0;for(;(t|0)<i0;t=t+1|0)r=e[t]&Xn|e[t+1|0]&qc,e[t]=e[t+Qf|0]^r>>>1^(r&1?Vc:0);for(;(t|0)<pi;t=t+1|0)r=e[t]&Xn|e[t+1|0]&qc,e[t]=e[t-i0|0]^r>>>1^(r&1?Vc:0);r=e[pi]&Xn|e[0]&qc,e[pi]=e[Qf-1]^r>>>1^(r&1?Vc:0)}function fj(e){return e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,e^e>>>18}function hj(e,t){let r=1,a=0;const s=t.length;let f=Math.max(s,Cn)|0,v=e[0]|0;for(;(f|0)>0;--f)e[r]=v=(e[r]^Zf(v^v>>>30,1664525))+(t[a]|0)+(a|0)|0,r=r+1|0,++a,(r|0)>pi&&(e[0]=e[pi],r=1),a>=s&&(a=0);for(f=pi;(f|0)>0;--f)e[r]=v=(e[r]^Zf(v^v>>>30,1566083941))-r|0,r=r+1|0,(r|0)>pi&&(e[0]=e[pi],r=1);e[0]=Xn}let a0=null;const eh=128;let Wc=eh;const dj={next(){return Wc>=eh&&(a0=new Int32Array(new Int8Array(require("crypto").randomBytes(4*eh)).buffer),Wc=0),a0[Wc++]|0}},_o=Symbol("engine"),Yc=Symbol("random"),pj={range:[],next(){return this.range[1]-this.range[0]}},mj={next(){return 0}},o0={browserCrypto:lj,nodeCrypto:dj,MersenneTwister19937:Ho,nativeMath:$a,min:mj,max:pj};class vj{constructor(t=$a){this.engine=t||$a}get engine(){return this[_o]}set engine(t){if(t&&typeof t.next!="function")throw new TypeError("engine must have function `next()`");this[_o]=t||$a,this[Yc]=new uj(this[_o])}integer(t,r){return this[_o].range=[t,r],this[Yc].integer(t,r)}real(t,r,a=!1){return this[_o].range=[t,r],this[Yc].real(t,r,a)}}const La=new vj,s0=Symbol("operator"),u0=Symbol("value");class ts{constructor(t,r){if(t){if(!r&&r!==0)throw new Gr("value")}else throw new Gr("operator");this.operator=t,this.value=r}static isValidOperator(t){return typeof t=="string"&&/^(?:[<>!]?=|[<>]|<>)$/.test(t)}set operator(t){if(!this.constructor.isValidOperator(t))throw new ad(t);this[s0]=t}get operator(){return this[s0]}set value(t){if(!Gt(t))throw new TypeError("value must be a finite number");this[u0]=Number(t)}get value(){return this[u0]}isMatch(t){return RU(t,this.value,this.operator)}toJSON(){const{operator:t,value:r}=this;return{operator:t,type:"compare-point",value:r}}toString(){return`${this.operator}${this.value}`}}class ki{constructor(){this.order=999}get name(){return"modifier"}get notation(){return""}get maxIterations(){return 1e3}run(t,r){return t}toJSON(){const{notation:t,name:r}=this;return{name:r,notation:t,type:"modifier"}}toString(){return this.notation}}const l0=Symbol("compare-point");class gs extends ki{constructor(t){super(),t&&(this.comparePoint=t)}get comparePoint(){return this[l0]}set comparePoint(t){if(!(t instanceof ts))throw new TypeError("comparePoint must be instance of ComparePoint");this[l0]=t}get name(){return"comparison"}get notation(){return`${this.comparePoint||""}`}isComparePoint(t){return this.comparePoint?this.comparePoint.isMatch(t):!1}toJSON(){const{comparePoint:t}=this;return Object.assign(super.toJSON(),{comparePoint:t})}}const c0=Symbol("compound"),f0=Symbol("penetrate");class Px extends gs{constructor(t=null,r=!1,a=!1){super(t),this[c0]=!!r,this[f0]=!!a,this.order=3}get compound(){return this[c0]}get name(){return"explode"}get notation(){return`!${this.compound?"!":""}${this.penetrate?"p":""}${super.notation}`}get penetrate(){return this[f0]}run(t,r){if(r.min===r.max)throw new Xl(r,"explode");const a=t;return a.rolls=t.rolls.map(s=>{const f=[s];let v=s.value;for(let h=0;h<this.maxIterations&&this.isComparePoint(v);h++){const n=f[f.length-1],u=r.rollOnce();v=u.value,n.modifiers.add("explode"),this.penetrate&&(n.modifiers.add("penetrate"),u.value-=1),f.push(u)}return this.compound&&f.length>1?(s.value=kU(f.map(h=>h.value)),s.modifiers=["explode","compound"],this.penetrate&&s.modifiers.add("penetrate"),s):f}).flat(),a}toJSON(){const{compound:t,penetrate:r}=this;return Object.assign(super.toJSON(),{compound:t,penetrate:r})}}const h0=Symbol("text"),d0=Symbol("type");class xn{static types={MULTILINE:"multiline",INLINE:"inline"};constructor(t,r=this.constructor.types.INLINE){this.text=t,this.type=r}get text(){return this[h0]}set text(t){if(typeof t=="object")throw new TypeError("Description text is invalid");if(!t&&t!==0||`${t}`.trim()==="")throw new TypeError("Description text cannot be empty");this[h0]=`${t}`.trim()}get type(){return this[d0]}set type(t){const r=Object.values(this.constructor.types);if(typeof t!="string")throw new TypeError("Description type must be a string");if(!r.includes(t))throw new RangeError(`Description type must be one of; ${r.join(", ")}`);this[d0]=t}toJSON(){const{text:t,type:r}=this;return{text:t,type:r}}toString(){return this.type===this.constructor.types.INLINE?`# ${this.text}`:`[${this.text}]`}}const ou=Symbol("description");class Bx{constructor(t=null){this.description=t}get description(){return this[ou]||null}set description(t){if(!t&&t!==0)this[ou]=null;else if(t instanceof xn)this[ou]=t;else if(typeof t=="string")this[ou]=new xn(t);else throw new TypeError(`description must be of type Description, string or null. Received ${typeof t}`)}toJSON(){const{description:t}=this;return{description:t}}toString(){return this.description?`${this.description}`:""}}const gj={compound:"!",explode:"!","critical-failure":"__","critical-success":"**",drop:"d",max:"v",min:"^",penetrate:"p","re-roll":"r","re-roll-once":"ro","target-failure":"_","target-success":"*"},Ix=(...e)=>[...e].reduce((t,r)=>{let a;return r instanceof ki?a=r.name:a=r,t+(gj[a]||a)},""),Xc=Symbol("calculation-value"),Kc=Symbol("modifiers"),Do=Symbol("initial-value"),p0=Symbol("use-in-total"),Jc=Symbol("value");class Qu{constructor(t,r=[],a=!0){if(Gt(t))this[Do]=Number(t),this.modifiers=r||[],this.useInTotal=a;else if(t&&typeof t=="object"&&!Array.isArray(t)){const s=Gt(t.initialValue)?t.initialValue:t.value;if(!Gt(s))throw new TypeError(`Result value is invalid: ${s}`);this[Do]=Number(s),Gt(t.value)&&Number(t.value)!==this[Do]&&(this.value=t.value),Gt(t.calculationValue)&&parseFloat(`${t.calculationValue}`)!==this.value&&(this.calculationValue=t.calculationValue),this.modifiers=t.modifiers||r||[],this.useInTotal=typeof t.useInTotal=="boolean"?t.useInTotal:a||!1}else throw t===1/0?new RangeError("Result value must be a finite number"):new TypeError(`Result value is invalid: ${t}`)}get calculationValue(){return Gt(this[Xc])?parseFloat(this[Xc]):this.value}set calculationValue(t){const r=Gt(t);if(t===1/0)throw new RangeError("Result calculation value must be a finite number");if(t&&!r)throw new TypeError(`Result calculation value is invalid: ${t}`);this[Xc]=r?parseFloat(`${t}`):null}get initialValue(){return this[Do]}get modifierFlags(){return Ix(...this.modifiers)}get modifiers(){return this[Kc]}set modifiers(t){if((Array.isArray(t)||t instanceof Set)&&[...t].every(r=>typeof r=="string")){this[Kc]=new Set([...t]);return}if(!t&&t!==0){this[Kc]=new Set;return}throw new TypeError(`modifiers must be a Set or array of modifier names: ${t}`)}get useInTotal(){return!!this[p0]}set useInTotal(t){this[p0]=!!t}get value(){return Gt(this[Jc])?this[Jc]:this[Do]}set value(t){if(t===1/0)throw new RangeError("Result value must be a finite number");if(!Gt(t))throw new TypeError(`Result value is invalid: ${t}`);this[Jc]=Number(t)}toJSON(){const{calculationValue:t,initialValue:r,modifierFlags:a,modifiers:s,useInTotal:f,value:v}=this;return{calculationValue:t,initialValue:r,modifierFlags:a,modifiers:[...s],type:"result",useInTotal:f,value:v}}toString(){return this.value+this.modifierFlags}}const Zc=Symbol("rolls");class Vn{constructor(t=[]){this.rolls=t}get length(){return this.rolls.length||0}get rolls(){return[...this[Zc]]}set rolls(t){if(!t||!Array.isArray(t))throw new TypeError(`rolls must be an array: ${t}`);this[Zc]=[],t.forEach(r=>{this.addRoll(r)})}get value(){return this.rolls.reduce((t,r)=>t+(r.useInTotal?r.calculationValue:0),0)}addRoll(t){const r=t instanceof Qu?t:new Qu(t);this[Zc].push(r)}toJSON(){const{rolls:t,value:r}=this;return{rolls:t,type:"roll-results",value:r}}toString(){return`[${this.rolls.join(", ")}]`}}const m0=Symbol("once");class Rx extends gs{constructor(t=!1,r=null){super(r),this.once=!!t,this.order=4}get name(){return"re-roll"}get notation(){return`r${this.once?"o":""}${super.notation}`}get once(){return!!this[m0]}set once(t){this[m0]=!!t}run(t,r){if(r.min===r.max)throw new Xl(r,"re-roll");return t.rolls.map(a=>{for(let s=0;s<this.maxIterations&&this.isComparePoint(a.value);s++){const f=r.rollOnce();if(a.value=f.value,a.modifiers.add(`re-roll${this.once?"-once":""}`),this.once)break}return a}),t}toJSON(){const{once:t}=this;return Object.assign(super.toJSON(),{once:t})}}const su=Symbol("modifiers"),v0=Symbol("qty"),g0=Symbol("sides"),y0=Symbol("min-value"),b0=Symbol("max-value");class Za extends Bx{constructor(t,r=1,a=null,s=1,f=null,v=null){if(super(v),!t&&t!==0)throw new Gr("sides");if(t===1/0)throw new RangeError("numerical sides must be finite number");if(Gt(t)){if(t<1||!jc(t))throw new RangeError("numerical sides must be a positive finite number")}else if(typeof t!="string")throw new TypeError("non-numerical sides must be a string");if(Gt(r)){if(r<1||r>999)throw new RangeError("qty must be between 1 and 999")}else throw new TypeError("qty must be a positive finite integer");let h=s;if(h==null)h=1;else if(Gt(h)){if(!jc(h))throw new RangeError("min must a finite number")}else throw new TypeError("min must a finite number");if(f&&!Gt(f))throw new TypeError("max must a finite number");if(f&&!jc(f))throw new RangeError("max must a finite number");this[v0]=parseInt(`${r}`,10),this[g0]=t,a&&(this.modifiers=a),this[y0]=parseInt(h,10),this[b0]=f?parseInt(`${f}`,10):t}get average(){return(this.min+this.max)/2}get modifiers(){return this[su]?new Map([...this[su]].sort((t,r)=>t[1].order-r[1].order)):null}set modifiers(t){let r;if(t instanceof Map)r=t;else if(Array.isArray(t))r=new Map(t.map(a=>[a.name,a]));else if(typeof t=="object")r=new Map(Object.entries(t));else throw new TypeError("modifiers should be a Map, array, or an Object containing Modifiers");if(r.size&&[...r.entries()].some(a=>!(a[1]instanceof ki)))throw new TypeError("modifiers must only contain Modifier instances");this[su]=r,this[su].forEach(a=>{a instanceof Px&&!a.comparePoint?a.comparePoint=new ts("=",this.max):a instanceof Rx&&!a.comparePoint&&(a.comparePoint=new ts("=",this.min))})}get max(){return this[b0]}get min(){return this[y0]}get name(){return"standard"}get notation(){let t=`${this.qty}d${this.sides}`;return this.modifiers&&this.modifiers.size&&(t+=[...this.modifiers.values()].reduce((r,a)=>r+a.notation,"")),t}get qty(){return this[v0]}get sides(){return this[g0]}roll(){const t=new Vn;for(let r=0;r<this.qty;r++)t.addRoll(this.rollOnce());return(this.modifiers||[]).forEach(r=>{r.run(t,this)}),t}rollOnce(){return new Qu(La.integer(this.min,this.max))}toJSON(){const{average:t,max:r,min:a,modifiers:s,name:f,notation:v,qty:h,sides:n}=this;return Object.assign(super.toJSON(),{average:t,max:r,min:a,modifiers:s,name:f,notation:v,qty:h,sides:n,type:"die"})}toString(){return`${this.notation}${this.description?` ${this.description}`:""}`}}class yj extends Za{constructor(t=2,r=1,a=null,s=null){let f=t;if(!f&&f!==0)f=2;else if(f!==1&&f!==2)throw new RangeError("nonBlanks must be 1 or 2");super(f,r,a,-1,1,s)}get name(){return"fudge"}get nonBlanks(){return super.sides}get sides(){return`F.${this.nonBlanks}`}rollOnce(){let t=0;if(this.nonBlanks===2)t=La.integer(1,3)-2;else if(this.nonBlanks===1){const r=La.integer(1,6);r===1?t=-1:r===6&&(t=1)}return new Qu(t)}}class bj extends Za{constructor(t=1,r=null,a=!1,s=null){super(100,t,r,null,null,s),this.sidesAsNumber=!!a}get name(){return"percentile"}get sides(){return this.sidesAsNumber?super.sides:"%"}}class wj extends gs{constructor(t){super(t),this.order=9}get name(){return"critical-failure"}get notation(){return`cf${super.notation}`}run(t,r){return t.rolls.forEach(a=>(this.isComparePoint(a.value)&&a.modifiers.add("critical-failure"),a)),t}}class xj extends gs{constructor(t){super(t),this.order=8}get name(){return"critical-success"}get notation(){return`cs${super.notation}`}run(t,r){return t.rolls.forEach(a=>(this.isComparePoint(a.value)&&a.modifiers.add("critical-success"),a)),t}}const Qc=Symbol("calculation-value"),w0=Symbol("is-roll-group"),ef=Symbol("modifiers"),tf=Symbol("results"),x0=Symbol("use-in-total");class lr{constructor(t=[],r=[],a=!1,s=!0){this.isRollGroup=a,this.modifiers=r,this.results=t,this.useInTotal=s}get calculationValue(){return Gt(this[Qc])?parseFloat(this[Qc]):this.value}set calculationValue(t){const r=Gt(t);if(t===1/0)throw new RangeError("Results calculation value must be a finite number");if(t&&!r)throw new TypeError(`Results calculation value is invalid: ${t}`);this[Qc]=r?parseFloat(`${t}`):null}get isRollGroup(){return this[w0]}set isRollGroup(t){this[w0]=!!t}get length(){return this.results.length||0}get modifierFlags(){return Ix(...this.modifiers)}get modifiers(){return this[ef]}set modifiers(t){if((Array.isArray(t)||t instanceof Set)&&[...t].every(r=>typeof r=="string"))this[ef]=new Set([...t]);else if(!t&&t!==0)this[ef]=new Set;else throw new TypeError(`modifiers must be a Set or array of modifier names: ${t}`)}get results(){return[...this[tf]]}set results(t){if(!t||!Array.isArray(t))throw new TypeError(`results must be an array: ${t}`);this[tf]=[],t.forEach(r=>{this.addResult(r)})}get useInTotal(){return!!this[x0]}set useInTotal(t){this[x0]=!!t}get value(){if(!this.results.length)return 0;const t=this.results.reduce((r,a)=>{let s=a;return a instanceof lr?s=a.useInTotal?a.calculationValue:0:a instanceof Vn&&(s=a.value),r+s},typeof this.results[0]=="string"?"":0);return typeof t=="string"?Ex(t):t}addResult(t){let r;if(t instanceof lr||t instanceof Vn)r=t;else if(typeof t=="string"||Gt(t))r=t;else throw new TypeError("value must be one of ResultGroup, RollResults, string, or number");this[tf].push(r)}toJSON(){const{calculationValue:t,isRollGroup:r,modifierFlags:a,modifiers:s,results:f,useInTotal:v,value:h}=this;return{calculationValue:t,isRollGroup:r,modifierFlags:a,modifiers:[...s],results:f,type:"result-group",useInTotal:v,value:h}}toString(){let t;return this.isRollGroup?t=`{${this.results.join(", ")}}`:t=this.results.join(""),this.modifierFlags&&(t=`(${t})${this.modifierFlags}`),t}}const C0=Symbol("end"),S0=Symbol("qty");class kx extends ki{constructor(t="h",r=1){super(),this.end=t,this.qty=r,this.order=5}get end(){return this[C0]}set end(t){if(t!=="h"&&t!=="l")throw new RangeError('End must be "h" or "l"');this[C0]=t}get name(){return`keep-${this.end}`}get notation(){return`k${this.end}${this.qty}`}get qty(){return this[S0]}set qty(t){if(t===1/0)throw new RangeError("qty must be a finite number");if(!Gt(t)||t<1)throw new TypeError("qty must be a positive finite integer");this[S0]=Math.floor(t)}rangeToDrop(t){return this.end==="h"?[0,t.length-this.qty]:[this.qty,t.length]}run(t,r){let a,s;return t instanceof lr?(a=t.results,a.length===1&&a[0]instanceof lr?s=a[0].results.map((f,v)=>f instanceof Vn?f.rolls.map((h,n)=>({value:h.value,index:[v,n]})):null).flat().filter(Boolean):s=[...a].map((f,v)=>({value:f.value,index:v}))):(a=t.rolls,s=[...a].map((f,v)=>({value:f.value,index:v}))),s=s.sort((f,v)=>f.value-v.value).map(f=>f.index).slice(...this.rangeToDrop(s)),s.forEach(f=>{let v;Array.isArray(f)?v=a[0].results[f[0]].rolls[f[1]]:v=a[f],v.modifiers.add("drop"),v.useInTotal=!1}),t}toJSON(){const{end:t,qty:r}=this;return Object.assign(super.toJSON(),{end:t,qty:r})}}class Cj extends kx{constructor(t="l",r=1){super(t,r),this.order=6}get name(){return`drop-${this.end}`}get notation(){return`d${this.end}${this.qty}`}rangeToDrop(t){return this.end==="h"?[t.length-this.qty,t.length]:[0,this.qty]}}const E0=Symbol("max");class Sj extends ki{constructor(t){super(),this.max=t,this.order=2}get max(){return this[E0]}set max(t){if(!Gt(t))throw new TypeError("max must be a number");this[E0]=parseFloat(`${t}`)}get name(){return"max"}get notation(){return`max${this.max}`}run(t,r){const a=t;return a.rolls=t.rolls.map(s=>{const f=s;return s.value>this.max&&(f.value=this.max,f.modifiers.add("max")),f}),a}toJSON(){const{max:t}=this;return Object.assign(super.toJSON(),{max:t})}}const _0=Symbol("min");class Ej extends ki{constructor(t){super(),this.min=t,this.order=1}get min(){return this[_0]}set min(t){if(!Gt(t))throw new TypeError("min must be a number");this[_0]=parseFloat(`${t}`)}get name(){return"min"}get notation(){return`min${this.min}`}run(t,r){const a=t;return a.rolls=t.rolls.map(s=>{const f=s;return s.value<this.min&&(f.value=this.min,f.modifiers.add("min")),f}),a}toJSON(){const{min:t}=this;return Object.assign(super.toJSON(),{min:t})}}const D0=Symbol("direction");class _j extends ki{constructor(t="a"){super(),this.direction=t,this.order=10}get direction(){return this[D0]}set direction(t){if(t!=="a"&&t!=="d")throw new RangeError('Direction must be "a" (Ascending) or "d" (Descending)');this[D0]=t}get name(){return"sorting"}get notation(){return`s${this.direction}`}run(t,r){let a;return t instanceof lr?a="results":a="rolls",t[a]=t[a].sort((s,f)=>this.direction==="d"?f.value-s.value:s.value-f.value),t instanceof lr&&(t[a]=t[a].map(s=>s instanceof lr||s instanceof Vn?this.run(s,r):s)),t}toJSON(){const{direction:t}=this;return Object.assign(super.toJSON(),{direction:t})}}const A0=Symbol("failure-cp");class Dj extends gs{constructor(t,r=null){super(t),this.failureComparePoint=r,this.order=7}get failureComparePoint(){return this[A0]}set failureComparePoint(t){if(t&&!(t instanceof ts))throw new TypeError("failure comparePoint must be instance of ComparePoint or null");this[A0]=t||null}get name(){return"target"}get notation(){return`${super.notation}${this.failureComparePoint?`f${this.failureComparePoint}`:""}`}get successComparePoint(){return this.comparePoint}set successComparePoint(t){super.comparePoint=t}getStateValue(t){return this.isSuccess(t)?1:this.isFailure(t)?-1:0}isFailure(t){return this.failureComparePoint?this.failureComparePoint.isMatch(t):!1}isNeutral(t){return!this.isSuccess(t)&&!this.isFailure(t)}isSuccess(t){return this.isComparePoint(t)}run(t,r){let a;return t instanceof lr?a=t.results:a=t.rolls,a.forEach(s=>{this.isSuccess(s.value)?s.modifiers.add("target-success"):this.isFailure(s.value)&&s.modifiers.add("target-failure"),s.calculationValue=this.getStateValue(s.value)}),t}toJSON(){const{failureComparePoint:t,successComparePoint:r}=this,a=super.toJSON();return delete a.comparePoint,Object.assign(a,{failureComparePoint:t,successComparePoint:r})}}const $x=e=>{try{return!!(e&&btoa(atob(e))===e)}catch{return!1}},Lx=e=>{try{const t=e?JSON.parse(e):!1;return!!(t&&typeof t=="object")}catch{return!1}},rf=Symbol("expressions"),nf=Symbol("modifiers");class zx extends Bx{constructor(t=[],r=[],a=null){super(a),this.expressions=t,this.modifiers=r}get expressions(){return[...this[rf]||[]]}set expressions(t){if(!t)throw new Gr("expressions");if(!Array.isArray(t))throw new TypeError(`expressions must be an array: ${t}`);this[rf]=[],t.forEach(r=>{if(!r||!Array.isArray(r))throw new TypeError(`Expressions must be an array of arrays: ${t}`);if(r.length===0)throw new TypeError(`Sub expressions cannot be empty: ${t}`);if(!r.every(a=>a instanceof Za||typeof a=="string"||typeof a=="number"))throw new TypeError("Sub expression items must be Dice, numbers, or strings");this[rf].push(r)})}get modifiers(){return this[nf]?new Map([...this[nf]].sort((t,r)=>t[1].order-r[1].order)):null}set modifiers(t){let r;if(t instanceof Map)r=t;else if(Array.isArray(t))r=new Map(t.map(a=>[a.name,a]));else if(typeof t=="object")r=new Map(Object.entries(t));else throw new TypeError("modifiers should be a Map, array, or an Object containing Modifiers");if(r.size&&[...r.entries()].some(a=>!(a[1]instanceof ki)))throw new TypeError("modifiers must only contain Modifier instances");this[nf]=r}get notation(){let t=this.expressions.map(r=>r.reduce((a,s)=>a+s,"")).join(", ");return t=`{${t}}`,this.modifiers&&this.modifiers.size&&(t+=[...this.modifiers.values()].reduce((r,a)=>r+a.notation,"")),t}roll(){const t=new lr(this.expressions.map(r=>{const a=r.map(s=>s instanceof Za?s.roll():s);return new lr(a)}));return t.isRollGroup=!0,(this.modifiers||[]).forEach(r=>{r.run(t,this)}),t}toJSON(){const{modifiers:t,notation:r,expressions:a}=this;return Object.assign(super.toJSON(),{expressions:a,modifiers:t,notation:r,type:"group"})}toString(){return`${this.notation}${this.description?` ${this.description}`:""}`}}function Aj(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function Qa(e,t,r,a){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,Qa.prototype),s.expected=t,s.found=r,s.location=a,s.name="SyntaxError",s}Aj(Qa,Error);function af(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,r+=r.repeat(t),e+r.slice(0,t))}Qa.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r=null,a;for(a=0;a<e.length;a++)if(e[a].source===this.location.source){r=e[a].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,f=this.location.source+":"+s.line+":"+s.column;if(r){var v=this.location.end,h=af("",s.line.toString().length," "),n=r[s.line-1],u=s.line===v.line?v.column:n.length+1,o=u-s.column||1;t+=`
 --> `+f+`
`+h+` |
`+s.line+" | "+n+`
`+h+" | "+af("",s.column-1," ")+af("",o,"^")}else t+=`
 at `+f}return t};Qa.buildMessage=function(e,t){var r={literal:function(u){return'"'+s(u.text)+'"'},class:function(u){var o=u.parts.map(function(i){return Array.isArray(i)?f(i[0])+"-"+f(i[1]):f(i)});return"["+(u.inverted?"^":"")+o.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function a(u){return u.charCodeAt(0).toString(16).toUpperCase()}function s(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(o){return"\\x0"+a(o)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(o){return"\\x"+a(o)})}function f(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(o){return"\\x0"+a(o)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(o){return"\\x"+a(o)})}function v(u){return r[u.type](u)}function h(u){var o=u.map(v),i,l;if(o.sort(),o.length>0){for(i=1,l=1;i<o.length;i++)o[i-1]!==o[i]&&(o[l]=o[i],l++);o.length=l}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}function n(u){return u?'"'+s(u)+'"':"end of input"}return"Expected "+h(e)+" but "+n(t)+" found."};function Nj(e,t){t=t!==void 0?t:{};var r={},a=t.grammarSource,s={Main:Nd},f=Nd,v="{",h=",",n="}",u="d",o="d%",i="dF",l=".",c="!",d="p",p="k",m="max",g="min",b="r",y="o",w="cs",x="cf",C="s",S="a",E="f",A="!=",D="<=",M=">=",B="=",O="<>",F=">",z="<",N="(",T=")",q="abs",_="ceil",I="cos",U="exp",j="floor",L="log",P="round",k="sign",V="sin",Q="sqrt",ne="tan",re="pow",ie="-",de="**",ve="*",ce="^",ae="%",G="/",X="+",te="/*",W="*/",ee="[",he="]",pe="//",ue="#",Y=/^[12]/,K=/^[lh]/,fe=/^[.]/,me=/^[1-9]/,be=/^[0-9]/,Se=/^[^\]]/,xe=/^[\n\r\u2028\u2029]/,Ce=/^[ \t\n\r]/,_e=Xe("{",!1),ke=Xe(",",!1),Ye=Xe("}",!1),Fe=Xe("d",!1),wt=Xe("d%",!1),et=Xe("dF",!1),Ct=Xe(".",!1),R=oi(["1","2"],!1,!1),oe=Xe("!",!1),ye=Xe("p",!1),Ne=oi(["l","h"],!1,!1),He=Xe("k",!1),We=Xe("max",!1),Vt=Xe("min",!1),rr=Xe("r",!1),In=Xe("o",!1),pa=Xe("cs",!1),Li=Xe("cf",!1),ac=Xe("s",!1),oc=Xe("a",!1),sc=Xe("f",!1),uc=Xe("!=",!1),lc=Xe("<=",!1),cc=Xe(">=",!1),fc=Xe("=",!1),hc=Xe("<>",!1),dc=Xe(">",!1),zi=Xe("<",!1),ma=Xe("(",!1),va=Xe(")",!1),pc=Xe("abs",!1),mc=Xe("ceil",!1),vc=Xe("cos",!1),gc=Xe("exp",!1),yc=Xe("floor",!1),bc=Xe("log",!1),wc=Xe("round",!1),xc=Xe("sign",!1),Cc=Xe("sin",!1),Sc=Xe("sqrt",!1),Ec=Xe("tan",!1),_c=Xe("pow",!1),_s=Xe("-",!1),Dc=oi(["."],!1,!1),Ac=oi([["1","9"]],!1,!1),yn=oi([["0","9"]],!1,!1),wr=Xe("**",!1),Zt=Xe("*",!1),Ds=Xe("^",!1),Nc=Xe("%",!1),ga=Xe("/",!1),ya=Xe("+",!1),As=Oc("comment"),Ns=Xe("/*",!1),bn=Xe("*/",!1),Ts=MC(),Y2=Xe("[",!1),_d=oi(["]"],!0,!1),X2=Xe("]",!1),K2=Xe("//",!1),J2=Xe("#",!1),Z2=oi([`
`,"\r","\u2028","\u2029"],!1,!1),Q2=Oc("whitespace"),eC=oi([" ","	",`
`,"\r"],!1,!1),tC=Oc("whitespace or comment"),rC=function(H,le,ge,we){return new zx([H,...le.map(Oe=>Oe[3])],Object.assign({},...ge.map(Oe=>({[Oe.name]:Oe}))),we.find(Oe=>Oe instanceof xn))},nC=function(H,le,ge){return H.modifiers=Object.assign({},...le.map(we=>({[we.name]:we}))),H.description=ge.find(we=>we instanceof xn),H},iC=function(H,le){return new Za(le,H||1)},aC=function(H){return new bj(H||1)},oC=function(H,le){return new yj(le?parseInt(le[1],10):2,H||1)},sC=function(H,le,ge){return new Px(ge,!!H,!!le)},uC=function(H,le){return new Dj(H,le)},lC=function(H,le){return new Cj(H||"l",le)},cC=function(H,le){return new kx(H||"h",le)},fC=function(H){return new Sj(H)},hC=function(H){return new Ej(H)},dC=function(H,le){return new Rx(!!H,le)},pC=function(H){return new xj(H)},mC=function(H){return new wj(H)},vC=function(H){return new _j(H||"a")},gC=function(H){return H},yC=function(H,le){return new ts(H,le)},bC=function(H,le,ge){return Ex(Fs())},wC=function(H,le){return H=Array.isArray(H)?H:[H],[...H,...le.map(([,ge,,we])=>[ge,we]).flat(2)]},xC=function(H,le,ge){return[H,...le,ge]},CC=function(H,le){return[`${H}(`,...le,")"]},SC=function(H,le,ge){return[`${H}(`,...le,",",...ge,")"]},EC=function(){return parseFloat(Fs())},_C=function(){return parseInt(Fs(),10)},DC=function(){return parseInt(Fs(),10)},AC=function(){return"^"},NC=function(H){return new xn(H.flat().join(""),xn.types.MULTILINE)},TC=function(H){return new xn(H.flat().join(""),xn.types.MULTILINE)},OC=function(H){return new xn(H.flat().join(""),xn.types.INLINE)},J=0,St=0,Os=[{line:1,column:1}],wn=0,Tc=[],Te=0,Ms;if("startRule"in t){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');f=s[t.startRule]}function Fs(){return e.substring(St,J)}function Xe(H,le){return{type:"literal",text:H,ignoreCase:le}}function oi(H,le,ge){return{type:"class",parts:H,inverted:le,ignoreCase:ge}}function MC(){return{type:"any"}}function FC(){return{type:"end"}}function Oc(H){return{type:"other",description:H}}function Dd(H){var le=Os[H],ge;if(le)return le;for(ge=H-1;!Os[ge];)ge--;for(le=Os[ge],le={line:le.line,column:le.column};ge<H;)e.charCodeAt(ge)===10?(le.line++,le.column=1):le.column++,ge++;return Os[H]=le,le}function Ad(H,le){var ge=Dd(H),we=Dd(le);return{source:a,start:{offset:H,line:ge.line,column:ge.column},end:{offset:le,line:we.line,column:we.column}}}function Pe(H){J<wn||(J>wn&&(wn=J,Tc=[]),Tc.push(H))}function PC(H,le,ge){return new Qa(Qa.buildMessage(H,le),H,le,ge)}function Nd(){var H;return H=si(),H}function BC(){var H,le,ge,we,Oe,$e,Dt,zt,rn;if(H=J,e.charCodeAt(J)===123?(le=v,J++):(le=r,Te===0&&Pe(_e)),le!==r)if(Lt(),ge=si(),ge!==r){for(we=[],Oe=J,$e=Lt(),e.charCodeAt(J)===44?(Dt=h,J++):(Dt=r,Te===0&&Pe(ke)),Dt!==r?(zt=Lt(),rn=si(),rn!==r?($e=[$e,Dt,zt,rn],Oe=$e):(J=Oe,Oe=r)):(J=Oe,Oe=r);Oe!==r;)we.push(Oe),Oe=J,$e=Lt(),e.charCodeAt(J)===44?(Dt=h,J++):(Dt=r,Te===0&&Pe(ke)),Dt!==r?(zt=Lt(),rn=si(),rn!==r?($e=[$e,Dt,zt,rn],Oe=$e):(J=Oe,Oe=r)):(J=Oe,Oe=r);if(Oe=Lt(),e.charCodeAt(J)===125?($e=n,J++):($e=r,Te===0&&Pe(Ye)),$e!==r){for(Dt=[],zt=Ps();zt!==r;)Dt.push(zt),zt=Ps();zt=Fd(),St=H,H=rC(ge,we,Dt,zt)}else J=H,H=r}else J=H,H=r;else J=H,H=r;return H}function IC(){var H,le,ge,we;if(H=J,le=RC(),le===r&&(le=kC(),le===r&&(le=$C())),le!==r){for(ge=[],we=Ps();we!==r;)ge.push(we),we=Ps();we=Fd(),St=H,H=nC(le,ge,we)}else J=H,H=r;return H}function RC(){var H,le,ge,we;return H=J,le=Bs(),le===r&&(le=null),e.charCodeAt(J)===100?(ge=u,J++):(ge=r,Te===0&&Pe(Fe)),ge!==r?(we=Bs(),we!==r?(St=H,H=iC(le,we)):(J=H,H=r)):(J=H,H=r),H}function kC(){var H,le,ge;return H=J,le=Bs(),le===r&&(le=null),e.substr(J,2)===o?(ge=o,J+=2):(ge=r,Te===0&&Pe(wt)),ge!==r?(St=H,H=aC(le)):(J=H,H=r),H}function $C(){var H,le,ge,we,Oe,$e;return H=J,le=Bs(),le===r&&(le=null),e.substr(J,2)===i?(ge=i,J+=2):(ge=r,Te===0&&Pe(et)),ge!==r?(we=J,e.charCodeAt(J)===46?(Oe=l,J++):(Oe=r,Te===0&&Pe(Ct)),Oe!==r?(Y.test(e.charAt(J))?($e=e.charAt(J),J++):($e=r,Te===0&&Pe(R)),$e!==r?(Oe=[Oe,$e],we=Oe):(J=we,we=r)):(J=we,we=r),we===r&&(we=null),St=H,H=oC(le,we)):(J=H,H=r),H}function Ps(){var H;return H=LC(),H===r&&(H=zC(),H===r&&(H=UC(),H===r&&(H=jC(),H===r&&(H=VC(),H===r&&(H=GC(),H===r&&(H=WC(),H===r&&(H=YC(),H===r&&(H=qC(),H===r&&(H=HC()))))))))),H}function LC(){var H,le,ge,we,Oe;return H=J,e.charCodeAt(J)===33?(le=c,J++):(le=r,Te===0&&Pe(oe)),le!==r?(e.charCodeAt(J)===33?(ge=c,J++):(ge=r,Te===0&&Pe(oe)),ge===r&&(ge=null),e.charCodeAt(J)===112?(we=d,J++):(we=r,Te===0&&Pe(ye)),we===r&&(we=null),Oe=ba(),Oe===r&&(Oe=null),St=H,H=sC(ge,we,Oe)):(J=H,H=r),H}function zC(){var H,le,ge;return H=J,le=ba(),le!==r?(ge=XC(),ge===r&&(ge=null),St=H,H=uC(le,ge)):(J=H,H=r),H}function UC(){var H,le,ge,we;return H=J,e.charCodeAt(J)===100?(le=u,J++):(le=r,Te===0&&Pe(Fe)),le!==r?(K.test(e.charAt(J))?(ge=e.charAt(J),J++):(ge=r,Te===0&&Pe(Ne)),ge===r&&(ge=null),we=Fc(),we!==r?(St=H,H=lC(ge,we)):(J=H,H=r)):(J=H,H=r),H}function jC(){var H,le,ge,we;return H=J,e.charCodeAt(J)===107?(le=p,J++):(le=r,Te===0&&Pe(He)),le!==r?(K.test(e.charAt(J))?(ge=e.charAt(J),J++):(ge=r,Te===0&&Pe(Ne)),ge===r&&(ge=null),we=Fc(),we!==r?(St=H,H=cC(ge,we)):(J=H,H=r)):(J=H,H=r),H}function qC(){var H,le,ge;return H=J,e.substr(J,3)===m?(le=m,J+=3):(le=r,Te===0&&Pe(We)),le!==r?(ge=Ui(),ge!==r?(St=H,H=fC(ge)):(J=H,H=r)):(J=H,H=r),H}function HC(){var H,le,ge;return H=J,e.substr(J,3)===g?(le=g,J+=3):(le=r,Te===0&&Pe(Vt)),le!==r?(ge=Ui(),ge!==r?(St=H,H=hC(ge)):(J=H,H=r)):(J=H,H=r),H}function VC(){var H,le,ge,we;return H=J,e.charCodeAt(J)===114?(le=b,J++):(le=r,Te===0&&Pe(rr)),le!==r?(e.charCodeAt(J)===111?(ge=y,J++):(ge=r,Te===0&&Pe(In)),ge===r&&(ge=null),we=ba(),we===r&&(we=null),St=H,H=dC(ge,we)):(J=H,H=r),H}function GC(){var H,le,ge;return H=J,e.substr(J,2)===w?(le=w,J+=2):(le=r,Te===0&&Pe(pa)),le!==r?(ge=ba(),ge!==r?(St=H,H=pC(ge)):(J=H,H=r)):(J=H,H=r),H}function WC(){var H,le,ge;return H=J,e.substr(J,2)===x?(le=x,J+=2):(le=r,Te===0&&Pe(Li)),le!==r?(ge=ba(),ge!==r?(St=H,H=mC(ge)):(J=H,H=r)):(J=H,H=r),H}function YC(){var H,le,ge;return H=J,e.charCodeAt(J)===115?(le=C,J++):(le=r,Te===0&&Pe(ac)),le!==r?(e.charCodeAt(J)===97?(ge=S,J++):(ge=r,Te===0&&Pe(oc)),ge===r&&(e.charCodeAt(J)===100?(ge=u,J++):(ge=r,Te===0&&Pe(Fe))),ge===r&&(ge=null),St=H,H=vC(ge)):(J=H,H=r),H}function XC(){var H,le,ge;return H=J,e.charCodeAt(J)===102?(le=E,J++):(le=r,Te===0&&Pe(sc)),le!==r?(ge=ba(),ge!==r?(St=H,H=gC(ge)):(J=H,H=r)):(J=H,H=r),H}function ba(){var H,le,ge;return H=J,le=KC(),le!==r?(ge=Ui(),ge!==r?(St=H,H=yC(le,ge)):(J=H,H=r)):(J=H,H=r),H}function KC(){var H;return e.substr(J,2)===A?(H=A,J+=2):(H=r,Te===0&&Pe(uc)),H===r&&(e.substr(J,2)===D?(H=D,J+=2):(H=r,Te===0&&Pe(lc)),H===r&&(e.substr(J,2)===M?(H=M,J+=2):(H=r,Te===0&&Pe(cc)),H===r&&(e.charCodeAt(J)===61?(H=B,J++):(H=r,Te===0&&Pe(fc)),H===r&&(e.substr(J,2)===O?(H=O,J+=2):(H=r,Te===0&&Pe(hc)),H===r&&(e.charCodeAt(J)===62?(H=F,J++):(H=r,Te===0&&Pe(dc)),H===r&&(e.charCodeAt(J)===60?(H=z,J++):(H=r,Te===0&&Pe(zi)))))))),H}function Bs(){var H,le,ge,we,Oe,$e,Dt,zt,rn,wa;if(H=Fc(),H===r)if(H=J,e.charCodeAt(J)===40?(le=N,J++):(le=r,Te===0&&Pe(ma)),le!==r){if(Lt(),ge=J,we=Ui(),we!==r){if(Oe=[],$e=J,Dt=Lt(),zt=Is(),zt!==r?(rn=Lt(),wa=Ui(),wa!==r?(Dt=[Dt,zt,rn,wa],$e=Dt):(J=$e,$e=r)):(J=$e,$e=r),$e!==r)for(;$e!==r;)Oe.push($e),$e=J,Dt=Lt(),zt=Is(),zt!==r?(rn=Lt(),wa=Ui(),wa!==r?(Dt=[Dt,zt,rn,wa],$e=Dt):(J=$e,$e=r)):(J=$e,$e=r);else Oe=r;Oe!==r?(we=[we,Oe],ge=we):(J=ge,ge=r)}else J=ge,ge=r;ge!==r?(we=Lt(),e.charCodeAt(J)===41?(Oe=T,J++):(Oe=r,Te===0&&Pe(va)),Oe!==r?(St=H,H=bC()):(J=H,H=r)):(J=H,H=r)}else J=H,H=r;return H}function si(){var H,le,ge,we,Oe,$e,Dt,zt;if(H=J,le=Mc(),le!==r){for(ge=[],we=J,Oe=Lt(),$e=Is(),$e!==r?(Dt=Lt(),zt=Mc(),zt!==r?(Oe=[Oe,$e,Dt,zt],we=Oe):(J=we,we=r)):(J=we,we=r);we!==r;)ge.push(we),we=J,Oe=Lt(),$e=Is(),$e!==r?(Dt=Lt(),zt=Mc(),zt!==r?(Oe=[Oe,$e,Dt,zt],we=Oe):(J=we,we=r)):(J=we,we=r);St=H,H=wC(le,ge)}else J=H,H=r;return H}function Mc(){var H,le,ge,we;return H=JC(),H===r&&(H=IC(),H===r&&(H=Ui(),H===r&&(H=J,e.charCodeAt(J)===40?(le=N,J++):(le=r,Te===0&&Pe(ma)),le!==r?(Lt(),ge=si(),ge!==r?(Lt(),e.charCodeAt(J)===41?(we=T,J++):(we=r,Te===0&&Pe(va)),we!==r?(St=H,H=xC(le,ge,we)):(J=H,H=r)):(J=H,H=r)):(J=H,H=r),H===r&&(H=BC())))),H}function JC(){var H,le,ge,we,Oe,$e,Dt;return H=J,e.substr(J,3)===q?(le=q,J+=3):(le=r,Te===0&&Pe(pc)),le===r&&(e.substr(J,4)===_?(le=_,J+=4):(le=r,Te===0&&Pe(mc)),le===r&&(e.substr(J,3)===I?(le=I,J+=3):(le=r,Te===0&&Pe(vc)),le===r&&(e.substr(J,3)===U?(le=U,J+=3):(le=r,Te===0&&Pe(gc)),le===r&&(e.substr(J,5)===j?(le=j,J+=5):(le=r,Te===0&&Pe(yc)),le===r&&(e.substr(J,3)===L?(le=L,J+=3):(le=r,Te===0&&Pe(bc)),le===r&&(e.substr(J,5)===P?(le=P,J+=5):(le=r,Te===0&&Pe(wc)),le===r&&(e.substr(J,4)===k?(le=k,J+=4):(le=r,Te===0&&Pe(xc)),le===r&&(e.substr(J,3)===V?(le=V,J+=3):(le=r,Te===0&&Pe(Cc)),le===r&&(e.substr(J,4)===Q?(le=Q,J+=4):(le=r,Te===0&&Pe(Sc)),le===r&&(e.substr(J,3)===ne?(le=ne,J+=3):(le=r,Te===0&&Pe(Ec)))))))))))),le!==r?(e.charCodeAt(J)===40?(ge=N,J++):(ge=r,Te===0&&Pe(ma)),ge!==r?(Lt(),we=si(),we!==r?(Lt(),e.charCodeAt(J)===41?(Oe=T,J++):(Oe=r,Te===0&&Pe(va)),Oe!==r?(St=H,H=CC(le,we)):(J=H,H=r)):(J=H,H=r)):(J=H,H=r)):(J=H,H=r),H===r&&(H=J,e.substr(J,3)===re?(le=re,J+=3):(le=r,Te===0&&Pe(_c)),le===r&&(e.substr(J,3)===m?(le=m,J+=3):(le=r,Te===0&&Pe(We)),le===r&&(e.substr(J,3)===g?(le=g,J+=3):(le=r,Te===0&&Pe(Vt)))),le!==r?(e.charCodeAt(J)===40?(ge=N,J++):(ge=r,Te===0&&Pe(ma)),ge!==r?(Lt(),we=si(),we!==r?(Lt(),e.charCodeAt(J)===44?(Oe=h,J++):(Oe=r,Te===0&&Pe(ke)),Oe!==r?(Lt(),$e=si(),$e!==r?(Lt(),e.charCodeAt(J)===41?(Dt=T,J++):(Dt=r,Te===0&&Pe(va)),Dt!==r?(St=H,H=SC(le,we,$e)):(J=H,H=r)):(J=H,H=r)):(J=H,H=r)):(J=H,H=r)):(J=H,H=r)):(J=H,H=r)),H}function Ui(){var H,le,ge,we,Oe;return H=J,e.charCodeAt(J)===45?J++:Te===0&&Pe(_s),le=Td(),le!==r?(ge=J,fe.test(e.charAt(J))?(we=e.charAt(J),J++):(we=r,Te===0&&Pe(Dc)),we!==r?(Oe=Td(),Oe!==r?(we=[we,Oe],ge=we):(J=ge,ge=r)):(J=ge,ge=r),ge===r&&(ge=null),St=H,H=EC()):(J=H,H=r),H}function Fc(){var H,le,ge,we;if(H=J,me.test(e.charAt(J))?(le=e.charAt(J),J++):(le=r,Te===0&&Pe(Ac)),le!==r){for(ge=[],be.test(e.charAt(J))?(we=e.charAt(J),J++):(we=r,Te===0&&Pe(yn));we!==r;)ge.push(we),be.test(e.charAt(J))?(we=e.charAt(J),J++):(we=r,Te===0&&Pe(yn));St=H,H=_C()}else J=H,H=r;return H}function Td(){var H,le,ge;if(H=J,le=[],be.test(e.charAt(J))?(ge=e.charAt(J),J++):(ge=r,Te===0&&Pe(yn)),ge!==r)for(;ge!==r;)le.push(ge),be.test(e.charAt(J))?(ge=e.charAt(J),J++):(ge=r,Te===0&&Pe(yn));else le=r;return le!==r&&(St=H,le=DC()),H=le,H}function Is(){var H,le;return H=J,e.substr(J,2)===de?(le=de,J+=2):(le=r,Te===0&&Pe(wr)),le!==r&&(St=H,le=AC()),H=le,H===r&&(e.charCodeAt(J)===42?(H=ve,J++):(H=r,Te===0&&Pe(Zt)),H===r&&(e.charCodeAt(J)===94?(H=ce,J++):(H=r,Te===0&&Pe(Ds)),H===r&&(e.charCodeAt(J)===37?(H=ae,J++):(H=r,Te===0&&Pe(Nc)),H===r&&(e.charCodeAt(J)===47?(H=G,J++):(H=r,Te===0&&Pe(ga)),H===r&&(e.charCodeAt(J)===43?(H=X,J++):(H=r,Te===0&&Pe(ya)),H===r&&(e.charCodeAt(J)===45?(H=ie,J++):(H=r,Te===0&&Pe(_s)))))))),H}function Od(){var H;return Te++,H=ZC(),H===r&&(H=QC()),Te--,H===r&&Te===0&&Pe(As),H}function ZC(){var H,le,ge,we,Oe,$e;if(H=J,e.substr(J,2)===te?(le=te,J+=2):(le=r,Te===0&&Pe(Ns)),le!==r){for(ge=[],we=J,Oe=J,Te++,e.substr(J,2)===W?($e=W,J+=2):($e=r,Te===0&&Pe(bn)),Te--,$e===r?Oe=void 0:(J=Oe,Oe=r),Oe!==r?(e.length>J?($e=e.charAt(J),J++):($e=r,Te===0&&Pe(Ts)),$e!==r?(Oe=[Oe,$e],we=Oe):(J=we,we=r)):(J=we,we=r);we!==r;)ge.push(we),we=J,Oe=J,Te++,e.substr(J,2)===W?($e=W,J+=2):($e=r,Te===0&&Pe(bn)),Te--,$e===r?Oe=void 0:(J=Oe,Oe=r),Oe!==r?(e.length>J?($e=e.charAt(J),J++):($e=r,Te===0&&Pe(Ts)),$e!==r?(Oe=[Oe,$e],we=Oe):(J=we,we=r)):(J=we,we=r);e.substr(J,2)===W?(we=W,J+=2):(we=r,Te===0&&Pe(bn)),we!==r?(St=H,H=NC(ge)):(J=H,H=r)}else J=H,H=r;if(H===r)if(H=J,e.charCodeAt(J)===91?(le=ee,J++):(le=r,Te===0&&Pe(Y2)),le!==r){for(ge=[],Se.test(e.charAt(J))?(we=e.charAt(J),J++):(we=r,Te===0&&Pe(_d));we!==r;)ge.push(we),Se.test(e.charAt(J))?(we=e.charAt(J),J++):(we=r,Te===0&&Pe(_d));e.charCodeAt(J)===93?(we=he,J++):(we=r,Te===0&&Pe(X2)),we!==r?(St=H,H=TC(ge)):(J=H,H=r)}else J=H,H=r;return H}function QC(){var H,le,ge,we,Oe,$e;if(H=J,e.substr(J,2)===pe?(le=pe,J+=2):(le=r,Te===0&&Pe(K2)),le===r&&(e.charCodeAt(J)===35?(le=ue,J++):(le=r,Te===0&&Pe(J2))),le!==r){for(ge=[],we=J,Oe=J,Te++,$e=Md(),Te--,$e===r?Oe=void 0:(J=Oe,Oe=r),Oe!==r?(e.length>J?($e=e.charAt(J),J++):($e=r,Te===0&&Pe(Ts)),$e!==r?(Oe=[Oe,$e],we=Oe):(J=we,we=r)):(J=we,we=r);we!==r;)ge.push(we),we=J,Oe=J,Te++,$e=Md(),Te--,$e===r?Oe=void 0:(J=Oe,Oe=r),Oe!==r?(e.length>J?($e=e.charAt(J),J++):($e=r,Te===0&&Pe(Ts)),$e!==r?(Oe=[Oe,$e],we=Oe):(J=we,we=r)):(J=we,we=r);St=H,H=OC(ge)}else J=H,H=r;return H}function Md(){var H;return xe.test(e.charAt(J))?(H=e.charAt(J),J++):(H=r,Te===0&&Pe(Z2)),H}function Rs(){var H;return Te++,Ce.test(e.charAt(J))?(H=e.charAt(J),J++):(H=r,Te===0&&Pe(eC)),Te--,H===r&&Te===0&&Pe(Q2),H}function Lt(){var H,le;for(H=[],le=Rs();le!==r;)H.push(le),le=Rs();return H}function Fd(){var H,le;for(Te++,H=[],le=Rs(),le===r&&(le=Od());le!==r;)H.push(le),le=Rs(),le===r&&(le=Od());return Te--,le=r,Te===0&&Pe(tC),H}if(Ms=f(),Ms!==r&&J===e.length)return Ms;throw Ms!==r&&J<e.length&&Pe(FC()),PC(Tc,wn<e.length?e.charAt(wn):null,wn<e.length?Ad(wn,wn+1):Ad(wn,wn))}class N0{static parse(t){if(!t)throw new Gr("notation");if(typeof t!="string")throw new TypeError("Notation must be a string");return Nj(t)}}const qr=Object.freeze({BASE_64:1,JSON:0,OBJECT:2}),of=Symbol("notation"),sf=Symbol("maxTotal"),uf=Symbol("minTotal"),Aa=Symbol("expressions"),uu=Symbol("roll-method"),ui=Symbol("rolls"),T0=Symbol("set-rolls"),lu=Symbol("total"),lf=e=>$U(e.calculationValue,2);class za{constructor(t){if(!t)throw new Gr("notation");if(this[Aa]=[],t instanceof Object&&!Array.isArray(t)){if(t.notation){if(typeof t.notation!="string")throw new Ju(t.notation);t.rolls&&this[T0](t.rolls)}else throw new Gr("notation");this[of]=t.notation,this[Aa]=N0.parse(this.notation),this.hasRolls()||this.roll()}else if(typeof t=="string")this[of]=t,this[Aa]=N0.parse(this.notation),this.roll();else throw new Ju(t)}get averageTotal(){return(this.maxTotal+this.minTotal)/2}get maxTotal(){if(!this.hasExpressions())return 0;if(!this[sf]){const t=this[uu](o0.max);this[sf]=lf(t)}return this[sf]}get minTotal(){if(!this.hasExpressions())return 0;if(!this[uf]){const t=this[uu](o0.min);this[uf]=lf(t)}return this[uf]}get notation(){return this[of]}get output(){let t=`${this.notation}: `;return this.hasRolls()?t+=`${this[ui]} = ${this.total}`:t+="No dice rolled",t}get rolls(){return this[ui]?this[ui].results:[]}get total(){return!this[lu]&&this.hasRolls()&&(this[lu]=lf(this[ui])),this[lu]||0}export(t=qr.JSON){switch(t){case qr.BASE_64:return btoa(this.export(qr.JSON));case qr.JSON:return JSON.stringify(this);case qr.OBJECT:return JSON.parse(this.export(qr.JSON));default:throw new TypeError(`Invalid export format "${t}"`)}}hasExpressions(){return this[Aa]&&this[Aa].length>0}hasRolls(){return this.hasExpressions()&&this.rolls.length>0}roll(){return this[lu]=0,this[ui]=this[uu](),this.rolls}toJSON(){const{averageTotal:t,maxTotal:r,minTotal:a,notation:s,output:f,rolls:v,total:h}=this;return{averageTotal:t,maxTotal:r,minTotal:a,notation:s,output:f,rolls:v,total:h,type:"dice-roll"}}toString(){return this.output}static import(t){if(t){if(Lx(t))return za.import(JSON.parse(t));if($x(t))return za.import(atob(t));if(typeof t=="object")return new za(t);throw new Yl(t)}else throw new Gr("data")}[uu](t){let r;t&&(r=La.engine,La.engine=t);const a=new lr(this[Aa].map(s=>s instanceof Za||s instanceof zx?s.roll():s).filter(s=>!!s||s===0));return t&&(La.engine=r),a}[T0](t){if(t instanceof lr)this[ui]=t;else if(t instanceof Vn)this[ui]=new lr([t]);else if(Array.isArray(t))this[ui]=new lr(t.map(r=>{if(r instanceof lr||r instanceof Vn)return r;if(Array.isArray(r))return new Vn(r);if(typeof r=="object"){if(Array.isArray(r.results))return new lr(r.results,r.modifiers||[],r.isRollGroup||!1,typeof r.useInTotal=="boolean"?r.useInTotal:!0);if(Array.isArray(r.rolls))return new Vn(r.rolls)}return r}));else throw new TypeError("Rolls must be a valid result object, or an array")}}const Ao=Symbol("log");class ld{constructor(t){this[Ao]=[],t&&this.import(t)}get log(){return this[Ao]||[]}get output(){return this.log.join("; ")}get total(){return this.log.reduce((t,r)=>t+r.total,0)}clearLog(){this[Ao].length=0}export(t=qr.JSON){switch(t){case qr.BASE_64:return btoa(this.export(qr.JSON));case qr.JSON:return JSON.stringify(this);case qr.OBJECT:return JSON.parse(this.export(qr.JSON));default:throw new TypeError(`Invalid export format "${t}"`)}}import(t){if(t){if(Lx(t))return this.import(JSON.parse(t));if($x(t))return this.import(atob(t));if(typeof t=="object"){let r=t.log||null;if(!t.log&&Array.isArray(t)&&t.length&&(r=t),r&&Array.isArray(r))r.forEach(a=>{this[Ao].push(za.import(a))});else if(r)throw new TypeError("log must be an array");return this.log}else throw new Yl(t)}else throw new Gr("data")}roll(...t){const r=t.filter(Boolean);if(r.length===0)throw new Gr("notations");const a=r.map(s=>{const f=new za(s);return this[Ao].push(f),f});return a.length>1?a:a[0]}toJSON(){const{log:t,output:r,total:a}=this;return{log:t,output:r,total:a,type:"dice-roller"}}toString(){return this.output}static import(t){const r=new ld;return r.import(t),r}}/*!
  * LZ String v1.0.3 (https://github.com/Eonasdan/lz-string#readme)
  * Copyright 2022-2022 Jonathan Peterson
  * Licensed under MIT (https://github.com/Eonasdan/lz-string/blob/master/LICENSE)
  */const Ux="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",cu={};function Tj(e,t){if(!cu[e]){cu[e]={};for(let r=0;r<e.length;r++)cu[e][e.charAt(r)]=r}return cu[e][t]}function Oj(e){if(!e)return e;const t=jx(e,6,r=>Ux.charAt(r));switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}}function Mj(e){return e&&qx(e.length,32,t=>Tj(Ux,e.charAt(t)))}function Fj(e){return jx(e,16,String.fromCharCode)}function Pj(e){return e&&qx(e.length,32768,t=>e.charCodeAt(t))}function jx(e,t,r){if(!e)return e;const a=[],s={},f={};let v,h,n,u="",o="",i="",l=2,c=3,d=2,p=0,m=0;const g=()=>{p=p<<1|n&1,m==t-1?(m=0,a.push(r(p)),p=0):m++,n=n>>1},b=()=>{if(Object.prototype.hasOwnProperty.call(f,o)){if(o.charCodeAt(0)<256){for(v=0;v<d;v++)p=p<<1,m==t-1?(m=0,a.push(r(p)),p=0):m++;for(n=o.charCodeAt(0),v=0;v<8;v++)g()}else{for(n=1,v=0;v<d;v++)p=p<<1|n,m==t-1?(m=0,a.push(r(p)),p=0):m++,n=0;for(n=o.charCodeAt(0),v=0;v<16;v++)g()}l--,l==0&&(l=Math.pow(2,d),d++),delete f[o]}else for(n=s[o],v=0;v<d;v++)g()};for(h=0;h<e.length;h+=1)u=e.charAt(h),Object.prototype.hasOwnProperty.call(s,u)||(s[u]=c++,f[u]=!0),i=o+u,Object.prototype.hasOwnProperty.call(s,i)?o=i:(b(),l--,l==0&&(l=Math.pow(2,d),d++),s[i]=c++,o=String(u));for(o!==""&&(b(),l--,l==0&&(l=Math.pow(2,d),d++)),n=2,v=0;v<d;v++)g();for(;;)if(p=p<<1,m==t-1){a.push(r(p));break}else m++;return a.join("")}function qx(e,t,r){let a=[],s=4,f=4,v=3,h="",n=[],u,o,i,l,c,d,p,m={val:r(0),position:t,index:1};for(u=0;u<3;u+=1)a[u]=u;i=0,c=Math.pow(2,2);const g=()=>{for(d=1;d!=c;)l=m.val&m.position,m.position>>=1,m.position==0&&(m.position=t,m.val=r(m.index++)),i|=(l>0?1:0)*d,d<<=1};switch(g(),i){case 0:i=0,c=Math.pow(2,8),g(),p=String.fromCharCode(i);break;case 1:i=0,c=Math.pow(2,16),g(),p=String.fromCharCode(i);break;case 2:return""}for(a[3]=p,o=p,n.push(p);;){if(m.index>e)return"";switch(i=0,c=Math.pow(2,v),g(),p=i){case 0:i=0,c=Math.pow(2,8),g(),a[f++]=String.fromCharCode(i),p=f-1,s--;break;case 1:i=0,c=Math.pow(2,16),g(),a[f++]=String.fromCharCode(i),p=f-1,s--;break;case 2:return n.join("")}if(s==0&&(s=Math.pow(2,v),v++),a[p])h=a[p];else if(p===f&&typeof o=="string")h=o+o.charAt(0);else return null;n.push(h),a[f++]=o+h.charAt(0),s--,o=h,s==0&&(s=Math.pow(2,v),v++)}}const Hx=e=>{const t=new RegExp(`.*(${e}=[a-zA-Z]+).*`,"i"),r=window.location.href.match(t);return r&&r[1]?r[1].replace(`${e}=`,"").trim():""},cd=e=>Fj(JSON.stringify(e)),Vx=e=>Oj(JSON.stringify(e)),ha=e=>{const t=Pj(e);return JSON.parse(t)},Gx=e=>{const t=Mj(e);return JSON.parse(t)},Bj=new ld,rs=e=>Bj.roll(e),O0=e=>{const t=rs(`1d${e.length}`).total;return e[t-1]},No=e=>rs(`1d${e.length}`).total-1,Qi=(e,t)=>{if(!e)return;const r=JSON.stringify(e,null,"	"),a=document.createElement("a");a.download=t,a.href="data:text/json;charset=utf-8,"+encodeURIComponent(r),a.click()},Jl=e=>{const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","application/json"),t.addEventListener("change",function(){if(!this.files||this.files.length===0)return;const r=new FileReader;r.addEventListener("load",a=>{e(JSON.parse(a.target.result))}),r.readAsText(this.files[0])}),t.click()},xu=()=>{var e=new Date;return e.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"})},eo=()=>{var e=new Date;return e.toLocaleTimeString(navigator.language,{day:"2-digit",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).replaceAll(",","_").replaceAll(" ","_")},Uo=(e,t,r)=>{!e||(e.setNotification({msg:t,delay:r}),setTimeout(()=>{e.setNotification({msg:"",delay:0})},r))},to="inod-session2",Zl="inod-notes2",ys="inod-board2",ns="inod-gen-corporation2",xo="inod-players2",is="inod-rolls2",el="inod-draw2",Xi="inod-track2",M0=e=>{localStorage.setItem(to,cd(e)),fd()},Ij=()=>{const e=localStorage.getItem(to);if(e){const t=ha(e);return t.lang||(t.lang="en"),t.color||(t.color="#ffffff"),t.browserID.trim()==""&&(t.browserID=ti(),M0(t)),Ou(t),t}else{const t=b1(!0);return localStorage.setItem(to,cd(t)),Ou(t),M0(t),t}},Ut=(e,t)=>{localStorage.setItem(e,cd(t)),fd()},Rj=()=>{const e=localStorage.getItem(ns);if(!e)return;const t=ha(e);Ko(t)},kj=e=>{const t=localStorage.getItem(is);if(!t)return;const r=ha(t);e.setRollHistory(r)},F0=(e,t)=>{const r=localStorage.getItem(t?ys:Zl);if(!r)return;const a=ha(r);t?e.setBoardData(a):e.setNoteData(a)},$j=e=>{const t=localStorage.getItem(Xi);if(!t)return;const r=ha(t);e.setTrackData(r)},Lj=()=>{const e=localStorage.getItem(el);return e?ha(e):{}},zj=e=>{const t=localStorage.getItem(xo),r=ha(t);e.setCharData(r)},fd=()=>{let e=0;return[to,Zl,ys,ns,xo,is,el,Xi].forEach(r=>{const a=localStorage.getItem(r);e+=a?a.length:0}),wE(e),e};var hd={exports:{}};(function(e,t){(function(a,s){e.exports=s()})(En,function(){var a=function(s){var f="@VERSION@-@BUILDLEVEL@",v=s.localStorage||function(){var O={};return{setItem:function(F,z){O[F]=z},getItem:function(F){return O[F]},removeItem:function(F){delete O[F]}}}(),h={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},n=function(O,F){for(var z in O)if(O.hasOwnProperty(z))if(F.hasOwnProperty(z)){if(typeof O[z]!==F[z])throw new Error(l(o.INVALID_TYPE,[typeof O[z],z]))}else{var N="Unknown property, "+z+". Valid properties are:";for(var T in F)F.hasOwnProperty(T)&&(N=N+" "+T);throw new Error(N)}},u=function(O,F){return function(){return O.apply(F,arguments)}},o={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},i={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},l=function(O,F){var z=O.text;if(F){for(var N,T,q=0;q<F.length;q++)if(N="{"+q+"}",T=z.indexOf(N),T>0){var _=z.substring(0,T),I=z.substring(T+N.length);z=_+F[q]+I}}return z},c=[0,6,77,81,73,115,100,112,3],d=[0,4,77,81,84,84,4],p=function(O,F){this.type=O;for(var z in F)F.hasOwnProperty(z)&&(this[z]=F[z])};p.prototype.encode=function(){var O=(this.type&15)<<4,F=0,z=[],N=0,T;switch(this.messageIdentifier!==void 0&&(F+=2),this.type){case h.CONNECT:switch(this.mqttVersion){case 3:F+=c.length+3;break;case 4:F+=d.length+3;break}F+=x(this.clientId)+2,this.willMessage!==void 0&&(F+=x(this.willMessage.destinationName)+2,T=this.willMessage.payloadBytes,T instanceof Uint8Array||(T=new Uint8Array(_)),F+=T.byteLength+2),this.userName!==void 0&&(F+=x(this.userName)+2),this.password!==void 0&&(F+=x(this.password)+2);break;case h.SUBSCRIBE:O|=2;for(var q=0;q<this.topics.length;q++)z[q]=x(this.topics[q]),F+=z[q]+2;F+=this.requestedQos.length;break;case h.UNSUBSCRIBE:O|=2;for(var q=0;q<this.topics.length;q++)z[q]=x(this.topics[q]),F+=z[q]+2;break;case h.PUBREL:O|=2;break;case h.PUBLISH:this.payloadMessage.duplicate&&(O|=8),O=O|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(O|=1),N=x(this.payloadMessage.destinationName),F+=N+2;var _=this.payloadMessage.payloadBytes;F+=_.byteLength,_ instanceof ArrayBuffer?_=new Uint8Array(_):_ instanceof Uint8Array||(_=new Uint8Array(_.buffer));break}var I=w(F),U=I.length+1,j=new ArrayBuffer(F+U),L=new Uint8Array(j);if(L[0]=O,L.set(I,1),this.type==h.PUBLISH)U=b(this.payloadMessage.destinationName,N,L,U);else if(this.type==h.CONNECT){switch(this.mqttVersion){case 3:L.set(c,U),U+=c.length;break;case 4:L.set(d,U),U+=d.length;break}var P=0;this.cleanSession&&(P=2),this.willMessage!==void 0&&(P|=4,P|=this.willMessage.qos<<3,this.willMessage.retained&&(P|=32)),this.userName!==void 0&&(P|=128),this.password!==void 0&&(P|=64),L[U++]=P,U=g(this.keepAliveInterval,L,U)}switch(this.messageIdentifier!==void 0&&(U=g(this.messageIdentifier,L,U)),this.type){case h.CONNECT:U=b(this.clientId,x(this.clientId),L,U),this.willMessage!==void 0&&(U=b(this.willMessage.destinationName,x(this.willMessage.destinationName),L,U),U=g(T.byteLength,L,U),L.set(T,U),U+=T.byteLength),this.userName!==void 0&&(U=b(this.userName,x(this.userName),L,U)),this.password!==void 0&&(U=b(this.password,x(this.password),L,U));break;case h.PUBLISH:L.set(_,U);break;case h.SUBSCRIBE:for(var q=0;q<this.topics.length;q++)U=b(this.topics[q],z[q],L,U),L[U++]=this.requestedQos[q];break;case h.UNSUBSCRIBE:for(var q=0;q<this.topics.length;q++)U=b(this.topics[q],z[q],L,U);break}return j};function m(O,F){var z=F,N=O[F],T=N>>4,q=N&=15;F+=1;var _,I=0,U=1;do{if(F==O.length)return[null,z];_=O[F++],I+=(_&127)*U,U*=128}while((_&128)!==0);var j=F+I;if(j>O.length)return[null,z];var L=new p(T);switch(T){case h.CONNACK:var P=O[F++];P&1&&(L.sessionPresent=!0),L.returnCode=O[F++];break;case h.PUBLISH:var k=q>>1&3,V=y(O,F);F+=2;var Q=S(O,F,V);F+=V,k>0&&(L.messageIdentifier=y(O,F),F+=2);var ne=new B(O.subarray(F,j));(q&1)==1&&(ne.retained=!0),(q&8)==8&&(ne.duplicate=!0),ne.qos=k,ne.destinationName=Q,L.payloadMessage=ne;break;case h.PUBACK:case h.PUBREC:case h.PUBREL:case h.PUBCOMP:case h.UNSUBACK:L.messageIdentifier=y(O,F);break;case h.SUBACK:L.messageIdentifier=y(O,F),F+=2,L.returnCode=O.subarray(F,j);break}return[L,j]}function g(O,F,z){return F[z++]=O>>8,F[z++]=O%256,z}function b(O,F,z,N){return N=g(F,z,N),C(O,z,N),N+F}function y(O,F){return 256*O[F]+O[F+1]}function w(O){var F=new Array(1),z=0;do{var N=O%128;O=O>>7,O>0&&(N|=128),F[z++]=N}while(O>0&&z<4);return F}function x(O){for(var F=0,z=0;z<O.length;z++){var N=O.charCodeAt(z);N>2047?(55296<=N&&N<=56319&&(z++,F++),F+=3):N>127?F+=2:F++}return F}function C(O,F,z){for(var N=z,T=0;T<O.length;T++){var q=O.charCodeAt(T);if(55296<=q&&q<=56319){var _=O.charCodeAt(++T);if(isNaN(_))throw new Error(l(o.MALFORMED_UNICODE,[q,_]));q=(q-55296<<10)+(_-56320)+65536}q<=127?F[N++]=q:q<=2047?(F[N++]=q>>6&31|192,F[N++]=q&63|128):q<=65535?(F[N++]=q>>12&15|224,F[N++]=q>>6&63|128,F[N++]=q&63|128):(F[N++]=q>>18&7|240,F[N++]=q>>12&63|128,F[N++]=q>>6&63|128,F[N++]=q&63|128)}return F}function S(O,F,z){for(var N="",T,q=F;q<F+z;){var _=O[q++];if(_<128)T=_;else{var I=O[q++]-128;if(I<0)throw new Error(l(o.MALFORMED_UTF,[_.toString(16),I.toString(16),""]));if(_<224)T=64*(_-192)+I;else{var U=O[q++]-128;if(U<0)throw new Error(l(o.MALFORMED_UTF,[_.toString(16),I.toString(16),U.toString(16)]));if(_<240)T=4096*(_-224)+64*I+U;else{var j=O[q++]-128;if(j<0)throw new Error(l(o.MALFORMED_UTF,[_.toString(16),I.toString(16),U.toString(16),j.toString(16)]));if(_<248)T=262144*(_-240)+4096*I+64*U+j;else throw new Error(l(o.MALFORMED_UTF,[_.toString(16),I.toString(16),U.toString(16),j.toString(16)]))}}}T>65535&&(T-=65536,N+=String.fromCharCode(55296+(T>>10)),T=56320+(T&1023)),N+=String.fromCharCode(T)}return N}var E=function(O,F){this._client=O,this._keepAliveInterval=F*1e3,this.isReset=!1;var z=new p(h.PINGREQ).encode(),N=function(q){return function(){return T.apply(q)}},T=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(z),this.timeout=setTimeout(N(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(o.PING_TIMEOUT.code,l(o.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(N(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},A=function(O,F,z,N){F||(F=30);var T=function(q,_,I){return function(){return q.apply(_,I)}};this.timeout=setTimeout(T(z,O,N),F*1e3),this.cancel=function(){clearTimeout(this.timeout)}},D=function(O,F,z,N,T){if(!("WebSocket"in s&&s.WebSocket!==null))throw new Error(l(o.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in s&&s.ArrayBuffer!==null))throw new Error(l(o.UNSUPPORTED,["ArrayBuffer"]));this._trace("Paho.Client",O,F,z,N,T),this.host=F,this.port=z,this.path=N,this.uri=O,this.clientId=T,this._wsuri=null,this._localKey=F+":"+z+(N!="/mqtt"?":"+N:"")+":"+T+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0;for(var q in v)(q.indexOf("Sent:"+this._localKey)===0||q.indexOf("Received:"+this._localKey)===0)&&this.restore(q)};D.prototype.host=null,D.prototype.port=null,D.prototype.path=null,D.prototype.uri=null,D.prototype.clientId=null,D.prototype.socket=null,D.prototype.connected=!1,D.prototype.maxMessageIdentifier=65536,D.prototype.connectOptions=null,D.prototype.hostIndex=null,D.prototype.onConnected=null,D.prototype.onConnectionLost=null,D.prototype.onMessageDelivered=null,D.prototype.onMessageArrived=null,D.prototype.traceFunction=null,D.prototype._msg_queue=null,D.prototype._buffered_msg_queue=null,D.prototype._connectTimeout=null,D.prototype.sendPinger=null,D.prototype.receivePinger=null,D.prototype._reconnectInterval=1,D.prototype._reconnecting=!1,D.prototype._reconnectTimeout=null,D.prototype.disconnectedPublishing=!1,D.prototype.disconnectedBufferSize=5e3,D.prototype.receiveBuffer=null,D.prototype._traceBuffer=null,D.prototype._MAX_TRACE_ENTRIES=100,D.prototype.connect=function(O){var F=this._traceMask(O,"password");if(this._trace("Client.connect",F,this.socket,this.connected),this.connected)throw new Error(l(o.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(l(o.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=O,this._reconnectInterval=1,this._reconnecting=!1,O.uris?(this.hostIndex=0,this._doConnect(O.uris[0])):this._doConnect(this.uri)},D.prototype.subscribe=function(O,F){if(this._trace("Client.subscribe",O,F),!this.connected)throw new Error(l(o.INVALID_STATE,["not connected"]));var z=new p(h.SUBSCRIBE);z.topics=O.constructor===Array?O:[O],F.qos===void 0&&(F.qos=0),z.requestedQos=[];for(var N=0;N<z.topics.length;N++)z.requestedQos[N]=F.qos;F.onSuccess&&(z.onSuccess=function(T){F.onSuccess({invocationContext:F.invocationContext,grantedQos:T})}),F.onFailure&&(z.onFailure=function(T){F.onFailure({invocationContext:F.invocationContext,errorCode:T,errorMessage:l(T)})}),F.timeout&&(z.timeOut=new A(this,F.timeout,F.onFailure,[{invocationContext:F.invocationContext,errorCode:o.SUBSCRIBE_TIMEOUT.code,errorMessage:l(o.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(z),this._schedule_message(z)},D.prototype.unsubscribe=function(O,F){if(this._trace("Client.unsubscribe",O,F),!this.connected)throw new Error(l(o.INVALID_STATE,["not connected"]));var z=new p(h.UNSUBSCRIBE);z.topics=O.constructor===Array?O:[O],F.onSuccess&&(z.callback=function(){F.onSuccess({invocationContext:F.invocationContext})}),F.timeout&&(z.timeOut=new A(this,F.timeout,F.onFailure,[{invocationContext:F.invocationContext,errorCode:o.UNSUBSCRIBE_TIMEOUT.code,errorMessage:l(o.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(z),this._schedule_message(z)},D.prototype.send=function(O){this._trace("Client.send",O);var F=new p(h.PUBLISH);if(F.payloadMessage=O,this.connected)O.qos>0?this._requires_ack(F):this.onMessageDelivered&&(this._notify_msg_sent[F]=this.onMessageDelivered(F.payloadMessage)),this._schedule_message(F);else if(this._reconnecting&&this.disconnectedPublishing){var z=Object.keys(this._sentMessages).length+this._buffered_msg_queue.length;if(z>this.disconnectedBufferSize)throw new Error(l(o.BUFFER_FULL,[this.disconnectedBufferSize]));O.qos>0?this._requires_ack(F):(F.sequence=++this._sequence,this._buffered_msg_queue.unshift(F))}else throw new Error(l(o.INVALID_STATE,["not connected"]))},D.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(l(o.INVALID_STATE,["not connecting or connected"]));var O=new p(h.DISCONNECT);this._notify_msg_sent[O]=u(this._disconnected,this),this._schedule_message(O)},D.prototype.getTraceLog=function(){if(this._traceBuffer!==null){this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length);for(var O in this._sentMessages)this._trace("_sentMessages ",O,this._sentMessages[O]);for(var O in this._receivedMessages)this._trace("_receivedMessages ",O,this._receivedMessages[O]);return this._traceBuffer}},D.prototype.startTrace=function(){this._traceBuffer===null&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,f)},D.prototype.stopTrace=function(){delete this._traceBuffer},D.prototype._doConnect=function(O){if(this.connectOptions.useSSL){var F=O.split(":");F[0]="wss",O=F.join(":")}this._wsuri=O,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(O,["mqttv3.1"]):this.socket=new WebSocket(O,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=u(this._on_socket_open,this),this.socket.onmessage=u(this._on_socket_message,this),this.socket.onerror=u(this._on_socket_error,this),this.socket.onclose=u(this._on_socket_close,this),this.sendPinger=new E(this,this.connectOptions.keepAliveInterval),this.receivePinger=new E(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new A(this,this.connectOptions.timeout,this._disconnected,[o.CONNECT_TIMEOUT.code,l(o.CONNECT_TIMEOUT)])},D.prototype._schedule_message=function(O){this._msg_queue.unshift(O),this.connected&&this._process_queue()},D.prototype.store=function(O,F){var z={type:F.type,messageIdentifier:F.messageIdentifier,version:1};switch(F.type){case h.PUBLISH:F.pubRecReceived&&(z.pubRecReceived=!0),z.payloadMessage={};for(var N="",T=F.payloadMessage.payloadBytes,q=0;q<T.length;q++)T[q]<=15?N=N+"0"+T[q].toString(16):N=N+T[q].toString(16);z.payloadMessage.payloadHex=N,z.payloadMessage.qos=F.payloadMessage.qos,z.payloadMessage.destinationName=F.payloadMessage.destinationName,F.payloadMessage.duplicate&&(z.payloadMessage.duplicate=!0),F.payloadMessage.retained&&(z.payloadMessage.retained=!0),O.indexOf("Sent:")===0&&(F.sequence===void 0&&(F.sequence=++this._sequence),z.sequence=F.sequence);break;default:throw Error(l(o.INVALID_STORED_DATA,[O+this._localKey+F.messageIdentifier,z]))}v.setItem(O+this._localKey+F.messageIdentifier,JSON.stringify(z))},D.prototype.restore=function(O){var F=v.getItem(O),z=JSON.parse(F),N=new p(z.type,z);switch(z.type){case h.PUBLISH:for(var T=z.payloadMessage.payloadHex,q=new ArrayBuffer(T.length/2),_=new Uint8Array(q),I=0;T.length>=2;){var U=parseInt(T.substring(0,2),16);T=T.substring(2,T.length),_[I++]=U}var j=new B(_);j.qos=z.payloadMessage.qos,j.destinationName=z.payloadMessage.destinationName,z.payloadMessage.duplicate&&(j.duplicate=!0),z.payloadMessage.retained&&(j.retained=!0),N.payloadMessage=j;break;default:throw Error(l(o.INVALID_STORED_DATA,[O,F]))}O.indexOf("Sent:"+this._localKey)===0?(N.payloadMessage.duplicate=!0,this._sentMessages[N.messageIdentifier]=N):O.indexOf("Received:"+this._localKey)===0&&(this._receivedMessages[N.messageIdentifier]=N)},D.prototype._process_queue=function(){for(var O=null;O=this._msg_queue.pop();)this._socket_send(O),this._notify_msg_sent[O]&&(this._notify_msg_sent[O](),delete this._notify_msg_sent[O])},D.prototype._requires_ack=function(O){var F=Object.keys(this._sentMessages).length;if(F>this.maxMessageIdentifier)throw Error("Too many messages:"+F);for(;this._sentMessages[this._message_identifier]!==void 0;)this._message_identifier++;O.messageIdentifier=this._message_identifier,this._sentMessages[O.messageIdentifier]=O,O.type===h.PUBLISH&&this.store("Sent:",O),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},D.prototype._on_socket_open=function(){var O=new p(h.CONNECT,this.connectOptions);O.clientId=this.clientId,this._socket_send(O)},D.prototype._on_socket_message=function(O){this._trace("Client._on_socket_message",O.data);for(var F=this._deframeMessages(O.data),z=0;z<F.length;z+=1)this._handleMessage(F[z])},D.prototype._deframeMessages=function(O){var F=new Uint8Array(O),z=[];if(this.receiveBuffer){var N=new Uint8Array(this.receiveBuffer.length+F.length);N.set(this.receiveBuffer),N.set(F,this.receiveBuffer.length),F=N,delete this.receiveBuffer}try{for(var T=0;T<F.length;){var q=m(F,T),_=q[0];if(T=q[1],_!==null)z.push(_);else break}T<F.length&&(this.receiveBuffer=F.subarray(T))}catch(U){var I=U.hasOwnProperty("stack")=="undefined"?U.stack.toString():"No Error Stack Available";this._disconnected(o.INTERNAL_ERROR.code,l(o.INTERNAL_ERROR,[U.message,I]));return}return z},D.prototype._handleMessage=function(O){this._trace("Client._handleMessage",O);try{switch(O.type){case h.CONNACK:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var F in this._sentMessages){var P=this._sentMessages[F];v.removeItem("Sent:"+this._localKey+P.messageIdentifier)}this._sentMessages={};for(var F in this._receivedMessages){var j=this._receivedMessages[F];v.removeItem("Received:"+this._localKey+j.messageIdentifier)}this._receivedMessages={}}if(O.returnCode===0)this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);else{this._disconnected(o.CONNACK_RETURNCODE.code,l(o.CONNACK_RETURNCODE,[O.returnCode,i[O.returnCode]]));break}var T=[];for(var z in this._sentMessages)this._sentMessages.hasOwnProperty(z)&&T.push(this._sentMessages[z]);if(this._buffered_msg_queue.length>0)for(var N=null;N=this._buffered_msg_queue.pop();)T.push(N),this.onMessageDelivered&&(this._notify_msg_sent[N]=this.onMessageDelivered(N.payloadMessage));for(var T=T.sort(function(V,Q){return V.sequence-Q.sequence}),q=0,_=T.length;q<_;q++){var P=T[q];if(P.type==h.PUBLISH&&P.pubRecReceived){var I=new p(h.PUBREL,{messageIdentifier:P.messageIdentifier});this._schedule_message(I)}else this._schedule_message(P)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var U=!1;this._reconnecting&&(U=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(U,this._wsuri),this._process_queue();break;case h.PUBLISH:this._receivePublish(O);break;case h.PUBACK:var P=this._sentMessages[O.messageIdentifier];P&&(delete this._sentMessages[O.messageIdentifier],v.removeItem("Sent:"+this._localKey+O.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(P.payloadMessage));break;case h.PUBREC:var P=this._sentMessages[O.messageIdentifier];if(P){P.pubRecReceived=!0;var I=new p(h.PUBREL,{messageIdentifier:O.messageIdentifier});this.store("Sent:",P),this._schedule_message(I)}break;case h.PUBREL:var j=this._receivedMessages[O.messageIdentifier];v.removeItem("Received:"+this._localKey+O.messageIdentifier),j&&(this._receiveMessage(j),delete this._receivedMessages[O.messageIdentifier]);var L=new p(h.PUBCOMP,{messageIdentifier:O.messageIdentifier});this._schedule_message(L);break;case h.PUBCOMP:var P=this._sentMessages[O.messageIdentifier];delete this._sentMessages[O.messageIdentifier],v.removeItem("Sent:"+this._localKey+O.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(P.payloadMessage);break;case h.SUBACK:var P=this._sentMessages[O.messageIdentifier];P&&(P.timeOut&&P.timeOut.cancel(),O.returnCode[0]===128?P.onFailure&&P.onFailure(O.returnCode):P.onSuccess&&P.onSuccess(O.returnCode),delete this._sentMessages[O.messageIdentifier]);break;case h.UNSUBACK:var P=this._sentMessages[O.messageIdentifier];P&&(P.timeOut&&P.timeOut.cancel(),P.callback&&P.callback(),delete this._sentMessages[O.messageIdentifier]);break;case h.PINGRESP:this.sendPinger.reset();break;case h.DISCONNECT:this._disconnected(o.INVALID_MQTT_MESSAGE_TYPE.code,l(o.INVALID_MQTT_MESSAGE_TYPE,[O.type]));break;default:this._disconnected(o.INVALID_MQTT_MESSAGE_TYPE.code,l(o.INVALID_MQTT_MESSAGE_TYPE,[O.type]))}}catch(V){var k=V.hasOwnProperty("stack")=="undefined"?V.stack.toString():"No Error Stack Available";this._disconnected(o.INTERNAL_ERROR.code,l(o.INTERNAL_ERROR,[V.message,k]));return}},D.prototype._on_socket_error=function(O){this._reconnecting||this._disconnected(o.SOCKET_ERROR.code,l(o.SOCKET_ERROR,[O.data]))},D.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(o.SOCKET_CLOSE.code,l(o.SOCKET_CLOSE))},D.prototype._socket_send=function(O){if(O.type==1){var F=this._traceMask(O,"password");this._trace("Client._socket_send",F)}else this._trace("Client._socket_send",O);this.socket.send(O.encode()),this.sendPinger.reset()},D.prototype._receivePublish=function(O){switch(O.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(O);break;case 1:var F=new p(h.PUBACK,{messageIdentifier:O.messageIdentifier});this._schedule_message(F),this._receiveMessage(O);break;case 2:this._receivedMessages[O.messageIdentifier]=O,this.store("Received:",O);var z=new p(h.PUBREC,{messageIdentifier:O.messageIdentifier});this._schedule_message(z);break;default:throw Error("Invaild qos="+O.payloadMessage.qos)}},D.prototype._receiveMessage=function(O){this.onMessageArrived&&this.onMessageArrived(O.payloadMessage)},D.prototype._connected=function(O,F){this.onConnected&&this.onConnected(O,F)},D.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=this._reconnectInterval*2),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},D.prototype._disconnected=function(O,F){if(this._trace("Client._disconnected",O,F),O!==void 0&&this._reconnecting){this._reconnectTimeout=new A(this,this._reconnectInterval,this._reconnect);return}if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket.readyState===1&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(O===void 0&&(O=o.OK.code,F=l(o.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:O,errorMessage:F,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),O!==o.OK.code&&this.connectOptions.reconnect){this._reconnectInterval=1,this._reconnect();return}}else this.connectOptions.mqttVersion===4&&this.connectOptions.mqttVersionExplicit===!1?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:O,errorMessage:F})},D.prototype._trace=function(){if(this.traceFunction){var O=Array.prototype.slice.call(arguments);for(var F in O)typeof O[F]<"u"&&O.splice(F,1,JSON.stringify(O[F]));var z=O.join("");this.traceFunction({severity:"Debug",message:z})}if(this._traceBuffer!==null)for(var F=0,N=arguments.length;F<N;F++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),F===0?this._traceBuffer.push(arguments[F]):typeof arguments[F]>"u"?this._traceBuffer.push(arguments[F]):this._traceBuffer.push("  "+JSON.stringify(arguments[F]))},D.prototype._traceMask=function(O,F){var z={};for(var N in O)O.hasOwnProperty(N)&&(N==F?z[N]="******":z[N]=O[N]);return z};var M=function(O,F,z,N){var T;if(typeof O!="string")throw new Error(l(o.INVALID_TYPE,[typeof O,"host"]));if(arguments.length==2){N=F,T=O;var q=T.match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(q)O=q[4]||q[2],F=parseInt(q[7]),z=q[8];else throw new Error(l(o.INVALID_ARGUMENT,[O,"host"]))}else{if(arguments.length==3&&(N=z,z="/mqtt"),typeof F!="number"||F<0)throw new Error(l(o.INVALID_TYPE,[typeof F,"port"]));if(typeof z!="string")throw new Error(l(o.INVALID_TYPE,[typeof z,"path"]));var _=O.indexOf(":")!==-1&&O.slice(0,1)!=="["&&O.slice(-1)!=="]";T="ws://"+(_?"["+O+"]":O)+":"+F+z}for(var I=0,U=0;U<N.length;U++){var j=N.charCodeAt(U);55296<=j&&j<=56319&&U++,I++}if(typeof N!="string"||I>65535)throw new Error(l(o.INVALID_ARGUMENT,[N,"clientId"]));var L=new D(T,O,F,z,N);Object.defineProperties(this,{host:{get:function(){return O},set:function(){throw new Error(l(o.UNSUPPORTED_OPERATION))}},port:{get:function(){return F},set:function(){throw new Error(l(o.UNSUPPORTED_OPERATION))}},path:{get:function(){return z},set:function(){throw new Error(l(o.UNSUPPORTED_OPERATION))}},uri:{get:function(){return T},set:function(){throw new Error(l(o.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return L.clientId},set:function(){throw new Error(l(o.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return L.onConnected},set:function(P){if(typeof P=="function")L.onConnected=P;else throw new Error(l(o.INVALID_TYPE,[typeof P,"onConnected"]))}},disconnectedPublishing:{get:function(){return L.disconnectedPublishing},set:function(P){L.disconnectedPublishing=P}},disconnectedBufferSize:{get:function(){return L.disconnectedBufferSize},set:function(P){L.disconnectedBufferSize=P}},onConnectionLost:{get:function(){return L.onConnectionLost},set:function(P){if(typeof P=="function")L.onConnectionLost=P;else throw new Error(l(o.INVALID_TYPE,[typeof P,"onConnectionLost"]))}},onMessageDelivered:{get:function(){return L.onMessageDelivered},set:function(P){if(typeof P=="function")L.onMessageDelivered=P;else throw new Error(l(o.INVALID_TYPE,[typeof P,"onMessageDelivered"]))}},onMessageArrived:{get:function(){return L.onMessageArrived},set:function(P){if(typeof P=="function")L.onMessageArrived=P;else throw new Error(l(o.INVALID_TYPE,[typeof P,"onMessageArrived"]))}},trace:{get:function(){return L.traceFunction},set:function(P){if(typeof P=="function")L.traceFunction=P;else throw new Error(l(o.INVALID_TYPE,[typeof P,"onTrace"]))}}}),this.connect=function(P){if(P=P||{},n(P,{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),P.keepAliveInterval===void 0&&(P.keepAliveInterval=60),P.mqttVersion>4||P.mqttVersion<3)throw new Error(l(o.INVALID_ARGUMENT,[P.mqttVersion,"connectOptions.mqttVersion"]));if(P.mqttVersion===void 0?(P.mqttVersionExplicit=!1,P.mqttVersion=4):P.mqttVersionExplicit=!0,P.password!==void 0&&P.userName===void 0)throw new Error(l(o.INVALID_ARGUMENT,[P.password,"connectOptions.password"]));if(P.willMessage){if(!(P.willMessage instanceof B))throw new Error(l(o.INVALID_TYPE,[P.willMessage,"connectOptions.willMessage"]));if(P.willMessage.stringPayload=null,typeof P.willMessage.destinationName>"u")throw new Error(l(o.INVALID_TYPE,[typeof P.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(typeof P.cleanSession>"u"&&(P.cleanSession=!0),P.hosts){if(!(P.hosts instanceof Array))throw new Error(l(o.INVALID_ARGUMENT,[P.hosts,"connectOptions.hosts"]));if(P.hosts.length<1)throw new Error(l(o.INVALID_ARGUMENT,[P.hosts,"connectOptions.hosts"]));for(var k=!1,V=0;V<P.hosts.length;V++){if(typeof P.hosts[V]!="string")throw new Error(l(o.INVALID_TYPE,[typeof P.hosts[V],"connectOptions.hosts["+V+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(P.hosts[V])){if(V===0)k=!0;else if(!k)throw new Error(l(o.INVALID_ARGUMENT,[P.hosts[V],"connectOptions.hosts["+V+"]"]))}else if(k)throw new Error(l(o.INVALID_ARGUMENT,[P.hosts[V],"connectOptions.hosts["+V+"]"]))}if(k)P.uris=P.hosts;else{if(!P.ports)throw new Error(l(o.INVALID_ARGUMENT,[P.ports,"connectOptions.ports"]));if(!(P.ports instanceof Array))throw new Error(l(o.INVALID_ARGUMENT,[P.ports,"connectOptions.ports"]));if(P.hosts.length!==P.ports.length)throw new Error(l(o.INVALID_ARGUMENT,[P.ports,"connectOptions.ports"]));P.uris=[];for(var V=0;V<P.hosts.length;V++){if(typeof P.ports[V]!="number"||P.ports[V]<0)throw new Error(l(o.INVALID_TYPE,[typeof P.ports[V],"connectOptions.ports["+V+"]"]));var Q=P.hosts[V],ne=P.ports[V],re=Q.indexOf(":")!==-1;T="ws://"+(re?"["+Q+"]":Q)+":"+ne+z,P.uris.push(T)}}}L.connect(P)},this.subscribe=function(P,k){if(typeof P!="string"&&P.constructor!==Array)throw new Error("Invalid argument:"+P);if(k=k||{},n(k,{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),k.timeout&&!k.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(typeof k.qos<"u"&&!(k.qos===0||k.qos===1||k.qos===2))throw new Error(l(o.INVALID_ARGUMENT,[k.qos,"subscribeOptions.qos"]));L.subscribe(P,k)},this.unsubscribe=function(P,k){if(typeof P!="string"&&P.constructor!==Array)throw new Error("Invalid argument:"+P);if(k=k||{},n(k,{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),k.timeout&&!k.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");L.unsubscribe(P,k)},this.send=function(P,k,V,Q){var ne;if(arguments.length===0)throw new Error("Invalid argument.length");if(arguments.length==1){if(!(P instanceof B)&&typeof P!="string")throw new Error("Invalid argument:"+typeof P);if(ne=P,typeof ne.destinationName>"u")throw new Error(l(o.INVALID_ARGUMENT,[ne.destinationName,"Message.destinationName"]));L.send(ne)}else ne=new B(k),ne.destinationName=P,arguments.length>=3&&(ne.qos=V),arguments.length>=4&&(ne.retained=Q),L.send(ne)},this.publish=function(P,k,V,Q){var ne;if(arguments.length===0)throw new Error("Invalid argument.length");if(arguments.length==1){if(!(P instanceof B)&&typeof P!="string")throw new Error("Invalid argument:"+typeof P);if(ne=P,typeof ne.destinationName>"u")throw new Error(l(o.INVALID_ARGUMENT,[ne.destinationName,"Message.destinationName"]));L.send(ne)}else ne=new B(k),ne.destinationName=P,arguments.length>=3&&(ne.qos=V),arguments.length>=4&&(ne.retained=Q),L.send(ne)},this.disconnect=function(){L.disconnect()},this.getTraceLog=function(){return L.getTraceLog()},this.startTrace=function(){L.startTrace()},this.stopTrace=function(){L.stopTrace()},this.isConnected=function(){return L.connected}},B=function(O){var F;if(typeof O=="string"||O instanceof ArrayBuffer||ArrayBuffer.isView(O)&&!(O instanceof DataView))F=O;else throw l(o.INVALID_ARGUMENT,[O,"newPayload"]);var z,N=0,T=!1,q=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return typeof F=="string"?F:S(F,0,F.length)}},payloadBytes:{enumerable:!0,get:function(){if(typeof F=="string"){var _=new ArrayBuffer(x(F)),I=new Uint8Array(_);return C(F,I,0),I}else return F}},destinationName:{enumerable:!0,get:function(){return z},set:function(_){if(typeof _=="string")z=_;else throw new Error(l(o.INVALID_ARGUMENT,[_,"newDestinationName"]))}},qos:{enumerable:!0,get:function(){return N},set:function(_){if(_===0||_===1||_===2)N=_;else throw new Error("Invalid argument:"+_)}},retained:{enumerable:!0,get:function(){return T},set:function(_){if(typeof _=="boolean")T=_;else throw new Error(l(o.INVALID_ARGUMENT,[_,"newRetained"]))}},topic:{enumerable:!0,get:function(){return z},set:function(_){z=_}},duplicate:{enumerable:!0,get:function(){return q},set:function(_){q=_}}})};return{Client:M,Message:B}}(typeof En<"u"?En:typeof self<"u"?self:typeof window<"u"?window:{});return a})})(hd);const Wx="TopicConnect",Yx="TopicRoll",th="TopicBoard",tl="TopicChars",Xx="TopicDraw",[Uj,P0]=nt(!1),jj=(e,t)=>Vx({sender:e,data:t}),qj=e=>Gx(e),xr=e=>{let t;return lt().hosting?t=lt().browserID:t=lt().remote,`${t}/${e}`},Ci=(e,t,r,a)=>{const s=new hd.exports.Message(jj(e,a));s.destinationName=r,t.send(s)},Hj=(e,t)=>{if(!e)return;const r=qj(t.payloadString);if(r.sender==lt().browserID)return;switch(t.destinationName){case xr(Wx):const f=r.data,v={...e.connections()};v[r.sender]||(v[r.sender]={username:f.username,count:1,connected_at:xu(),last_seen_at:xu()}),e.setConnections(v),Uo(e,`User ${f.username} connected`,5e3);const h=e.mqttClient();if(!h)break;if(lt().hosting){const d=Object.values(e.charData).filter(p=>p.shared);Ci(lt().browserID,h,xr(tl),d),Ci(lt().browserID,h,xr(th),Object.values(e.boardData()))}break;case xr(Yx):const u=[...r.data,...e.rollHistory()];e.setRollHistory(u),Ut(is,u);break;case xr(tl):const o=r.data,i={...e.charData};o.forEach(d=>{i[d.id]=d}),e.setCharData({...i}),Ut(xo,i),Uo(e,"Character created/updated",1e4);break;case xr(th):const l=r.data,c={...e.boardData()};l.forEach(d=>{c[d.id]=d}),e.setBoardData(c),Ut(ys,c),Uo(e,"Board note created/updated",1e4);break;case xr(Xx):e.setDrawCache(r.data),Uo(e,"Drawing updated",1e4);break;default:console.log("Message for unknown topic",r.sender,r.data)}const a={...e.connections()},s=a[r.sender];s&&(s.last_seen_at=xu(),s.count=s.count?s.count+1:1,e.setConnections(a))},Vj=e=>{if(!e||!lt().nats||lt().nats.trim()==""||!lt().hosting&&(!lt().remote||lt().remote.trim()==""))return;const t=new hd.exports.Client(lt().nats,lt().browserID);t.isConnected()&&t.disconnect();let r,a;if(lt().nats_token){const s=lt().nats_token.split(":");r=s[0],a=s[1]}t.connect({userName:r,password:a,onFailure:s=>{console.error(s.errorMessage)},onSuccess:s=>{console.log("Connected to MQTT server",s),t.subscribe(xr("+"),{onFailure:f=>{console.log(`subscription to ${xr("+")} failed`,f)},onSuccess:()=>{e.setMqttClient(t),Ci(lt().browserID,t,xr(Wx),{username:lt().username}),P0(!0)}})}}),t.onMessageArrived=s=>{Hj(e,s)},t.onConnectionLost=s=>{console.log("Connection lost",s),P0(!1)}},Gj=()=>{if(!lt().hosting)return"";const e={nats:lt().nats,token:lt().nats_token,remote:lt().browserID};return`${window.location}connect?data=${encodeURIComponent(Vx(e))}`},Wj=mt('<svg fill="currentColor" stroke-width="0" xmlns="http://www.w3.org/2000/svg"></svg>'),Yj=mt("<title></title>");function xt(e,t){const r=Ar(e.a,t);return(()=>{const a=Wj.cloneNode(!0);return Nr(a,r,!0,!0),Ve(a,()=>t1,null),Ve(a,(()=>{const s=Re(()=>!!t.title,!0);return()=>s()&&(()=>{const f=Yj.cloneNode(!0);return Ve(f,()=>t.title),f})()})(),null),Wt(s=>{const f=e.a.stroke,v={...t.style,overflow:"visible",color:t.color||"currentColor"},h=t.size||"1em",n=t.size||"1em",u=e.c;return f!==s._v$&&cr(a,"stroke",s._v$=f),s._v$2=gi(a,v,s._v$2),h!==s._v$3&&cr(a,"height",s._v$3=h),n!==s._v$4&&cr(a,"width",s._v$4=n),u!==s._v$5&&(a.innerHTML=s._v$5=u),s},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),a})()}function Xj(e){return xt({a:{viewBox:"0 0 512 512"},c:'<path d="M512 256c0 141.4-114.6 256-256 256S0 397.4 0 256 114.6 0 256 0s256 114.6 256 256zM256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"/>'},e)}function Kj(e){return xt({a:{viewBox:"0 0 448 512"},c:'<path d="M384 32c35.3 0 64 28.65 64 64v320c0 35.3-28.7 64-64 64H64c-35.35 0-64-28.7-64-64V96c0-35.35 28.65-64 64-64h320zm0 48H64c-8.84 0-16 7.16-16 16v320c0 8.8 7.16 16 16 16h320c8.8 0 16-7.2 16-16V96c0-8.84-7.2-16-16-16z"/>'},e)}function Jj(e){return xt({a:{viewBox:"0 0 256 512"},c:'<path d="M256 448c0 17.67-14.33 32-32 32H32c-17.67 0-32-14.33-32-32s14.33-32 32-32h64V123.8l-46.25 30.8c-14.73 9.9-34.56 5.8-44.375-8.8-9.797-14.7-5.828-34.6 8.875-44.4l96-64c9.828-6.547 22.45-7.187 32.84-1.594A31.992 31.992 0 01160 64.01v352h64c17.7-.01 32 14.29 32 31.99z"/>'},e)}function Zj(e){return xt({a:{viewBox:"0 0 320 512"},c:'<path d="M320 448c0 17.67-14.33 32-32 32H32a31.995 31.995 0 01-29.7-20.09 31.994 31.994 0 017.594-35.03l193.6-185.1c31.36-30.17 33.95-80 5.812-113.4-14.91-17.69-35.86-28.12-58.97-29.38-22.936-1.17-45.036 6.9-61.806 22.9l-35.01 31.8c-13.08 11.91-33.33 10.89-45.2-2.172C-3.563 136.5-2.594 116.2 10.48 104.3L44.93 73c28.67-27.34 68.39-42.11 108.9-39.88 40.33 2.188 78.39 21.16 104.4 52.03 49.8 59.05 45.2 147.3-10.45 200.8l-136 130H288c17.7.05 32 14.35 32 32.05z"/>'},e)}function Qj(e){return xt({a:{viewBox:"0 0 320 512"},c:'<path d="M320 344c0 74.98-61.02 136-136 136h-80.4c-46.34 0-87.31-29.53-101.1-73.48-5.594-16.77 3.484-34.88 20.25-40.47 16.75-5.609 34.89 3.484 40.47 20.25a43.38 43.38 0 0041.23 29.7H184c39.7 0 72-32.3 72-72s-32.3-72-72-72H80c-13.2 0-25.05-8.094-29.83-20.41-4.78-12.29-1.51-26.29 8.21-35.19L189.78 96H32C14.33 96 0 81.67 0 64s14.33-32 32-32h240c13.2 0 25.05 8.094 29.83 20.41 4.781 12.3 1.516 26.27-8.203 35.19L162.227 208H184c74.1 0 136 61 136 136z"/>'},e)}function eq(e){return xt({a:{viewBox:"0 0 384 512"},c:'<path d="M384 334.2c0 17.67-14.33 32-32 32h-32v81.78c0 17.67-14.33 32-32 32s-32-14.33-32-32V366.2H32a32.046 32.046 0 01-27.05-14.89 32.038 32.038 0 01-1.875-30.81l128-270.2C138.6 34.33 157.8 27.56 173.7 35.09c15.97 7.562 22.78 26.66 15.22 42.63L82.56 302.2H256V160c0-17.67 14.33-32 32-32s32 14.33 32 32v142.2h32c17.7 0 32 14.4 32 32z"/>'},e)}function tq(e){return xt({a:{viewBox:"0 0 320 512"},c:'<path d="M23.19 32c5.67 0 11.15 2.08 15.4 5.86L312.6 281.4c4.7 4.2 7.4 10.2 7.4 16.5 0 12.2-9.9 22.1-22.1 22.1H179.8l56.8 113.7c7.9 15.8 1.5 35-14.3 42.9-15.8 7.9-35 1.5-42.9-14.3L121.2 346l-82.62 94.5c-4.18 4.8-10.22 7.5-16.57 7.5C9.855 448 0 438.1 0 425.1V55.18C0 42.38 10.38 32 23.18 32h.01z"/>'},e)}function rq(e){return xt({a:{viewBox:"0 0 384 512"},c:'<path d="M381.2 172.8c-4.1-7.9-12.3-12.8-21.2-12.8H203.4l50.84-127.1c2.969-7.375 2.062-15.78-2.406-22.38S239.1 0 232 0H56C43.97 0 33.81 8.906 32.22 20.84l-32 240a23.832 23.832 0 005.718 18.96A24.058 24.058 0 0024 288h146.3l-41.78 194.1c-2.406 11.22 3.469 22.56 14 27.09 3.08 2.21 6.28 2.81 9.48 2.81 7.719 0 15.22-3.75 19.81-10.44l208-304c4.99-7.36 5.59-16.86 1.39-24.76z"/>'},e)}function nq(e){return xt({a:{viewBox:"0 0 512 512"},c:'<path d="M384 96V0H272c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h192c26.51 0 48-21.49 48-48V128h-95.1c-18.5 0-32.9-14.4-32.9-32zm32-96v96h96L416 0zM192 352V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h192c26.51 0 48-21.49 48-48v-48h-32c-35.3 0-64-28.7-64-64z"/>'},e)}function dd(e){return xt({a:{viewBox:"0 0 576 512"},c:'<path d="M576 384c0 35.3-28.7 64-64 64H205.3c-17 0-33.3-6.7-45.3-18.7L9.372 278.6C3.371 272.6 0 264.5 0 256c0-8.5 3.372-16.6 9.372-22.6L160 82.75C172 70.74 188.3 64 205.3 64H512c35.3 0 64 28.65 64 64v256zM271 208.1l47.1 47.9-47.1 47c-9.3 9.4-9.3 24.6 0 33.1 9.4 10.2 24.6 10.2 33.1 0l47.9-46.2 47 46.2c9.4 10.2 24.6 10.2 33.1 0 10.2-8.5 10.2-23.7 0-33.1l-46.2-47 46.2-47.9c10.2-8.5 10.2-23.7 0-33.1-8.5-9.3-23.7-9.3-33.1 0l-47 47.1-47.9-47.1c-8.5-9.3-23.7-9.3-33.1 0-9.3 9.4-9.3 24.6 0 33.1z"/>'},e)}function iq(e){return xt({a:{viewBox:"0 0 512 512"},c:'<path d="M512 256c0 141.4-114.6 256-256 256S0 397.4 0 256 114.6 0 256 0s256 114.6 256 256zM266.3 48.25L232.5 73.6c-5.3 4.03-8.5 10.35-8.5 17.07v9.05c0 6.78 5.5 12.28 12.3 12.28 2.4 0 4.8-.7 6.8-2.1l41.8-27.84c2-1.34 4.4-2.06 6.8-2.06h1c6.2 0 11.3 5.07 11.3 11.31 0 3-1.2 5.88-3.3 8l-19.9 19.89c-5.8 4.9-12.9 10.2-20.6 12.7l-26.6 8.9c-5.7 1.9-9.6 7.3-9.6 13.4 0 3.7-1.5 7.3-4.1 9.9l-18 18c-6.3 6.3-9.9 15-9.9 24v4.2c0 16.4 13.6 29.7 29.9 29.7 11 0 21.2-6.2 26.1-16l4-8.1c2.5-4.8 7.4-7.9 12.8-7.9 4.6 0 8.8 2.1 11.5 5.7l16.3 21.8c2.1 2.8 5.5 4.5 9.1 4.5 8.4 0 13.9-8.9 10.1-16.4l-1.1-2.3c-3.6-7 0-15.5 7.4-18l21.2-7.1c7.6-2.5 12.7-9.6 12.7-17.6 0-10.3 8.3-18.6 18.6-18.6H400c8.8 0 16 7.2 16 16s-7.2 16-16 16h-20.7c-7.2 0-14.2 2.9-19.3 8l-4.7 4.7c-2.1 2.1-3.3 5-3.3 8 0 6.2 5.1 11.3 11.3 11.3h11.3c6 0 11.8 2.4 16 6.6l6.6 6.6c.9.9 2.8 4.2 2.8 6.8 0 2.6-1.9 5-2.8 6.8l-7.5 7.5c-3.7 2.8-5.7 8.6-5.7 13.7s2 10 5.7 13.7L408 304c10.2 10.2 24.1 16 38.6 16h6.5c7.4-20.2 10.9-41.7 10.9-64 0-111.4-87.6-202.36-197.7-207.75zM438.4 356.1c-3.7-2.6-8.2-4.1-13-4.1-6 0-11.8-2.4-16-6.6l-14.3-14.3c-6.8-6.8-17.2-11.1-28-11.1-9.7 0-19.2-3.5-26.6-9.8l-27.4-22.8c-10.7-9.9-25.5-16.3-40.8-16.3h-20.9c-12.7 0-25 4.6-35.5 11.6L188.5 301c-17.8 11.9-28.5 31.9-28.5 53.3v3.2c0 17 6.7 33.2 18.7 45.2l16 16c8.5 8.5 20 13.3 32 13.3H248c13.3 0 24 10.7 24 24 0 2.5.4 5 1.1 7.3 71.4-5.8 132.5-47.6 165.3-107.2zM164.7 100.7l-32 32c-6.3 6.2-6.3 16.4 0 22.6 6.2 6.3 16.4 6.3 22.6 0l32-32c6.3-6.2 6.3-16.4 0-22.6-6.2-6.26-16.4-6.26-22.6 0z"/>'},e)}function aq(e){return xt({a:{viewBox:"0 0 512 512"},c:'<path d="M480 416c17.7 0 32 14.3 32 32s-14.3 32-32 32H150.6c-16.9 0-33.2-6.7-45.2-18.7l-80.03-80c-24.991-25-24.991-65.6 0-90.6L258.7 57.37c25-24.99 65.6-24.99 90.6 0L486.6 194.7c25 25 25 65.6 0 90.6L355.9 416H480zm-214.6 0l67.3-67.3-137.4-137.4L70.63 336l79.97 80h114.8z"/>'},e)}function bs(e){return xt({a:{viewBox:"0 0 576 512"},c:'<path d="M192 312c0-13.2 10.8-24 24-24h168V160H256c-17.67 0-32-14.33-32-32V0H48C21.49 0 0 21.49 0 48v416c0 26.5 21.49 48 48 48h288c26.51 0 48-21.49 48-48V336H216c-13.2 0-24-10.7-24-24zM256 0v128h128L256 0zm312.1 295l-80-80c-9.375-9.375-24.56-9.375-33.94 0s-9.375 24.56 0 33.94L494.1 288H384v48h110.1l-39.03 39.03C450.3 379.7 448 385.8 448 392s2.344 12.28 7.031 16.97c9.375 9.375 24.56 9.375 33.94 0l80-80c9.329-9.37 9.329-24.57-.871-33.97z"/>'},e)}function ws(e){return xt({a:{viewBox:"0 0 512 512"},c:'<path d="M384 0v128h128L384 0zm-32 128V0H176c-26.5 0-48 21.49-48 48v240h174.1l-39.03-39.03c-9.375-9.375-9.375-24.56 0-33.94s24.56-9.375 33.94 0l80 80c9.375 9.375 9.375 24.56 0 33.94l-80 80c-9.375 9.375-24.56 9.375-33.94 0C258.3 404.3 256 398.2 256 392s2.344-12.28 7.031-16.97L302.1 336H128v128c0 26.5 21.5 48 48 48h288c26.51 0 48-21.49 48-48V160H384.9c-18.6 0-32.9-14.3-32.9-32zM24 288c-13.25 0-24 10.7-24 24 0 13.25 10.75 24 24 24h104v-48H24z"/>'},e)}function oq(e){return xt({a:{viewBox:"0 0 448 512"},c:'<path d="M416 416h-25.81L253.1 52.76C248.412 40.29 236.53 32 223.19 32s-25.34 8.289-30.02 20.76L57.81 416H32c-17.67 0-32 14.31-32 32s14.33 32 32 32h96c17.67 0 32-14.31 32-32s-14.33-32-32-32h-1.8l17.1-48h159.6l17.1 48c-17.67 0-32 14.31-32 32s14.33 32 32 32h96c17.67 0 32-14.31 32-32s-14.3-32-32-32zM168.2 304L224 155.1 279.82 304H168.2z"/>'},e)}function Kx(e){return xt({a:{viewBox:"0 0 640 512"},c:'<path d="M286.3 155.1c1.1 6.8 1.7 13.8 1.7 20 0 8-.6 15-1.7 21.8l22.2 19.8c7 6.3 9.9 15.4 6.2 25-2.3 4.4-4.8 10.5-7.6 15.5l-3.1 5.4c-3.9 5-6.3 9.8-9.8 14.5-5.7 7.6-15.7 10.1-24.7 7.1l-28.3-9.3c-10.7 8.9-22.9 16-36.2 21l-6.9 29c-1.1 9.3-8.3 16.7-17.7 17.9-6.7.8-13.5 1.2-20.4 1.2-6.9 0-13.7-.4-20.4-1.2-9.4-1.2-17.5-8.6-18.6-17.9l-6.9-29c-12.4-5-24.6-12.1-35.35-21l-28.22 9.3c-8.99 3-19.01.5-24.71-7.1-3.54-4.7-6.84-9.6-9.88-14.6l-3.02-5.3c-2.79-5-5.328-10.2-7.596-15.5-3.704-9.6-.866-18.7 6.196-25l22.18-19.8c-1.12-6.8-2.6-13.8-2.6-21.8 0-6.2 1.48-13.2 2.6-20l-22.18-19.8c-7.062-7.2-9.9-16.3-6.196-25 2.268-6.2 4.806-10.51 7.586-15.54l3.04-5.25c3.03-5.05 6.33-9.93 9.87-14.62 5.7-7.55 15.72-10.06 24.71-7.1l28.22 9.3c10.75-8.84 22.95-15.96 35.35-20.94l6.9-29.07c1.1-9.28 9.2-16.71 18.6-17.849A169.2 169.2 0 01160 8c6.9 0 13.7.418 20.4 1.23 9.4 1.14 16.6 8.57 17.7 17.85l6.9 29.07c13.3 4.98 25.5 12.1 36.2 20.94l28.3-9.3c9-2.96 19-.45 24.7 7.1 3.5 4.67 5.9 9.53 9.8 14.55l3.1 5.39c2.8 5.01 5.3 10.17 7.6 15.47 3.7 8.7.8 17.8-6.2 25l-22.2 19.8zm-126.3-28c-26.5 0-48 22.4-48 48 0 27.4 21.5 48 48 48s48-20.6 48-48c0-25.6-21.5-48-48-48zm324.9 351.2c-6.8 1.1-13.8 1.7-20.9 1.7-7.1 0-14.1-.6-20.9-1.7l-19.8 22.2c-7.2 7-16.3 9.9-25 6.2-5.3-2.3-10.5-4.8-15.5-7.6l-5.4-3.1c-5-3.9-9.8-6.3-14.5-9.8-7.6-5.7-10.1-15.7-7.1-24.7l9.3-28.3c-8.9-10.7-16-22.9-21-36.2l-29-6.9c-9.3-1.1-16.7-8.3-17.9-17.7-.8-6.7-1.2-13.5-1.2-20.4 0-6.9.4-13.7 1.2-20.4 1.2-9.4 8.6-17.5 17.9-18.6l29-6.9c5-12.4 12.1-24.6 21-35.3l-9.3-28.3c-3-9-.5-19 7.1-24.7 4.7-3.5 9.6-7.7 14.6-9.9l5.3-3c5-2.8 9.3-5.3 15.5-7.6 8.7-3.7 17.8-.8 25 6.2l19.8 22.2c6.8-1.1 13.8-1.7 20.9-1.7 7.1 0 14.1.6 20.9 1.7l19.8-22.2c6.3-7 15.4-9.9 25-6.2 5.3 2.3 10.5 4.8 15.5 7.6l5.3 3c5 2.2 9.9 6.4 14.6 9.9 7.6 5.7 10.1 15.7 7.1 24.7l-9.3 28.3c8.9 10.7 16 22.9 21 35.3l29 6.9c9.3 1.1 16.7 9.2 17.9 18.6.8 6.7 1.2 13.5 1.2 20.4 0 6.9-.4 13.7-1.2 20.4-1.2 9.4-8.6 16.6-17.9 17.7l-29 6.9c-5 13.3-12.1 25.5-21 36.2l9.3 28.3c3 9 .5 19-7.1 24.7-4.7 3.5-9.5 5.9-14.5 9.8l-5.4 3.1c-5 2.8-11.1 5.3-15.5 7.6-9.6 3.7-18.7.8-25-6.2l-19.8-22.2zM512 352c0-26.5-21.5-48-48-48s-48 21.5-48 48 21.5 48 48 48 48-21.5 48-48z"/>'},e)}function sq(e){return xt({a:{viewBox:"0 0 384 512"},c:'<path d="M62.36 458.1c-5.59 16.8-23.71 25.8-40.48 20.3-16.764-5.6-25.826-23.8-20.237-40.5L129.6 53.88c5.6-16.76 23.8-25.83 40.5-20.24 16.8 5.59 25.8 23.71 20.3 40.48L62.36 458.1zM261.3 32.44c17.4 2.9 29.2 19.39 26.3 36.82l-64 384.04c-2.9 17.4-19.4 29.2-36.9 26.3-17.4-2.9-29.2-19.4-26.3-36.9l64-383.96c2.9-17.43 19.4-29.21 36.9-26.3zM352 32c17.7 0 32 14.33 32 32v384c0 17.7-14.3 32-32 32s-32-14.3-32-32V64c0-17.67 14.3-32 32-32z"/>'},e)}function uq(e){return xt({a:{viewBox:"0 0 512 512"},c:'<path d="M88 48c13.3 0 24 10.75 24 24v48c0 13.3-10.7 24-24 24H40c-13.25 0-24-10.7-24-24V72c0-13.25 10.75-24 24-24h48zm392 16c17.7 0 32 14.33 32 32 0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32 0-17.67 14.3-32 32-32h288zm0 160c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-17.7 0-32-14.3-32-32s14.3-32 32-32h288zm0 160c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-17.7 0-32-14.3-32-32s14.3-32 32-32h288zM16 232c0-13.3 10.75-24 24-24h48c13.3 0 24 10.7 24 24v48c0 13.3-10.7 24-24 24H40c-13.25 0-24-10.7-24-24v-48zm72 136c13.3 0 24 10.7 24 24v48c0 13.3-10.7 24-24 24H40c-13.25 0-24-10.7-24-24v-48c0-13.3 10.75-24 24-24h48z"/>'},e)}function lq(e){return xt({a:{viewBox:"0 0 576 512"},c:'<path d="M352 192h32c35.3 0 64 28.7 64 64v192c0 35.3-28.7 64-64 64H64c-35.35 0-64-28.7-64-64V256c0-35.3 28.65-64 64-64h224v-48C288 64.47 352.5 0 432 0s144 64.47 144 144v48c0 17.7-14.3 32-32 32s-32-14.3-32-32v-48c0-44.18-35.8-80-80-80s-80 35.82-80 80v48z"/>'},e)}function cq(e){return xt({a:{viewBox:"0 0 448 512"},c:'<path d="M80 192v-48C80 64.47 144.5 0 224 0s144 64.47 144 144v48h16c35.3 0 64 28.7 64 64v192c0 35.3-28.7 64-64 64H64c-35.35 0-64-28.7-64-64V256c0-35.3 28.65-64 64-64h16zm64 0h160v-48c0-44.18-35.8-80-80-80s-80 35.82-80 80v48z"/>'},e)}function rl(e){return xt({a:{viewBox:"0 0 448 512"},c:'<path d="M400 288H48c-17.69 0-32-14.32-32-32.01S30.31 224 48 224h352c17.69 0 32 14.3 32 31.99S417.7 288 400 288z"/>'},e)}function B0(e){return xt({a:{viewBox:"0 0 512 512"},c:'<path d="M512 255.1c0 1.8-.9 2.7-.9 3.6.5 36.5-32.7 60.4-69.2 60.4H344c-26.5 0-48 22.4-48 48.9 0 3.4.4 6.7 1 9.9 2.2 10.2 6.5 19.2 10.9 29.9 6 13.8 12.1 27.5 12.1 42 0 31.9-21.6 60.7-53.4 62-3.5.1-7.1.2-10.6.2C114.6 512 0 397.4 0 256S114.6 0 256 0s256 114.6 256 256v-.9zm-416 0c-17.67 0-32 15.2-32 32 0 18.6 14.33 32 32 32 17.7 0 32-13.4 32-32 0-16.8-14.3-32-32-32zm32-64c17.7 0 32-13.4 32-32 0-16.8-14.3-32-32-32s-32 15.2-32 32c0 18.6 14.3 32 32 32zm128-128c-17.7 0-32 15.23-32 32 0 18.6 14.3 32 32 32s32-13.4 32-32c0-16.77-14.3-32-32-32zm128 128c17.7 0 32-13.4 32-32 0-16.8-14.3-32-32-32s-32 15.2-32 32c0 18.6 14.3 32 32 32z"/>'},e)}function pd(e){return xt({a:{viewBox:"0 0 512 512"},c:'<path d="M421.7 220.3L188.5 453.4l-33.9-33.9 3.5-3.5H112c-8.8 0-16-7.2-16-16v-46.1l-3.49 3.5c-4.73 4.8-8.2 10.6-10.09 17l-22.98 78.2 78.16-23c5.5-1.9 12.2-5.4 17-10.1l33.9 33.9c-10.4 10.4-23.3 18.1-37.4 22.2L30.77 511c-8.42 2.5-17.53.2-23.74-6.9-6.21-5.3-8.532-14.4-6.054-22.9L36.37 360.9c4.16-14.1 11.79-27 22.2-37.4L291.7 90.34l130 129.96zm71-161.55c25 24.99 25 65.55 0 90.55l-48.4 48.4-130-129.98 48.4-48.4c25-24.998 65.6-24.998 90.6 0l39.4 39.43z"/>'},e)}function Jx(e){return xt({a:{viewBox:"0 0 384 512"},c:'<path d="M361 215c14.3 8.8 23 24.3 23 41s-8.7 32.2-23 40.1l-287.97 176c-14.82 9.9-33.37 10.3-48.51 1.8A48.02 48.02 0 010 432V80a48.02 48.02 0 0124.52-41.87 48.019 48.019 0 0148.51.91L361 215z"/>'},e)}function fq(e){return xt({a:{viewBox:"0 0 384 512"},c:'<path d="M96 0c17.7 0 32 14.33 32 32v96H64V32C64 14.33 78.33 0 96 0zm192 0c17.7 0 32 14.33 32 32v96h-64V32c0-17.67 14.3-32 32-32zm64 160c17.7 0 32 14.3 32 32s-14.3 32-32 32v32c0 77.4-55 141.1-128 156.8V512h-64v-99.2C86.97 397.1 32 333.4 32 256v-32c-17.67 0-32-14.3-32-32s14.33-32 32-32h320z"/>'},e)}function ea(e){return xt({a:{viewBox:"0 0 448 512"},c:'<path d="M432 256c0 17.69-14.33 32.01-32 32.01H256v144c0 17.69-14.33 31.99-32 31.99s-32-14.3-32-31.99v-144H48c-17.67 0-32-14.32-32-32.01s14.33-31.99 32-31.99h144v-144C192 62.32 206.33 48 224 48s32 14.32 32 32.01v144h144c17.7-.01 32 14.29 32 31.99z"/>'},e)}function hq(e){return xt({a:{viewBox:"0 0 512 512"},c:'<path d="M288 256c0 17.7-14.3 32-32 32s-32-14.3-32-32V32c0-17.67 14.3-32 32-32s32 14.33 32 32v224zm-208 0c0 97.2 78.8 176 176 176s176-78.8 176-176c0-54.4-24.7-103.1-63.5-135.4-13.6-11.3-15.5-31.47-4.2-45.06 11.3-13.59 31.5-15.44 45.1-4.14 52.8 44 86.6 110.4 86.6 183.7C496 388.5 388.5 496 256 496S16 388.5 16 255.1c0-73.3 33.75-139.7 86.6-183.7 13.6-11.3 33.8-9.45 45.1 4.14 10.4 13.59 9.4 33.76-4.2 45.06C104.7 152.9 80 201.6 80 256z"/>'},e)}function dq(e){return xt({a:{viewBox:"0 0 512 512"},c:'<path d="M449.9 39.96l-48.5 48.53C362.5 53.19 311.4 32 256 32 161.5 32 78.59 92.34 49.58 182.2c-5.438 16.81 3.797 34.88 20.61 40.28 16.97 5.5 34.86-3.812 40.3-20.59C130.9 138.5 189.4 96 256 96c37.96 0 73 14.18 100.2 37.8L311.1 178c-16 16.8-4.3 45.4 19.3 46h146.9c10.4-.3 18.7-8.7 18.7-19.1V59.04c0-24.05-29.1-36.09-46.1-19.08zm-8.1 249.64c-16.94-5.438-34.88 3.812-40.3 20.59C381.1 373.5 322.6 416 256 416c-37.96 0-73-14.18-100.2-37.8L200 334c16.9-16.8 5.2-45.4-18.4-46H34.66c-10.34.3-18.66 8.7-18.66 19.1V453c0 24.04 29.07 36.08 46.07 19.07l48.5-48.53C149.5 458.8 200.6 480 255.1 480c94.45 0 177.4-60.34 206.4-150.2 6.4-16.8-2.9-35.7-19.7-40.2z"/>'},e)}function pq(e){return xt({a:{viewBox:"0 0 512 512"},c:'<path d="M480 288H32c-17.62 0-32 14.38-32 32v128c0 17.62 14.38 32 32 32h448c17.62 0 32-14.38 32-32V320c0-17.6-14.4-32-32-32zM352 408c-13.25 0-24-10.75-24-24s10.75-24 24-24 24 10.75 24 24-10.7 24-24 24zm64 0c-13.25 0-24-10.75-24-24s10.75-24 24-24 24 10.75 24 24-10.7 24-24 24zm64-376H32C14.38 32 0 46.38 0 64v128c0 17.62 14.38 32 32 32h448c17.62 0 32-14.38 32-32V64c0-17.62-14.4-32-32-32zM352 152c-13.25 0-24-10.75-24-24s10.8-24 24-24 24 10.8 24 24-10.7 24-24 24zm64 0c-13.25 0-24-10.75-24-24s10.8-24 24-24 24 10.8 24 24-10.7 24-24 24z"/>'},e)}function mq(e){return xt({a:{viewBox:"0 0 448 512"},c:'<path d="M285.4 197.1l-94.1 47c.5 3.9-.2 7-.2 11.9 0 4 .7 7.1.2 11.9l94.1 47c17.2-16.7 40.7-26.9 66.6-26.9 53 0 96 42.1 96 96 0 53-43 96-96 96-53.9 0-96-43-96-96 0-4.9.2-8 .7-11.9l-94.1-47C145.4 341.8 121.9 352 96 352c-53.02 0-96-43-96-96 0-53.9 42.98-96 96-96 25.9 0 49.4 10.2 66.6 26.9l94.1-47c-.5-4.8-.7-7.9-.7-11.9 0-53.02 42.1-96 96-96 53 0 96 42.98 96 96 0 53-43 96-96 96-25.9 0-49.4-10.2-66.6-26.9z"/>'},e)}function Zx(e){return xt({a:{viewBox:"0 0 448 512"},c:'<path d="M135.2 17.69C140.6 6.848 151.7 0 163.8 0h120.4c12.1 0 23.2 6.848 28.6 17.69L320 32h96c17.7 0 32 14.33 32 32s-14.3 32-32 32H32C14.33 96 0 81.67 0 64s14.33-32 32-32h96l7.2-14.31zM31.1 128H416v320c0 35.3-28.7 64-64 64H95.1c-34.45 0-64-28.7-64-64V128zm80 80v224c0 8.8 8.1 16 16 16 9.7 0 16-7.2 16-16V208c0-8.8-6.3-16-16-16-7.9 0-16 7.2-16 16zm96 0v224c0 8.8 8.1 16 16 16 9.7 0 16.9-7.2 16.9-16V208c0-8.8-7.2-16-16.9-16-7.9 0-16 7.2-16 16zm96.9 0v224c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16s-16 7.2-16 16z"/>'},e)}function xs(e){return xt({a:{viewBox:"0 0 448 512"},c:'<path d="M135.2 17.69C140.6 6.848 151.7 0 163.8 0h120.4c12.1 0 23.2 6.848 28.6 17.69L320 32h96c17.7 0 32 14.33 32 32s-14.3 32-32 32H32C14.33 96 0 81.67 0 64s14.33-32 32-32h96l7.2-14.31zM394.8 466.1c-1.6 26.2-22.5 45.9-47.9 45.9H101.1c-25.35 0-46.33-19.7-47.91-45.9L31.1 128H416l-21.2 338.1z"/>'},e)}const vq=["Apollo","Athena","Ares","Hermes","Hades","Odin","Thor","Mimir","Fenrir","Thyr","Freya","Rama","Indra","Iris","Kali","Selene","Sol","Lakshmi","Chandra","Mitra","Alpha","Beta","Gamma","Delta","Sigma","Omega","Quantum","Proton","Nucleo","Tensor","Macro","Hexagon","Octagon","Prism","Radius","Scalar","Solid","Tangent","Vector","Prime","Schultz","Nitzsche-Greenfelder","Blick-Nolan","Kunze","Keeling","Hansen","Emard","Senger","Rice-Kreiger","Hedegaard","Tanner","Hamilton","Shannon","Brock-Dawson","Stewart-Cobb","Delaney","Hawkins","Tyson","Cooper","Morgan-Walsh","Moriyama","Katsuyoshi","Yorikane","Ryu","Rokuda","Hideaki","Sano","Morita","Takamasa","Urushido","Sharaku","Fukuma-Tatsuki","Nishikiri-Kei","Mitsue-Sakae","Hashimoto","Sakamoto","Katagiri","Asari","Kojima-Kazumi","Senri","Gorbunov","Garanin","Lukyanov","Kovalevsky","Nabatov","Zhutov","Volodin","Mirnov","Yermushin","Kulikov","Zhen Chen","Xian Hua","Fan Yimu","Duan Qigang","Liang Jun","Geng Guanyu","Huang Luoyang","Xie Fang","Lian Xiuying","Zhu Da","Bhadrakali","Damayanti","Bumati","Karnavati","Indira","Lavanya","Shruti","Archita","Shristi","Progressive","United","Universal","National","Global","Integrated","Tactical","International","Strategic","Networked","Industrial"],gq=["Aerospace","Agricultural","Automotive","Biotech","Cargo","Chemicals","Commtech","Communication","Computers","Consulting","Consumables","Corporation","Cosmetics","Cybernetics","Cybertech","Cybertronic","Defense","Delivery","Digital","Electric","Engineering","Entertainment","Express","Financials","Games","Genomics","Genotech","GmbH","Group","Healthcare","Incorporated","Industries","Instruments","Interactive","Investments","Laboratory","Logistics","Ltd","Machines","Management","Manufacturing","Mechatronic","MegaCorp","Motors","Nanotech","Products","Prototech","Radiotechnics","Research","Sciences","Security","Semiconductor","Services","Software","Solutions","Syndicate","Systems","Tacticals","Technologies","Transportation"],I0={Aerospace:"Space",Agricultural:"Agriculture",Automotive:"Automotive Industry",Biotech:"Biotechnology",Cargo:"Transport Services",Chemicals:"Chemical Industry",Commtech:"Telecommunications",Communication:"Telecommunications",Computers:"Computer Industry",Cosmetics:"Pharmaceutical Industry",Cybernetics:"Cybertechnology",Cybertech:"Cybertechnology",Cybertronic:"Cybertechnology",Defense:"Weapons and Ammunition",Delivery:"Courier Services",Electric:"Power Engineering",Entertainment:"Entertainment",Express:"Courier Services",Financials:"Financial Services",Games:"Computer Games",Genomics:"Genetics",Genotech:"Genetics",Healthcare:"Medical Services",Instruments:"Precision Industry",Interactive:"Media",Investments:"Financial Services",Laboratory:"Research and Development",Logistics:"Transport Services",Machines:"Machinery Industry",Mechatronic:"Cybertechnology",Motors:"Automotive Industry",Nanotech:"Nanotechnology",Research:"Research and Development",Sciences:"Research and Development",Security:"Security",Semiconductor:"Electronics",Software:"Software Development",Tacticals:"Military Services",Transportation:"Transport Services"},rh=["Agriculture","Clothing Industry","Automotive Industry","Aviation Industry","Biotechnology","Chemical Industry","Computer Games","Computer Industry","Construction","Courier Services","Cybertechnology","Education","Electronics","Power Engineering","Entertainment","Financial Services","Food Industry","Genetics","Information Services","Legal Services","Marine Industry","Machinery Industry","Media","Medical Services","Military Services","Mining","Municipal Services","Nanotechnology","Pharmaceutical Industry","Precision Industry","Psychotechnics","Research and Development","Robotics","Security","Software Development","Space Industry","Telecommunications","Transport Services","Waste Disposal","Weapons and Ammunition"],Qx=["They have developed a way to extend human life","They have an AI that possesses consciousness","They are developing a plan to take over administrative power","They are installing consumer tracking equipment in their products","They conduct experiments on unaware workers","They are able to eavesdrop and analyze any data transmission","They have developed a virus capable of destroying the entire Infosphere","They will use an unknown bacteriological weapon in an emergency situation","They have the ability to transfer knowledge directly into the mind","They are running a project to breed dangerous, genetically modified beasts","They are planning a hostile takeover of the remaining corporations from their market sector","They have bred clones of famous politicians and switched some of them","They are in possession of a mineral that can replace all known fuels","They have developed a miniaturized EMP weapon","They have software that broadcasts subliminal messages in their advertisements","They hide the fact of the mass extermination of one of their own arcologies","Most of their employees are androids","They use the bodies of their dead employees for secret experiments","They have built a secret base on the moon","They are responsible for a series of epidemics in various places around the world","They have made contact with an alien civilization in secret","They dump manufacturing waste in poorer neighbourhoods","Their official activities are a cover for narco-business","They harbour and support various eco-terrorist groups","They maintain groups of hackers who regularly attack the Infosphere","All their employees are brainwashed fanatics","They indiscriminately buy up all available works of art and antiques","No reliable information about them can be found anywhere","They have carried out tests of tactical nuclear weapons in populated neighbourhoods","They have tested chemical weapons in poorer parts of the city","Their official activities are a cover for human organ trafficking","Their employees are planning a bloody rebellion and intend to destroy the corporation from within","Their insane management is planning a worldwide apocalypse","The entire corporation is basically a religious sect","They have discovered traces of an ancient civilization and unknown technology","The corporation is run by an AI but no one on the staff or board knows about it","The corporation's board of directors is dead and a group of mercenaries are impersonating them","Employees' minds are uploaded to a corporate database after their death","They have developed nanotechnology, allowing them to produce any thing from any matter","They have developed technology to remotely control the human mind"],e2=["Technological resources","Financial resources","Military contacts","Influence in hacker groups","Media credibility","Trust of ordinary people","Smuggler contacts","Control of city gangs","Influence in government institutions","Scientific laboratories","Drug trafficking control","Media control","Control over police and municipal services","Influence in religious sects","Intelligence capabilities","Contacts among runners","Influence among arms dealers","Biotechnology resources","Landscape resources","Entertainment industry control"],t2=["Damage the competition","Discredit the competition publicly","Take control of a selected public domain","Maximize sales profits","Steal competitor data","Discredit a well-known politician","Force or persuade a well-known public figure to sign a contract","Reveal irregularities in government institutions","Prevent the disclosure of inconvenient truths about a corporation","Detect and eliminate traitors inside the corporation","Track down and recover an escaped employee","Acquire a competitor's employee","Put your spy on the management board of your competitors","Test the latest product directly on citizens","Introduce dangerous product into the market","Prevent a disaster caused by corporate experiments","Induce a controlled disaster","Discreetly contain an uncontrollable disaster within the corporation","Recover stolen data","Discreetly get rid of an inconvenient member of your own management"],r2=["Personal honour and sense of duty","The common good (of the corporation) is the highest value","What you can't see does not exist and everyone has many faces","A good servant must have good wages","One big family","It's just a job, nothing personal","Only the best reach the top","What you gain with your own hands is yours","The less you can be seen, the safer","Success is achieved with patience","The day of retribution will come","Everyone can have their profit","We consciously and responsibly create a better world","A place for everyone, everyone in their place","If one doesn't have what one likes...","United by a common enemy","Common vision","We are better than others","Clearly established rules","Let's talk about it"],yq=e=>{const t=Xo().filter(r=>r.id!==e);Ko(t)},bq=(e,t)=>{const r=O0(vq),a=O0(gq),s=[];if(Object.hasOwn(I0,a)){const c=Object.entries(I0).filter(d=>d[0]===a)[0][1];s.push(rh.indexOf(c))}const f=rs("1d3").total;for(;s.length<f;){const c=No(rh);s.indexOf(c)===-1&&s.push(c)}const v=No(Qx),h=[],n=rs("1d2").total;for(;h.length<n;){const c=No(e2);h.indexOf(c)===-1&&h.push(c)}const u=No(r2),o=No(t2),i={id:ti(),name:`${r} ${a}`,sectors:s.map(c=>t(`dictCorpoSector_${c.toString().padStart(3,"0")}`)),gossip:t(`dictCorpoGossip_${v.toString().padStart(3,"0")}`),resources:h.map(c=>t(`dictCorpoResources_${c.toString().padStart(3,"0")}`)),employeeProfile:t(`dictCorpoEmployeeProfile_${u.toString().padStart(3,"0")}`),objective:t(`dictCorpoObjective_${o.toString().padStart(3,"0")}`)},l=[...Xo(),i];return Ko(l),Ut(ns,l),i},wq=()=>{const e={};return rh.forEach((t,r)=>{e[`dictCorpoSector_${r.toString().padStart(3,"0")}`]=t}),Qx.forEach((t,r)=>{e[`dictCorpoGossip_${r.toString().padStart(3,"0")}`]=t}),e2.forEach((t,r)=>{e[`dictCorpoResources_${r.toString().padStart(3,"0")}`]=t}),t2.forEach((t,r)=>{e[`dictCorpoObjective_${r.toString().padStart(3,"0")}`]=t}),r2.forEach((t,r)=>{e[`dictCorpoEmployeeProfile_${r.toString().padStart(3,"0")}`]=t}),e},xq=(e,t)=>{const r={};return Object.values(e.trackData()).forEach(a=>{a.id!==t.id&&(r[a.id]=a)}),e.setTrackData(r),r},Cq=()=>{const e=lt();return{id:ti(),title:"new note",content:"",author:e?e.username:"???"}},Sq=(e,t)=>{const r={};return Object.values(e.noteData()).forEach(a=>{a.id!==t.id&&(r[a.id]=a)}),e.setNoteData(r),r},Eq=(e,t)=>{const r={};return Object.values(e.boardData()).forEach(a=>{a.id!==t.id&&(r[a.id]=a)}),e.setBoardData(r),r},_q=e=>({id:e?ti():"",name:"",player:"",background:"",bio:[0,0],psy:[0,0],inf:[0,0],hp:[0,0],armor:0,subscription:"bronze",credits:0,inventory:[],cybermods:[],cyberdeck:[],shared:!1,deprived:!1}),R0=e=>({id:ti(),name:e||"name",description:"description",activated:!1,need_activation:!1});function Dq(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k0(Object(r),!0).forEach(function(a){Dq(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k0(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}var Aq=(e,t,r)=>{for(var a of Object.keys(e)){var s;if(e[a]!==((s=t[a])!==null&&s!==void 0?s:r[a]))return!1}return!0},tn=e=>t=>{var r=e.defaultClassName,a=$0($0({},e.defaultVariants),t);for(var s in a){var f,v=(f=a[s])!==null&&f!==void 0?f:e.defaultVariants[s];if(v!=null){var h=v;typeof h=="boolean"&&(h=h===!0?"true":"false");var n=e.variantClassNames[s][h];n&&(r+=" "+n)}}for(var[u,o]of e.compoundVariants)Aq(u,a,e.defaultVariants)&&(r+=" "+o);return r},Nq=tn({defaultClassName:"_19g5abj0",variantClassNames:{type:{row:"_19g5abj1",column:"_19g5abj2"},center:{true:"_19g5abj3"},vcenter:{true:"_19g5abj4"},scrolled:{true:"_19g5abj5"}},defaultVariants:{type:"row",center:!1,vcenter:!1,scrolled:!1},compoundVariants:[]});const Tq=mt("<div></div>"),De=({children:e,type:t,center:r,vcenter:a,scrolled:s,style:f,title:v})=>(()=>{const h=Tq.cloneNode(!0);return cr(h,"title",v),Ve(h,e),Wt(n=>{const u=Nq({type:t,center:r,vcenter:a,scrolled:s}),o=f;return u!==n._v$&&ft(h,n._v$=u),n._v$2=gi(h,o,n._v$2),n},{_v$:void 0,_v$2:void 0}),h})();var Oq=tn({defaultClassName:"_1drlxrh0",variantClassNames:{align:{right:"_1drlxrh1",left:"_1drlxrh2",center:"_1drlxrh3"},size:{bigger:"_1drlxrh4",regular:"_1drlxrh5",middle:"_1drlxrh6",small:"_1drlxrh7",xsmall:"_1drlxrh8"},weight:{400:"_1drlxrh9",700:"_1drlxrha"},color:{primary:"_1drlxrhb",white:"_1drlxrhc",pink:"_1drlxrhd",blue:"_1drlxrhe",yellow:"_1drlxrhf",green:"_1drlxrhg"},clickable:{true:"_1drlxrhh"}},defaultVariants:{weight:400,color:"white",size:"regular",align:"left"},compoundVariants:[]});const Mq=mt("<div></div>"),Ie=({children:e,style:t,align:r,size:a,weight:s,color:f,ref:v,onClick:h,title:n})=>(()=>{const u=Mq.cloneNode(!0);Br(u,"click",h,!0);const o=v;return typeof o=="function"?Ki(o,u):v=u,cr(u,"title",n),Ve(u,e),Wt(i=>{const l=Oq({size:a,align:r,color:f,weight:s,clickable:h?!0:void 0}),c=t;return l!==i._v$&&ft(u,i._v$=l),i._v$2=gi(u,c,i._v$2),i},{_v$:void 0,_v$2:void 0}),u})();fn(["click"]);const Fq=Symbol(),L0=Object.getPrototypeOf,nh=new WeakMap,Pq=e=>e&&(nh.has(e)?nh.get(e):L0(e)===Object.prototype||L0(e)===Array.prototype),Bq=e=>Pq(e)&&e[Fq]||null,z0=(e,t=!0)=>{nh.set(e,t)};var Iq=Symbol(),$n=Symbol(),ih=Symbol(),Rq=Symbol(),To=Symbol(),U0=Symbol(),md=new WeakSet;function Pa(e){return md.add(e),e}var ah=e=>typeof e=="object"&&e!==null,kq=e=>ah(e)&&!md.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer),j0=new WeakMap,q0=1,H0=new WeakMap;function vd(e={}){if(!ah(e))throw new Error("object required");const t=j0.get(e);if(t)return t;let r=q0;const a=new Set,s=(l,c=++q0)=>{r!==c&&(r=c,a.forEach(d=>d(l,c)))},f=new Map,v=l=>{let c=f.get(l);return c||(c=(d,p)=>{const m=[...d];m[1]=[l,...m[1]],s(m,p)},f.set(l,c)),c},h=l=>{const c=f.get(l);return f.delete(l),c},n=(l,c)=>{const d=H0.get(c);if(d?.[0]===r)return d[1];const p=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return z0(p,!0),H0.set(c,[r,p]),Reflect.ownKeys(l).forEach(m=>{const g=Reflect.get(l,m,c);if(md.has(g))z0(g,!1),p[m]=g;else if(g instanceof Promise)if(To in g)p[m]=g[To];else{const b=g[U0]||g;Object.defineProperty(p,m,{get(){if(To in g)return g[To];throw b}})}else g?.[$n]?p[m]=g[ih]:p[m]=g}),Object.freeze(p),p},u=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e)),o={get(l,c,d){return c===Iq?r:c===$n?a:c===ih?n(l,d):c===Rq?o:Reflect.get(l,c,d)},deleteProperty(l,c){const d=Reflect.get(l,c),p=d?.[$n];p&&p.delete(h(c));const m=Reflect.deleteProperty(l,c);return m&&s(["delete",[c],d]),m},is:Object.is,canProxy:kq,set(l,c,d,p){var m;const g=Reflect.has(l,c),b=Reflect.get(l,c,p);if(g&&this.is(b,d))return!0;const y=b?.[$n];y&&y.delete(h(c)),ah(d)&&(d=Bq(d)||d);let w;return(m=Object.getOwnPropertyDescriptor(l,c))!=null&&m.set?w=d:d instanceof Promise?w=d.then(x=>(w[To]=x,s(["resolve",[c],x]),x)).catch(x=>{w[U0]=x,s(["reject",[c],x])}):d?.[$n]?(w=d,w[$n].add(v(c))):this.canProxy(d)?(w=vd(d),w[$n].add(v(c))):w=d,Reflect.set(l,c,w,p),s(["set",[c],d,b]),!0}},i=new Proxy(u,o);return j0.set(e,i),Reflect.ownKeys(e).forEach(l=>{const c=Object.getOwnPropertyDescriptor(e,l);c.get||c.set?Object.defineProperty(u,l,c):i[l]=e[l]}),i}function oh(e,t,r){let a;const s=[],f=v=>{if(s.push(v),r){t(s.splice(0));return}a||(a=Promise.resolve().then(()=>{a=void 0,t(s.splice(0))}))};return e[$n].add(f),()=>{e[$n].delete(f)}}function nl(e){return e[ih]}function $q(e,t){Object.keys(t).forEach(a=>{if(Object.getOwnPropertyDescriptor(e,a))throw new Error("object property already defined");const s=t[a],{get:f,set:v}=typeof s=="function"?{get:s}:s,h={};h.get=()=>f(nl(r)),v&&(h.set=n=>v(r,n)),Object.defineProperty(e,a,h)});const r=vd(e);return r}function Ua(e){var t,r,a;if(Array.isArray(e)){for(r=Array(t=e.length);t--;)r[t]=(a=e[t])&&typeof a=="object"?Ua(a):a;return r}if(Object.prototype.toString.call(e)==="[object Object]"){r={};for(t in e)t==="__proto__"?Object.defineProperty(r,t,{value:Ua(e[t]),configurable:!0,enumerable:!0,writable:!0}):r[t]=(a=e[t])&&typeof a=="object"?Ua(a):a;return r}return e}var Lq=Object.defineProperty,zq=(e,t,r)=>t in e?Lq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ue=(e,t,r)=>(zq(e,typeof t!="symbol"?t+"":t,r),r);function Uq(e){for(;e.length>0;)e.pop();return e}var V0=(e,...t)=>{const r=typeof e=="function"?e(...t):e;return r??void 0},Un=e=>e,cf=()=>{},jq=(()=>{let e=0;return()=>(e++,e.toString(36))})(),Vo=e=>Array.isArray(e),ja=e=>!(e==null||typeof e!="object"||Vo(e)),qq=e=>typeof e=="number"&&!Number.isNaN(e),Sn=e=>typeof e=="string",il=e=>typeof e=="function";function al(e){return e===void 0?e:Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0).map(([t,r])=>[t,ja(r)?al(r):r]))}function ff(...e){const t=e.length===1?e[0]:e[1],r=e.length===2?e[0]:!0}function Cu(...e){const t=e.length===1?e[0]:e[1],r=e.length===2?e[0]:!0}function n2(e,...t){for(const r of t){const a=al(r);for(const s in a)ja(r[s])?(e[s]||(e[s]={}),n2(e[s],r[s])):e[s]=r[s]}return e}function Dr(e){return Sn(e)?{type:e}:e}function fi(e){return e?Vo(e)?e.slice():[e]:[]}function i2(e){return ja(e)&&e.predicate!=null}function G0(e,t,r,a){let s=Reflect.get(nl(e),t);return oh(e,()=>{const f=nl(e);Object.is(s,f[t])||(r(f[t]),s=Reflect.get(f,t))},a)}var Hq=()=>!0;function gd(e,t,r,a){return s=>{var f;return Sn(s)?!!((f=e[s])!=null&&f.call(e,t,r,a)):il(s)?s(t,r,a):s.predicate(e)(t,r,a)}}function Vq(...e){return{predicate:t=>(r,a,s)=>e.map(gd(t,r,a,s)).some(Boolean)}}function Gq(...e){return{predicate:t=>(r,a,s)=>e.map(gd(t,r,a,s)).every(Boolean)}}function Wq(e){return{predicate:t=>(r,a,s)=>!gd(t,r,a,s)(e)}}function Yq(...e){return(t,r,a)=>a.state.matches(...e)}var Xq={or:Vq,and:Gq,not:Wq,stateIn:Yq};function a2(e,t){return e=e??Hq,(r,a,s)=>{if(Sn(e)){const f=t[e];return il(f)?f(r,a,s):f}return i2(e)?e.predicate(t)(r,a,s):e?.(r,a,s)}}function hf(e,t){return(r,a,s)=>i2(e)?e.predicate(t)(r,a,s):e}function Kq(e){var t,r;const a=(t=e.computed)!=null?t:Un({}),s=(r=e.context)!=null?r:Un({}),f=vd({value:"",previousValue:"",event:Un({}),previousEvent:Un({}),context:$q(s,a),done:!1,tags:[],hasTag(v){return this.tags.includes(v)},matches(...v){return v.includes(this.value)},can(v){return Un(this).nextEvents.includes(v)},get nextEvents(){var v,h,n,u;const o=(n=(h=(v=e.states)==null?void 0:v[this.value])==null?void 0:h.on)!=null?n:{},i=(u=e?.on)!=null?u:{};return Object.keys({...o,...i})},get changed(){return this.event.value==="machine.init"||!this.previousValue?!1:this.value!==this.previousValue}});return Un(f)}function fu(e,t){return(r,a)=>{if(qq(e))return e;if(il(e))return e(r,a);if(Sn(e)){const s=Number.parseFloat(e);if(!Number.isNaN(s))return s;if(t){const f=t?.[e];return Cu(f==null,`[@zag-js/core > determine-delay] Cannot determine delay for \`${e}\`. It doesn't exist in \`options.delays\``),il(f)?f(r,a):f}}}}function Jq(e){return Sn(e)?{target:e}:e}function Zq(e,t){return(r,a,s)=>fi(e).map(Jq).find(f=>{var v;const n=a2(f.guard,t)(r,a,s);return(v=n??f.target)!=null?v:f.actions})}var o2=class{constructor(e,t){Ue(this,"status","Not Started"),Ue(this,"state"),Ue(this,"initialState"),Ue(this,"id"),Ue(this,"type","machine"),Ue(this,"activityEvents",new Map),Ue(this,"delayedEvents",new Map),Ue(this,"stateListeners",new Set),Ue(this,"contextListeners",new Set),Ue(this,"eventListeners",new Set),Ue(this,"doneListeners",new Set),Ue(this,"contextWatchers",new Set),Ue(this,"removeStateListener",cf),Ue(this,"removeEventListener",cf),Ue(this,"removeContextListener",cf),Ue(this,"parent"),Ue(this,"children",new Map),Ue(this,"guardMap"),Ue(this,"actionMap"),Ue(this,"delayMap"),Ue(this,"activityMap"),Ue(this,"sync"),Ue(this,"options"),Ue(this,"config"),Ue(this,"start",p=>{if(this.status==="Running")return this;this.status="Running",this.removeStateListener=oh(this.state,()=>{this.stateListeners.forEach(x=>{x(this.stateSnapshot)})},this.sync),this.removeEventListener=G0(this.state,"event",x=>{this.executeActions(this.config.onEvent,x),this.eventListeners.forEach(C=>{C(x)})},this.sync),this.removeContextListener=oh(this.state.context,()=>{this.log("Context:",this.contextSnapshot),this.contextListeners.forEach(x=>{x(this.contextSnapshot)})},this.sync||this.options.debug),this.setupContextWatchers(),this.executeActivities(Dr("machine.start"),fi(this.config.activities),"machine.start"),this.executeActions(this.config.entry,Dr("machine.start"));const m=Dr("machine.init"),g=ja(p)?p.value:p,b=ja(p)?p.context:void 0;b&&this.setContext(b);const y={target:g??this.config.initial},w=this.getNextStateInfo(y,m);return this.initialState=w,this.performStateChangeEffects(this.state.value,w,m),this}),Ue(this,"setupContextWatchers",()=>{var p;for(const[m,g]of Object.entries((p=this.config.watch)!=null?p:{}))this.contextWatchers.add(G0(this.state.context,m,()=>{this.executeActions(g,this.state.event)}))}),Ue(this,"stop",()=>{if(this.status!=="Stopped")return this.performExitEffects(this.state.value,Dr("machine.stop")),this.executeActions(this.config.exit,Dr("machine.stop")),this.setState(""),this.setEvent("machine.stop"),this.stopStateListeners(),this.stopChildren(),this.stopActivities(),this.stopDelayedEvents(),this.stopContextWatchers(),this.stopEventListeners(),this.stopContextListeners(),this.status="Stopped",this}),Ue(this,"stopEventListeners",()=>{this.eventListeners.clear(),this.removeEventListener()}),Ue(this,"stopContextListeners",()=>{this.contextListeners.clear(),this.removeContextListener()}),Ue(this,"stopStateListeners",()=>{this.removeStateListener(),this.stateListeners.clear()}),Ue(this,"stopContextWatchers",()=>{this.contextWatchers.forEach(p=>p()),this.contextWatchers.clear()}),Ue(this,"stopDelayedEvents",()=>{this.delayedEvents.forEach(p=>{p.forEach(m=>m())}),this.delayedEvents.clear()}),Ue(this,"stopActivities",p=>{var m,g;p?((m=this.activityEvents.get(p))==null||m.forEach(b=>b()),(g=this.activityEvents.get(p))==null||g.clear(),this.activityEvents.delete(p)):(this.activityEvents.forEach(b=>{b.forEach(y=>y()),b.clear()}),this.activityEvents.clear())}),Ue(this,"sendChild",(p,m)=>{const g=Dr(p),b=V0(m,this.contextSnapshot),y=this.children.get(b);y||Cu(`[@zag-js/core] Cannot send '${g.type}' event to unknown child`),y.send(g)}),Ue(this,"stopChild",p=>{this.children.has(p)||Cu(`[@zag-js/core > stop-child] Cannot stop unknown child ${p}`),this.children.get(p).stop(),this.children.delete(p)}),Ue(this,"removeChild",p=>{this.children.delete(p)}),Ue(this,"stopChildren",()=>{this.children.forEach(p=>p.stop()),this.children.clear()}),Ue(this,"setParent",p=>{this.parent=p}),Ue(this,"spawn",(p,m)=>{const g=V0(p);return m&&(g.id=m),g.type="machine.actor",g.setParent(this),this.children.set(g.id,Un(g)),g.onDone(()=>{this.removeChild(g.id)}).start(),Un(Pa(g))}),Ue(this,"addActivityCleanup",(p,m)=>{var g;!p||(this.activityEvents.has(p)?(g=this.activityEvents.get(p))==null||g.add(m):this.activityEvents.set(p,new Set([m])))}),Ue(this,"setState",p=>{this.state.previousValue=this.state.value,this.state.value=p;const m=this.getStateNode(p);p==null?Uq(this.state.tags):this.state.tags=fi(m?.tags)}),Ue(this,"setContext",p=>{!p||n2(this.state.context,p)}),Ue(this,"withContext",p=>{const m={...this.config.context,...al(p)};return new o2({...this.config,context:m},this.options)}),Ue(this,"setOptions",p=>{const m=al(p);this.actionMap={...this.actionMap,...m.actions},this.delayMap={...this.delayMap,...m.delays},this.activityMap={...this.activityMap,...m.activities},this.guardMap={...this.guardMap,...m.guards}}),Ue(this,"getStateNode",p=>{var m;if(!!p)return(m=this.config.states)==null?void 0:m[p]}),Ue(this,"getNextStateInfo",(p,m)=>{var g;const b=this.determineTransition(p,m),y=!b?.target,w=(g=b?.target)!=null?g:this.state.value,x=this.state.value!==w,C=this.getStateNode(w),E={reenter:!y&&!x&&!b?.internal,transition:b,stateNode:C,target:w,changed:x};return this.log("NextState:",`[${m.type}]`,this.state.value,"---->",E.target),E}),Ue(this,"getActionFromDelayedTransition",p=>{const m=Dr("machine.after"),b=fu(p.delay,this.delayMap)(this.contextSnapshot,m);let y;return{entry:()=>{y=globalThis.setTimeout(()=>{const w=this.getNextStateInfo(p,m);this.performStateChangeEffects(this.state.value,w,m)},b)},exit:()=>{globalThis.clearTimeout(y)}}}),Ue(this,"getDelayedEventActions",p=>{const m=this.getStateNode(p),g=Dr("machine.after");if(!m||!m.after)return;const b=[],y=[];if(Vo(m.after)){const w=this.determineTransition(m.after,g);if(!w)return;const x=this.getActionFromDelayedTransition(w);b.push(x.entry),y.push(x.exit)}else if(ja(m.after))for(const w in m.after){const x=m.after[w];let C={};if(Vo(x)){const E=this.determineTransition(x,g);E&&(C=E)}else Sn(x)?C={target:x,delay:w}:C={...x,delay:w};const S=this.getActionFromDelayedTransition(C);b.push(S.entry),y.push(S.exit)}return{entries:b,exits:y}}),Ue(this,"executeActions",(p,m)=>{var g;const b=hf(p,this.guardMap)(this.contextSnapshot,m,this.guardMeta);for(const y of fi(b)){const w=Sn(y)?(g=this.actionMap)==null?void 0:g[y]:y;ff(Sn(y)&&!w,`[@zag-js/core > execute-actions] No implementation found for action: \`${y}\``),w?.(this.state.context,m,this.meta)}}),Ue(this,"executeActivities",(p,m,g)=>{var b;for(const y of m){const w=Sn(y)?(b=this.activityMap)==null?void 0:b[y]:y;if(!w){ff(`[@zag-js/core > execute-activity] No implementation found for activity: \`${y}\``);continue}const x=w(this.state.context,p,this.meta);x&&this.addActivityCleanup(g??this.state.value,x)}}),Ue(this,"createEveryActivities",(p,m)=>{if(!p)return;const g=Dr("machine.every");if(Vo(p)){const b=fi(p).find(C=>{const S=C.delay,A=fu(S,this.delayMap)(this.contextSnapshot,g),M=a2(C.guard,this.guardMap)(this.contextSnapshot,g,this.guardMeta);return M??A!=null});if(!b)return;const w=fu(b.delay,this.delayMap)(this.contextSnapshot,g);m(()=>{const C=globalThis.setInterval(()=>{this.executeActions(b.actions,g)},w);return()=>{globalThis.clearInterval(C)}})}else for(const b in p){const y=p?.[b],x=fu(b,this.delayMap)(this.contextSnapshot,g);m(()=>{const S=globalThis.setInterval(()=>{this.executeActions(y,g)},x);return()=>{globalThis.clearInterval(S)}})}}),Ue(this,"setEvent",p=>{this.state.previousEvent=this.state.event,this.state.event=Pa(Dr(p))}),Ue(this,"performExitEffects",(p,m)=>{const g=this.state.value;if(g==="")return;const b=p?this.getStateNode(p):void 0;this.stopActivities(g);const y=hf(b?.exit,this.guardMap)(this.contextSnapshot,m,this.guardMeta),w=fi(y),x=this.delayedEvents.get(g);x&&w.push(...x),this.executeActions(w,m),this.eventListeners.clear()}),Ue(this,"performEntryEffects",(p,m)=>{const g=this.getStateNode(p),b=fi(g?.activities);this.createEveryActivities(g?.every,C=>{b.unshift(C)}),b.length>0&&this.executeActivities(m,b);const y=hf(g?.entry,this.guardMap)(this.contextSnapshot,m,this.guardMeta),w=fi(y),x=this.getDelayedEventActions(p);g?.after&&x&&(this.delayedEvents.set(p,x?.exits),w.push(...x.entries)),this.executeActions(w,m),g?.type==="final"&&(this.state.done=!0,this.doneListeners.forEach(C=>{C(this.stateSnapshot)}),this.stop())}),Ue(this,"performTransitionEffects",(p,m)=>{const g=this.determineTransition(p,m);this.executeActions(g?.actions,m)}),Ue(this,"performStateChangeEffects",(p,m,g)=>{this.setEvent(g);const b=m.changed||m.reenter;b&&this.performExitEffects(p,g),this.performTransitionEffects(m.transition,g),this.setState(m.target),b&&this.performEntryEffects(m.target,g)}),Ue(this,"determineTransition",(p,m)=>{const g=Zq(p,this.guardMap);return g?.(this.contextSnapshot,m,this.guardMeta)}),Ue(this,"sendParent",p=>{var m;this.parent||Cu("[@zag-js/core > send-parent] Cannot send event to an unknown parent");const g=Dr(p);(m=this.parent)==null||m.send(g)}),Ue(this,"log",(...p)=>{}),Ue(this,"send",p=>{const m=Dr(p);this.transition(this.state.value,m)}),Ue(this,"transition",(p,m)=>{var g,b,y;const w=Sn(p)?this.getStateNode(p):p?.stateNode,x=Dr(m);if(!w&&!this.config.on){const E=this.status==="Stopped"?"[@zag-js/core > transition] Cannot transition a stopped machine":`[@zag-js/core > transition] State does not have a definition for \`state\`: ${p}, \`event\`: ${x.type}`;ff(E);return}const C=(y=(g=w?.on)==null?void 0:g[x.type])!=null?y:(b=this.config.on)==null?void 0:b[x.type],S=this.getNextStateInfo(C,x);return this.performStateChangeEffects(this.state.value,S,x),S.stateNode}),Ue(this,"subscribe",p=>(this.stateListeners.add(p),this.status==="Running"&&p(this.stateSnapshot),()=>{this.stateListeners.delete(p)})),Ue(this,"onDone",p=>(this.doneListeners.add(p),this)),Ue(this,"onTransition",p=>(this.stateListeners.add(p),this.status==="Running"&&p(this.stateSnapshot),this)),Ue(this,"onChange",p=>(this.contextListeners.add(p),this)),Ue(this,"onEvent",p=>(this.eventListeners.add(p),this));var r,a,s,f,v,h,n,u,o,i,l,c;this.config=Ua(e),this.options=Ua(t??{}),this.id=(r=this.config.id)!=null?r:`machine-${jq()}`,this.guardMap=(s=(a=this.options)==null?void 0:a.guards)!=null?s:{},this.actionMap=(v=(f=this.options)==null?void 0:f.actions)!=null?v:{},this.delayMap=(n=(h=this.options)==null?void 0:h.delays)!=null?n:{},this.activityMap=(o=(u=this.options)==null?void 0:u.activities)!=null?o:{},this.sync=(l=(i=this.options)==null?void 0:i.sync)!=null?l:!1,this.state=Kq(this.config);const d=Dr("machine.created");this.executeActions((c=this.config)==null?void 0:c.created,d)}get stateSnapshot(){return Un(nl(this.state))}getState(){return Ua(this.stateSnapshot)}get contextSnapshot(){return this.stateSnapshot.context}get self(){const e=this;return{id:this.id,send:this.send.bind(this),sendParent:this.sendParent.bind(this),sendChild:this.sendChild.bind(this),stop:this.stop.bind(this),stopChild:this.stopChild.bind(this),spawn:this.spawn.bind(this),get state(){return e.stateSnapshot}}}get meta(){return{state:this.stateSnapshot,guards:this.guardMap,send:this.send.bind(this),self:this.self,getState:()=>this.stateSnapshot,getAction:e=>this.actionMap[e],getGuard:e=>this.guardMap[e]}}get guardMeta(){return{state:this.stateSnapshot}}get[Symbol.toStringTag](){return"Machine"}},Ql=(e,t)=>new o2(e,t),W0=e=>e?"":void 0,Qq=(e,...t)=>{const r=typeof e=="function"?e(...t):e;return r??void 0},eH=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s2=()=>typeof window<"u";function tH(){var e;const t=navigator.userAgentData;return(e=t?.platform)!=null?e:navigator.platform}var u2=e=>s2()&&e.test(tH()),rH=()=>s2()&&!!navigator.maxTouchPoints,nH=()=>u2(/^Mac/)&&!rH,iH=()=>u2(/mac|iphone|ipad|ipod/i),l2=()=>iH()&&!nH();function aH(e){return e.nodeType===Node.DOCUMENT_NODE}function oH(e){return e?.toString()==="[object Window]"}function sH(e){var t;return oH(e)?e.document:aH(e)?e:(t=e?.ownerDocument)!=null?t:document}function uH(e){const t={getRootNode:r=>{var a,s;return(s=(a=r.getRootNode)==null?void 0:a.call(r))!=null?s:document},getDoc:r=>sH(t.getRootNode(r)),getWin:r=>{var a;return(a=t.getDoc(r).defaultView)!=null?a:window},getActiveElement:r=>t.getDoc(r).activeElement,getById:(r,a)=>t.getRootNode(r).getElementById(a),createEmitter:(r,a)=>{const s=t.getWin(r);return function(v,h,n){const{bubbles:u=!0,cancelable:o,composed:i=!0}=n??{},l=`zag:${v}`,c={bubbles:u,cancelable:o,composed:i,detail:h},d=new s.CustomEvent(l,c);a.dispatchEvent(d)}},createListener:r=>function(s,f){const v=`zag:${s}`,h=n=>f(n);return r.addEventListener(v,h),()=>r.removeEventListener(v,h)}};return{...t,...e}}function Oo(e,t){return e?e===t||ol(e)&&ol(t)&&e.contains(t):!1}function ol(e){return typeof e=="object"&&e?.nodeType===Node.ELEMENT_NODE&&typeof e?.nodeName=="string"}function lH(e){return e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}function cH(e){return e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType}function hu(e){var t;return(t=e.nativeEvent)!=null?t:e}var fH=e=>eH(e,"current");function ji(e,t,r,a){const s=fH(e)?e.current:Qq(e);return s?.addEventListener(t,r,a),()=>{s?.removeEventListener(t,r,a)}}function hH(e){const t=new Set;function r(a){const s=globalThis.requestAnimationFrame(a);t.add(()=>globalThis.cancelAnimationFrame(s))}return r(()=>r(e)),function(){t.forEach(function(s){s()})}}var Ba="default",sh="",Su=new WeakMap;function dH({target:e,doc:t}={}){const r=t??document;return l2()?(Ba==="default"&&(sh=r.documentElement.style.webkitUserSelect,r.documentElement.style.webkitUserSelect="none"),Ba="disabled"):e&&(Su.set(e,e.style.userSelect),e.style.userSelect="none"),()=>c2({target:e,doc:r})}function c2({target:e,doc:t}={}){const r=t??document;if(l2()){if(Ba!=="disabled")return;Ba="restoring",setTimeout(()=>{hH(()=>{Ba==="restoring"&&(r.documentElement.style.webkitUserSelect==="none"&&(r.documentElement.style.webkitUserSelect=sh||""),sh="",Ba="default")})},300)}else if(e&&Su.has(e)){let a=Su.get(e);e.style.userSelect==="none"&&(e.style.userSelect=a??""),e.getAttribute("style")===""&&e.removeAttribute("style"),Su.delete(e)}}var jn=uH({getPressableId:e=>`pressable:${e.id}`,getPressableEl:e=>jn.getById(e,jn.getPressableId(e))}),Vr={isValidKeyboardEvent(e){const{key:t,target:r}=e,a=r,{tagName:s,isContentEditable:f}=a,v=a.getAttribute("role");return s!=="INPUT"&&s!=="TEXTAREA"&&f?!1:(t==="Enter"||t===" ")&&(!Vr.isHTMLAnchorLink(a)||v==="button"&&t!=="Enter")&&!(v==="link"&&t!=="Enter")},isHTMLAnchorLink(e){return e.tagName==="A"&&e.hasAttribute("href")},shouldPreventDefaultKeyboard(e){return!((e.tagName==="INPUT"||e.tagName==="BUTTON")&&e.type==="submit")},shouldPreventDefault(e){return!ol(e)||!e.draggable},isOverTarget(e,t){if(!t)return;let r=t.getBoundingClientRect(),a=Vr.getPointClientRect(e);return Vr.areRectanglesOverlapping(r,a)},getPointClientRect(e){let t=e.width?e.width/2:e.radiusX||0,r=e.height?e.height/2:e.radiusY||0;return{top:e.clientY-r,right:e.clientX+t,bottom:e.clientY+r,left:e.clientX-t}},areRectanglesOverlapping(e,t){return!(e.left>t.right||t.left>e.right||e.top>t.bottom||t.top>e.bottom)}};function pH(e,t,r){const a=e.hasTag("pressed"),s=e.context.disabled;return{isPressed:a,pressableProps:r.element({id:jn.getPressableId(e.context),"data-disabled":W0(s),"data-pressed":W0(a),onKeyDown(f){const v=hu(f);!Vr.isValidKeyboardEvent(v)||!Oo(f.currentTarget,f.target)||(f.repeat||t({type:"KEY_DOWN",event:f,pointerType:"keyboard"}),Vr.shouldPreventDefaultKeyboard(f.target)&&f.preventDefault())},onKeyUp(f){const v=hu(f);!Vr.isValidKeyboardEvent(v)||f.repeat||!Oo(f.currentTarget,f.target)||t({type:"KEY_UP",event:f,pointerType:"keyboard"})},onClick(f){const v=hu(f);if(!Oo(f.currentTarget,f.target)||f.button!==0)return;const h=e.context;h.disabled&&f.preventDefault();const n=h.pointerType==="virtual"||cH(v);!h.ignoreClickAfterPress&&n&&t({type:"CLICK",event:f,pointerType:"virtual"})},onPointerDown(f){if(e.context.disabled||f.button!==0||!Oo(f.currentTarget,f.target))return;Vr.shouldPreventDefault(f.currentTarget)&&f.preventDefault();const v=hu(f),h=lH(v)?"virtual":f.pointerType;t({type:"POINTER_DOWN",event:f,pointerType:h})},onPointerUp(f){f.button===0&&(!Oo(f.currentTarget,f.target)||e.context.pointerType!=="virtual"&&t({type:"POINTER_UP",event:f}))},onMouseDown(f){f.button===0&&Vr.shouldPreventDefault(f.currentTarget)&&f.preventDefault()},onDragStart(f){t({type:"DRAG_START",event:f})}})}}var mH=e=>Array.isArray(e),vH=e=>!(e==null||typeof e!="object"||mH(e));function f2(e){return e===void 0?e:Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0).map(([t,r])=>[t,vH(r)?f2(r):r]))}function gH(e){const t=f2(e);return Ql({id:"pressable",initial:"unknown",context:{...t,ignoreClickAfterPress:!1,activePointerId:null,target:null,pointerType:null,pointerdownEvent:null,cleanups:Pa([]),wasPressedDown:!1},exit:["restoreTextSelection","removeDocumentListeners"],states:{unknown:{on:{SETUP:"idle"}},idle:{entry:["removeDocumentListeners","resetContext","restoreTextSelection","resetIgnoreClick"],on:{POINTER_DOWN:[{guard:"isVirtualPointerEvent",actions:"setPointerType"},{target:"pressed:in",actions:["setPressedDown","setPointerType","setPointerId","setTarget","focusIfNeeded","disableTextSelection","invokeOnPressStart","trackDocumentPointerEvents"]}],KEY_DOWN:{target:"pressed:in",actions:["setTarget","invokeOnPressStart","trackDocumentKeyup"]},CLICK:{actions:["focusIfNeeded","invokeOnPressStart","invokeOnPressUp","invokeOnPressEnd","resetIgnoreClick"]}}},"pressed:in":{tags:"pressed",exit:"clearPressedDown",entry:"preventContextMenu",after:{500:{guard:"wasPressedDown",actions:"invokeOnLongPress"}},on:{POINTER_LEAVE:[{guard:"cancelOnPointerExit",target:"idle",actions:"invokeOnPressEnd"},{target:"pressed:out",actions:"invokeOnPressEnd"}],DOC_POINTER_UP:{target:"idle",actions:["invokeOnPressUp","invokeOnPressEnd","invokeOnPress"]},DOC_KEY_UP:{target:"idle",actions:["invokeOnPressEnd","triggerClick"]},KEY_UP:{target:"idle",actions:"invokeOnPressUp"},DOC_POINTER_CANCEL:"idle",DRAG_START:"idle"}},"pressed:out":{on:{POINTER_ENTER:{target:"pressed:in",actions:"invokeOnPressStart"},DOC_POINTER_UP:{target:"idle",actions:"invokeOnPressEnd"},DOC_POINTER_CANCEL:"idle",DRAG_START:"idle"}}}},{guards:{isVirtualPointerEvent:(r,a)=>a.pointerType==="virtual",cancelOnPointerExit:r=>!!r.cancelOnPointerExit,wasPressedDown:r=>r.wasPressedDown},actions:{trackDocumentPointerEvents(r,a,{send:s}){const f=jn.getDoc(r),v=o=>{if(o.pointerId!==r.activePointerId)return;const i=Vr.isOverTarget(o,r.target);s({type:i?"POINTER_ENTER":"POINTER_LEAVE",event:o})},h=o=>{o.pointerId!==r.activePointerId||o.button!==0||s({type:"DOC_POINTER_UP",event:o})},n=o=>{s({type:"DOC_POINTER_CANCEL",event:o})},u=[ji(f,"pointermove",v,!1),ji(f,"pointerup",h,!1),ji(f,"pointercancel",n,!1)];r.pointerType!=="touch"&&u.push(ji(f,"contextmenu",n,!1)),r.cleanups.push(...u)},trackDocumentKeyup(r,a,{send:s}){const f=jn.getDoc(r),h=ji(f,"keyup",n=>{!Vr.isValidKeyboardEvent(n)||(Vr.shouldPreventDefaultKeyboard(n.target)&&n.preventDefault(),s({type:"DOC_KEY_UP",event:n}))},!1);r.cleanups.push(h)},removeDocumentListeners(r){r.cleanups.forEach(a=>a?.()),r.cleanups=Pa([])},resetContext(r){r.activePointerId=null,r.pointerType=null,r.pointerdownEvent=null},restoreTextSelection(r){r.allowTextSelectionOnPress||!r.target||c2({target:r.target,doc:jn.getDoc(r)})},setPointerToVirtual(r){r.pointerType="virtual"},setPointerType(r,{event:a}){r.pointerType=a.pointerType},setPointerId(r,{event:a}){r.activePointerId=a.pointerId,r.pointerdownEvent=Pa(a)},setTarget(r,{event:a}){r.target=Pa(a.currentTarget)},focusIfNeeded(r,{event:a}){r.disabled||r.preventFocusOnPress||a.currentTarget.focus({preventScroll:!0})},invokeOnPressStart(r,a){var s;if(r.disabled)return;let{event:f,pressEvent:v,pointerType:h}=a;const n=v||f;(s=r.onPressStart)==null||s.call(r,{type:"pressstart",pointerType:h||r.pointerType,target:n.currentTarget,originalEvent:n})},disableTextSelection(r){!r.target||r.allowTextSelectionOnPress||dH({target:r.target,doc:jn.getDoc(r)})},invokeOnPressUp(r,{event:a,pointerType:s}){var f;r.disabled||(f=r.onPressUp)==null||f.call(r,{type:"pressup",pointerType:s||r.pointerType,target:a.currentTarget,originalEvent:a})},invokeOnPressEnd(r,{event:a,pointerType:s}){var f;r.ignoreClickAfterPress=!0,(f=r.onPressEnd)==null||f.call(r,{type:"pressend",pointerType:s||r.pointerType,target:a.currentTarget,originalEvent:a})},invokeOnPress(r,{event:a,pointerType:s}){var f;r.disabled||(f=r.onPress)==null||f.call(r,{type:"press",pointerType:s||r.pointerType,target:a.currentTarget,originalEvent:a})},triggerClick(r,{event:a}){let s=a.target;if(!ol(r.target))return;const f=Vr.isHTMLAnchorLink(r.target)||r.target.getAttribute("role")==="link";r.target.contains(s)&&f&&r.target.click()},dispatchPointerCancel(r){if(!r.target)return;const a=jn.getWin(r),s=new a.PointerEvent("pointercancel",{bubbles:!0});r.target.dispatchEvent(s)},invokeOnLongPress(r,{pointerType:a}){var s;!r.target||(s=r.onLongPress)==null||s.call(r,{type:"longpress",pointerType:a||r.pointerType,target:r.target,originalEvent:r.pointerdownEvent})},resetIgnoreClick(r){r.ignoreClickAfterPress=!1},setPressedDown(r){r.wasPressedDown=!0},clearPressedDown(r){r.wasPressedDown=!1},preventContextMenu(r){if(r.pointerType!=="touch"||!r.onLongPress)return;const a=v=>v.preventDefault(),s=ji(r.target,"contextmenu",a,{once:!0}),f=()=>void setTimeout(s,30);ji(jn.getWin(r),"pointerup",f,{once:!0})}}})}function yH(e){return new Proxy({},{get(){return e}})}var bH=/[A-Z]/g,wH=/^ms-/,df={};function xH(e){return"-"+e.toLowerCase()}function CH(e){if(df.hasOwnProperty(e))return df[e];var t=e.replace(bH,xH);return df[e]=wH.test(t)?"-"+t:t}var SH=e=>Array.isArray(e),EH=e=>!(e==null||typeof e!="object"||SH(e)),_H=e=>typeof e=="number"&&!Number.isNaN(e),h2=e=>typeof e=="string",DH=e=>e.startsWith("--")?e:CH(e);function AH(e){let t={};for(const r in e){const a=e[r];!h2(a)&&!_H(a)||(t[DH(r)]=a)}return t}var Y0={onFocus:"onFocusIn",onBlur:"onFocusOut",onDoubleClick:"onDblClick",onChange:"onInput",defaultChecked:"checked",defaultValue:"value",htmlFor:"for",className:"class"};function NH(e){return e in Y0?Y0[e]:e}var ec=yH(e=>{const t={};for(const r in e){const a=e[r];if(r==="style"&&EH(a)){t.style=AH(a);continue}if(r==="children"){h2(a)&&(t.textContent=a);continue}t[NH(r)]=a}return t});function TH(e,t){const{actions:r,state:a,context:s}=t??{},f=(()=>{const v=typeof e=="function"?e():e;return s?v.withContext(s):v})();return Gy(()=>{f.start(a),f.state.can("SETUP")&&f.send("SETUP"),as(()=>{f.stop()})}),Ir(()=>{f.setContext(s)}),Ir(()=>{f.setOptions({actions:r})}),f}function tc(e,t){const r=TH(e,t),[a,s]=bh(r.getState());return Gy(()=>{const f=r.subscribe(v=>{s($S(v))});as(()=>{f()})}),[a,r.send,r]}var OH=tn({defaultClassName:"jyd7nb0",variantClassNames:{size:{bigger:"jyd7nb1",standard:"jyd7nb2",small:"jyd7nb3"},noupper:{true:"jyd7nb4"},border:{standard:"jyd7nb5",underline:"jyd7nb6",none:"jyd7nb7"},color:{green:"jyd7nb8",ghost:"jyd7nb9",filled:"jyd7nba"}},defaultVariants:{size:"standard",border:"standard",color:void 0,noupper:void 0},compoundVariants:[]});const MH=mt("<button></button>"),Le=({children:e,onClick:t,noupper:r,size:a,border:s,color:f,style:v,title:h,ref:n})=>{const[u,o]=tc(gH({id:bl(),onPress:t})),i=Re(()=>pH(u,o,ec));return(()=>{const l=MH.cloneNode(!0),c=n;return typeof c=="function"?Ki(c,l):n=l,Nr(l,Ar(()=>i().pressableProps,{get class(){return OH({noupper:r,size:a,border:s,color:f})},style:v,title:h}),!1,!0),Ve(l,e),l})()};function Co(e){return e.split("-")[0]}function Cs(e){return e.split("-")[1]}function Ss(e){return["top","bottom"].includes(Co(e))?"x":"y"}function yd(e){return e==="y"?"height":"width"}function X0(e,t,r){let{reference:a,floating:s}=e;const f=a.x+a.width/2-s.width/2,v=a.y+a.height/2-s.height/2,h=Ss(t),n=yd(h),u=a[n]/2-s[n]/2,o=Co(t),i=h==="x";let l;switch(o){case"top":l={x:f,y:a.y-s.height};break;case"bottom":l={x:f,y:a.y+a.height};break;case"right":l={x:a.x+a.width,y:v};break;case"left":l={x:a.x-s.width,y:v};break;default:l={x:a.x,y:a.y}}switch(Cs(t)){case"start":l[h]-=u*(r&&i?-1:1);break;case"end":l[h]+=u*(r&&i?-1:1);break}return l}const FH=async(e,t,r)=>{const{placement:a="bottom",strategy:s="absolute",middleware:f=[],platform:v}=r,h=f.filter(Boolean),n=await(v.isRTL==null?void 0:v.isRTL(t));let u=await v.getElementRects({reference:e,floating:t,strategy:s}),{x:o,y:i}=X0(u,a,n),l=a,c={},d=0;for(let p=0;p<h.length;p++){const{name:m,fn:g}=h[p],{x:b,y,data:w,reset:x}=await g({x:o,y:i,initialPlacement:a,placement:l,strategy:s,middlewareData:c,rects:u,platform:v,elements:{reference:e,floating:t}});if(o=b??o,i=y??i,c={...c,[m]:{...c[m],...w}},x&&d<=50){d++,typeof x=="object"&&(x.placement&&(l=x.placement),x.rects&&(u=x.rects===!0?await v.getElementRects({reference:e,floating:t,strategy:s}):x.rects),{x:o,y:i}=X0(u,l,n)),p=-1;continue}}return{x:o,y:i,placement:l,strategy:s,middlewareData:c}};function PH(e){return{top:0,right:0,bottom:0,left:0,...e}}function d2(e){return typeof e!="number"?PH(e):{top:e,right:e,bottom:e,left:e}}function sl(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function bd(e,t){var r;t===void 0&&(t={});const{x:a,y:s,platform:f,rects:v,elements:h,strategy:n}=e,{boundary:u="clippingAncestors",rootBoundary:o="viewport",elementContext:i="floating",altBoundary:l=!1,padding:c=0}=t,d=d2(c),m=h[l?i==="floating"?"reference":"floating":i],g=sl(await f.getClippingRect({element:(r=await(f.isElement==null?void 0:f.isElement(m)))==null||r?m:m.contextElement||await(f.getDocumentElement==null?void 0:f.getDocumentElement(h.floating)),boundary:u,rootBoundary:o,strategy:n})),b=sl(f.convertOffsetParentRelativeRectToViewportRelativeRect?await f.convertOffsetParentRelativeRectToViewportRelativeRect({rect:i==="floating"?{...v.floating,x:a,y:s}:v.reference,offsetParent:await(f.getOffsetParent==null?void 0:f.getOffsetParent(h.floating)),strategy:n}):v[i]);return{top:g.top-b.top+d.top,bottom:b.bottom-g.bottom+d.bottom,left:g.left-b.left+d.left,right:b.right-g.right+d.right}}const BH=Math.min,Vi=Math.max;function uh(e,t,r){return Vi(e,BH(t,r))}const IH=e=>({name:"arrow",options:e,async fn(t){const{element:r,padding:a=0}=e??{},{x:s,y:f,placement:v,rects:h,platform:n}=t;if(r==null)return{};const u=d2(a),o={x:s,y:f},i=Ss(v),l=Cs(v),c=yd(i),d=await n.getDimensions(r),p=i==="y"?"top":"left",m=i==="y"?"bottom":"right",g=h.reference[c]+h.reference[i]-o[i]-h.floating[c],b=o[i]-h.reference[i],y=await(n.getOffsetParent==null?void 0:n.getOffsetParent(r));let w=y?i==="y"?y.clientHeight||0:y.clientWidth||0:0;w===0&&(w=h.floating[c]);const x=g/2-b/2,C=u[p],S=w-d[c]-u[m],E=w/2-d[c]/2+x,A=uh(C,E,S),B=(l==="start"?u[p]:u[m])>0&&E!==A&&h.reference[c]<=h.floating[c]?E<C?C-E:S-E:0;return{[i]:o[i]-B,data:{[i]:A,centerOffset:E-A}}}}),RH={left:"right",right:"left",bottom:"top",top:"bottom"};function ul(e){return e.replace(/left|right|bottom|top/g,t=>RH[t])}function kH(e,t,r){r===void 0&&(r=!1);const a=Cs(e),s=Ss(e),f=yd(s);let v=s==="x"?a===(r?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[f]>t.floating[f]&&(v=ul(v)),{main:v,cross:ul(v)}}const $H={start:"end",end:"start"};function K0(e){return e.replace(/start|end/g,t=>$H[t])}function LH(e){const t=ul(e);return[K0(e),t,K0(t)]}const zH=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r;const{placement:a,middlewareData:s,rects:f,initialPlacement:v,platform:h,elements:n}=t,{mainAxis:u=!0,crossAxis:o=!0,fallbackPlacements:i,fallbackStrategy:l="bestFit",flipAlignment:c=!0,...d}=e,p=Co(a),g=i||(p===v||!c?[ul(v)]:LH(v)),b=[v,...g],y=await bd(t,d),w=[];let x=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&w.push(y[p]),o){const{main:A,cross:D}=kH(a,f,await(h.isRTL==null?void 0:h.isRTL(n.floating)));w.push(y[A],y[D])}if(x=[...x,{placement:a,overflows:w}],!w.every(A=>A<=0)){var C,S;const A=((C=(S=s.flip)==null?void 0:S.index)!=null?C:0)+1,D=b[A];if(D)return{data:{index:A,overflows:x},reset:{placement:D}};let M="bottom";switch(l){case"bestFit":{var E;const B=(E=x.map(O=>[O,O.overflows.filter(F=>F>0).reduce((F,z)=>F+z,0)]).sort((O,F)=>O[1]-F[1])[0])==null?void 0:E[0].placement;B&&(M=B);break}case"initialPlacement":M=v;break}if(a!==M)return{reset:{placement:M}}}return{}}}};async function UH(e,t){const{placement:r,platform:a,elements:s}=e,f=await(a.isRTL==null?void 0:a.isRTL(s.floating)),v=Co(r),h=Cs(r),n=Ss(r)==="x",u=["left","top"].includes(v)?-1:1,o=f&&n?-1:1,i=typeof t=="function"?t(e):t;let{mainAxis:l,crossAxis:c,alignmentAxis:d}=typeof i=="number"?{mainAxis:i,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...i};return h&&typeof d=="number"&&(c=h==="end"?d*-1:d),n?{x:c*o,y:l*u}:{x:l*u,y:c*o}}const jH=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:r,y:a}=t,s=await UH(t,e);return{x:r+s.x,y:a+s.y,data:s}}}};function qH(e){return e==="x"?"y":"x"}const HH=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:a,placement:s}=t,{mainAxis:f=!0,crossAxis:v=!1,limiter:h={fn:m=>{let{x:g,y:b}=m;return{x:g,y:b}}},...n}=e,u={x:r,y:a},o=await bd(t,n),i=Ss(Co(s)),l=qH(i);let c=u[i],d=u[l];if(f){const m=i==="y"?"top":"left",g=i==="y"?"bottom":"right",b=c+o[m],y=c-o[g];c=uh(b,c,y)}if(v){const m=l==="y"?"top":"left",g=l==="y"?"bottom":"right",b=d+o[m],y=d-o[g];d=uh(b,d,y)}const p=h.fn({...t,[i]:c,[l]:d});return{...p,data:{x:p.x-r,y:p.y-a}}}}},VH=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:r,rects:a,platform:s,elements:f}=t,{apply:v=()=>{},...h}=e,n=await bd(t,h),u=Co(r),o=Cs(r);let i,l;u==="top"||u==="bottom"?(i=u,l=o===(await(s.isRTL==null?void 0:s.isRTL(f.floating))?"start":"end")?"left":"right"):(l=u,i=o==="end"?"top":"bottom");const c=Vi(n.left,0),d=Vi(n.right,0),p=Vi(n.top,0),m=Vi(n.bottom,0),g={availableHeight:a.floating.height-(["left","right"].includes(r)?2*(p!==0||m!==0?p+m:Vi(n.top,n.bottom)):n[i]),availableWidth:a.floating.width-(["top","bottom"].includes(r)?2*(c!==0||d!==0?c+d:Vi(n.left,n.right)):n[l])};await v({...t,...g});const b=await s.getDimensions(f.floating);return a.floating.width!==b.width||a.floating.height!==b.height?{reset:{rects:!0}}:{}}}};function p2(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function ai(e){if(e==null)return window;if(!p2(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function Si(e){return ai(e).getComputedStyle(e)}function ei(e){return p2(e)?"":e?(e.nodeName||"").toLowerCase():""}function m2(){const e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function Tn(e){return e instanceof ai(e).HTMLElement}function ro(e){return e instanceof ai(e).Element}function GH(e){return e instanceof ai(e).Node}function ll(e){if(typeof ShadowRoot>"u")return!1;const t=ai(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function rc(e){const{overflow:t,overflowX:r,overflowY:a}=Si(e);return/auto|scroll|overlay|hidden/.test(t+a+r)}function WH(e){return["table","td","th"].includes(ei(e))}function v2(e){const t=/firefox/i.test(m2()),r=Si(e);return r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].includes(r.willChange)||t&&r.willChange==="filter"||t&&(r.filter?r.filter!=="none":!1)}function g2(){return!/^((?!chrome|android).)*safari/i.test(m2())}const J0=Math.min,Go=Math.max,cl=Math.round;function ta(e,t,r){var a,s,f,v;t===void 0&&(t=!1),r===void 0&&(r=!1);const h=e.getBoundingClientRect();let n=1,u=1;t&&Tn(e)&&(n=e.offsetWidth>0&&cl(h.width)/e.offsetWidth||1,u=e.offsetHeight>0&&cl(h.height)/e.offsetHeight||1);const o=ro(e)?ai(e):window,i=!g2()&&r,l=(h.left+(i&&(a=(s=o.visualViewport)==null?void 0:s.offsetLeft)!=null?a:0))/n,c=(h.top+(i&&(f=(v=o.visualViewport)==null?void 0:v.offsetTop)!=null?f:0))/u,d=h.width/n,p=h.height/u;return{width:d,height:p,top:c,right:l+d,bottom:c+p,left:l,x:l,y:c}}function $i(e){return((GH(e)?e.ownerDocument:e.document)||window.document).documentElement}function nc(e){return ro(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function y2(e){return ta($i(e)).left+nc(e).scrollLeft}function YH(e){const t=ta(e);return cl(t.width)!==e.offsetWidth||cl(t.height)!==e.offsetHeight}function XH(e,t,r){const a=Tn(t),s=$i(t),f=ta(e,a&&YH(t),r==="fixed");let v={scrollLeft:0,scrollTop:0};const h={x:0,y:0};if(a||!a&&r!=="fixed")if((ei(t)!=="body"||rc(s))&&(v=nc(t)),Tn(t)){const n=ta(t,!0);h.x=n.x+t.clientLeft,h.y=n.y+t.clientTop}else s&&(h.x=y2(s));return{x:f.left+v.scrollLeft-h.x,y:f.top+v.scrollTop-h.y,width:f.width,height:f.height}}function b2(e){return ei(e)==="html"?e:e.assignedSlot||e.parentNode||(ll(e)?e.host:null)||$i(e)}function Z0(e){return!Tn(e)||Si(e).position==="fixed"?null:e.offsetParent}function KH(e){let t=b2(e);for(ll(t)&&(t=t.host);Tn(t)&&!["html","body"].includes(ei(t));){if(v2(t))return t;{const r=t.parentNode;t=ll(r)?r.host:r}}return null}function lh(e){const t=ai(e);let r=Z0(e);for(;r&&WH(r)&&Si(r).position==="static";)r=Z0(r);return r&&(ei(r)==="html"||ei(r)==="body"&&Si(r).position==="static"&&!v2(r))?t:r||KH(e)||t}function Q0(e){if(Tn(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=ta(e);return{width:t.width,height:t.height}}function JH(e){let{rect:t,offsetParent:r,strategy:a}=e;const s=Tn(r),f=$i(r);if(r===f)return t;let v={scrollLeft:0,scrollTop:0};const h={x:0,y:0};if((s||!s&&a!=="fixed")&&((ei(r)!=="body"||rc(f))&&(v=nc(r)),Tn(r))){const n=ta(r,!0);h.x=n.x+r.clientLeft,h.y=n.y+r.clientTop}return{...t,x:t.x-v.scrollLeft+h.x,y:t.y-v.scrollTop+h.y}}function ZH(e,t){const r=ai(e),a=$i(e),s=r.visualViewport;let f=a.clientWidth,v=a.clientHeight,h=0,n=0;if(s){f=s.width,v=s.height;const u=g2();(u||!u&&t==="fixed")&&(h=s.offsetLeft,n=s.offsetTop)}return{width:f,height:v,x:h,y:n}}function QH(e){var t;const r=$i(e),a=nc(e),s=(t=e.ownerDocument)==null?void 0:t.body,f=Go(r.scrollWidth,r.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),v=Go(r.scrollHeight,r.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0);let h=-a.scrollLeft+y2(e);const n=-a.scrollTop;return Si(s||r).direction==="rtl"&&(h+=Go(r.clientWidth,s?s.clientWidth:0)-f),{width:f,height:v,x:h,y:n}}function w2(e){const t=b2(e);return["html","body","#document"].includes(ei(t))?e.ownerDocument.body:Tn(t)&&rc(t)?t:w2(t)}function wd(e,t){var r;t===void 0&&(t=[]);const a=w2(e),s=a===((r=e.ownerDocument)==null?void 0:r.body),f=ai(a),v=s?[f].concat(f.visualViewport||[],rc(a)?a:[]):a,h=t.concat(v);return s?h:h.concat(wd(v))}function eV(e,t){const r=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(r&&ll(r)){let a=t;do{if(a&&e===a)return!0;a=a.parentNode||a.host}while(a)}return!1}function tV(e,t){const r=ta(e,!1,t==="fixed"),a=r.top+e.clientTop,s=r.left+e.clientLeft;return{top:a,left:s,x:s,y:a,right:s+e.clientWidth,bottom:a+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}function ey(e,t,r){return t==="viewport"?sl(ZH(e,r)):ro(t)?tV(t,r):sl(QH($i(e)))}function rV(e){const t=wd(e),a=["absolute","fixed"].includes(Si(e).position)&&Tn(e)?lh(e):e;return ro(a)?t.filter(s=>ro(s)&&eV(s,a)&&ei(s)!=="body"):[]}function nV(e){let{element:t,boundary:r,rootBoundary:a,strategy:s}=e;const v=[...r==="clippingAncestors"?rV(t):[].concat(r),a],h=v[0],n=v.reduce((u,o)=>{const i=ey(t,o,s);return u.top=Go(i.top,u.top),u.right=J0(i.right,u.right),u.bottom=J0(i.bottom,u.bottom),u.left=Go(i.left,u.left),u},ey(t,h,s));return{width:n.right-n.left,height:n.bottom-n.top,x:n.left,y:n.top}}const iV={getClippingRect:nV,convertOffsetParentRelativeRectToViewportRelativeRect:JH,isElement:ro,getDimensions:Q0,getOffsetParent:lh,getDocumentElement:$i,getElementRects:e=>{let{reference:t,floating:r,strategy:a}=e;return{reference:XH(t,lh(r),a),floating:{...Q0(r),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Si(e).direction==="rtl"},aV=(e,t,r)=>FH(e,t,{platform:iV,...r});var Eu=(...e)=>(...t)=>{e.forEach(function(r){r?.(...t)})},oV=e=>e===!0||e===!1,sV=(e,...t)=>{const r=typeof e=="function"?e(...t):e;return r??void 0},uV=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function ty(e){return typeof e=="object"&&e?.nodeType===Node.ELEMENT_NODE&&typeof e?.nodeName=="string"}var lV=e=>uV(e,"current");function ry(e,t,r,a){const s=lV(e)?e.current:sV(e);return s?.addEventListener(t,r,a),()=>{s?.removeEventListener(t,r,a)}}function x2(){return globalThis.__rectObserverMap__=globalThis.__rectObserverMap__||new Map,globalThis.__rectObserverMap__}function ny(e,t){const r=x2(),a=r.get(e);return a?(a.callbacks.push(t),t(e.getBoundingClientRect())):(r.set(e,{rect:{},callbacks:[t]}),r.size===1&&(ch=requestAnimationFrame(C2))),function(){const f=r.get(e);if(!f)return;const v=f.callbacks.indexOf(t);v>-1&&f.callbacks.splice(v,1),f.callbacks.length===0&&(r.delete(e),r.size===0&&cancelAnimationFrame(ch))}}var ch;function C2(){const e=x2(),t=[];e.forEach((r,a)=>{const s=a.getBoundingClientRect();cV(r.rect,s)||(r.rect=s,t.push(r))}),t.forEach(r=>{r.callbacks.forEach(a=>a(r.rect))}),ch=requestAnimationFrame(C2)}function cV(e,t){return e.width===t.width&&e.height===t.height&&e.top===t.top&&e.right===t.right&&e.bottom===t.bottom&&e.left===t.left}function fV(e){var t,r,a;const s=oV(e);return{ancestorResize:s?e:(t=e.ancestorResize)!=null?t:!0,ancestorScroll:s?e:(r=e.ancestorScroll)!=null?r:!0,referenceResize:s?e:(a=e.referenceResize)!=null?a:!0}}function hV(e,t,r,a=!1){const{ancestorScroll:s,ancestorResize:f,referenceResize:v}=fV(a),h=s||f,n=[];h&&ty(e)&&n.push(...wd(e));function u(){let i=[ny(t,r)];return v&&ty(e)&&i.push(ny(e,r)),i.push(Eu(...n.map(l=>ry(l,"resize",r)))),()=>i.forEach(l=>l())}function o(){return Eu(...n.map(i=>ry(i,"scroll",r,{passive:!0})))}return Eu(u(),o())}var Mo=e=>({variable:e,reference:`var(${e})`}),Ln={arrowSize:Mo("--arrow-size"),arrowSizeHalf:Mo("--arrow-size-half"),arrowBg:Mo("--arrow-background"),transformOrigin:Mo("--transform-origin"),arrowOffset:Mo("--arrow-offset")},dV=e=>({top:"bottom center","top-start":e?`${e.x}px bottom`:"left bottom","top-end":e?`${e.x}px bottom`:"right bottom",bottom:"top center","bottom-start":e?`${e.x}px top`:"top left","bottom-end":e?`${e.x}px top`:"top right",left:"right center","left-start":e?`right ${e.y}px`:"right top","left-end":e?`right ${e.y}px`:"right bottom",right:"left center","right-start":e?`left ${e.y}px`:"left top","right-end":e?`left ${e.y}px`:"left bottom"}),pV={name:"transformOrigin",fn({placement:e,elements:t,middlewareData:r}){const{arrow:a}=r,s=dV(a)[e],{floating:f}=t;return f.style.setProperty(Ln.transformOrigin.variable,s),{data:{transformOrigin:s}}}},mV=e=>({name:"shiftArrow",fn({placement:t,middlewareData:r}){const{element:a}=e;if(r.arrow){const{x:s,y:f}=r.arrow,v=t.split("-")[0];Object.assign(a.style,{left:s!=null?`${s}px`:"",top:f!=null?`${f}px`:"",[v]:`calc(100% + ${Ln.arrowOffset.reference})`})}return{}}}),vV={strategy:"absolute",placement:"bottom",listeners:!0,gutter:8,flip:!0,sameWidth:!1,overflowPadding:8};function gV(e,t,r={}){if(!t||!e)return;const a=Object.assign({},vV,r),s=t.querySelector("[data-part=arrow]"),f=[],v=typeof a.boundary=="function"?a.boundary():a.boundary;if(a.flip&&f.push(zH({boundary:v,padding:a.overflowPadding})),a.gutter||a.offset){const n=s?s.offsetHeight/2:0,u=a.gutter?{mainAxis:a.gutter}:a.offset;u?.mainAxis!=null&&(u.mainAxis+=n),f.push(jH(u))}f.push(HH({boundary:v,crossAxis:a.overlap,padding:a.overflowPadding})),s&&f.push(IH({element:s,padding:8}),mV({element:s})),f.push(pV),f.push(VH({padding:a.overflowPadding,apply({rects:n,availableHeight:u,availableWidth:o}){const i=Math.round(n.reference.width);t.style.setProperty("--reference-width",`${i}px`),t.style.setProperty("--available-width",`${o}px`),t.style.setProperty("--available-height",`${u}px`),a.sameWidth&&Object.assign(t.style,{width:`${i}px`,minWidth:"unset"}),a.fitViewport&&Object.assign(t.style,{maxWidth:`${o}px`,maxHeight:`${u}px`})}}));function h(n={}){if(!e||!t)return;const{placement:u,strategy:o}=a;aV(e,t,{placement:u,middleware:f,strategy:o,...n}).then(i=>{var l;const c=Math.round(i.x),d=Math.round(i.y);Object.assign(t.style,{position:i.strategy,top:"0",left:"0",transform:`translate3d(${c}px, ${d}px, 0)`}),(l=a.onComplete)==null||l.call(a,{...i,compute:h})})}return h(),Eu(a.listeners?hV(e,t,h,a.listeners):void 0,a.onCleanup)}var yV={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)",pointerEvents:"none"},bV={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function wV(e){const{measured:t,strategy:r="absolute",placement:a="bottom"}=e;return{arrow:{position:"absolute",width:Ln.arrowSize.reference,height:Ln.arrowSize.reference,[Ln.arrowSizeHalf.variable]:`calc(${Ln.arrowSize.reference} / 2)`,[Ln.arrowOffset.variable]:`calc(${Ln.arrowSizeHalf.reference} * -1)`,opacity:t?void 0:0},innerArrow:{transform:bV[a.split("-")[0]],background:Ln.arrowBg.reference,top:"0",left:"0",width:"100%",height:"100%",position:"absolute",zIndex:"inherit"},floating:{position:r,minWidth:"max-content",...!t&&yV}}}var du=e=>e?"":void 0,S2=()=>typeof window<"u";function xV(){var e;const t=navigator.userAgentData;return(e=t?.platform)!=null?e:navigator.platform}var CV=e=>S2()&&e.test(xV()),SV=e=>S2()&&e.test(navigator.vendor),EV=()=>_V()&&SV(/apple/i),_V=()=>CV(/mac|iphone|ipad|ipod/i);function DV(e){return e.nodeType===Node.DOCUMENT_NODE}function AV(e){return e?.toString()==="[object Window]"}function NV(e){return e.localName==="iframe"}function TV(e){var t;return AV(e)?e.document:DV(e)?e:(t=e?.ownerDocument)!=null?t:document}function OV(e){const t={getRootNode:r=>{var a,s;return(s=(a=r.getRootNode)==null?void 0:a.call(r))!=null?s:document},getDoc:r=>TV(t.getRootNode(r)),getWin:r=>{var a;return(a=t.getDoc(r).defaultView)!=null?a:window},getActiveElement:r=>t.getDoc(r).activeElement,getById:(r,a)=>t.getRootNode(r).getElementById(a),createEmitter:(r,a)=>{const s=t.getWin(r);return function(v,h,n){const{bubbles:u=!0,cancelable:o,composed:i=!0}=n??{},l=`zag:${v}`,c={bubbles:u,cancelable:o,composed:i,detail:h},d=new s.CustomEvent(l,c);a.dispatchEvent(d)}},createListener:r=>function(s,f){const v=`zag:${s}`,h=n=>f(n);return r.addEventListener(v,h),()=>r.removeEventListener(v,h)}};return{...t,...e}}function E2(e){return typeof e=="object"&&e?.nodeType===Node.ELEMENT_NODE&&typeof e?.nodeName=="string"}function MV(e){return E2(e)?e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0:!1}var _2="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",D2=(e,t=!1)=>{if(!e)return[];const r=Array.from(e.querySelectorAll(_2));(t==!0||t=="if-empty"&&r.length===0)&&E2(e)&&iy(e)&&r.unshift(e);const s=r.filter(iy);return s.forEach((f,v)=>{if(NV(f)&&f.contentDocument){const h=f.contentDocument.body;s.splice(v,1,...D2(h))}}),s};function iy(e){return e?e.matches(_2)&&MV(e):!1}var ay={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"},FV={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"};function PV(e,t={}){var r;const{dir:a="ltr",orientation:s="horizontal"}=t;let{key:f}=e;return f=(r=FV[f])!=null?r:f,a==="rtl"&&s==="horizontal"&&f in ay&&(f=ay[f]),f}function oy(e){const t=new Set;function r(a){const s=globalThis.requestAnimationFrame(a);t.add(()=>globalThis.cancelAnimationFrame(s))}return r(()=>r(e)),function(){t.forEach(function(s){s()})}}function Fo(e){const t=globalThis.requestAnimationFrame(e);return function(){globalThis.cancelAnimationFrame(t)}}function BV(e,t){var r;return Array.from((r=e?.querySelectorAll(t))!=null?r:[])}function A2(e,t){return e.find(r=>r.id===t)}function N2(e,t){const r=A2(e,t);return r?e.indexOf(r):-1}function IV(e,t,r=!0){let a=N2(e,t);return a=r?(a+1)%e.length:Math.min(a+1,e.length-1),e[a]}function RV(e,t,r=!0){let a=N2(e,t);return a===-1?r?e[e.length-1]:null:(a=r?(a-1+e.length)%e.length:Math.max(0,a-1),e[a])}var kV=e=>e[0],$V=e=>e[e.length-1],LV=e=>Array.isArray(e),zV=e=>!(e==null||typeof e!="object"||LV(e));function T2(e){return e===void 0?e:Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0).map(([t,r])=>[t,zV(r)?T2(r):r]))}var ht=OV({getRootId:e=>{var t,r;return(r=(t=e.ids)==null?void 0:t.root)!=null?r:`tabs:${e.id}`},getTriggerGroupId:e=>{var t,r;return(r=(t=e.ids)==null?void 0:t.triggerGroup)!=null?r:`tabs:${e.id}:trigger-group`},getContentId:(e,t)=>{var r,a;return(a=(r=e.ids)==null?void 0:r.content)!=null?a:`tabs:${e.id}:content-${t}`},getContentGroupId:e=>{var t,r;return(r=(t=e.ids)==null?void 0:t.contentGroup)!=null?r:`tabs:${e.id}:content-group`},getTriggerId:(e,t)=>{var r,a;return(a=(r=e.ids)==null?void 0:r.trigger)!=null?a:`tabs:${e.id}:trigger-${t}`},getIndicatorId:e=>`tabs:${e.id}:indicator`,getTriggerGroupEl:e=>ht.getById(e,ht.getTriggerGroupId(e)),getContentEl:(e,t)=>ht.getById(e,ht.getContentId(e,t)),getTriggerEl:(e,t)=>ht.getById(e,ht.getTriggerId(e,t)),getIndicatorEl:e=>ht.getById(e,ht.getIndicatorId(e)),getElements:e=>{const r=`[role=tab][data-ownedby='${CSS.escape(ht.getTriggerGroupId(e))}']:not([disabled])`;return BV(ht.getTriggerGroupEl(e),r)},getFirstEl:e=>kV(ht.getElements(e)),getLastEl:e=>$V(ht.getElements(e)),getNextEl:(e,t)=>IV(ht.getElements(e),ht.getTriggerId(e,t),e.loop),getPrevEl:(e,t)=>RV(ht.getElements(e),ht.getTriggerId(e,t),e.loop),getActiveContentEl:e=>{if(!e.value)return;const t=ht.getContentId(e,e.value);return ht.getById(e,t)},getRectById:(e,t)=>{var r;const a={offsetLeft:0,offsetTop:0,offsetWidth:0,offsetHeight:0},s=(r=A2(ht.getElements(e),ht.getTriggerId(e,t)))!=null?r:a;return e.isVertical?{top:`${s.offsetTop}px`,height:`${s.offsetHeight}px`}:{left:`${s.offsetLeft}px`,width:`${s.offsetWidth}px`}}});function UV(e,t,r){const a=e.context.translations,s=e.matches("focused");return{value:e.context.value,focusedValue:e.context.focusedValue,previousValues:Array.from(e.context.previousValues),setValue(f){t({type:"SET_VALUE",value:f})},clearValue(){t({type:"CLEAR_VALUE"})},rootProps:r.element({"data-part":"root",id:ht.getRootId(e.context),"data-orientation":e.context.orientation,"data-focus":du(s),dir:e.context.dir}),triggerGroupProps:r.element({"data-part":"trigger-group",id:ht.getTriggerGroupId(e.context),role:"tablist","data-focus":du(s),"aria-orientation":e.context.orientation,"data-orientation":e.context.orientation,"aria-label":a.tablistLabel,onKeyDown(f){const v={ArrowDown(){t("ARROW_DOWN")},ArrowUp(){t("ARROW_UP")},ArrowLeft(){t("ARROW_LEFT")},ArrowRight(){t("ARROW_RIGHT")},Home(){t("HOME")},End(){t("END")},Enter(){t({type:"ENTER",value:e.context.focusedValue})}};let h=PV(f,e.context);const n=v[h];n&&(f.preventDefault(),n(f))}}),getTriggerProps(f){const{value:v,disabled:h}=f,n=e.context.value===v;return r.button({"data-part":"trigger",role:"tab",type:"button",disabled:h,"data-orientation":e.context.orientation,"data-disabled":du(h),"aria-disabled":h,"data-value":v,"aria-selected":n,"data-selected":du(n),"aria-controls":ht.getContentId(e.context,v),"data-ownedby":ht.getTriggerGroupId(e.context),id:ht.getTriggerId(e.context,v),tabIndex:n?0:-1,onFocus(){t({type:"TAB_FOCUS",value:v})},onBlur(u){const o=u.relatedTarget;o?.getAttribute("role")!=="tab"&&t({type:"TAB_BLUR"})},onClick(u){h||(EV()&&u.currentTarget.focus(),t({type:"TAB_CLICK",value:v}))}})},contentGroupProps:r.element({"data-part":"content-group",id:ht.getContentGroupId(e.context),"data-orientation":e.context.orientation}),getContentProps({value:f}){const v=e.context.value===f;return r.element({"data-part":"content",id:ht.getContentId(e.context,f),tabIndex:0,"aria-labelledby":ht.getTriggerId(e.context,f),role:"tabpanel","data-ownedby":ht.getTriggerGroupId(e.context),hidden:!v})},getDeleteButtonProps({value:f,disabled:v}){var h;return r.button({"data-part":"delete-button",type:"button",tabIndex:-1,"aria-label":(h=a.deleteLabel)==null?void 0:h.call(a,f),disabled:v,onClick(){t({type:"DELETE",value:f})}})},indicatorProps:r.element({id:ht.getIndicatorId(e.context),"data-part":"indicator","data-orientation":e.context.orientation,style:{"--transition-duration":"200ms","--transition-property":"left, right, top, bottom, width, height",position:"absolute",willChange:"var(--transition-property)",transitionProperty:"var(--transition-property)",transitionDuration:e.context.hasMeasuredRect?"var(--transition-duration)":"0ms",transitionTimingFunction:"var(--transition-timing-function)",...e.context.indicatorRect}})}}var{not:jV}=Xq;function qV(e){const t=T2(e);return Ql({initial:"unknown",context:{dir:"ltr",orientation:"horizontal",activationMode:"automatic",value:null,focusedValue:null,previousValues:[],indicatorRect:{left:"0px",top:"0px",width:"0px",height:"0px"},hasMeasuredRect:!1,isIndicatorRendered:!1,loop:!0,translations:{},...t},computed:{isHorizontal:r=>r.orientation==="horizontal",isVertical:r=>r.orientation==="vertical"},created:["setPrevSelectedTabs"],watch:{focusedValue:"invokeOnFocus",value:["invokeOnChange","setPrevSelectedTabs","setIndicatorRect","setContentTabIndex"],dir:["clearMeasured","setIndicatorRect"]},on:{SET_VALUE:{actions:"setValue"},CLEAR_VALUE:{actions:"clearValue"}},states:{unknown:{on:{SETUP:{target:"idle",actions:["checkRenderedElements","setIndicatorRect","setContentTabIndex"]}}},idle:{on:{TAB_FOCUS:{guard:"selectOnFocus",target:"focused",actions:["setFocusedValue","setValue"]},TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]}}},focused:{on:{TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]},ARROW_LEFT:{guard:"isHorizontal",actions:"focusPrevTab"},ARROW_RIGHT:{guard:"isHorizontal",actions:"focusNextTab"},ARROW_UP:{guard:"isVertical",actions:"focusPrevTab"},ARROW_DOWN:{guard:"isVertical",actions:"focusNextTab"},HOME:{actions:"focusFirstTab"},END:{actions:"focusLastTab"},ENTER:{guard:jV("selectOnFocus"),actions:"setValue"},TAB_FOCUS:[{guard:"selectOnFocus",actions:["setFocusedValue","setValue"]},{actions:"setFocusedValue"}],TAB_BLUR:{target:"idle",actions:"clearFocusedValue"}}}}},{guards:{isVertical:r=>r.isVertical,isHorizontal:r=>r.isHorizontal,selectOnFocus:r=>r.activationMode==="automatic"},actions:{setFocusedValue(r,a){r.focusedValue=a.value},clearFocusedValue(r){r.focusedValue=null},setValue(r,a){r.value=a.value},clearValue(r){r.value=null},invokeOnDelete(r,a){var s;(s=r.onDelete)==null||s.call(r,{value:a.value})},focusFirstTab(r){Fo(()=>{var a;return(a=ht.getFirstEl(r))==null?void 0:a.focus()})},focusLastTab(r){Fo(()=>{var a;return(a=ht.getLastEl(r))==null?void 0:a.focus()})},focusNextTab(r){if(!r.focusedValue)return;const a=ht.getNextEl(r,r.focusedValue);Fo(()=>a?.focus())},focusPrevTab(r){if(!r.focusedValue)return;const a=ht.getPrevEl(r,r.focusedValue);Fo(()=>a?.focus())},setIndicatorRect(r){oy(()=>{!r.isIndicatorRendered||!r.value||(r.indicatorRect=ht.getRectById(r,r.value),!r.hasMeasuredRect&&oy(()=>{r.hasMeasuredRect=!0}))})},checkRenderedElements(r){r.isIndicatorRendered=!!ht.getIndicatorEl(r)},clearMeasured(r){r.hasMeasuredRect=!1},invokeOnChange(r){var a;(a=r.onChange)==null||a.call(r,{value:r.value})},invokeOnFocus(r){var a;(a=r.onFocus)==null||a.call(r,{value:r.focusedValue})},setPrevSelectedTabs(r){r.value!=null&&(r.previousValues=HV(Array.from(r.previousValues),r.value))},setContentTabIndex(r){Fo(()=>{const a=ht.getActiveContentEl(r);if(!a)return;D2(a).length>0?a.removeAttribute("tabindex"):a.setAttribute("tabindex","0")})}}})}function HV(e,t){const r=e.slice(),a=r.indexOf(t);return a>-1&&r.splice(a,1),r.push(t),r}var VV="f876dq0",GV="f876dq1",WV="f876dq2";const YV=mt("<div><div></div></div>"),XV=mt("<button></button>"),KV=mt("<div></div>"),JV=({items:e,onTabChange:t})=>{const[r,a]=tc(qV({value:e.length>0?e[0].value:void 0,id:bl(),onChange:f=>{t&&t(f.value)}})),s=Re(()=>UV(r,a,ec));return(()=>{const f=YV.cloneNode(!0),v=f.firstChild;return Nr(f,Ar(()=>s().rootProps,{class:VV}),!1,!0),Nr(v,Ar(()=>s().triggerGroupProps,{class:GV}),!1,!0),Ve(v,$(Kn,{each:e,children:h=>(()=>{const n=XV.cloneNode(!0);return Nr(n,Ar(()=>s().getTriggerProps({value:h.value}),{class:WV}),!1,!0),Ve(n,()=>h.label),n})()})),Ve(f,$(Kn,{each:e,children:h=>(()=>{const n=KV.cloneNode(!0);return Nr(n,Ar(()=>s().getContentProps({value:h.value})),!1,!0),Ve(n,()=>h.content),n})()}),null),f})()};var ZV=tn({defaultClassName:"_10jisto8",variantClassNames:{size:{standard:"_10jisto9",small:"_10jistoa"}},defaultVariants:{size:"standard"},compoundVariants:[]}),sy=tn({defaultClassName:"_10jisto0",variantClassNames:{transparent:{true:"_10jisto1"},underline:{true:"_10jisto2",blue:"_10jisto3"},isTitle:{true:"_10jisto4"},center:{true:"_10jisto5"},small:{true:"_10jisto6"},middle:{true:"_10jisto7"}},defaultVariants:{},compoundVariants:[]});const uy=mt("<input>"),bt=({underline:e,center:t,title:r,style:a,ref:s,placeholder:f,small:v,transparent:h,onChange:n,onInput:u,value:o,middle:i,onBlur:l})=>$(Or,{get children(){return[$(Ot,{when:o!==void 0,get children(){const c=uy.cloneNode(!0);Br(c,"input",u,!0),Br(c,"blur",l),Br(c,"change",n);const d=s;return typeof d=="function"?Ki(d,c):s=c,cr(c,"title",r),cr(c,"placeholder",f),c.value=o,Wt(p=>{const m=sy({center:t,underline:e,small:v,middle:i,transparent:h}),g=a;return m!==p._v$&&ft(c,p._v$=m),p._v$2=gi(c,g,p._v$2),p},{_v$:void 0,_v$2:void 0}),c}}),$(Ot,{when:o===void 0,get children(){const c=uy.cloneNode(!0);Br(c,"input",u,!0),Br(c,"blur",l),Br(c,"change",n);const d=s;return typeof d=="function"?Ki(d,c):s=c,cr(c,"title",r),cr(c,"placeholder",f),Wt(p=>{const m=sy({center:t,underline:e,small:v}),g=a;return m!==p._v$3&&ft(c,p._v$3=m),p._v$4=gi(c,g,p._v$4),p},{_v$3:void 0,_v$4:void 0}),c}})]}});fn(["input"]);const QV=mt("<input>"),ly=({title:e,style:t,ref:r,placeholder:a,size:s,onChange:f})=>(()=>{const v=QV.cloneNode(!0);Br(v,"change",f);const h=r;return typeof h=="function"?Ki(h,v):r=v,cr(v,"title",e),cr(v,"placeholder",a),Wt(n=>{const u=ZV({size:s}),o=t;return u!==n._v$&&ft(v,n._v$=u),n._v$2=gi(v,o,n._v$2),n},{_v$:void 0,_v$2:void 0}),v})();var Po=new WeakMap;function cy(e,t){return e instanceof t.HTMLElement&&e.dataset.liveAnnouncer==="true"}function eG(e,t){var r;const a=e.filter(Boolean);if(a.length===0)return;const s=a[0].ownerDocument||document,f=(r=s.defaultView)!=null?r:window,v=new Set(a),h=new Set,n=t??s.body,u=s.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode(c){return cy(c,f)&&v.add(c),v.has(c)||h.has(c.parentElement)?NodeFilter.FILTER_REJECT:c instanceof f.HTMLElement&&c.getAttribute("role")==="row"||a.some(d=>c.contains(d))?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}}),o=c=>{var d;let p=(d=Po.get(c))!=null?d:0;c.getAttribute("aria-hidden")==="true"&&p===0||(p===0&&c.setAttribute("aria-hidden","true"),h.add(c),Po.set(c,p+1))};let i=u.nextNode();for(;i!=null;)o(i),i=u.nextNode();const l=new f.MutationObserver(c=>{for(let d of c)if(!(d.type!=="childList"||d.addedNodes.length===0)&&![...v,...h].some(p=>p.contains(d.target)))for(const p of d.addedNodes)cy(p,f)?v.add(p):p instanceof f.Element&&o(p)});return l.observe(n,{childList:!0,subtree:!0}),()=>{l.disconnect();for(let c of h){let d=Po.get(c);if(d===1){c.removeAttribute("aria-hidden"),Po.delete(c);continue}d!==void 0&&Po.set(c,d-1)}}}var tG=(e,...t)=>{const r=typeof e=="function"?e(...t):e;return r??void 0},rG=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),O2=()=>typeof window<"u";function nG(){var e;const t=navigator.userAgentData;return(e=t?.platform)!=null?e:navigator.platform}var iG=e=>O2()&&e.test(nG()),aG=()=>O2()&&!!navigator.maxTouchPoints,oG=()=>iG(/^Mac/)&&!aG;function sG(e){return e.nodeType===Node.DOCUMENT_NODE}function uG(e){return e?.toString()==="[object Window]"}function lG(e){var t;return uG(e)?e.document:sG(e)?e:(t=e?.ownerDocument)!=null?t:document}function M2(e){var t;return(t=e?.ownerDocument.defaultView)!=null?t:window}function pf(e){var t,r;return(r=(t=e.composedPath)==null?void 0:t.call(e)[0])!=null?r:e.target}function fy(e,t){return e?e===t||fh(e)&&fh(t)&&e.contains(t):!1}function fh(e){return typeof e=="object"&&e?.nodeType===Node.ELEMENT_NODE&&typeof e?.nodeName=="string"}function cG(e){return fh(e)?e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0:!1}var fG=e=>e.button===2||hG(e)&&e.button===0,hG=e=>oG()?e.metaKey&&!e.ctrlKey:e.ctrlKey&&!e.metaKey;function hy(e,t,r){if(!e)return;const a=M2(e),s=new a.CustomEvent(t,r);return e.dispatchEvent(s)}var dG="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type";function dy(e){return e?e.matches(dG)&&cG(e):!1}var pG=e=>rG(e,"current");function py(e,t,r,a){const s=pG(e)?e.current:tG(e);return s?.addEventListener(t,r,a),()=>{s?.removeEventListener(t,r,a)}}var my=(...e)=>(...t)=>{e.forEach(function(r){r?.(...t)})},vy="pointerdown.outside",gy="focus.outside";function F2(e,t){const{exclude:r,onFocusOutside:a,onPointerDownOutside:s,onInteractOutside:f}=t;if(!e)return;const v=lG(e),h=M2(e);function n(d){const p=pf(d);return!(p instanceof h.HTMLElement)||!fy(v.documentElement,p)||fy(e,p)?!1:!r?.(p)}let u;function o(d){function p(){if(!(!e||!n(d))){if(s||f){const m=my(s,f);e.addEventListener(vy,m,{once:!0})}hy(e,vy,{bubbles:!1,cancelable:!0,detail:{originalEvent:d,contextmenu:fG(d),focusable:dy(pf(d))}})}}d.pointerType==="touch"?(v.removeEventListener("click",p),u=p,v.addEventListener("click",p,{once:!0})):p()}const i=new Set,l=setTimeout(()=>{i.add(py(v,"pointerdown",o,!0))},0);function c(d){if(!(!e||!n(d))){if(a||f){const p=my(a,f);e.addEventListener(gy,p,{once:!0})}hy(e,gy,{bubbles:!1,cancelable:!0,detail:{originalEvent:d,contextmenu:!1,focusable:dy(pf(d))}})}}return i.add(py(v,"focusin",c,!0)),()=>{clearTimeout(l),u&&v.removeEventListener("click",u),i.forEach(d=>d())}}var mG=(e,...t)=>{const r=typeof e=="function"?e(...t):e;return r??void 0},vG=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function gG(e){return e.nodeType===Node.DOCUMENT_NODE}function yG(e){return e?.toString()==="[object Window]"}function bG(e){var t;return yG(e)?e.document:gG(e)?e:(t=e?.ownerDocument)!=null?t:document}function yy(e){var t,r;return(r=(t=e.composedPath)==null?void 0:t.call(e)[0])!=null?r:e.target}function hh(e,t){return e?e===t||by(e)&&by(t)&&e.contains(t):!1}function by(e){return typeof e=="object"&&e?.nodeType===Node.ELEMENT_NODE&&typeof e?.nodeName=="string"}var wG=e=>vG(e,"current");function xG(e,t,r,a){const s=wG(e)?e.current:mG(e);return s?.addEventListener(t,r,a),()=>{s?.removeEventListener(t,r,a)}}function CG(...e){const t=e.length===1?e[0]:e[1],r=e.length===2?e[0]:!0}function SG(e){return xG(document,"keydown",r=>{r.key==="Escape"&&e?.(r)})}var an={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(e=>e.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(e){var t;const r=this.indexOf(e),a=this.topMostPointerBlockingLayer()?this.indexOf((t=this.topMostPointerBlockingLayer())==null?void 0:t.node):-1;return r<a},isTopMost(e){const t=this.layers[this.count()-1];return t?.node===e},getNestedLayers(e){return Array.from(this.layers).slice(this.indexOf(e)+1)},isInNestedLayer(e,t){return this.getNestedLayers(e).some(r=>hh(r.node,t))},isInBranch(e){return Array.from(this.branches).some(t=>hh(t,e))},add(e){this.layers.push(e)},addBranch(e){this.branches.push(e)},remove(e){const t=this.indexOf(e);t<0||(t<this.count()-1&&this.getNestedLayers(e).forEach(a=>a.dismiss()),this.layers.splice(t,1))},removeBranch(e){const t=this.branches.indexOf(e);t>=0&&this.branches.splice(t,1)},indexOf(e){return this.layers.findIndex(t=>t.node===e)},dismiss(e){var t;(t=this.layers[this.indexOf(e)])==null||t.dismiss()},clear(){this.remove(this.layers[0].node)}},wy;function xy(){an.layers.forEach(({node:e})=>{e.style.pointerEvents=an.isBelowPointerBlockingLayer(e)?"none":"auto"})}function EG(e){e.style.pointerEvents=""}var mf="data-inert";function _G(e){const t=bG(e);return an.hasPointerBlockingLayer()&&!t.body.hasAttribute(mf)&&(wy=document.body.style.pointerEvents,t.body.style.pointerEvents="none",t.body.setAttribute(mf,"")),()=>{an.hasPointerBlockingLayer()||(t.body.style.pointerEvents=wy,t.body.removeAttribute(mf),t.body.style.length===0&&t.body.removeAttribute("style"))}}function DG(e,t){if(!e){CG("[@zag-js/dismissable] node is `null` or `undefined`");return}const{onDismiss:r,pointerBlocking:a,exclude:s,debug:f}=t,v={dismiss:r,node:e,pointerBlocking:a};an.add(v),xy();function h(l){var c,d;const p=yy(l.detail.originalEvent);an.isBelowPointerBlockingLayer(e)||an.isInBranch(p)||((c=t.onPointerDownOutside)==null||c.call(t,l),(d=t.onInteractOutside)==null||d.call(t,l),!l.defaultPrevented&&(f&&console.log("onPointerDownOutside:",l.detail.originalEvent),r?.()))}function n(l){var c,d;const p=yy(l.detail.originalEvent);an.isInBranch(p)||((c=t.onFocusOutside)==null||c.call(t,l),(d=t.onInteractOutside)==null||d.call(t,l),!l.defaultPrevented&&(f&&console.log("onFocusOutside:",l.detail.originalEvent),r?.()))}function u(l){var c;!an.isTopMost(e)||((c=t.onEscapeKeyDown)==null||c.call(t,l),!l.defaultPrevented&&r&&(l.preventDefault(),r()))}function o(l){if(!e)return!1;const c=typeof s=="function"?s():s;return(Array.isArray(c)?c:[c]).some(p=>hh(p,l))||an.isInNestedLayer(e,l)}const i=[a?_G(e):void 0,SG(u),F2(e,{exclude:o,onFocusOutside:n,onPointerDownOutside:h})];return()=>{an.remove(e),xy(),EG(e),i.forEach(l=>l?.())}}var P2=()=>typeof window<"u";function AG(){var e;const t=navigator.userAgentData;return(e=t?.platform)!=null?e:navigator.platform}var B2=e=>P2()&&e.test(AG()),NG=()=>P2()&&!!navigator.maxTouchPoints,TG=()=>B2(/^Mac/)&&!NG,OG=()=>B2(/mac|iphone|ipad|ipod/i),MG=()=>OG()&&!TG(),vf="data-scroll-lock";function Cy(e,t){if(!e)return()=>{};const r=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=r}}function FG(e,t,r){if(!e)return()=>{};const a=e.style.getPropertyValue(t);return e.style.setProperty(t,r),()=>{a?e.style.setProperty(t,a):e.style.removeProperty(t)}}function PG(e){const t=e.getBoundingClientRect().left;return Math.round(t)+e.scrollLeft?"paddingLeft":"paddingRight"}function BG(e){var t;const r=e??document,a=(t=r.defaultView)!=null?t:window,{documentElement:s,body:f}=r;if(f.hasAttribute(vf))return;f.setAttribute(vf,"");const h=a.innerWidth-s.clientWidth,n=()=>FG(s,"--scrollbar-width",`${h}px`),u=PG(s),o=()=>Cy(f,{overflow:"hidden",[u]:`${h}px`}),i=()=>{var c,d;const{scrollX:p,scrollY:m,visualViewport:g}=a,b=(c=g?.offsetLeft)!=null?c:0,y=(d=g?.offsetTop)!=null?d:0,w=Cy(f,{position:"fixed",overflow:"hidden",top:`${-(m-Math.floor(y))}px`,left:`${-(p-Math.floor(b))}px`,right:"0",[u]:`${h}px`});return()=>{w(),a.scrollTo(p,m)}},l=[n(),MG()?i():o()];return()=>{l.forEach(c=>c()),f.removeAttribute(vf)}}/*!
* tabbable 6.0.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var I2=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],fl=I2.join(","),R2=typeof Element>"u",ra=R2?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,hl=!R2&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument},k2=function(t,r,a){var s=Array.prototype.slice.apply(t.querySelectorAll(fl));return r&&ra.call(t,fl)&&s.unshift(t),s=s.filter(a),s},$2=function e(t,r,a){for(var s=[],f=Array.from(t);f.length;){var v=f.shift();if(v.tagName==="SLOT"){var h=v.assignedElements(),n=h.length?h:v.children,u=e(n,!0,a);a.flatten?s.push.apply(s,u):s.push({scopeParent:v,candidates:u})}else{var o=ra.call(v,fl);o&&a.filter(v)&&(r||!t.includes(v))&&s.push(v);var i=v.shadowRoot||typeof a.getShadowRoot=="function"&&a.getShadowRoot(v),l=!a.shadowRootFilter||a.shadowRootFilter(v);if(i&&l){var c=e(i===!0?v.children:i.children,!0,a);a.flatten?s.push.apply(s,c):s.push({scopeParent:v,candidates:c})}else f.unshift.apply(f,v.children)}}return s},L2=function(t,r){return t.tabIndex<0&&(r||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},IG=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},z2=function(t){return t.tagName==="INPUT"},RG=function(t){return z2(t)&&t.type==="hidden"},kG=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(a){return a.tagName==="SUMMARY"});return r},$G=function(t,r){for(var a=0;a<t.length;a++)if(t[a].checked&&t[a].form===r)return t[a]},LG=function(t){if(!t.name)return!0;var r=t.form||hl(t),a=function(h){return r.querySelectorAll('input[type="radio"][name="'+h+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=a(window.CSS.escape(t.name));else try{s=a(t.name)}catch(v){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",v.message),!1}var f=$G(s,t.form);return!f||f===t},zG=function(t){return z2(t)&&t.type==="radio"},UG=function(t){return zG(t)&&!LG(t)},jG=function(t){for(var r,a=hl(t).host,s=!!((r=a)!==null&&r!==void 0&&r.ownerDocument.contains(a)||t.ownerDocument.contains(t));!s&&a;){var f;a=hl(a).host,s=!!((f=a)!==null&&f!==void 0&&f.ownerDocument.contains(a))}return s},Sy=function(t){var r=t.getBoundingClientRect(),a=r.width,s=r.height;return a===0&&s===0},qG=function(t,r){var a=r.displayCheck,s=r.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var f=ra.call(t,"details>summary:first-of-type"),v=f?t.parentElement:t;if(ra.call(v,"details:not([open]) *"))return!0;if(!a||a==="full"||a==="legacy-full"){if(typeof s=="function"){for(var h=t;t;){var n=t.parentElement,u=hl(t);if(n&&!n.shadowRoot&&s(n)===!0)return Sy(t);t.assignedSlot?t=t.assignedSlot:!n&&u!==t.ownerDocument?t=u.host:t=n}t=h}if(jG(t))return!t.getClientRects().length;if(a!=="legacy-full")return!0}else if(a==="non-zero-area")return Sy(t);return!1},HG=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var a=0;a<r.children.length;a++){var s=r.children.item(a);if(s.tagName==="LEGEND")return ra.call(r,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}r=r.parentElement}return!1},dl=function(t,r){return!(r.disabled||RG(r)||qG(r,t)||kG(r)||HG(r))},dh=function(t,r){return!(UG(r)||L2(r)<0||!dl(t,r))},VG=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},GG=function e(t){var r=[],a=[];return t.forEach(function(s,f){var v=!!s.scopeParent,h=v?s.scopeParent:s,n=L2(h,v),u=v?e(s.candidates):h;n===0?v?r.push.apply(r,u):r.push(h):a.push({documentOrder:f,tabIndex:n,item:s,isScope:v,content:u})}),a.sort(IG).reduce(function(s,f){return f.isScope?s.push.apply(s,f.content):s.push(f.content),s},[]).concat(r)},WG=function(t,r){r=r||{};var a;return r.getShadowRoot?a=$2([t],r.includeContainer,{filter:dh.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:VG}):a=k2(t,r.includeContainer,dh.bind(null,r)),GG(a)},YG=function(t,r){r=r||{};var a;return r.getShadowRoot?a=$2([t],r.includeContainer,{filter:dl.bind(null,r),flatten:!0,getShadowRoot:r.getShadowRoot}):a=k2(t,r.includeContainer,dl.bind(null,r)),a},pu=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return ra.call(t,fl)===!1?!1:dh(r,t)},XG=I2.concat("iframe").join(","),gf=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return ra.call(t,XG)===!1?!1:dl(r,t)};/*!
* focus-trap 7.0.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Ey(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function _y(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ey(Object(r),!0).forEach(function(a){KG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ey(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function KG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dy=function(){var e=[];return{activateTrap:function(r){if(e.length>0){var a=e[e.length-1];a!==r&&a.pause()}var s=e.indexOf(r);s===-1||e.splice(s,1),e.push(r)},deactivateTrap:function(r){var a=e.indexOf(r);a!==-1&&e.splice(a,1),e.length>0&&e[e.length-1].unpause()}}}(),JG=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},ZG=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},QG=function(t){return t.key==="Tab"||t.keyCode===9},Ay=function(t){return setTimeout(t,0)},Ny=function(t,r){var a=-1;return t.every(function(s,f){return r(s)?(a=f,!1):!0}),a},Bo=function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return typeof t=="function"?t.apply(void 0,a):t},mu=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},eW=function(t,r){var a=r?.document||document,s=_y({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},r),f={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},v,h=function(C,S,E){return C&&C[S]!==void 0?C[S]:s[E||S]},n=function(C){return f.containerGroups.findIndex(function(S){var E=S.container,A=S.tabbableNodes;return E.contains(C)||A.find(function(D){return D===C})})},u=function(C){var S=s[C];if(typeof S=="function"){for(var E=arguments.length,A=new Array(E>1?E-1:0),D=1;D<E;D++)A[D-1]=arguments[D];S=S.apply(void 0,A)}if(S===!0&&(S=void 0),!S){if(S===void 0||S===!1)return S;throw new Error("`".concat(C,"` was specified but was not a node, or did not return a node"))}var M=S;if(typeof S=="string"&&(M=a.querySelector(S),!M))throw new Error("`".concat(C,"` as selector refers to no known node"));return M},o=function(){var C=u("initialFocus");if(C===!1)return!1;if(C===void 0)if(n(a.activeElement)>=0)C=a.activeElement;else{var S=f.tabbableGroups[0],E=S&&S.firstTabbableNode;C=E||u("fallbackFocus")}if(!C)throw new Error("Your focus-trap needs to have at least one focusable element");return C},i=function(){if(f.containerGroups=f.containers.map(function(C){var S=WG(C,s.tabbableOptions),E=YG(C,s.tabbableOptions);return{container:C,tabbableNodes:S,focusableNodes:E,firstTabbableNode:S.length>0?S[0]:null,lastTabbableNode:S.length>0?S[S.length-1]:null,nextTabbableNode:function(D){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,B=E.findIndex(function(O){return O===D});if(!(B<0))return M?E.slice(B+1).find(function(O){return pu(O,s.tabbableOptions)}):E.slice(0,B).reverse().find(function(O){return pu(O,s.tabbableOptions)})}}}),f.tabbableGroups=f.containerGroups.filter(function(C){return C.tabbableNodes.length>0}),f.tabbableGroups.length<=0&&!u("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},l=function x(C){if(C!==!1&&C!==a.activeElement){if(!C||!C.focus){x(o());return}C.focus({preventScroll:!!s.preventScroll}),f.mostRecentlyFocusedNode=C,JG(C)&&C.select()}},c=function(C){var S=u("setReturnFocus",C);return S||(S===!1?!1:C)},d=function(C){var S=mu(C);if(!(n(S)>=0)){if(Bo(s.clickOutsideDeactivates,C)){v.deactivate({returnFocus:s.returnFocusOnDeactivate&&!gf(S,s.tabbableOptions)});return}Bo(s.allowOutsideClick,C)||C.preventDefault()}},p=function(C){var S=mu(C),E=n(S)>=0;E||S instanceof Document?E&&(f.mostRecentlyFocusedNode=S):(C.stopImmediatePropagation(),l(f.mostRecentlyFocusedNode||o()))},m=function(C){var S=mu(C);i();var E=null;if(f.tabbableGroups.length>0){var A=n(S),D=A>=0?f.containerGroups[A]:void 0;if(A<0)C.shiftKey?E=f.tabbableGroups[f.tabbableGroups.length-1].lastTabbableNode:E=f.tabbableGroups[0].firstTabbableNode;else if(C.shiftKey){var M=Ny(f.tabbableGroups,function(T){var q=T.firstTabbableNode;return S===q});if(M<0&&(D.container===S||gf(S,s.tabbableOptions)&&!pu(S,s.tabbableOptions)&&!D.nextTabbableNode(S,!1))&&(M=A),M>=0){var B=M===0?f.tabbableGroups.length-1:M-1,O=f.tabbableGroups[B];E=O.lastTabbableNode}}else{var F=Ny(f.tabbableGroups,function(T){var q=T.lastTabbableNode;return S===q});if(F<0&&(D.container===S||gf(S,s.tabbableOptions)&&!pu(S,s.tabbableOptions)&&!D.nextTabbableNode(S))&&(F=A),F>=0){var z=F===f.tabbableGroups.length-1?0:F+1,N=f.tabbableGroups[z];E=N.firstTabbableNode}}}else E=u("fallbackFocus");E&&(C.preventDefault(),l(E))},g=function(C){if(ZG(C)&&Bo(s.escapeDeactivates,C)!==!1){C.preventDefault(),v.deactivate();return}if(QG(C)){m(C);return}},b=function(C){var S=mu(C);n(S)>=0||Bo(s.clickOutsideDeactivates,C)||Bo(s.allowOutsideClick,C)||(C.preventDefault(),C.stopImmediatePropagation())},y=function(){if(!!f.active)return Dy.activateTrap(v),f.delayInitialFocusTimer=s.delayInitialFocus?Ay(function(){l(o())}):l(o()),a.addEventListener("focusin",p,!0),a.addEventListener("mousedown",d,{capture:!0,passive:!1}),a.addEventListener("touchstart",d,{capture:!0,passive:!1}),a.addEventListener("click",b,{capture:!0,passive:!1}),a.addEventListener("keydown",g,{capture:!0,passive:!1}),v},w=function(){if(!!f.active)return a.removeEventListener("focusin",p,!0),a.removeEventListener("mousedown",d,!0),a.removeEventListener("touchstart",d,!0),a.removeEventListener("click",b,!0),a.removeEventListener("keydown",g,!0),v};return v={get active(){return f.active},get paused(){return f.paused},activate:function(C){if(f.active)return this;var S=h(C,"onActivate"),E=h(C,"onPostActivate"),A=h(C,"checkCanFocusTrap");A||i(),f.active=!0,f.paused=!1,f.nodeFocusedBeforeActivation=a.activeElement,S&&S();var D=function(){A&&i(),y(),E&&E()};return A?(A(f.containers.concat()).then(D,D),this):(D(),this)},deactivate:function(C){if(!f.active)return this;var S=_y({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},C);clearTimeout(f.delayInitialFocusTimer),f.delayInitialFocusTimer=void 0,w(),f.active=!1,f.paused=!1,Dy.deactivateTrap(v);var E=h(S,"onDeactivate"),A=h(S,"onPostDeactivate"),D=h(S,"checkCanReturnFocus"),M=h(S,"returnFocus","returnFocusOnDeactivate");E&&E();var B=function(){Ay(function(){M&&l(c(f.nodeFocusedBeforeActivation)),A&&A()})};return M&&D?(D(c(f.nodeFocusedBeforeActivation)).then(B,B),this):(B(),this)},pause:function(){return f.paused||!f.active?this:(f.paused=!0,w(),this)},unpause:function(){return!f.paused||!f.active?this:(f.paused=!1,i(),y(),this)},updateContainerElements:function(C){var S=[].concat(C).filter(Boolean);return f.containers=S.map(function(E){return typeof E=="string"?a.querySelector(E):E}),f.active&&i(),this}},v.updateContainerElements(t),v};function tW(e){return e.nodeType===Node.DOCUMENT_NODE}function rW(e){return e?.toString()==="[object Window]"}function nW(e){var t;return rW(e)?e.document:tW(e)?e:(t=e?.ownerDocument)!=null?t:document}function iW(e){const t={getRootNode:r=>{var a,s;return(s=(a=r.getRootNode)==null?void 0:a.call(r))!=null?s:document},getDoc:r=>nW(t.getRootNode(r)),getWin:r=>{var a;return(a=t.getDoc(r).defaultView)!=null?a:window},getActiveElement:r=>t.getDoc(r).activeElement,getById:(r,a)=>t.getRootNode(r).getElementById(a),createEmitter:(r,a)=>{const s=t.getWin(r);return function(v,h,n){const{bubbles:u=!0,cancelable:o,composed:i=!0}=n??{},l=`zag:${v}`,c={bubbles:u,cancelable:o,composed:i,detail:h},d=new s.CustomEvent(l,c);a.dispatchEvent(d)}},createListener:r=>function(s,f){const v=`zag:${s}`,h=n=>f(n);return r.addEventListener(v,h),()=>r.removeEventListener(v,h)}};return{...t,...e}}function yf(e){const t=new Set;function r(a){const s=globalThis.requestAnimationFrame(a);t.add(()=>globalThis.cancelAnimationFrame(s))}return r(()=>r(e)),function(){t.forEach(function(s){s()})}}function aW(e){const t=globalThis.requestAnimationFrame(e);return function(){globalThis.cancelAnimationFrame(t)}}var Tt=iW({getUnderlayId:e=>{var t,r;return(r=(t=e.ids)==null?void 0:t.underlay)!=null?r:`dialog:${e.id}:underlay`},getBackdropId:e=>{var t,r;return(r=(t=e.ids)==null?void 0:t.backdrop)!=null?r:`dialog:${e.id}:backdrop`},getContentId:e=>{var t,r;return(r=(t=e.ids)==null?void 0:t.content)!=null?r:`dialog:${e.id}:content`},getTriggerId:e=>{var t,r;return(r=(t=e.ids)==null?void 0:t.trigger)!=null?r:`dialog:${e.id}:trigger`},getTitleId:e=>{var t,r;return(r=(t=e.ids)==null?void 0:t.title)!=null?r:`dialog:${e.id}:title`},getDescriptionId:e=>{var t,r;return(r=(t=e.ids)==null?void 0:t.description)!=null?r:`dialog:${e.id}:description`},getCloseButtonId:e=>{var t,r;return(r=(t=e.ids)==null?void 0:t.closeBtn)!=null?r:`dialog:${e.id}:close-btn`},getContentEl:e=>Tt.getById(e,Tt.getContentId(e)),getTriggerEl:e=>Tt.getById(e,Tt.getTriggerId(e)),getUnderlayEl:e=>Tt.getById(e,Tt.getUnderlayId(e)),getTitleEl:e=>Tt.getById(e,Tt.getTitleId(e)),getDescriptionEl:e=>Tt.getById(e,Tt.getDescriptionId(e))});function oW(e,t,r){const a=e.context["aria-label"],s=e.matches("open"),f=e.context.renderedElements;return{isOpen:s,open(){t("OPEN")},close(){t("CLOSE")},triggerProps:r.button({"data-part":"trigger",id:Tt.getTriggerId(e.context),"aria-haspopup":"dialog",type:"button","aria-expanded":s,"aria-controls":Tt.getContentId(e.context),onClick(){t("TOGGLE")}}),backdropProps:r.element({"data-part":"backdrop",id:Tt.getBackdropId(e.context)}),underlayProps:r.element({"data-part":"underlay",id:Tt.getUnderlayId(e.context)}),contentProps:r.element({"data-part":"content",role:e.context.role,id:Tt.getContentId(e.context),tabIndex:-1,"aria-modal":!0,"aria-label":a||void 0,"aria-labelledby":a||!f.title?void 0:Tt.getTitleId(e.context),"aria-describedby":f.description?Tt.getDescriptionId(e.context):void 0}),titleProps:r.element({"data-part":"title",id:Tt.getTitleId(e.context)}),descriptionProps:r.element({"data-part":"description",id:Tt.getDescriptionId(e.context)}),closeButtonProps:r.button({"data-part":"close-button",id:Tt.getCloseButtonId(e.context),type:"button",onClick(v){v.stopPropagation(),t("CLOSE")}})}}var Ty=(e,...t)=>{const r=typeof e=="function"?e(...t):e;return r??void 0},sW=e=>Array.isArray(e),uW=e=>!(e==null||typeof e!="object"||sW(e));function U2(e){return e===void 0?e:Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0).map(([t,r])=>[t,uW(r)?U2(r):r]))}function lW(e){const t=U2(e);return Ql({id:"dialog",initial:"unknown",context:{role:"dialog",renderedElements:{title:!0,description:!0},modal:!0,trapFocus:!0,preventScroll:!0,closeOnOutsideClick:!0,closeOnEsc:!0,restoreFocus:!0,...t},states:{unknown:{on:{SETUP:t.defaultOpen?"open":"closed"}},open:{entry:["checkRenderedElements"],activities:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{CLOSE:"closed",TOGGLE:"closed"}},closed:{entry:["invokeOnClose"],on:{OPEN:"open",TOGGLE:"open"}}}},{activities:{trackDismissableElement(r,a,{send:s}){let f;return yf(()=>{f=DG(Tt.getContentEl(r),{pointerBlocking:r.modal,exclude:[Tt.getTriggerEl(r)],onDismiss:()=>s({type:"CLOSE",src:"interact-outside"}),onEscapeKeyDown(v){var h;r.closeOnEsc?s({type:"CLOSE",src:"escape-key"}):v.preventDefault(),(h=r.onEsc)==null||h.call(r)},onPointerDownOutside(v){var h;r.closeOnOutsideClick||v.preventDefault(),(h=r.onOutsideClick)==null||h.call(r)}})}),()=>f?.()},preventScroll(r){if(!!r.preventScroll)return BG(Tt.getDoc(r))},trapFocus(r){if(!r.trapFocus)return;let a;return yf(()=>{const s=Tt.getContentEl(r);if(!!s){a=eW(s,{document:Tt.getDoc(r),escapeDeactivates:!1,fallbackFocus:s,allowOutsideClick:!0,returnFocusOnDeactivate:r.restoreFocus,initialFocus:Ty(r.initialFocusEl),setReturnFocus:Ty(r.finalFocusEl)});try{a.activate()}catch{}}}),()=>a?.deactivate()},hideContentBelow(r){if(!r.modal)return;let a;return yf(()=>{a=eG([Tt.getUnderlayEl(r)])}),()=>a?.()}},actions:{checkRenderedElements(r){aW(()=>{r.renderedElements.title=!!Tt.getTitleEl(r),r.renderedElements.description=!!Tt.getDescriptionEl(r)})},invokeOnClose(r){var a;(a=r.onClose)==null||a.call(r)}}})}var cW="qzxe7g6",fW=tn({defaultClassName:"qzxe7g0",variantClassNames:{opacity:{less:"qzxe7g1",more:"qzxe7g2",full:"qzxe7g3"}},defaultVariants:{opacity:"less"},compoundVariants:[]}),hW="qzxe7g5",dW="qzxe7g4";const pW=mt("<div>\xD7</div>"),mW=mt('<div><div></div><div id="underlay"><div></div></div></div>'),Es=({children:e,open:t,setOpen:r,title:a,opacity:s})=>{const[f,v]=tc(lW({id:bl(),onClose:()=>{r(!1)}})),h=Re(()=>oW(f,v,ec)),[n]=jt();Ir(()=>{t()?h().open():h().close()});const u=()=>{r(!1)};return $(Wr,{get when(){return h().isOpen},get children(){const o=mW.cloneNode(!0),i=o.firstChild,l=i.nextSibling,c=l.firstChild;return Nr(i,Ar(()=>h().backdropProps,{get class(){return fW({opacity:s})}}),!1,!1),Nr(l,Ar(()=>h().underlayProps,{class:dW}),!1,!0),Nr(c,Ar(()=>h().contentProps,{class:hW}),!1,!0),Ve(c,$(De,{type:"column",get children(){return[$(De,{style:{"justify-content":"space-between","padding-left":"20px","margin-bottom":"20px","margin-top":"10px"},get children(){return[$(Ie,{color:"yellow",children:a}),(()=>{const d=pW.cloneNode(!0);return d.$$click=u,ft(d,cW),Wt(()=>cr(d,"title",n("Close"))),d})()]}}),e]}})),o}})};fn(["click"]);var vW=tn({defaultClassName:"_1yzmi0a0",variantClassNames:{small:{true:"_1yzmi0a1"},border:{none:"_1yzmi0a2",down:"_1yzmi0a3",full:"_1yzmi0a4"}},defaultVariants:{border:"none"},compoundVariants:[]});const gW=mt("<div></div>"),ic=({style:e,small:t,border:r,contentEditable:a,ref:s,children:f,onBlur:v,onInput:h})=>(()=>{const n=gW.cloneNode(!0);Br(n,"input",h,!0),Br(n,"blur",v);const u=s;return typeof u=="function"?Ki(u,n):s=n,cr(n,"contenteditable",a),cr(n,"spellcheck",!1),Ve(n,f),Wt(o=>{const i=vW({small:t,border:r}),l=e;return i!==o._v$&&ft(n,o._v$=i),o._v$2=gi(n,l,o._v$2),o},{_v$:void 0,_v$2:void 0}),n})();fn(["input"]);const xd=({title:e,open:t,setOpen:r,accept:a,children:s})=>{const[f]=jt(),v=()=>{r(!1),a()};return $(Es,{title:e,open:t,setOpen:r,get children(){return $(De,{center:!0,type:"column",style:{"margin-top":"50px",gap:"20px"},get children(){return[s,$(De,{style:{"justify-content":"space-between",gap:"50px"},get children(){return[$(Le,{onClick:v,get children(){return f("Yes")}}),$(Le,{onClick:()=>r(!1),get children(){return f("No")}})]}})]}})}})};var yW="_171vny80",bW="_171vny81",Pr={};(function(e){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"5.2.4"};if(e.fabric=t,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var r=wu,a=new r.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=a.document,t.jsdomImplForWrapper=wu.implForWrapper,t.nodeCanvas=wu.Canvas,t.window=a,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.commaWsp="(?:\\s+,?\\s*|,\\s*)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=t),function(){function h(c,d){if(!!this.__eventListeners[c]){var p=this.__eventListeners[c];d?p[p.indexOf(d)]=!1:t.util.array.fill(p,!1)}}function n(c,d){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var p in c)this.on(p,c[p]);else this.__eventListeners[c]||(this.__eventListeners[c]=[]),this.__eventListeners[c].push(d);return this}function u(c,d){var p=function(){d.apply(this,arguments),this.off(c,p)}.bind(this);this.on(c,p)}function o(c,d){if(arguments.length===1)for(var p in c)u.call(this,p,c[p]);else u.call(this,c,d);return this}function i(c,d){if(!this.__eventListeners)return this;if(arguments.length===0)for(c in this.__eventListeners)h.call(this,c);else if(arguments.length===1&&typeof arguments[0]=="object")for(var p in c)h.call(this,p,c[p]);else h.call(this,c,d);return this}function l(c,d){if(!this.__eventListeners)return this;var p=this.__eventListeners[c];if(!p)return this;for(var m=0,g=p.length;m<g;m++)p[m]&&p[m].call(this,d||{});return this.__eventListeners[c]=p.filter(function(b){return b!==!1}),this}t.Observable={fire:l,on:n,once:o,off:i}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var h=0,n=arguments.length;h<n;h++)this._onObjectAdded(arguments[h]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(h,n,u){var o=this._objects;return u?o[n]=h:o.splice(n,0,h),this._onObjectAdded&&this._onObjectAdded(h),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var h=this._objects,n,u=!1,o=0,i=arguments.length;o<i;o++)n=h.indexOf(arguments[o]),n!==-1&&(u=!0,h.splice(n,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[o]));return this.renderOnAddRemove&&u&&this.requestRenderAll(),this},forEachObject:function(h,n){for(var u=this.getObjects(),o=0,i=u.length;o<i;o++)h.call(n,u[o],o,u);return this},getObjects:function(h){return typeof h>"u"?this._objects.concat():this._objects.filter(function(n){return n.type===h})},item:function(h){return this._objects[h]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(h,n){return this._objects.indexOf(h)>-1?!0:n?this._objects.some(function(u){return typeof u.contains=="function"&&u.contains(h,!0)}):!1},complexity:function(){return this._objects.reduce(function(h,n){return h+=n.complexity?n.complexity():0,h},0)}},t.CommonMethods={_setOptions:function(h){for(var n in h)this.set(n,h[n])},_initGradient:function(h,n){h&&h.colorStops&&!(h instanceof t.Gradient)&&this.set(n,new t.Gradient(h))},_initPattern:function(h,n,u){h&&h.source&&!(h instanceof t.Pattern)?this.set(n,new t.Pattern(h,u)):u&&u()},_setObject:function(h){for(var n in h)this._set(n,h[n])},set:function(h,n){return typeof h=="object"?this._setObject(h):this._set(h,n),this},_set:function(h,n){this[h]=n},toggle:function(h){var n=this.get(h);return typeof n=="boolean"&&this.set(h,!n),this},get:function(h){return this[h]}},function(h){var n=Math.sqrt,u=Math.atan2,o=Math.pow,i=Math.PI/180,l=Math.PI/2;t.util={cos:function(c){if(c===0)return 1;c<0&&(c=-c);var d=c/l;switch(d){case 1:case 3:return 0;case 2:return-1}return Math.cos(c)},sin:function(c){if(c===0)return 0;var d=c/l,p=1;switch(c<0&&(p=-1),d){case 1:return p;case 2:return 0;case 3:return-p}return Math.sin(c)},removeFromArray:function(c,d){var p=c.indexOf(d);return p!==-1&&c.splice(p,1),c},getRandomInt:function(c,d){return Math.floor(Math.random()*(d-c+1))+c},degreesToRadians:function(c){return c*i},radiansToDegrees:function(c){return c/i},rotatePoint:function(c,d,p){var m=new t.Point(c.x-d.x,c.y-d.y),g=t.util.rotateVector(m,p);return new t.Point(g.x,g.y).addEquals(d)},rotateVector:function(c,d){var p=t.util.sin(d),m=t.util.cos(d),g=c.x*m-c.y*p,b=c.x*p+c.y*m;return{x:g,y:b}},createVector:function(c,d){return new t.Point(d.x-c.x,d.y-c.y)},calcAngleBetweenVectors:function(c,d){return Math.acos((c.x*d.x+c.y*d.y)/(Math.hypot(c.x,c.y)*Math.hypot(d.x,d.y)))},getHatVector:function(c){return new t.Point(c.x,c.y).multiply(1/Math.hypot(c.x,c.y))},getBisector:function(c,d,p){var m=t.util.createVector(c,d),g=t.util.createVector(c,p),b=t.util.calcAngleBetweenVectors(m,g),y=t.util.calcAngleBetweenVectors(t.util.rotateVector(m,b),g),w=b*(y===0?1:-1)/2;return{vector:t.util.getHatVector(t.util.rotateVector(m,w)),angle:b}},projectStrokeOnPoints:function(c,d,p){var m=[],g=d.strokeWidth/2,b=d.strokeUniform?new t.Point(1/d.scaleX,1/d.scaleY):new t.Point(1,1),y=function(w){var x=g/Math.hypot(w.x,w.y);return new t.Point(w.x*x*b.x,w.y*x*b.y)};return c.length<=1||c.forEach(function(w,x){var C=new t.Point(w.x,w.y),S,E;x===0?(E=c[x+1],S=p?y(t.util.createVector(E,C)).addEquals(C):c[c.length-1]):x===c.length-1?(S=c[x-1],E=p?y(t.util.createVector(S,C)).addEquals(C):c[0]):(S=c[x-1],E=c[x+1]);var A=t.util.getBisector(C,S,E),D=A.vector,M=A.angle,B,O;if(d.strokeLineJoin==="miter"&&(B=-g/Math.sin(M/2),O=new t.Point(D.x*B*b.x,D.y*B*b.y),Math.hypot(O.x,O.y)/g<=d.strokeMiterLimit)){m.push(C.add(O)),m.push(C.subtract(O));return}B=-g*Math.SQRT2,O=new t.Point(D.x*B*b.x,D.y*B*b.y),m.push(C.add(O)),m.push(C.subtract(O))}),m},transformPoint:function(c,d,p){return p?new t.Point(d[0]*c.x+d[2]*c.y,d[1]*c.x+d[3]*c.y):new t.Point(d[0]*c.x+d[2]*c.y+d[4],d[1]*c.x+d[3]*c.y+d[5])},makeBoundingBoxFromPoints:function(c,d){if(d)for(var p=0;p<c.length;p++)c[p]=t.util.transformPoint(c[p],d);var m=[c[0].x,c[1].x,c[2].x,c[3].x],g=t.util.array.min(m),b=t.util.array.max(m),y=b-g,w=[c[0].y,c[1].y,c[2].y,c[3].y],x=t.util.array.min(w),C=t.util.array.max(w),S=C-x;return{left:g,top:x,width:y,height:S}},invertTransform:function(c){var d=1/(c[0]*c[3]-c[1]*c[2]),p=[d*c[3],-d*c[1],-d*c[2],d*c[0]],m=t.util.transformPoint({x:c[4],y:c[5]},p,!0);return p[4]=-m.x,p[5]=-m.y,p},toFixed:function(c,d){return parseFloat(Number(c).toFixed(d))},parseUnit:function(c,d){var p=/\D{0,2}$/.exec(c),m=parseFloat(c);switch(d||(d=t.Text.DEFAULT_SVG_FONT_SIZE),p[0]){case"mm":return m*t.DPI/25.4;case"cm":return m*t.DPI/2.54;case"in":return m*t.DPI;case"pt":return m*t.DPI/72;case"pc":return m*t.DPI/72*12;case"em":return m*d;default:return m}},falseFunction:function(){return!1},getKlass:function(c,d){return c=t.util.string.camelize(c.charAt(0).toUpperCase()+c.slice(1)),t.util.resolveNamespace(d)[c]},getSvgAttributes:function(c){var d=["instantiated_by_use","style","id","class"];switch(c){case"linearGradient":d=d.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":d=d.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":d=d.concat(["offset","stop-color","stop-opacity"]);break}return d},resolveNamespace:function(c){if(!c)return t;var d=c.split("."),p=d.length,m,g=h||t.window;for(m=0;m<p;++m)g=g[d[m]];return g},loadImage:function(c,d,p,m){if(!c){d&&d.call(p,c);return}var g=t.util.createImage(),b=function(){d&&d.call(p,g,!1),g=g.onload=g.onerror=null};g.onload=b,g.onerror=function(){t.log("Error loading "+g.src),d&&d.call(p,null,!0),g=g.onload=g.onerror=null},c.indexOf("data")!==0&&m!==void 0&&m!==null&&(g.crossOrigin=m),c.substring(0,14)==="data:image/svg"&&(g.onload=null,t.util.loadImageInDom(g,b)),g.src=c},loadImageInDom:function(c,d){var p=t.document.createElement("div");p.style.width=p.style.height="1px",p.style.left=p.style.top="-100%",p.style.position="absolute",p.appendChild(c),t.document.querySelector("body").appendChild(p),c.onload=function(){d(),p.parentNode.removeChild(p),p=null}},enlivenObjects:function(c,d,p,m){c=c||[];var g=[],b=0,y=c.length;function w(){++b===y&&d&&d(g.filter(function(x){return x}))}if(!y){d&&d(g);return}c.forEach(function(x,C){if(!x||!x.type){w();return}var S=t.util.getKlass(x.type,p);S.fromObject(x,function(E,A){A||(g[C]=E),m&&m(x,E,A),w()})})},enlivenObjectEnlivables:function(c,d,p){var m=t.Object.ENLIVEN_PROPS.filter(function(g){return!!c[g]});t.util.enlivenObjects(m.map(function(g){return c[g]}),function(g){var b={};m.forEach(function(y,w){b[y]=g[w],d&&(d[y]=g[w])}),p&&p(b)})},enlivenPatterns:function(c,d){c=c||[];function p(){++g===b&&d&&d(m)}var m=[],g=0,b=c.length;if(!b){d&&d(m);return}c.forEach(function(y,w){y&&y.source?new t.Pattern(y,function(x){m[w]=x,p()}):(m[w]=y,p())})},groupSVGElements:function(c,d,p){var m;return c&&c.length===1?(typeof p<"u"&&(c[0].sourcePath=p),c[0]):(d&&(d.width&&d.height?d.centerPoint={x:d.width/2,y:d.height/2}:(delete d.width,delete d.height)),m=new t.Group(c,d),typeof p<"u"&&(m.sourcePath=p),m)},populateWithProperties:function(c,d,p){if(p&&Array.isArray(p))for(var m=0,g=p.length;m<g;m++)p[m]in c&&(d[p[m]]=c[p[m]])},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(c){var d=t.util.createCanvasElement();return d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0),d},toDataURL:function(c,d,p){return c.toDataURL("image/"+d,p)},createImage:function(){return t.document.createElement("img")},multiplyTransformMatrices:function(c,d,p){return[c[0]*d[0]+c[2]*d[1],c[1]*d[0]+c[3]*d[1],c[0]*d[2]+c[2]*d[3],c[1]*d[2]+c[3]*d[3],p?0:c[0]*d[4]+c[2]*d[5]+c[4],p?0:c[1]*d[4]+c[3]*d[5]+c[5]]},qrDecompose:function(c){var d=u(c[1],c[0]),p=o(c[0],2)+o(c[1],2),m=n(p),g=(c[0]*c[3]-c[2]*c[1])/m,b=u(c[0]*c[2]+c[1]*c[3],p);return{angle:d/i,scaleX:m,scaleY:g,skewX:b/i,skewY:0,translateX:c[4],translateY:c[5]}},calcRotateMatrix:function(c){if(!c.angle)return t.iMatrix.concat();var d=t.util.degreesToRadians(c.angle),p=t.util.cos(d),m=t.util.sin(d);return[p,m,-m,p,0,0]},calcDimensionsMatrix:function(c){var d=typeof c.scaleX>"u"?1:c.scaleX,p=typeof c.scaleY>"u"?1:c.scaleY,m=[c.flipX?-d:d,0,0,c.flipY?-p:p,0,0],g=t.util.multiplyTransformMatrices,b=t.util.degreesToRadians;return c.skewX&&(m=g(m,[1,0,Math.tan(b(c.skewX)),1],!0)),c.skewY&&(m=g(m,[1,Math.tan(b(c.skewY)),0,1],!0)),m},composeMatrix:function(c){var d=[1,0,0,1,c.translateX||0,c.translateY||0],p=t.util.multiplyTransformMatrices;return c.angle&&(d=p(d,t.util.calcRotateMatrix(c))),(c.scaleX!==1||c.scaleY!==1||c.skewX||c.skewY||c.flipX||c.flipY)&&(d=p(d,t.util.calcDimensionsMatrix(c))),d},resetObjectTransform:function(c){c.scaleX=1,c.scaleY=1,c.skewX=0,c.skewY=0,c.flipX=!1,c.flipY=!1,c.rotate(0)},saveObjectTransform:function(c){return{scaleX:c.scaleX,scaleY:c.scaleY,skewX:c.skewX,skewY:c.skewY,angle:c.angle,left:c.left,flipX:c.flipX,flipY:c.flipY,top:c.top}},isTransparent:function(c,d,p,m){m>0&&(d>m?d-=m:d=0,p>m?p-=m:p=0);var g=!0,b,y,w=c.getImageData(d,p,m*2||1,m*2||1),x=w.data.length;for(b=3;b<x&&(y=w.data[b],g=y<=0,g!==!1);b+=4);return w=null,g},parsePreserveAspectRatioAttribute:function(c){var d="meet",p="Mid",m="Mid",g=c.split(" "),b;return g&&g.length&&(d=g.pop(),d!=="meet"&&d!=="slice"?(b=d,d="meet"):g.length&&(b=g.pop())),p=b!=="none"?b.slice(1,4):"none",m=b!=="none"?b.slice(5,8):"none",{meetOrSlice:d,alignX:p,alignY:m}},clearFabricFontCache:function(c){c=(c||"").toLowerCase(),c?t.charWidthsCache[c]&&delete t.charWidthsCache[c]:t.charWidthsCache={}},limitDimsByArea:function(c,d){var p=Math.sqrt(d*c),m=Math.floor(d/p);return{x:Math.floor(p),y:m}},capValue:function(c,d,p){return Math.max(c,Math.min(d,p))},findScaleToFit:function(c,d){return Math.min(d.width/c.width,d.height/c.height)},findScaleToCover:function(c,d){return Math.max(d.width/c.width,d.height/c.height)},matrixToSVG:function(c){return"matrix("+c.map(function(d){return t.util.toFixed(d,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(c,d){var p=t.util.invertTransform(d),m=t.util.multiplyTransformMatrices(p,c.calcOwnMatrix());t.util.applyTransformToObject(c,m)},addTransformToObject:function(c,d){t.util.applyTransformToObject(c,t.util.multiplyTransformMatrices(d,c.calcOwnMatrix()))},applyTransformToObject:function(c,d){var p=t.util.qrDecompose(d),m=new t.Point(p.translateX,p.translateY);c.flipX=!1,c.flipY=!1,c.set("scaleX",p.scaleX),c.set("scaleY",p.scaleY),c.skewX=p.skewX,c.skewY=p.skewY,c.angle=p.angle,c.setPositionByOrigin(m,"center","center")},sizeAfterTransform:function(c,d,p){var m=c/2,g=d/2,b=[{x:-m,y:-g},{x:m,y:-g},{x:-m,y:g},{x:m,y:g}],y=t.util.calcDimensionsMatrix(p),w=t.util.makeBoundingBoxFromPoints(b,y);return{x:w.width,y:w.height}},mergeClipPaths:function(c,d){var p=c,m=d;p.inverted&&!m.inverted&&(p=d,m=c),t.util.applyTransformToObject(m,t.util.multiplyTransformMatrices(t.util.invertTransform(p.calcTransformMatrix()),m.calcTransformMatrix()));var g=p.inverted&&m.inverted;return g&&(p.inverted=m.inverted=!1),new t.Group([p],{clipPath:m,inverted:g})},hasStyleChanged:function(c,d,p){return p=p||!1,c.fill!==d.fill||c.stroke!==d.stroke||c.strokeWidth!==d.strokeWidth||c.fontSize!==d.fontSize||c.fontFamily!==d.fontFamily||c.fontWeight!==d.fontWeight||c.fontStyle!==d.fontStyle||c.deltaY!==d.deltaY||p&&(c.overline!==d.overline||c.underline!==d.underline||c.linethrough!==d.linethrough)},stylesToArray:function(p,d){for(var p=t.util.object.clone(p,!0),m=d.split(`
`),g=-1,b={},y=[],w=0;w<m.length;w++){if(!p[w]){g+=m[w].length;continue}for(var x=0;x<m[w].length;x++){g++;var C=p[w][x];if(C){var S=t.util.hasStyleChanged(b,C,!0);S?y.push({start:g,end:g+1,style:C}):y[y.length-1].end++}b=C||{}}}return y},stylesFromArray:function(c,d){if(!Array.isArray(c))return c;for(var p=d.split(`
`),m=-1,g=0,b={},y=0;y<p.length;y++)for(var w=0;w<p[y].length;w++)m++,c[g]&&c[g].start<=m&&m<c[g].end&&(b[y]=b[y]||{},b[y][w]=Object.assign({},c[g].style),m===c[g].end-1&&g++);return b}}}(e),function(){var h=Array.prototype.join,n={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},u={m:"l",M:"L"};function o(_,I,U,j,L,P,k,V,Q,ne,re){var ie=t.util.cos(_),de=t.util.sin(_),ve=t.util.cos(I),ce=t.util.sin(I),ae=U*L*ve-j*P*ce+k,G=j*L*ve+U*P*ce+V,X=ne+Q*(-U*L*de-j*P*ie),te=re+Q*(-j*L*de+U*P*ie),W=ae+Q*(U*L*ce+j*P*ve),ee=G+Q*(j*L*ce-U*P*ve);return["C",X,te,W,ee,ae,G]}function i(_,I,U,j,L,P,k){var V=Math.PI,Q=k*V/180,ne=t.util.sin(Q),re=t.util.cos(Q),ie=0,de=0;U=Math.abs(U),j=Math.abs(j);var ve=-re*_*.5-ne*I*.5,ce=-re*I*.5+ne*_*.5,ae=U*U,G=j*j,X=ce*ce,te=ve*ve,W=ae*G-ae*X-G*te,ee=0;if(W<0){var he=Math.sqrt(1-W/(ae*G));U*=he,j*=he}else ee=(L===P?-1:1)*Math.sqrt(W/(ae*X+G*te));var pe=ee*U*ce/j,ue=-ee*j*ve/U,Y=re*pe-ne*ue+_*.5,K=ne*pe+re*ue+I*.5,fe=l(1,0,(ve-pe)/U,(ce-ue)/j),me=l((ve-pe)/U,(ce-ue)/j,(-ve-pe)/U,(-ce-ue)/j);P===0&&me>0?me-=2*V:P===1&&me<0&&(me+=2*V);for(var be=Math.ceil(Math.abs(me/V*2)),Se=[],xe=me/be,Ce=8/3*Math.sin(xe/4)*Math.sin(xe/4)/Math.sin(xe/2),_e=fe+xe,ke=0;ke<be;ke++)Se[ke]=o(fe,_e,re,ne,U,j,Y,K,Ce,ie,de),ie=Se[ke][5],de=Se[ke][6],fe=_e,_e+=xe;return Se}function l(_,I,U,j){var L=Math.atan2(I,_),P=Math.atan2(j,U);return P>=L?P-L:2*Math.PI-(L-P)}function c(_,I,U,j,L,P,k,V){var Q;if(t.cachesBoundsOfCurve&&(Q=h.call(arguments),t.boundsOfCurveCache[Q]))return t.boundsOfCurveCache[Q];var ne=Math.sqrt,re=Math.min,ie=Math.max,de=Math.abs,ve=[],ce=[[],[]],ae,G,X,te,W,ee,he,pe;G=6*_-12*U+6*L,ae=-3*_+9*U-9*L+3*k,X=3*U-3*_;for(var ue=0;ue<2;++ue){if(ue>0&&(G=6*I-12*j+6*P,ae=-3*I+9*j-9*P+3*V,X=3*j-3*I),de(ae)<1e-12){if(de(G)<1e-12)continue;te=-X/G,0<te&&te<1&&ve.push(te);continue}he=G*G-4*X*ae,!(he<0)&&(pe=ne(he),W=(-G+pe)/(2*ae),0<W&&W<1&&ve.push(W),ee=(-G-pe)/(2*ae),0<ee&&ee<1&&ve.push(ee))}for(var Y,K,fe=ve.length,me=fe,be;fe--;)te=ve[fe],be=1-te,Y=be*be*be*_+3*be*be*te*U+3*be*te*te*L+te*te*te*k,ce[0][fe]=Y,K=be*be*be*I+3*be*be*te*j+3*be*te*te*P+te*te*te*V,ce[1][fe]=K;ce[0][me]=_,ce[1][me]=I,ce[0][me+1]=k,ce[1][me+1]=V;var Se=[{x:re.apply(null,ce[0]),y:re.apply(null,ce[1])},{x:ie.apply(null,ce[0]),y:ie.apply(null,ce[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[Q]=Se),Se}function d(_,I,U){for(var j=U[1],L=U[2],P=U[3],k=U[4],V=U[5],Q=U[6],ne=U[7],re=i(Q-_,ne-I,j,L,k,V,P),ie=0,de=re.length;ie<de;ie++)re[ie][1]+=_,re[ie][2]+=I,re[ie][3]+=_,re[ie][4]+=I,re[ie][5]+=_,re[ie][6]+=I;return re}function p(_){var I=0,U=0,j=_.length,L=0,P=0,k,V,Q,ne=[],re,ie,de;for(V=0;V<j;++V){switch(Q=!1,k=_[V].slice(0),k[0]){case"l":k[0]="L",k[1]+=I,k[2]+=U;case"L":I=k[1],U=k[2];break;case"h":k[1]+=I;case"H":k[0]="L",k[2]=U,I=k[1];break;case"v":k[1]+=U;case"V":k[0]="L",U=k[1],k[1]=I,k[2]=U;break;case"m":k[0]="M",k[1]+=I,k[2]+=U;case"M":I=k[1],U=k[2],L=k[1],P=k[2];break;case"c":k[0]="C",k[1]+=I,k[2]+=U,k[3]+=I,k[4]+=U,k[5]+=I,k[6]+=U;case"C":ie=k[3],de=k[4],I=k[5],U=k[6];break;case"s":k[0]="S",k[1]+=I,k[2]+=U,k[3]+=I,k[4]+=U;case"S":re==="C"?(ie=2*I-ie,de=2*U-de):(ie=I,de=U),I=k[3],U=k[4],k[0]="C",k[5]=k[3],k[6]=k[4],k[3]=k[1],k[4]=k[2],k[1]=ie,k[2]=de,ie=k[3],de=k[4];break;case"q":k[0]="Q",k[1]+=I,k[2]+=U,k[3]+=I,k[4]+=U;case"Q":ie=k[1],de=k[2],I=k[3],U=k[4];break;case"t":k[0]="T",k[1]+=I,k[2]+=U;case"T":re==="Q"?(ie=2*I-ie,de=2*U-de):(ie=I,de=U),k[0]="Q",I=k[1],U=k[2],k[1]=ie,k[2]=de,k[3]=I,k[4]=U;break;case"a":k[0]="A",k[6]+=I,k[7]+=U;case"A":Q=!0,ne=ne.concat(d(I,U,k)),I=k[6],U=k[7];break;case"z":case"Z":I=L,U=P;break}Q||ne.push(k),re=k[0]}return ne}function m(_,I,U,j){return Math.sqrt((U-_)*(U-_)+(j-I)*(j-I))}function g(_){return _*_*_}function b(_){return 3*_*_*(1-_)}function y(_){return 3*_*(1-_)*(1-_)}function w(_){return(1-_)*(1-_)*(1-_)}function x(_,I,U,j,L,P,k,V){return function(Q){var ne=g(Q),re=b(Q),ie=y(Q),de=w(Q);return{x:k*ne+L*re+U*ie+_*de,y:V*ne+P*re+j*ie+I*de}}}function C(_,I,U,j,L,P,k,V){return function(Q){var ne=1-Q,re=3*ne*ne*(U-_)+6*ne*Q*(L-U)+3*Q*Q*(k-L),ie=3*ne*ne*(j-I)+6*ne*Q*(P-j)+3*Q*Q*(V-P);return Math.atan2(ie,re)}}function S(_){return _*_}function E(_){return 2*_*(1-_)}function A(_){return(1-_)*(1-_)}function D(_,I,U,j,L,P){return function(k){var V=S(k),Q=E(k),ne=A(k);return{x:L*V+U*Q+_*ne,y:P*V+j*Q+I*ne}}}function M(_,I,U,j,L,P){return function(k){var V=1-k,Q=2*V*(U-_)+2*k*(L-U),ne=2*V*(j-I)+2*k*(P-j);return Math.atan2(ne,Q)}}function B(_,I,U){var j={x:I,y:U},L,P=0,k;for(k=1;k<=100;k+=1)L=_(k/100),P+=m(j.x,j.y,L.x,L.y),j=L;return P}function O(_,I){for(var U=0,j=0,L=_.iterator,P={x:_.x,y:_.y},k,V,Q=.01,ne=_.angleFinder,re;j<I&&Q>1e-4;)k=L(U),re=U,V=m(P.x,P.y,k.x,k.y),V+j>I?(U-=Q,Q/=2):(P=k,U+=Q,j+=V);return k.angle=ne(re),k}function F(_){for(var I=0,U=_.length,j,L=0,P=0,k=0,V=0,Q=[],ne,re,ie,de=0;de<U;de++){switch(j=_[de],re={x:L,y:P,command:j[0]},j[0]){case"M":re.length=0,k=L=j[1],V=P=j[2];break;case"L":re.length=m(L,P,j[1],j[2]),L=j[1],P=j[2];break;case"C":ne=x(L,P,j[1],j[2],j[3],j[4],j[5],j[6]),ie=C(L,P,j[1],j[2],j[3],j[4],j[5],j[6]),re.iterator=ne,re.angleFinder=ie,re.length=B(ne,L,P),L=j[5],P=j[6];break;case"Q":ne=D(L,P,j[1],j[2],j[3],j[4]),ie=M(L,P,j[1],j[2],j[3],j[4]),re.iterator=ne,re.angleFinder=ie,re.length=B(ne,L,P),L=j[3],P=j[4];break;case"Z":case"z":re.destX=k,re.destY=V,re.length=m(L,P,k,V),L=k,P=V;break}I+=re.length,Q.push(re)}return Q.push({length:I,x:L,y:P}),Q}function z(_,I,U){U||(U=F(_));for(var j=0;I-U[j].length>0&&j<U.length-2;)I-=U[j].length,j++;var L=U[j],P=I/L.length,k=L.command,V=_[j],Q;switch(k){case"M":return{x:L.x,y:L.y,angle:0};case"Z":case"z":return Q=new t.Point(L.x,L.y).lerp(new t.Point(L.destX,L.destY),P),Q.angle=Math.atan2(L.destY-L.y,L.destX-L.x),Q;case"L":return Q=new t.Point(L.x,L.y).lerp(new t.Point(V[1],V[2]),P),Q.angle=Math.atan2(V[2]-L.y,V[1]-L.x),Q;case"C":return O(L,I);case"Q":return O(L,I)}}function N(_){var I=[],U=[],j,L,P=t.rePathCommand,k="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",V="("+k+")"+t.commaWsp,Q="([01])"+t.commaWsp+"?",ne=V+"?"+V+"?"+V+Q+Q+V+"?("+k+")",re=new RegExp(ne,"g"),ie,de,ve;if(!_||!_.match)return I;ve=_.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var ce=0,ae,G=ve.length;ce<G;ce++){j=ve[ce],de=j.slice(1).trim(),U.length=0;var X=j.charAt(0);if(ae=[X],X.toLowerCase()==="a")for(var te;te=re.exec(de);)for(var W=1;W<te.length;W++)U.push(te[W]);else for(;ie=P.exec(de);)U.push(ie[0]);for(var W=0,ee=U.length;W<ee;W++)L=parseFloat(U[W]),isNaN(L)||ae.push(L);var he=n[X.toLowerCase()],pe=u[X]||X;if(ae.length-1>he)for(var ue=1,Y=ae.length;ue<Y;ue+=he)I.push([X].concat(ae.slice(ue,ue+he))),X=pe;else I.push(ae)}return I}function T(_,I){var U=[],j,L=new t.Point(_[0].x,_[0].y),P=new t.Point(_[1].x,_[1].y),k=_.length,V=1,Q=0,ne=k>2;for(I=I||0,ne&&(V=_[2].x<P.x?-1:_[2].x===P.x?0:1,Q=_[2].y<P.y?-1:_[2].y===P.y?0:1),U.push(["M",L.x-V*I,L.y-Q*I]),j=1;j<k;j++){if(!L.eq(P)){var re=L.midPointFrom(P);U.push(["Q",L.x,L.y,re.x,re.y])}L=_[j],j+1<_.length&&(P=_[j+1])}return ne&&(V=L.x>_[j-2].x?1:L.x===_[j-2].x?0:-1,Q=L.y>_[j-2].y?1:L.y===_[j-2].y?0:-1),U.push(["L",L.x+V*I,L.y+Q*I]),U}function q(_,I,U){return U&&(I=t.util.multiplyTransformMatrices(I,[1,0,0,1,-U.x,-U.y])),_.map(function(j){for(var L=j.slice(0),P={},k=1;k<j.length-1;k+=2)P.x=j[k],P.y=j[k+1],P=t.util.transformPoint(P,I),L[k]=P.x,L[k+1]=P.y;return L})}t.util.joinPath=function(_){return _.map(function(I){return I.join(" ")}).join(" ")},t.util.parsePath=N,t.util.makePathSimpler=p,t.util.getSmoothPathFromPoints=T,t.util.getPathSegmentsInfo=F,t.util.getBoundsOfCurve=c,t.util.getPointOnPath=z,t.util.transformPath=q}(),function(){var h=Array.prototype.slice;function n(c,d){for(var p=h.call(arguments,2),m=[],g=0,b=c.length;g<b;g++)m[g]=p.length?c[g][d].apply(c[g],p):c[g][d].call(c[g]);return m}function u(c,d){return l(c,d,function(p,m){return p>=m})}function o(c,d){return l(c,d,function(p,m){return p<m})}function i(c,d){for(var p=c.length;p--;)c[p]=d;return c}function l(c,d,p){if(!(!c||c.length===0)){var m=c.length-1,g=d?c[m][d]:c[m];if(d)for(;m--;)p(c[m][d],g)&&(g=c[m][d]);else for(;m--;)p(c[m],g)&&(g=c[m]);return g}}t.util.array={fill:i,invoke:n,min:o,max:u}}(),function(){function h(u,o,i){if(i)if(!t.isLikelyNode&&o instanceof Element)u=o;else if(o instanceof Array){u=[];for(var l=0,c=o.length;l<c;l++)u[l]=h({},o[l],i)}else if(o&&typeof o=="object")for(var d in o)d==="canvas"||d==="group"?u[d]=null:o.hasOwnProperty(d)&&(u[d]=h({},o[d],i));else u=o;else for(var d in o)u[d]=o[d];return u}function n(u,o){return h({},u,o)}t.util.object={extend:h,clone:n},t.util.object.extend(t.util,t.Observable)}(),function(){function h(l){return l.replace(/-+(.)?/g,function(c,d){return d?d.toUpperCase():""})}function n(l,c){return l.charAt(0).toUpperCase()+(c?l.slice(1):l.slice(1).toLowerCase())}function u(l){return l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(l){var c=0,d,p=[];for(c=0,d;c<l.length;c++)(d=i(l,c))!==!1&&p.push(d);return p}function i(l,c){var d=l.charCodeAt(c);if(isNaN(d))return"";if(d<55296||d>57343)return l.charAt(c);if(55296<=d&&d<=56319){if(l.length<=c+1)throw"High surrogate without following low surrogate";var p=l.charCodeAt(c+1);if(56320>p||p>57343)throw"High surrogate without following low surrogate";return l.charAt(c)+l.charAt(c+1)}if(c===0)throw"Low surrogate without preceding high surrogate";var m=l.charCodeAt(c-1);if(55296>m||m>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:h,capitalize:n,escapeXml:u,graphemeSplit:o}}(),function(){var h=Array.prototype.slice,n=function(){},u=function(){for(var d in{toString:1})if(d==="toString")return!1;return!0}(),o=function(d,p,m){for(var g in p)g in d.prototype&&typeof d.prototype[g]=="function"&&(p[g]+"").indexOf("callSuper")>-1?d.prototype[g]=function(b){return function(){var y=this.constructor.superclass;this.constructor.superclass=m;var w=p[b].apply(this,arguments);if(this.constructor.superclass=y,b!=="initialize")return w}}(g):d.prototype[g]=p[g],u&&(p.toString!==Object.prototype.toString&&(d.prototype.toString=p.toString),p.valueOf!==Object.prototype.valueOf&&(d.prototype.valueOf=p.valueOf))};function i(){}function l(d){for(var p=null,m=this;m.constructor.superclass;){var g=m.constructor.superclass.prototype[d];if(m[d]!==g){p=g;break}m=m.constructor.superclass.prototype}return p?arguments.length>1?p.apply(this,h.call(arguments,1)):p.call(this):console.log("tried to callSuper "+d+", method not found in prototype chain",this)}function c(){var d=null,p=h.call(arguments,0);typeof p[0]=="function"&&(d=p.shift());function m(){this.initialize.apply(this,arguments)}m.superclass=d,m.subclasses=[],d&&(i.prototype=d.prototype,m.prototype=new i,d.subclasses.push(m));for(var g=0,b=p.length;g<b;g++)o(m,p[g],d);return m.prototype.initialize||(m.prototype.initialize=n),m.prototype.constructor=m,m.prototype.callSuper=l,m}t.util.createClass=c}(),function(){var h=!!t.document.createElement("div").attachEvent,n=["touchstart","touchmove","touchend"];t.util.addListener=function(o,i,l,c){o&&o.addEventListener(i,l,h?!1:c)},t.util.removeListener=function(o,i,l,c){o&&o.removeEventListener(i,l,h?!1:c)};function u(o){var i=o.changedTouches;return i&&i[0]?i[0]:o}t.util.getPointer=function(o){var i=o.target,l=t.util.getScrollLeftTop(i),c=u(o);return{x:c.clientX+l.left,y:c.clientY+l.top}},t.util.isTouchEvent=function(o){return n.indexOf(o.type)>-1||o.pointerType==="touch"}}(),function(){function h(c,d){var p=c.style;if(!p)return c;if(typeof d=="string")return c.style.cssText+=";"+d,d.indexOf("opacity")>-1?l(c,d.match(/opacity:\s*(\d?\.?\d*)/)[1]):c;for(var m in d)if(m==="opacity")l(c,d[m]);else{var g=m==="float"||m==="cssFloat"?typeof p.styleFloat>"u"?"cssFloat":"styleFloat":m;p.setProperty(g,d[m])}return c}var n=t.document.createElement("div"),u=typeof n.style.opacity=="string",o=typeof n.style.filter=="string",i=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,l=function(c){return c};u?l=function(c,d){return c.style.opacity=d,c}:o&&(l=function(c,d){var p=c.style;return c.currentStyle&&!c.currentStyle.hasLayout&&(p.zoom=1),i.test(p.filter)?(d=d>=.9999?"":"alpha(opacity="+d*100+")",p.filter=p.filter.replace(i,d)):p.filter+=" alpha(opacity="+d*100+")",c}),t.util.setStyle=h}(),function(){var h=Array.prototype.slice;function n(w){return typeof w=="string"?t.document.getElementById(w):w}var u,o=function(w){return h.call(w,0)};try{u=o(t.document.childNodes)instanceof Array}catch{}u||(o=function(w){for(var x=new Array(w.length),C=w.length;C--;)x[C]=w[C];return x});function i(w,x){var C=t.document.createElement(w);for(var S in x)S==="class"?C.className=x[S]:S==="for"?C.htmlFor=x[S]:C.setAttribute(S,x[S]);return C}function l(w,x){w&&(" "+w.className+" ").indexOf(" "+x+" ")===-1&&(w.className+=(w.className?" ":"")+x)}function c(w,x,C){return typeof x=="string"&&(x=i(x,C)),w.parentNode&&w.parentNode.replaceChild(x,w),x.appendChild(w),x}function d(w){for(var x=0,C=0,S=t.document.documentElement,E=t.document.body||{scrollLeft:0,scrollTop:0};w&&(w.parentNode||w.host)&&(w=w.parentNode||w.host,w===t.document?(x=E.scrollLeft||S.scrollLeft||0,C=E.scrollTop||S.scrollTop||0):(x+=w.scrollLeft||0,C+=w.scrollTop||0),!(w.nodeType===1&&w.style.position==="fixed")););return{left:x,top:C}}function p(w){var x,C=w&&w.ownerDocument,S={left:0,top:0},E={left:0,top:0},A,D={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!C)return E;for(var M in D)E[D[M]]+=parseInt(m(w,M),10)||0;return x=C.documentElement,typeof w.getBoundingClientRect<"u"&&(S=w.getBoundingClientRect()),A=d(w),{left:S.left+A.left-(x.clientLeft||0)+E.left,top:S.top+A.top-(x.clientTop||0)+E.top}}var m;t.document.defaultView&&t.document.defaultView.getComputedStyle?m=function(w,x){var C=t.document.defaultView.getComputedStyle(w,null);return C?C[x]:void 0}:m=function(w,x){var C=w.style[x];return!C&&w.currentStyle&&(C=w.currentStyle[x]),C},function(){var w=t.document.documentElement.style,x="userSelect"in w?"userSelect":"MozUserSelect"in w?"MozUserSelect":"WebkitUserSelect"in w?"WebkitUserSelect":"KhtmlUserSelect"in w?"KhtmlUserSelect":"";function C(E){return typeof E.onselectstart<"u"&&(E.onselectstart=t.util.falseFunction),x?E.style[x]="none":typeof E.unselectable=="string"&&(E.unselectable="on"),E}function S(E){return typeof E.onselectstart<"u"&&(E.onselectstart=null),x?E.style[x]="":typeof E.unselectable=="string"&&(E.unselectable=""),E}t.util.makeElementUnselectable=C,t.util.makeElementSelectable=S}();function g(w){var x=t.jsdomImplForWrapper(w);return x._canvas||x._image}function b(w){if(!!t.isLikelyNode){var x=t.jsdomImplForWrapper(w);x&&(x._image=null,x._canvas=null,x._currentSrc=null,x._attributes=null,x._classList=null)}}function y(w,x){w.imageSmoothingEnabled=w.imageSmoothingEnabled||w.webkitImageSmoothingEnabled||w.mozImageSmoothingEnabled||w.msImageSmoothingEnabled||w.oImageSmoothingEnabled,w.imageSmoothingEnabled=x}t.util.setImageSmoothing=y,t.util.getById=n,t.util.toArray=o,t.util.addClass=l,t.util.makeElement=i,t.util.wrapElement=c,t.util.getScrollLeftTop=d,t.util.getElementOffset=p,t.util.getNodeCanvas=g,t.util.cleanUpJsdomNode=b}(),function(){function h(o,i){return o+(/\?/.test(o)?"&":"?")+i}function n(){}function u(o,i){i||(i={});var l=i.method?i.method.toUpperCase():"GET",c=i.onComplete||function(){},d=new t.window.XMLHttpRequest,p=i.body||i.parameters;return d.onreadystatechange=function(){d.readyState===4&&(c(d),d.onreadystatechange=n)},l==="GET"&&(p=null,typeof i.parameters=="string"&&(o=h(o,i.parameters))),d.open(l,o,!0),(l==="POST"||l==="PUT")&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.send(p),d}t.util.request=u}(),t.log=console.log,t.warn=console.warn,function(){var h=t.util.object.extend,n=t.util.object.clone,u=[];t.util.object.extend(u,{cancelAll:function(){var g=this.splice(0);return g.forEach(function(b){b.cancel()}),g},cancelByCanvas:function(g){if(!g)return[];var b=this.filter(function(y){return typeof y.target=="object"&&y.target.canvas===g});return b.forEach(function(y){y.cancel()}),b},cancelByTarget:function(g){var b=this.findAnimationsByTarget(g);return b.forEach(function(y){y.cancel()}),b},findAnimationIndex:function(g){return this.indexOf(this.findAnimation(g))},findAnimation:function(g){return this.find(function(b){return b.cancel===g})},findAnimationsByTarget:function(g){return g?this.filter(function(b){return b.target===g}):[]}});function o(){return!1}function i(g,b,y,w){return-y*Math.cos(g/w*(Math.PI/2))+y+b}function l(g){g||(g={});var b=!1,y,w=function(){var x=t.runningAnimations.indexOf(y);return x>-1&&t.runningAnimations.splice(x,1)[0]};return y=h(n(g),{cancel:function(){return b=!0,w()},currentValue:"startValue"in g?g.startValue:0,completionRate:0,durationRate:0}),t.runningAnimations.push(y),p(function(x){var C=x||+new Date,S=g.duration||500,E=C+S,A,D=g.onChange||o,M=g.abort||o,B=g.onComplete||o,O=g.easing||i,F="startValue"in g?g.startValue.length>0:!1,z="startValue"in g?g.startValue:0,N="endValue"in g?g.endValue:100,T=g.byValue||(F?z.map(function(q,_){return N[_]-z[_]}):N-z);g.onStart&&g.onStart(),function q(_){A=_||+new Date;var I=A>E?S:A-C,U=I/S,j=F?z.map(function(P,k){return O(I,z[k],T[k],S)}):O(I,z,T,S),L=Math.abs(F?(j[0]-z[0])/T[0]:(j-z)/T);if(y.currentValue=F?j.slice():j,y.completionRate=L,y.durationRate=U,!b){if(M(j,L,U)){w();return}if(A>E){y.currentValue=F?N.slice():N,y.completionRate=1,y.durationRate=1,D(F?N.slice():N,1,1),B(N,1,1),w();return}else D(j,L,U),p(q)}}(C)}),y.cancel}var c=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(g){return t.window.setTimeout(g,1e3/60)},d=t.window.cancelAnimationFrame||t.window.clearTimeout;function p(){return c.apply(t.window,arguments)}function m(){return d.apply(t.window,arguments)}t.util.animate=l,t.util.requestAnimFrame=p,t.util.cancelAnimFrame=m,t.runningAnimations=u}(),function(){function h(u,o,i){var l="rgba("+parseInt(u[0]+i*(o[0]-u[0]),10)+","+parseInt(u[1]+i*(o[1]-u[1]),10)+","+parseInt(u[2]+i*(o[2]-u[2]),10);return l+=","+(u&&o?parseFloat(u[3]+i*(o[3]-u[3])):1),l+=")",l}function n(u,o,i,l){var c=new t.Color(u).getSource(),d=new t.Color(o).getSource(),p=l.onComplete,m=l.onChange;return l=l||{},t.util.animate(t.util.object.extend(l,{duration:i||500,startValue:c,endValue:d,byValue:d,easing:function(g,b,y,w){var x=l.colorEasing?l.colorEasing(g,w):1-Math.cos(g/w*(Math.PI/2));return h(b,y,x)},onComplete:function(g,b,y){if(p)return p(h(d,d,0),b,y)},onChange:function(g,b,y){if(m){if(Array.isArray(g))return m(h(g,g,0),b,y);m(g,b,y)}}}))}t.util.animateColor=n}(),function(){function h(_,I,U,j){return _<Math.abs(I)?(_=I,j=U/4):I===0&&_===0?j=U/(2*Math.PI)*Math.asin(1):j=U/(2*Math.PI)*Math.asin(I/_),{a:_,c:I,p:U,s:j}}function n(_,I,U){return _.a*Math.pow(2,10*(I-=1))*Math.sin((I*U-_.s)*(2*Math.PI)/_.p)}function u(_,I,U,j){return U*((_=_/j-1)*_*_+1)+I}function o(_,I,U,j){return _/=j/2,_<1?U/2*_*_*_+I:U/2*((_-=2)*_*_+2)+I}function i(_,I,U,j){return U*(_/=j)*_*_*_+I}function l(_,I,U,j){return-U*((_=_/j-1)*_*_*_-1)+I}function c(_,I,U,j){return _/=j/2,_<1?U/2*_*_*_*_+I:-U/2*((_-=2)*_*_*_-2)+I}function d(_,I,U,j){return U*(_/=j)*_*_*_*_+I}function p(_,I,U,j){return U*((_=_/j-1)*_*_*_*_+1)+I}function m(_,I,U,j){return _/=j/2,_<1?U/2*_*_*_*_*_+I:U/2*((_-=2)*_*_*_*_+2)+I}function g(_,I,U,j){return-U*Math.cos(_/j*(Math.PI/2))+U+I}function b(_,I,U,j){return U*Math.sin(_/j*(Math.PI/2))+I}function y(_,I,U,j){return-U/2*(Math.cos(Math.PI*_/j)-1)+I}function w(_,I,U,j){return _===0?I:U*Math.pow(2,10*(_/j-1))+I}function x(_,I,U,j){return _===j?I+U:U*(-Math.pow(2,-10*_/j)+1)+I}function C(_,I,U,j){return _===0?I:_===j?I+U:(_/=j/2,_<1?U/2*Math.pow(2,10*(_-1))+I:U/2*(-Math.pow(2,-10*--_)+2)+I)}function S(_,I,U,j){return-U*(Math.sqrt(1-(_/=j)*_)-1)+I}function E(_,I,U,j){return U*Math.sqrt(1-(_=_/j-1)*_)+I}function A(_,I,U,j){return _/=j/2,_<1?-U/2*(Math.sqrt(1-_*_)-1)+I:U/2*(Math.sqrt(1-(_-=2)*_)+1)+I}function D(_,I,U,j){var L=1.70158,P=0,k=U;if(_===0)return I;if(_/=j,_===1)return I+U;P||(P=j*.3);var V=h(k,U,P,L);return-n(V,_,j)+I}function M(_,I,U,j){var L=1.70158,P=0,k=U;if(_===0)return I;if(_/=j,_===1)return I+U;P||(P=j*.3);var V=h(k,U,P,L);return V.a*Math.pow(2,-10*_)*Math.sin((_*j-V.s)*(2*Math.PI)/V.p)+V.c+I}function B(_,I,U,j){var L=1.70158,P=0,k=U;if(_===0)return I;if(_/=j/2,_===2)return I+U;P||(P=j*(.3*1.5));var V=h(k,U,P,L);return _<1?-.5*n(V,_,j)+I:V.a*Math.pow(2,-10*(_-=1))*Math.sin((_*j-V.s)*(2*Math.PI)/V.p)*.5+V.c+I}function O(_,I,U,j,L){return L===void 0&&(L=1.70158),U*(_/=j)*_*((L+1)*_-L)+I}function F(_,I,U,j,L){return L===void 0&&(L=1.70158),U*((_=_/j-1)*_*((L+1)*_+L)+1)+I}function z(_,I,U,j,L){return L===void 0&&(L=1.70158),_/=j/2,_<1?U/2*(_*_*(((L*=1.525)+1)*_-L))+I:U/2*((_-=2)*_*(((L*=1.525)+1)*_+L)+2)+I}function N(_,I,U,j){return U-T(j-_,0,U,j)+I}function T(_,I,U,j){return(_/=j)<1/2.75?U*(7.5625*_*_)+I:_<2/2.75?U*(7.5625*(_-=1.5/2.75)*_+.75)+I:_<2.5/2.75?U*(7.5625*(_-=2.25/2.75)*_+.9375)+I:U*(7.5625*(_-=2.625/2.75)*_+.984375)+I}function q(_,I,U,j){return _<j/2?N(_*2,0,U,j)*.5+I:T(_*2-j,0,U,j)*.5+U*.5+I}t.util.ease={easeInQuad:function(_,I,U,j){return U*(_/=j)*_+I},easeOutQuad:function(_,I,U,j){return-U*(_/=j)*(_-2)+I},easeInOutQuad:function(_,I,U,j){return _/=j/2,_<1?U/2*_*_+I:-U/2*(--_*(_-2)-1)+I},easeInCubic:function(_,I,U,j){return U*(_/=j)*_*_+I},easeOutCubic:u,easeInOutCubic:o,easeInQuart:i,easeOutQuart:l,easeInOutQuart:c,easeInQuint:d,easeOutQuint:p,easeInOutQuint:m,easeInSine:g,easeOutSine:b,easeInOutSine:y,easeInExpo:w,easeOutExpo:x,easeInOutExpo:C,easeInCirc:S,easeOutCirc:E,easeInOutCirc:A,easeInElastic:D,easeOutElastic:M,easeInOutElastic:B,easeInBack:O,easeOutBack:F,easeInOutBack:z,easeInBounce:N,easeOutBounce:T,easeInOutBounce:q}}(),function(h){var n=h.fabric||(h.fabric={}),u=n.util.object.extend,o=n.util.object.clone,i=n.util.toFixed,l=n.util.parseUnit,c=n.util.multiplyTransformMatrices,d=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],p=["symbol","image","marker","pattern","view","svg"],m=["pattern","defs","symbol","metadata","clipPath","mask","desc"],g=["symbol","g","a","svg","clipPath","defs"],b={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},y={stroke:"strokeOpacity",fill:"fillOpacity"},w="font-size",x="clip-path";n.svgValidTagNamesRegEx=E(d),n.svgViewBoxElementsRegEx=E(p),n.svgInvalidAncestorsRegEx=E(m),n.svgValidParentsRegEx=E(g),n.cssRules={},n.gradientDefs={},n.clipPaths={};function C(P){return P in b?b[P]:P}function S(P,k,V,Q){var ne=Array.isArray(k),re;if((P==="fill"||P==="stroke")&&k==="none")k="";else{if(P==="strokeUniform")return k==="non-scaling-stroke";if(P==="strokeDashArray")k==="none"?k=null:k=k.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(P==="transformMatrix")V&&V.transformMatrix?k=c(V.transformMatrix,n.parseTransformAttribute(k)):k=n.parseTransformAttribute(k);else if(P==="visible")k=k!=="none"&&k!=="hidden",V&&V.visible===!1&&(k=!1);else if(P==="opacity")k=parseFloat(k),V&&typeof V.opacity<"u"&&(k*=V.opacity);else if(P==="textAnchor")k=k==="start"?"left":k==="end"?"right":"center";else if(P==="charSpacing")re=l(k,Q)/Q*1e3;else if(P==="paintFirst"){var ie=k.indexOf("fill"),de=k.indexOf("stroke"),k="fill";(ie>-1&&de>-1&&de<ie||ie===-1&&de>-1)&&(k="stroke")}else{if(P==="href"||P==="xlink:href"||P==="font")return k;if(P==="imageSmoothing")return k==="optimizeQuality";re=ne?k.map(l):l(k,Q)}}return!ne&&isNaN(re)?k:re}function E(P){return new RegExp("^("+P.join("|")+")\\b","i")}function A(P){for(var k in y)if(!(typeof P[y[k]]>"u"||P[k]==="")){if(typeof P[k]>"u"){if(!n.Object.prototype[k])continue;P[k]=n.Object.prototype[k]}if(P[k].indexOf("url(")!==0){var V=new n.Color(P[k]);P[k]=V.setAlpha(i(V.getAlpha()*P[y[k]],2)).toRgba()}}return P}function D(P,k){var V,Q=[],ne,re,ie;for(re=0,ie=k.length;re<ie;re++)V=k[re],ne=P.getElementsByTagName(V),Q=Q.concat(Array.prototype.slice.call(ne));return Q}n.parseTransformAttribute=function(){function P(ue,Y){var K=n.util.cos(Y[0]),fe=n.util.sin(Y[0]),me=0,be=0;Y.length===3&&(me=Y[1],be=Y[2]),ue[0]=K,ue[1]=fe,ue[2]=-fe,ue[3]=K,ue[4]=me-(K*me-fe*be),ue[5]=be-(fe*me+K*be)}function k(ue,Y){var K=Y[0],fe=Y.length===2?Y[1]:Y[0];ue[0]=K,ue[3]=fe}function V(ue,Y,K){ue[K]=Math.tan(n.util.degreesToRadians(Y[0]))}function Q(ue,Y){ue[4]=Y[0],Y.length===2&&(ue[5]=Y[1])}var ne=n.iMatrix,re=n.reNum,ie=n.commaWsp,de="(?:(skewX)\\s*\\(\\s*("+re+")\\s*\\))",ve="(?:(skewY)\\s*\\(\\s*("+re+")\\s*\\))",ce="(?:(rotate)\\s*\\(\\s*("+re+")(?:"+ie+"("+re+")"+ie+"("+re+"))?\\s*\\))",ae="(?:(scale)\\s*\\(\\s*("+re+")(?:"+ie+"("+re+"))?\\s*\\))",G="(?:(translate)\\s*\\(\\s*("+re+")(?:"+ie+"("+re+"))?\\s*\\))",X="(?:(matrix)\\s*\\(\\s*("+re+")"+ie+"("+re+")"+ie+"("+re+")"+ie+"("+re+")"+ie+"("+re+")"+ie+"("+re+")\\s*\\))",te="(?:"+X+"|"+G+"|"+ae+"|"+ce+"|"+de+"|"+ve+")",W="(?:"+te+"(?:"+ie+"*"+te+")*)",ee="^\\s*(?:"+W+"?)\\s*$",he=new RegExp(ee),pe=new RegExp(te,"g");return function(ue){var Y=ne.concat(),K=[];if(!ue||ue&&!he.test(ue))return Y;ue.replace(pe,function(me){var be=new RegExp(te).exec(me).filter(function(Ce){return!!Ce}),Se=be[1],xe=be.slice(2).map(parseFloat);switch(Se){case"translate":Q(Y,xe);break;case"rotate":xe[0]=n.util.degreesToRadians(xe[0]),P(Y,xe);break;case"scale":k(Y,xe);break;case"skewX":V(Y,xe,2);break;case"skewY":V(Y,xe,1);break;case"matrix":Y=xe;break}K.push(Y.concat()),Y=ne.concat()});for(var fe=K[0];K.length>1;)K.shift(),fe=n.util.multiplyTransformMatrices(fe,K[0]);return fe}}();function M(P,k){var V,Q;P.replace(/;\s*$/,"").split(";").forEach(function(ne){var re=ne.split(":");V=re[0].trim().toLowerCase(),Q=re[1].trim(),k[V]=Q})}function B(P,k){var V,Q;for(var ne in P)typeof P[ne]>"u"||(V=ne.toLowerCase(),Q=P[ne],k[V]=Q)}function O(P,k){var V={};for(var Q in n.cssRules[k])if(F(P,Q.split(" ")))for(var ne in n.cssRules[k][Q])V[ne]=n.cssRules[k][Q][ne];return V}function F(P,k){var V,Q=!0;return V=N(P,k.pop()),V&&k.length&&(Q=z(P,k)),V&&Q&&k.length===0}function z(P,k){for(var V,Q=!0;P.parentNode&&P.parentNode.nodeType===1&&k.length;)Q&&(V=k.pop()),P=P.parentNode,Q=N(P,V);return k.length===0}function N(P,k){var V=P.nodeName,Q=P.getAttribute("class"),ne=P.getAttribute("id"),re,ie;if(re=new RegExp("^"+V,"i"),k=k.replace(re,""),ne&&k.length&&(re=new RegExp("#"+ne+"(?![a-zA-Z\\-]+)","i"),k=k.replace(re,"")),Q&&k.length)for(Q=Q.split(" "),ie=Q.length;ie--;)re=new RegExp("\\."+Q[ie]+"(?![a-zA-Z\\-]+)","i"),k=k.replace(re,"");return k.length===0}function T(P,k){var V;if(P.getElementById&&(V=P.getElementById(k)),V)return V;var Q,ne,re,ie=P.getElementsByTagName("*");for(ne=0,re=ie.length;ne<re;ne++)if(Q=ie[ne],k===Q.getAttribute("id"))return Q}function q(P){for(var k=D(P,["use","svg:use"]),V=0;k.length&&V<k.length;){var Q=k[V],ne=Q.getAttribute("xlink:href")||Q.getAttribute("href");if(ne===null)return;var re=ne.slice(1),ie=Q.getAttribute("x")||0,de=Q.getAttribute("y")||0,ve=T(P,re).cloneNode(!0),ce=(ve.getAttribute("transform")||"")+" translate("+ie+", "+de+")",ae,G=k.length,X,te,W,ee,he=n.svgNS;if(I(ve),/^svg$/i.test(ve.nodeName)){var pe=ve.ownerDocument.createElementNS(he,"g");for(te=0,W=ve.attributes,ee=W.length;te<ee;te++)X=W.item(te),pe.setAttributeNS(he,X.nodeName,X.nodeValue);for(;ve.firstChild;)pe.appendChild(ve.firstChild);ve=pe}for(te=0,W=Q.attributes,ee=W.length;te<ee;te++)X=W.item(te),!(X.nodeName==="x"||X.nodeName==="y"||X.nodeName==="xlink:href"||X.nodeName==="href")&&(X.nodeName==="transform"?ce=X.nodeValue+" "+ce:ve.setAttribute(X.nodeName,X.nodeValue));ve.setAttribute("transform",ce),ve.setAttribute("instantiated_by_use","1"),ve.removeAttribute("id"),ae=Q.parentNode,ae.replaceChild(ve,Q),k.length===G&&V++}}var _=new RegExp("^\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*$");function I(P){if(!n.svgViewBoxElementsRegEx.test(P.nodeName))return{};var k=P.getAttribute("viewBox"),V=1,Q=1,ne=0,re=0,ie,de,ve,ce,ae=P.getAttribute("width"),G=P.getAttribute("height"),X=P.getAttribute("x")||0,te=P.getAttribute("y")||0,W=P.getAttribute("preserveAspectRatio")||"",ee=!k||!(k=k.match(_)),he=!ae||!G||ae==="100%"||G==="100%",pe=ee&&he,ue={},Y="",K=0,fe=0;if(ue.width=0,ue.height=0,ue.toBeParsed=pe,ee&&(X||te)&&P.parentNode&&P.parentNode.nodeName!=="#document"&&(Y=" translate("+l(X)+" "+l(te)+") ",ve=(P.getAttribute("transform")||"")+Y,P.setAttribute("transform",ve),P.removeAttribute("x"),P.removeAttribute("y")),pe)return ue;if(ee)return ue.width=l(ae),ue.height=l(G),ue;if(ne=-parseFloat(k[1]),re=-parseFloat(k[2]),ie=parseFloat(k[3]),de=parseFloat(k[4]),ue.minX=ne,ue.minY=re,ue.viewBoxWidth=ie,ue.viewBoxHeight=de,he?(ue.width=ie,ue.height=de):(ue.width=l(ae),ue.height=l(G),V=ue.width/ie,Q=ue.height/de),W=n.util.parsePreserveAspectRatioAttribute(W),W.alignX!=="none"&&(W.meetOrSlice==="meet"&&(Q=V=V>Q?Q:V),W.meetOrSlice==="slice"&&(Q=V=V>Q?V:Q),K=ue.width-ie*V,fe=ue.height-de*V,W.alignX==="Mid"&&(K/=2),W.alignY==="Mid"&&(fe/=2),W.alignX==="Min"&&(K=0),W.alignY==="Min"&&(fe=0)),V===1&&Q===1&&ne===0&&re===0&&X===0&&te===0)return ue;if((X||te)&&P.parentNode.nodeName!=="#document"&&(Y=" translate("+l(X)+" "+l(te)+") "),ve=Y+" matrix("+V+" 0 0 "+Q+" "+(ne*V+K)+" "+(re*Q+fe)+") ",P.nodeName==="svg"){for(ce=P.ownerDocument.createElementNS(n.svgNS,"g");P.firstChild;)ce.appendChild(P.firstChild);P.appendChild(ce)}else ce=P,ce.removeAttribute("x"),ce.removeAttribute("y"),ve=ce.getAttribute("transform")+ve;return ce.setAttribute("transform",ve),ue}function U(P,k){for(;P&&(P=P.parentNode);)if(P.nodeName&&k.test(P.nodeName.replace("svg:",""))&&!P.getAttribute("instantiated_by_use"))return!0;return!1}n.parseSVGDocument=function(P,k,V,Q){if(!!P){q(P);var ne=n.Object.__uid++,re,ie,de=I(P),ve=n.util.toArray(P.getElementsByTagName("*"));if(de.crossOrigin=Q&&Q.crossOrigin,de.svgUid=ne,ve.length===0&&n.isLikelyNode){ve=P.selectNodes('//*[name(.)!="svg"]');var ce=[];for(re=0,ie=ve.length;re<ie;re++)ce[re]=ve[re];ve=ce}var ae=ve.filter(function(X){return I(X),n.svgValidTagNamesRegEx.test(X.nodeName.replace("svg:",""))&&!U(X,n.svgInvalidAncestorsRegEx)});if(!ae||ae&&!ae.length){k&&k([],{});return}var G={};ve.filter(function(X){return X.nodeName.replace("svg:","")==="clipPath"}).forEach(function(X){var te=X.getAttribute("id");G[te]=n.util.toArray(X.getElementsByTagName("*")).filter(function(W){return n.svgValidTagNamesRegEx.test(W.nodeName.replace("svg:",""))})}),n.gradientDefs[ne]=n.getGradientDefs(P),n.cssRules[ne]=n.getCSSRules(P),n.clipPaths[ne]=G,n.parseElements(ae,function(X,te){k&&(k(X,de,te,ve),delete n.gradientDefs[ne],delete n.cssRules[ne],delete n.clipPaths[ne])},o(de),V,Q)}};function j(P,k){var V=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Q="xlink:href",ne=k.getAttribute(Q).slice(1),re=T(P,ne);if(re&&re.getAttribute(Q)&&j(P,re),V.forEach(function(de){re&&!k.hasAttribute(de)&&re.hasAttribute(de)&&k.setAttribute(de,re.getAttribute(de))}),!k.children.length)for(var ie=re.cloneNode(!0);ie.firstChild;)k.appendChild(ie.firstChild);k.removeAttribute(Q)}var L=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+n.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+n.reNum+"))?\\s+(.*)");u(n,{parseFontDeclaration:function(P,k){var V=P.match(L);if(!!V){var Q=V[1],ne=V[3],re=V[4],ie=V[5],de=V[6];Q&&(k.fontStyle=Q),ne&&(k.fontWeight=isNaN(parseFloat(ne))?ne:parseFloat(ne)),re&&(k.fontSize=l(re)),de&&(k.fontFamily=de),ie&&(k.lineHeight=ie==="normal"?1:ie)}},getGradientDefs:function(P){var k=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],V=D(P,k),Q,ne=0,re={};for(ne=V.length;ne--;)Q=V[ne],Q.getAttribute("xlink:href")&&j(P,Q),re[Q.getAttribute("id")]=Q;return re},parseAttributes:function(P,k,V){if(!!P){var Q,ne={},re,ie;typeof V>"u"&&(V=P.getAttribute("svgUid")),P.parentNode&&n.svgValidParentsRegEx.test(P.parentNode.nodeName)&&(ne=n.parseAttributes(P.parentNode,k,V));var de=k.reduce(function(W,ee){return Q=P.getAttribute(ee),Q&&(W[ee]=Q),W},{}),ve=u(O(P,V),n.parseStyleAttribute(P));de=u(de,ve),ve[x]&&P.setAttribute(x,ve[x]),re=ie=ne.fontSize||n.Text.DEFAULT_SVG_FONT_SIZE,de[w]&&(de[w]=re=l(de[w],ie));var ce,ae,G={};for(var X in de)ce=C(X),ae=S(ce,de[X],ne,re),G[ce]=ae;G&&G.font&&n.parseFontDeclaration(G.font,G);var te=u(ne,G);return n.svgValidParentsRegEx.test(P.nodeName)?te:A(te)}},parseElements:function(P,k,V,Q,ne){new n.ElementsParser(P,k,V,Q,ne).parse()},parseStyleAttribute:function(P){var k={},V=P.getAttribute("style");return V&&(typeof V=="string"?M(V,k):B(V,k)),k},parsePointsAttribute:function(P){if(!P)return null;P=P.replace(/,/g," ").trim(),P=P.split(/\s+/);var k=[],V,Q;for(V=0,Q=P.length;V<Q;V+=2)k.push({x:parseFloat(P[V]),y:parseFloat(P[V+1])});return k},getCSSRules:function(P){var k=P.getElementsByTagName("style"),V,Q,ne={},re;for(V=0,Q=k.length;V<Q;V++){var ie=k[V].textContent;ie=ie.replace(/\/\*[\s\S]*?\*\//g,""),ie.trim()!==""&&(re=ie.split("}"),re=re.filter(function(de){return de.trim()}),re.forEach(function(de){var ve=de.split("{"),ce={},ae=ve[1].trim(),G=ae.split(";").filter(function(ee){return ee.trim()});for(V=0,Q=G.length;V<Q;V++){var X=G[V].split(":"),te=X[0].trim(),W=X[1].trim();ce[te]=W}de=ve[0].trim(),de.split(",").forEach(function(ee){ee=ee.replace(/^svg/i,"").trim(),ee!==""&&(ne[ee]?n.util.object.extend(ne[ee],ce):ne[ee]=n.util.object.clone(ce))})}))}return ne},loadSVGFromURL:function(P,k,V,Q){P=P.replace(/^\n\s*/,"").trim(),new n.util.request(P,{method:"get",onComplete:ne});function ne(re){var ie=re.responseXML;if(!ie||!ie.documentElement)return k&&k(null),!1;n.parseSVGDocument(ie.documentElement,function(de,ve,ce,ae){k&&k(de,ve,ce,ae)},V,Q)}},loadSVGFromString:function(P,k,V,Q){var ne=new n.window.DOMParser,re=ne.parseFromString(P.trim(),"text/xml");n.parseSVGDocument(re.documentElement,function(ie,de,ve,ce){k(ie,de,ve,ce)},V,Q)}})}(e),t.ElementsParser=function(h,n,u,o,i,l){this.elements=h,this.callback=n,this.options=u,this.reviver=o,this.svgUid=u&&u.svgUid||0,this.parsingOptions=i,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=l},function(h){h.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},h.createObjects=function(){var n=this;this.elements.forEach(function(u,o){u.setAttribute("svgUid",n.svgUid),n.createObject(u,o)})},h.findTag=function(n){return t[t.util.string.capitalize(n.tagName.replace("svg:",""))]},h.createObject=function(n,u){var o=this.findTag(n);if(o&&o.fromElement)try{o.fromElement(n,this.createCallback(u,n),this.options)}catch(i){t.log(i)}else this.checkIfDone()},h.createCallback=function(n,u){var o=this;return function(i){var l;o.resolveGradient(i,u,"fill"),o.resolveGradient(i,u,"stroke"),i instanceof t.Image&&i._originalElement&&(l=i.parsePreserveAspectRatioAttribute(u)),i._removeTransformMatrix(l),o.resolveClipPath(i,u),o.reviver&&o.reviver(u,i),o.instances[n]=i,o.checkIfDone()}},h.extractPropertyDefinition=function(n,u,o){var i=n[u],l=this.regexUrl;if(!!l.test(i)){l.lastIndex=0;var c=l.exec(i)[1];return l.lastIndex=0,t[o][this.svgUid][c]}},h.resolveGradient=function(n,u,o){var i=this.extractPropertyDefinition(n,o,"gradientDefs");if(i){var l=u.getAttribute(o+"-opacity"),c=t.Gradient.fromElement(i,n,l,this.options);n.set(o,c)}},h.createClipPathCallback=function(n,u){return function(o){o._removeTransformMatrix(),o.fillRule=o.clipRule,u.push(o)}},h.resolveClipPath=function(n,u){var o=this.extractPropertyDefinition(n,"clipPath","clipPaths"),i,l,c,d,p,m;if(o){d=[],c=t.util.invertTransform(n.calcTransformMatrix());for(var g=o[0].parentNode,b=u;b.parentNode&&b.getAttribute("clip-path")!==n.clipPath;)b=b.parentNode;b.parentNode.appendChild(g);for(var y=0;y<o.length;y++)i=o[y],l=this.findTag(i),l.fromElement(i,this.createClipPathCallback(n,d),this.options);d.length===1?o=d[0]:o=new t.Group(d),p=t.util.multiplyTransformMatrices(c,o.calcTransformMatrix()),o.clipPath&&this.resolveClipPath(o,b);var m=t.util.qrDecompose(p);o.flipX=!1,o.flipY=!1,o.set("scaleX",m.scaleX),o.set("scaleY",m.scaleY),o.angle=m.angle,o.skewX=m.skewX,o.skewY=0,o.setPositionByOrigin({x:m.translateX,y:m.translateY},"center","center"),n.clipPath=o}else delete n.clipPath},h.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(n){return n!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(h){var n=h.fabric||(h.fabric={});if(n.Point){n.warn("fabric.Point is already defined");return}n.Point=u;function u(o,i){this.x=o,this.y=i}u.prototype={type:"point",constructor:u,add:function(o){return new u(this.x+o.x,this.y+o.y)},addEquals:function(o){return this.x+=o.x,this.y+=o.y,this},scalarAdd:function(o){return new u(this.x+o,this.y+o)},scalarAddEquals:function(o){return this.x+=o,this.y+=o,this},subtract:function(o){return new u(this.x-o.x,this.y-o.y)},subtractEquals:function(o){return this.x-=o.x,this.y-=o.y,this},scalarSubtract:function(o){return new u(this.x-o,this.y-o)},scalarSubtractEquals:function(o){return this.x-=o,this.y-=o,this},multiply:function(o){return new u(this.x*o,this.y*o)},multiplyEquals:function(o){return this.x*=o,this.y*=o,this},divide:function(o){return new u(this.x/o,this.y/o)},divideEquals:function(o){return this.x/=o,this.y/=o,this},eq:function(o){return this.x===o.x&&this.y===o.y},lt:function(o){return this.x<o.x&&this.y<o.y},lte:function(o){return this.x<=o.x&&this.y<=o.y},gt:function(o){return this.x>o.x&&this.y>o.y},gte:function(o){return this.x>=o.x&&this.y>=o.y},lerp:function(o,i){return typeof i>"u"&&(i=.5),i=Math.max(Math.min(1,i),0),new u(this.x+(o.x-this.x)*i,this.y+(o.y-this.y)*i)},distanceFrom:function(o){var i=this.x-o.x,l=this.y-o.y;return Math.sqrt(i*i+l*l)},midPointFrom:function(o){return this.lerp(o)},min:function(o){return new u(Math.min(this.x,o.x),Math.min(this.y,o.y))},max:function(o){return new u(Math.max(this.x,o.x),Math.max(this.y,o.y))},toString:function(){return this.x+","+this.y},setXY:function(o,i){return this.x=o,this.y=i,this},setX:function(o){return this.x=o,this},setY:function(o){return this.y=o,this},setFromPoint:function(o){return this.x=o.x,this.y=o.y,this},swap:function(o){var i=this.x,l=this.y;this.x=o.x,this.y=o.y,o.x=i,o.y=l},clone:function(){return new u(this.x,this.y)}}}(e),function(h){var n=h.fabric||(h.fabric={});if(n.Intersection){n.warn("fabric.Intersection is already defined");return}function u(o){this.status=o,this.points=[]}n.Intersection=u,n.Intersection.prototype={constructor:u,appendPoint:function(o){return this.points.push(o),this},appendPoints:function(o){return this.points=this.points.concat(o),this}},n.Intersection.intersectLineLine=function(o,i,l,c){var d,p=(c.x-l.x)*(o.y-l.y)-(c.y-l.y)*(o.x-l.x),m=(i.x-o.x)*(o.y-l.y)-(i.y-o.y)*(o.x-l.x),g=(c.y-l.y)*(i.x-o.x)-(c.x-l.x)*(i.y-o.y);if(g!==0){var b=p/g,y=m/g;0<=b&&b<=1&&0<=y&&y<=1?(d=new u("Intersection"),d.appendPoint(new n.Point(o.x+b*(i.x-o.x),o.y+b*(i.y-o.y)))):d=new u}else p===0||m===0?d=new u("Coincident"):d=new u("Parallel");return d},n.Intersection.intersectLinePolygon=function(o,i,l){var c=new u,d=l.length,p,m,g,b;for(b=0;b<d;b++)p=l[b],m=l[(b+1)%d],g=u.intersectLineLine(o,i,p,m),c.appendPoints(g.points);return c.points.length>0&&(c.status="Intersection"),c},n.Intersection.intersectPolygonPolygon=function(o,i){var l=new u,c=o.length,d;for(d=0;d<c;d++){var p=o[d],m=o[(d+1)%c],g=u.intersectLinePolygon(p,m,i);l.appendPoints(g.points)}return l.points.length>0&&(l.status="Intersection"),l},n.Intersection.intersectPolygonRectangle=function(o,i,l){var c=i.min(l),d=i.max(l),p=new n.Point(d.x,c.y),m=new n.Point(c.x,d.y),g=u.intersectLinePolygon(c,p,o),b=u.intersectLinePolygon(p,d,o),y=u.intersectLinePolygon(d,m,o),w=u.intersectLinePolygon(m,c,o),x=new u;return x.appendPoints(g.points),x.appendPoints(b.points),x.appendPoints(y.points),x.appendPoints(w.points),x.points.length>0&&(x.status="Intersection"),x}}(e),function(h){var n=h.fabric||(h.fabric={});if(n.Color){n.warn("fabric.Color is already defined.");return}function u(i){i?this._tryParsingColor(i):this.setSource([0,0,0,1])}n.Color=u,n.Color.prototype={_tryParsingColor:function(i){var l;i in u.colorNameMap&&(i=u.colorNameMap[i]),i==="transparent"&&(l=[255,255,255,0]),l||(l=u.sourceFromHex(i)),l||(l=u.sourceFromRgb(i)),l||(l=u.sourceFromHsl(i)),l||(l=[0,0,0,1]),l&&this.setSource(l)},_rgbToHsl:function(i,l,c){i/=255,l/=255,c/=255;var d,p,m,g=n.util.array.max([i,l,c]),b=n.util.array.min([i,l,c]);if(m=(g+b)/2,g===b)d=p=0;else{var y=g-b;switch(p=m>.5?y/(2-g-b):y/(g+b),g){case i:d=(l-c)/y+(l<c?6:0);break;case l:d=(c-i)/y+2;break;case c:d=(i-l)/y+4;break}d/=6}return[Math.round(d*360),Math.round(p*100),Math.round(m*100)]},getSource:function(){return this._source},setSource:function(i){this._source=i},toRgb:function(){var i=this.getSource();return"rgb("+i[0]+","+i[1]+","+i[2]+")"},toRgba:function(){var i=this.getSource();return"rgba("+i[0]+","+i[1]+","+i[2]+","+i[3]+")"},toHsl:function(){var i=this.getSource(),l=this._rgbToHsl(i[0],i[1],i[2]);return"hsl("+l[0]+","+l[1]+"%,"+l[2]+"%)"},toHsla:function(){var i=this.getSource(),l=this._rgbToHsl(i[0],i[1],i[2]);return"hsla("+l[0]+","+l[1]+"%,"+l[2]+"%,"+i[3]+")"},toHex:function(){var i=this.getSource(),l,c,d;return l=i[0].toString(16),l=l.length===1?"0"+l:l,c=i[1].toString(16),c=c.length===1?"0"+c:c,d=i[2].toString(16),d=d.length===1?"0"+d:d,l.toUpperCase()+c.toUpperCase()+d.toUpperCase()},toHexa:function(){var i=this.getSource(),l;return l=Math.round(i[3]*255),l=l.toString(16),l=l.length===1?"0"+l:l,this.toHex()+l.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(i){var l=this.getSource();return l[3]=i,this.setSource(l),this},toGrayscale:function(){var i=this.getSource(),l=parseInt((i[0]*.3+i[1]*.59+i[2]*.11).toFixed(0),10),c=i[3];return this.setSource([l,l,l,c]),this},toBlackWhite:function(i){var l=this.getSource(),c=(l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),d=l[3];return i=i||127,c=Number(c)<Number(i)?0:255,this.setSource([c,c,c,d]),this},overlayWith:function(i){i instanceof u||(i=new u(i));var l=[],c=this.getAlpha(),d=.5,p=this.getSource(),m=i.getSource(),g;for(g=0;g<3;g++)l.push(Math.round(p[g]*(1-d)+m[g]*d));return l[3]=c,this.setSource(l),this}},n.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,n.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,n.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function o(i,l,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?i+(l-i)*6*c:c<1/2?l:c<2/3?i+(l-i)*(2/3-c)*6:i}n.Color.fromRgb=function(i){return u.fromSource(u.sourceFromRgb(i))},n.Color.sourceFromRgb=function(i){var l=i.match(u.reRGBa);if(l){var c=parseInt(l[1],10)/(/%$/.test(l[1])?100:1)*(/%$/.test(l[1])?255:1),d=parseInt(l[2],10)/(/%$/.test(l[2])?100:1)*(/%$/.test(l[2])?255:1),p=parseInt(l[3],10)/(/%$/.test(l[3])?100:1)*(/%$/.test(l[3])?255:1);return[parseInt(c,10),parseInt(d,10),parseInt(p,10),l[4]?parseFloat(l[4]):1]}},n.Color.fromRgba=u.fromRgb,n.Color.fromHsl=function(i){return u.fromSource(u.sourceFromHsl(i))},n.Color.sourceFromHsl=function(i){var l=i.match(u.reHSLa);if(!!l){var c=(parseFloat(l[1])%360+360)%360/360,d=parseFloat(l[2])/(/%$/.test(l[2])?100:1),p=parseFloat(l[3])/(/%$/.test(l[3])?100:1),m,g,b;if(d===0)m=g=b=p;else{var y=p<=.5?p*(d+1):p+d-p*d,w=p*2-y;m=o(w,y,c+1/3),g=o(w,y,c),b=o(w,y,c-1/3)}return[Math.round(m*255),Math.round(g*255),Math.round(b*255),l[4]?parseFloat(l[4]):1]}},n.Color.fromHsla=u.fromHsl,n.Color.fromHex=function(i){return u.fromSource(u.sourceFromHex(i))},n.Color.sourceFromHex=function(i){if(i.match(u.reHex)){var l=i.slice(i.indexOf("#")+1),c=l.length===3||l.length===4,d=l.length===8||l.length===4,p=c?l.charAt(0)+l.charAt(0):l.substring(0,2),m=c?l.charAt(1)+l.charAt(1):l.substring(2,4),g=c?l.charAt(2)+l.charAt(2):l.substring(4,6),b=d?c?l.charAt(3)+l.charAt(3):l.substring(6,8):"FF";return[parseInt(p,16),parseInt(m,16),parseInt(g,16),parseFloat((parseInt(b,16)/255).toFixed(2))]}},n.Color.fromSource=function(i){var l=new u;return l.setSource(i),l}}(e),function(h){var n=h.fabric||(h.fabric={}),u=["e","se","s","sw","w","nw","n","ne","e"],o=["ns","nesw","ew","nwse"],i={},l="left",c="top",d="right",p="bottom",m="center",g={top:p,bottom:c,left:d,right:l,center:m},b=n.util.radiansToDegrees,y=Math.sign||function(ce){return(ce>0)-(ce<0)||+ce};function w(ce,ae){var G=ce.angle+b(Math.atan2(ae.y,ae.x))+360;return Math.round(G%360/45)}function x(ce,ae){var G=ae.transform.target,X=G.canvas,te=n.util.object.clone(ae);te.target=G,X&&X.fire("object:"+ce,te),G.fire(ce,ae)}function C(ce,ae){var G=ae.canvas,X=G.uniScaleKey,te=ce[X];return G.uniformScaling&&!te||!G.uniformScaling&&te}function S(ce){return ce.originX===m&&ce.originY===m}function E(ce,ae,G){var X=ce.lockScalingX,te=ce.lockScalingY;return!!(X&&te||!ae&&(X||te)&&G||X&&ae==="x"||te&&ae==="y")}function A(ce,ae,G){var X="not-allowed",te=C(ce,G),W="";if(ae.x!==0&&ae.y===0?W="x":ae.x===0&&ae.y!==0&&(W="y"),E(G,W,te))return X;var ee=w(G,ae);return u[ee]+"-resize"}function D(ce,ae,G){var X="not-allowed";if(ae.x!==0&&G.lockSkewingY||ae.y!==0&&G.lockSkewingX)return X;var te=w(G,ae)%4;return o[te]+"-resize"}function M(ce,ae,G){return ce[G.canvas.altActionKey]?i.skewCursorStyleHandler(ce,ae,G):i.scaleCursorStyleHandler(ce,ae,G)}function B(ce,ae,G){var X=ce[G.canvas.altActionKey];if(ae.x===0)return X?"skewX":"scaleY";if(ae.y===0)return X?"skewY":"scaleX"}function O(ce,ae,G){return G.lockRotation?"not-allowed":ae.cursorStyle}function F(ce,ae,G,X){return{e:ce,transform:ae,pointer:{x:G,y:X}}}function z(ce){return function(ae,G,X,te){var W=G.target,ee=W.getCenterPoint(),he=W.translateToOriginPoint(ee,G.originX,G.originY),pe=ce(ae,G,X,te);return W.setPositionByOrigin(he,G.originX,G.originY),pe}}function N(ce,ae){return function(G,X,te,W){var ee=ae(G,X,te,W);return ee&&x(ce,F(G,X,te,W)),ee}}function T(ce,ae,G,X,te){var W=ce.target,ee=W.controls[ce.corner],he=W.canvas.getZoom(),pe=W.padding/he,ue=W.toLocalPoint(new n.Point(X,te),ae,G);return ue.x>=pe&&(ue.x-=pe),ue.x<=-pe&&(ue.x+=pe),ue.y>=pe&&(ue.y-=pe),ue.y<=pe&&(ue.y+=pe),ue.x-=ee.offsetX,ue.y-=ee.offsetY,ue}function q(ce){return ce.flipX!==ce.flipY}function _(ce,ae,G,X,te){if(ce[ae]!==0){var W=ce._getTransformedDimensions()[X],ee=te/W*ce[G];ce.set(G,ee)}}function I(ce,ae,G,X){var te=ae.target,W=te._getTransformedDimensions(0,te.skewY),ee=T(ae,ae.originX,ae.originY,G,X),he=Math.abs(ee.x*2)-W.x,pe=te.skewX,ue;he<2?ue=0:(ue=b(Math.atan2(he/te.scaleX,W.y/te.scaleY)),ae.originX===l&&ae.originY===p&&(ue=-ue),ae.originX===d&&ae.originY===c&&(ue=-ue),q(te)&&(ue=-ue));var Y=pe!==ue;if(Y){var K=te._getTransformedDimensions().y;te.set("skewX",ue),_(te,"skewY","scaleY","y",K)}return Y}function U(ce,ae,G,X){var te=ae.target,W=te._getTransformedDimensions(te.skewX,0),ee=T(ae,ae.originX,ae.originY,G,X),he=Math.abs(ee.y*2)-W.y,pe=te.skewY,ue;he<2?ue=0:(ue=b(Math.atan2(he/te.scaleY,W.x/te.scaleX)),ae.originX===l&&ae.originY===p&&(ue=-ue),ae.originX===d&&ae.originY===c&&(ue=-ue),q(te)&&(ue=-ue));var Y=pe!==ue;if(Y){var K=te._getTransformedDimensions().x;te.set("skewY",ue),_(te,"skewX","scaleX","x",K)}return Y}function j(ce,ae,G,X){var te=ae.target,W=te.skewX,ee,he=ae.originY;if(te.lockSkewingX)return!1;if(W===0){var pe=T(ae,m,m,G,X);pe.x>0?ee=l:ee=d}else W>0&&(ee=he===c?l:d),W<0&&(ee=he===c?d:l),q(te)&&(ee=ee===l?d:l);ae.originX=ee;var ue=N("skewing",z(I));return ue(ce,ae,G,X)}function L(ce,ae,G,X){var te=ae.target,W=te.skewY,ee,he=ae.originX;if(te.lockSkewingY)return!1;if(W===0){var pe=T(ae,m,m,G,X);pe.y>0?ee=c:ee=p}else W>0&&(ee=he===l?c:p),W<0&&(ee=he===l?p:c),q(te)&&(ee=ee===c?p:c);ae.originY=ee;var ue=N("skewing",z(U));return ue(ce,ae,G,X)}function P(ce,ae,G,X){var te=ae,W=te.target,ee=W.translateToOriginPoint(W.getCenterPoint(),te.originX,te.originY);if(W.lockRotation)return!1;var he=Math.atan2(te.ey-ee.y,te.ex-ee.x),pe=Math.atan2(X-ee.y,G-ee.x),ue=b(pe-he+te.theta),Y=!0;if(W.snapAngle>0){var K=W.snapAngle,fe=W.snapThreshold||K,me=Math.ceil(ue/K)*K,be=Math.floor(ue/K)*K;Math.abs(ue-be)<fe?ue=be:Math.abs(ue-me)<fe&&(ue=me)}return ue<0&&(ue=360+ue),ue%=360,Y=W.angle!==ue,W.angle=ue,Y}function k(ce,ae,G,X,te){te=te||{};var W=ae.target,ee=W.lockScalingX,he=W.lockScalingY,pe=te.by,ue,Y,K,fe,me=C(ce,W),be=E(W,pe,me),Se,xe,Ce=ae.gestureScale;if(be)return!1;if(Ce)Y=ae.scaleX*Ce,K=ae.scaleY*Ce;else{if(ue=T(ae,ae.originX,ae.originY,G,X),Se=pe!=="y"?y(ue.x):1,xe=pe!=="x"?y(ue.y):1,ae.signX||(ae.signX=Se),ae.signY||(ae.signY=xe),W.lockScalingFlip&&(ae.signX!==Se||ae.signY!==xe))return!1;if(fe=W._getTransformedDimensions(),me&&!pe){var _e=Math.abs(ue.x)+Math.abs(ue.y),ke=ae.original,Ye=Math.abs(fe.x*ke.scaleX/W.scaleX)+Math.abs(fe.y*ke.scaleY/W.scaleY),Fe=_e/Ye;Y=ke.scaleX*Fe,K=ke.scaleY*Fe}else Y=Math.abs(ue.x*W.scaleX/fe.x),K=Math.abs(ue.y*W.scaleY/fe.y);S(ae)&&(Y*=2,K*=2),ae.signX!==Se&&pe!=="y"&&(ae.originX=g[ae.originX],Y*=-1,ae.signX=Se),ae.signY!==xe&&pe!=="x"&&(ae.originY=g[ae.originY],K*=-1,ae.signY=xe)}var wt=W.scaleX,et=W.scaleY;return pe?(pe==="x"&&W.set("scaleX",Y),pe==="y"&&W.set("scaleY",K)):(!ee&&W.set("scaleX",Y),!he&&W.set("scaleY",K)),wt!==W.scaleX||et!==W.scaleY}function V(ce,ae,G,X){return k(ce,ae,G,X)}function Q(ce,ae,G,X){return k(ce,ae,G,X,{by:"x"})}function ne(ce,ae,G,X){return k(ce,ae,G,X,{by:"y"})}function re(ce,ae,G,X){return ce[ae.target.canvas.altActionKey]?i.skewHandlerX(ce,ae,G,X):i.scalingY(ce,ae,G,X)}function ie(ce,ae,G,X){return ce[ae.target.canvas.altActionKey]?i.skewHandlerY(ce,ae,G,X):i.scalingX(ce,ae,G,X)}function de(ce,ae,G,X){var te=ae.target,W=T(ae,ae.originX,ae.originY,G,X),ee=te.strokeWidth/(te.strokeUniform?te.scaleX:1),he=S(ae)?2:1,pe=te.width,ue=Math.abs(W.x*he/te.scaleX)-ee;return te.set("width",Math.max(ue,0)),pe!==ue}function ve(ce,ae,G,X){var te=ae.target,W=G-ae.offsetX,ee=X-ae.offsetY,he=!te.get("lockMovementX")&&te.left!==W,pe=!te.get("lockMovementY")&&te.top!==ee;return he&&te.set("left",W),pe&&te.set("top",ee),(he||pe)&&x("moving",F(ce,ae,G,X)),he||pe}i.scaleCursorStyleHandler=A,i.skewCursorStyleHandler=D,i.scaleSkewCursorStyleHandler=M,i.rotationWithSnapping=N("rotating",z(P)),i.scalingEqually=N("scaling",z(V)),i.scalingX=N("scaling",z(Q)),i.scalingY=N("scaling",z(ne)),i.scalingYOrSkewingX=re,i.scalingXOrSkewingY=ie,i.changeWidth=N("resizing",z(de)),i.skewHandlerX=j,i.skewHandlerY=L,i.dragHandler=ve,i.scaleOrSkewActionName=B,i.rotationStyleHandler=O,i.fireEvent=x,i.wrapWithFixedAnchor=z,i.wrapWithFireEvent=N,i.getLocalPoint=T,n.controlsUtils=i}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.util.degreesToRadians,o=n.controlsUtils;function i(c,d,p,m,g){m=m||{};var b=this.sizeX||m.cornerSize||g.cornerSize,y=this.sizeY||m.cornerSize||g.cornerSize,w=typeof m.transparentCorners<"u"?m.transparentCorners:g.transparentCorners,x=w?"stroke":"fill",C=!w&&(m.cornerStrokeColor||g.cornerStrokeColor),S=d,E=p,A;c.save(),c.fillStyle=m.cornerColor||g.cornerColor,c.strokeStyle=m.cornerStrokeColor||g.cornerStrokeColor,b>y?(A=b,c.scale(1,y/b),E=p*b/y):y>b?(A=y,c.scale(b/y,1),S=d*y/b):A=b,c.lineWidth=1,c.beginPath(),c.arc(S,E,A/2,0,2*Math.PI,!1),c[x](),C&&c.stroke(),c.restore()}function l(c,d,p,m,g){m=m||{};var b=this.sizeX||m.cornerSize||g.cornerSize,y=this.sizeY||m.cornerSize||g.cornerSize,w=typeof m.transparentCorners<"u"?m.transparentCorners:g.transparentCorners,x=w?"stroke":"fill",C=!w&&(m.cornerStrokeColor||g.cornerStrokeColor),S=b/2,E=y/2;c.save(),c.fillStyle=m.cornerColor||g.cornerColor,c.strokeStyle=m.cornerStrokeColor||g.cornerStrokeColor,c.lineWidth=1,c.translate(d,p),c.rotate(u(g.angle)),c[x+"Rect"](-S,-E,b,y),C&&c.strokeRect(-S,-E,b,y),c.restore()}o.renderCircleControl=i,o.renderSquareControl=l}(e),function(h){var n=h.fabric||(h.fabric={});function u(o){for(var i in o)this[i]=o[i]}n.Control=u,n.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(o,i){return i.cursorStyle},getActionName:function(o,i){return i.actionName},getVisibility:function(o,i){var l=o._controlsVisibility;return l&&typeof l[i]<"u"?l[i]:this.visible},setVisibility:function(o){this.visible=o},positionHandler:function(o,i){var l=n.util.transformPoint({x:this.x*o.x+this.offsetX,y:this.y*o.y+this.offsetY},i);return l},calcCornerCoords:function(o,i,l,c,d){var p,m,g,b,y=d?this.touchSizeX:this.sizeX,w=d?this.touchSizeY:this.sizeY;if(y&&w&&y!==w){var x=Math.atan2(w,y),C=Math.sqrt(y*y+w*w)/2,S=x-n.util.degreesToRadians(o),E=Math.PI/2-x-n.util.degreesToRadians(o);p=C*n.util.cos(S),m=C*n.util.sin(S),g=C*n.util.cos(E),b=C*n.util.sin(E)}else{var A=y&&w?y:i;C=A*.7071067812;var S=n.util.degreesToRadians(45-o);p=g=C*n.util.cos(S),m=b=C*n.util.sin(S)}return{tl:{x:l-b,y:c-g},tr:{x:l+p,y:c-m},bl:{x:l-p,y:c+m},br:{x:l+b,y:c+g}}},render:function(o,i,l,c,d){switch(c=c||{},c.cornerStyle||d.cornerStyle){case"circle":n.controlsUtils.renderCircleControl.call(this,o,i,l,c,d);break;default:n.controlsUtils.renderSquareControl.call(this,o,i,l,c,d)}}}}(e),function(){function h(l,c){var d=l.getAttribute("style"),p=l.getAttribute("offset")||0,m,g,b,y;if(p=parseFloat(p)/(/%$/.test(p)?100:1),p=p<0?0:p>1?1:p,d){var w=d.split(/\s*;\s*/);for(w[w.length-1]===""&&w.pop(),y=w.length;y--;){var x=w[y].split(/\s*:\s*/),C=x[0].trim(),S=x[1].trim();C==="stop-color"?m=S:C==="stop-opacity"&&(b=S)}}return m||(m=l.getAttribute("stop-color")||"rgb(0,0,0)"),b||(b=l.getAttribute("stop-opacity")),m=new t.Color(m),g=m.getAlpha(),b=isNaN(parseFloat(b))?1:parseFloat(b),b*=g*c,{offset:p,color:m.toRgb(),opacity:b}}function n(l){return{x1:l.getAttribute("x1")||0,y1:l.getAttribute("y1")||0,x2:l.getAttribute("x2")||"100%",y2:l.getAttribute("y2")||0}}function u(l){return{x1:l.getAttribute("fx")||l.getAttribute("cx")||"50%",y1:l.getAttribute("fy")||l.getAttribute("cy")||"50%",r1:0,x2:l.getAttribute("cx")||"50%",y2:l.getAttribute("cy")||"50%",r2:l.getAttribute("r")||"50%"}}var o=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(l){l||(l={}),l.coords||(l.coords={});var c,d=this;Object.keys(l).forEach(function(p){d[p]=l[p]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,c={x1:l.coords.x1||0,y1:l.coords.y1||0,x2:l.coords.x2||0,y2:l.coords.y2||0},this.type==="radial"&&(c.r1=l.coords.r1||0,c.r2=l.coords.r2||0),this.coords=c,this.colorStops=l.colorStops.slice()},addColorStop:function(l){for(var c in l){var d=new t.Color(l[c]);this.colorStops.push({offset:parseFloat(c),color:d.toRgb(),opacity:d.getAlpha()})}return this},toObject:function(l){var c={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,c,l),c},toSVG:function(l,g){var d=o(this.coords,!0),p,m,g=g||{},b,y,w=o(this.colorStops,!0),x=d.r1>d.r2,C=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),S=-this.offsetX,E=-this.offsetY,A=!!g.additionalTransform,D=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(w.sort(function(z,N){return z.offset-N.offset}),D==="objectBoundingBox"?(S/=l.width,E/=l.height):(S+=l.width/2,E+=l.height/2),l.type==="path"&&this.gradientUnits!=="percentage"&&(S-=l.pathOffset.x,E-=l.pathOffset.y),C[4]-=S,C[5]-=E,y='id="SVGID_'+this.id+'" gradientUnits="'+D+'"',y+=' gradientTransform="'+(A?g.additionalTransform+" ":"")+t.util.matrixToSVG(C)+'" ',this.type==="linear"?b=["<linearGradient ",y,' x1="',d.x1,'" y1="',d.y1,'" x2="',d.x2,'" y2="',d.y2,`">
`]:this.type==="radial"&&(b=["<radialGradient ",y,' cx="',x?d.x1:d.x2,'" cy="',x?d.y1:d.y2,'" r="',x?d.r1:d.r2,'" fx="',x?d.x2:d.x1,'" fy="',x?d.y2:d.y1,`">
`]),this.type==="radial"){if(x)for(w=w.concat(),w.reverse(),p=0,m=w.length;p<m;p++)w[p].offset=1-w[p].offset;var M=Math.min(d.r1,d.r2);if(M>0){var B=Math.max(d.r1,d.r2),O=M/B;for(p=0,m=w.length;p<m;p++)w[p].offset+=O*(1-w[p].offset)}}for(p=0,m=w.length;p<m;p++){var F=w[p];b.push("<stop ",'offset="',F.offset*100+"%",'" style="stop-color:',F.color,typeof F.opacity<"u"?";stop-opacity: "+F.opacity:";",`"/>
`)}return b.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),b.join("")},toLive:function(l){var c,d=t.util.object.clone(this.coords),p,m;if(!!this.type){for(this.type==="linear"?c=l.createLinearGradient(d.x1,d.y1,d.x2,d.y2):this.type==="radial"&&(c=l.createRadialGradient(d.x1,d.y1,d.r1,d.x2,d.y2,d.r2)),p=0,m=this.colorStops.length;p<m;p++){var g=this.colorStops[p].color,b=this.colorStops[p].opacity,y=this.colorStops[p].offset;typeof b<"u"&&(g=new t.Color(g).setAlpha(b).toRgba()),c.addColorStop(y,g)}return c}}}),t.util.object.extend(t.Gradient,{fromElement:function(l,c,d,p){var m=parseFloat(d)/(/%$/.test(d)?100:1);m=m<0?0:m>1?1:m,isNaN(m)&&(m=1);var g=l.getElementsByTagName("stop"),b,y=l.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",w=l.getAttribute("gradientTransform")||"",x=[],C,S,E=0,A=0,D;for(l.nodeName==="linearGradient"||l.nodeName==="LINEARGRADIENT"?(b="linear",C=n(l)):(b="radial",C=u(l)),S=g.length;S--;)x.push(h(g[S],m));D=t.parseTransformAttribute(w),i(c,C,p,y),y==="pixels"&&(E=-c.left,A=-c.top);var M=new t.Gradient({id:l.getAttribute("id"),type:b,coords:C,colorStops:x,gradientUnits:y,gradientTransform:D,offsetX:E,offsetY:A});return M}});function i(l,c,d,p){var m,g;Object.keys(c).forEach(function(b){m=c[b],m==="Infinity"?g=1:m==="-Infinity"?g=0:(g=parseFloat(c[b],10),typeof m=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(m)&&(g*=.01,p==="pixels"&&((b==="x1"||b==="x2"||b==="r2")&&(g*=d.viewBoxWidth||d.width),(b==="y1"||b==="y2")&&(g*=d.viewBoxHeight||d.height)))),c[b]=g})}}(),function(){var h=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(n,u){if(n||(n={}),this.id=t.Object.__uid++,this.setOptions(n),!n.source||n.source&&typeof n.source!="string"){u&&u(this);return}else{var o=this;this.source=t.util.createImage(),t.util.loadImage(n.source,function(i,l){o.source=i,u&&u(o,l)},null,this.crossOrigin)}},toObject:function(n){var u=t.Object.NUM_FRACTION_DIGITS,o,i;return typeof this.source.src=="string"?o=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(o=this.source.toDataURL()),i={type:"pattern",source:o,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:h(this.offsetX,u),offsetY:h(this.offsetY,u),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,i,n),i},toSVG:function(n){var u=typeof this.source=="function"?this.source():this.source,o=u.width/n.width,i=u.height/n.height,l=this.offsetX/n.width,c=this.offsetY/n.height,d="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(i=1,c&&(i+=Math.abs(c))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(o=1,l&&(o+=Math.abs(l))),u.src?d=u.src:u.toDataURL&&(d=u.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+l+'" y="'+c+'" width="'+o+'" height="'+i+`">
<image x="0" y="0" width="`+u.width+'" height="'+u.height+'" xlink:href="'+d+`"></image>
</pattern>
`},setOptions:function(n){for(var u in n)this[u]=n[u]},toLive:function(n){var u=this.source;return!u||typeof u.src<"u"&&(!u.complete||u.naturalWidth===0||u.naturalHeight===0)?"":n.createPattern(u,this.repeat)}})}(),function(h){var n=h.fabric||(h.fabric={}),u=n.util.toFixed;if(n.Shadow){n.warn("fabric.Shadow is already defined.");return}n.Shadow=n.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(o){typeof o=="string"&&(o=this._parseShadow(o));for(var i in o)this[i]=o[i];this.id=n.Object.__uid++},_parseShadow:function(o){var i=o.trim(),l=n.Shadow.reOffsetsAndBlur.exec(i)||[],c=i.replace(n.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:c.trim(),offsetX:parseFloat(l[1],10)||0,offsetY:parseFloat(l[2],10)||0,blur:parseFloat(l[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(o){var i=40,l=40,c=n.Object.NUM_FRACTION_DIGITS,d=n.util.rotateVector({x:this.offsetX,y:this.offsetY},n.util.degreesToRadians(-o.angle)),p=20,m=new n.Color(this.color);return o.width&&o.height&&(i=u((Math.abs(d.x)+this.blur)/o.width,c)*100+p,l=u((Math.abs(d.y)+this.blur)/o.height,c)*100+p),o.flipX&&(d.x*=-1),o.flipY&&(d.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+l+'%" height="'+(100+2*l)+'%" x="-'+i+'%" width="'+(100+2*i)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+u(this.blur?this.blur/2:0,c)+`"></feGaussianBlur>
	<feOffset dx="`+u(d.x,c)+'" dy="'+u(d.y,c)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+m.toRgb()+'" flood-opacity="'+m.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var o={},i=n.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(l){this[l]!==i[l]&&(o[l]=this[l])},this),o}}),n.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(e),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var h=t.util.object.extend,n=t.util.getElementOffset,u=t.util.removeFromArray,o=t.util.toFixed,i=t.util.transformPoint,l=t.util.invertTransform,c=t.util.getNodeCanvas,d=t.util.createCanvasElement,p=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(m,g){g||(g={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(m,g)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(m,g){var b=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(m),this._initOptions(g),this.interactive||this._initRetinaScaling(),g.overlayImage&&this.setOverlayImage(g.overlayImage,b),g.backgroundImage&&this.setBackgroundImage(g.backgroundImage,b),g.backgroundColor&&this.setBackgroundColor(g.backgroundColor,b),g.overlayColor&&this.setOverlayColor(g.overlayColor,b),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,t.devicePixelRatio):1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var m=t.devicePixelRatio;this.__initRetinaScaling(m,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(m,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(m,g,b){g.setAttribute("width",this.width*m),g.setAttribute("height",this.height*m),b.scale(m,m)},calcOffset:function(){return this._offset=n(this.lowerCanvasEl),this},setOverlayImage:function(m,g,b){return this.__setBgOverlayImage("overlayImage",m,g,b)},setBackgroundImage:function(m,g,b){return this.__setBgOverlayImage("backgroundImage",m,g,b)},setOverlayColor:function(m,g){return this.__setBgOverlayColor("overlayColor",m,g)},setBackgroundColor:function(m,g){return this.__setBgOverlayColor("backgroundColor",m,g)},__setBgOverlayImage:function(m,g,b,y){return typeof g=="string"?t.util.loadImage(g,function(w,x){if(w){var C=new t.Image(w,y);this[m]=C,C.canvas=this}b&&b(w,x)},this,y&&y.crossOrigin):(y&&g.setOptions(y),this[m]=g,g&&(g.canvas=this),b&&b(g,!1)),this},__setBgOverlayColor:function(m,g,b){return this[m]=g,this._initGradient(g,m),this._initPattern(g,m,b),this},_createCanvasElement:function(){var m=d();if(!m||(m.style||(m.style={}),typeof m.getContext>"u"))throw p;return m},_initOptions:function(m){var g=this.lowerCanvasEl;this._setOptions(m),this.width=this.width||parseInt(g.width,10)||0,this.height=this.height||parseInt(g.height,10)||0,this.lowerCanvasEl.style&&(g.width=this.width,g.height=this.height,g.style.width=this.width+"px",g.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(m){m&&m.getContext?this.lowerCanvasEl=m:this.lowerCanvasEl=t.util.getById(m)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(m,g){return this.setDimensions({width:m},g)},setHeight:function(m,g){return this.setDimensions({height:m},g)},setDimensions:function(m,g){var b;g=g||{};for(var y in m)b=m[y],g.cssOnly||(this._setBackstoreDimension(y,m[y]),b+="px",this.hasLostContext=!0),g.backstoreOnly||this._setCssDimension(y,b);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),g.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(m,g){return this.lowerCanvasEl[m]=g,this.upperCanvasEl&&(this.upperCanvasEl[m]=g),this.cacheCanvasEl&&(this.cacheCanvasEl[m]=g),this[m]=g,this},_setCssDimension:function(m,g){return this.lowerCanvasEl.style[m]=g,this.upperCanvasEl&&(this.upperCanvasEl.style[m]=g),this.wrapperEl&&(this.wrapperEl.style[m]=g),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(m){var g=this._activeObject,b=this.backgroundImage,y=this.overlayImage,w,x,C;for(this.viewportTransform=m,x=0,C=this._objects.length;x<C;x++)w=this._objects[x],w.group||w.setCoords(!0);return g&&g.setCoords(),b&&b.setCoords(!0),y&&y.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(m,g){var b=m,y=this.viewportTransform.slice(0);m=i(m,l(this.viewportTransform)),y[0]=g,y[3]=g;var w=i(m,y);return y[4]+=b.x-w.x,y[5]+=b.y-w.y,this.setViewportTransform(y)},setZoom:function(m){return this.zoomToPoint(new t.Point(0,0),m),this},absolutePan:function(m){var g=this.viewportTransform.slice(0);return g[4]=-m.x,g[5]=-m.y,this.setViewportTransform(g)},relativePan:function(m){return this.absolutePan(new t.Point(-m.x-this.viewportTransform[4],-m.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(m){this.stateful&&m.setupState(),m._set("canvas",this),m.setCoords(),this.fire("object:added",{target:m}),m.fire("added")},_onObjectRemoved:function(m){this.fire("object:removed",{target:m}),m.fire("removed"),delete m.canvas},clearContext:function(m){return m.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var m=this.contextContainer;return this.renderCanvas(m,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var m={},g=this.width,b=this.height,y=l(this.viewportTransform);return m.tl=i({x:0,y:0},y),m.br=i({x:g,y:b},y),m.tr=new t.Point(m.br.x,m.tl.y),m.bl=new t.Point(m.tl.x,m.br.y),this.vptCoords=m,m},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(m,g){var b=this.viewportTransform,y=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(m),t.util.setImageSmoothing(m,this.imageSmoothingEnabled),this.fire("before:render",{ctx:m}),this._renderBackground(m),m.save(),m.transform(b[0],b[1],b[2],b[3],b[4],b[5]),this._renderObjects(m,g),m.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(m),y&&(y.canvas=this,y.shouldCache(),y._transformDone=!0,y.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(m)),this._renderOverlay(m),this.controlsAboveOverlay&&this.interactive&&this.drawControls(m),this.fire("after:render",{ctx:m})},drawClipPathOnCanvas:function(m){var g=this.viewportTransform,b=this.clipPath;m.save(),m.transform(g[0],g[1],g[2],g[3],g[4],g[5]),m.globalCompositeOperation="destination-in",b.transform(m),m.scale(1/b.zoomX,1/b.zoomY),m.drawImage(b._cacheCanvas,-b.cacheTranslationX,-b.cacheTranslationY),m.restore()},_renderObjects:function(m,g){var b,y;for(b=0,y=g.length;b<y;++b)g[b]&&g[b].render(m)},_renderBackgroundOrOverlay:function(m,g){var b=this[g+"Color"],y=this[g+"Image"],w=this.viewportTransform,x=this[g+"Vpt"];if(!(!b&&!y)){if(b){m.save(),m.beginPath(),m.moveTo(0,0),m.lineTo(this.width,0),m.lineTo(this.width,this.height),m.lineTo(0,this.height),m.closePath(),m.fillStyle=b.toLive?b.toLive(m,this):b,x&&m.transform(w[0],w[1],w[2],w[3],w[4],w[5]),m.transform(1,0,0,1,b.offsetX||0,b.offsetY||0);var C=b.gradientTransform||b.patternTransform;C&&m.transform(C[0],C[1],C[2],C[3],C[4],C[5]),m.fill(),m.restore()}y&&(m.save(),x&&m.transform(w[0],w[1],w[2],w[3],w[4],w[5]),y.render(m),m.restore())}},_renderBackground:function(m){this._renderBackgroundOrOverlay(m,"background")},_renderOverlay:function(m){this._renderBackgroundOrOverlay(m,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new t.Point(this.width/2,this.height/2)},centerObjectH:function(m){return this._centerObject(m,new t.Point(this.getCenterPoint().x,m.getCenterPoint().y))},centerObjectV:function(m){return this._centerObject(m,new t.Point(m.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(m){var g=this.getCenterPoint();return this._centerObject(m,g)},viewportCenterObject:function(m){var g=this.getVpCenter();return this._centerObject(m,g)},viewportCenterObjectH:function(m){var g=this.getVpCenter();return this._centerObject(m,new t.Point(g.x,m.getCenterPoint().y)),this},viewportCenterObjectV:function(m){var g=this.getVpCenter();return this._centerObject(m,new t.Point(m.getCenterPoint().x,g.y))},getVpCenter:function(){var m=this.getCenterPoint(),g=l(this.viewportTransform);return i(m,g)},_centerObject:function(m,g){return m.setPositionByOrigin(g,"center","center"),m.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(m){return this.toDatalessObject(m)},toObject:function(m){return this._toObjectMethod("toObject",m)},toDatalessObject:function(m){return this._toObjectMethod("toDatalessObject",m)},_toObjectMethod:function(m,g){var b=this.clipPath,y={version:t.version,objects:this._toObjects(m,g)};return b&&!b.excludeFromExport&&(y.clipPath=this._toObject(this.clipPath,m,g)),h(y,this.__serializeBgOverlay(m,g)),t.util.populateWithProperties(this,y,g),y},_toObjects:function(m,g){return this._objects.filter(function(b){return!b.excludeFromExport}).map(function(b){return this._toObject(b,m,g)},this)},_toObject:function(m,g,b){var y;this.includeDefaultValues||(y=m.includeDefaultValues,m.includeDefaultValues=!1);var w=m[g](b);return this.includeDefaultValues||(m.includeDefaultValues=y),w},__serializeBgOverlay:function(m,g){var b={},y=this.backgroundImage,w=this.overlayImage,x=this.backgroundColor,C=this.overlayColor;return x&&x.toObject?x.excludeFromExport||(b.background=x.toObject(g)):x&&(b.background=x),C&&C.toObject?C.excludeFromExport||(b.overlay=C.toObject(g)):C&&(b.overlay=C),y&&!y.excludeFromExport&&(b.backgroundImage=this._toObject(y,m,g)),w&&!w.excludeFromExport&&(b.overlayImage=this._toObject(w,m,g)),b},svgViewportTransformation:!0,toSVG:function(m,g){m||(m={}),m.reviver=g;var b=[];return this._setSVGPreamble(b,m),this._setSVGHeader(b,m),this.clipPath&&b.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(b,"background"),this._setSVGBgOverlayImage(b,"backgroundImage",g),this._setSVGObjects(b,g),this.clipPath&&b.push(`</g>
`),this._setSVGBgOverlayColor(b,"overlay"),this._setSVGBgOverlayImage(b,"overlayImage",g),b.push("</svg>"),b.join("")},_setSVGPreamble:function(m,g){g.suppressPreamble||m.push('<?xml version="1.0" encoding="',g.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(m,g){var b=g.width||this.width,y=g.height||this.height,w,x='viewBox="0 0 '+this.width+" "+this.height+'" ',C=t.Object.NUM_FRACTION_DIGITS;g.viewBox?x='viewBox="'+g.viewBox.x+" "+g.viewBox.y+" "+g.viewBox.width+" "+g.viewBox.height+'" ':this.svgViewportTransformation&&(w=this.viewportTransform,x='viewBox="'+o(-w[4]/w[0],C)+" "+o(-w[5]/w[3],C)+" "+o(this.width/w[0],C)+" "+o(this.height/w[3],C)+'" '),m.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',b,'" ','height="',y,'" ',x,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(g),`</defs>
`)},createSVGClipPathMarkup:function(m){var g=this.clipPath;return g?(g.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+g.clipPathId+`" >
`+this.clipPath.toClipPathSVG(m.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var m=this,g=["background","overlay"].map(function(b){var y=m[b+"Color"];if(y&&y.toLive){var w=m[b+"Vpt"],x=m.viewportTransform,C={width:m.width/(w?x[0]:1),height:m.height/(w?x[3]:1)};return y.toSVG(C,{additionalTransform:w?t.util.matrixToSVG(x):""})}});return g.join("")},createSVGFontFacesMarkup:function(){var m="",g={},b,y,w,x,C,S,E,A,D,M=t.fontPaths,B=[];for(this._objects.forEach(function F(z){B.push(z),z._objects&&z._objects.forEach(F)}),A=0,D=B.length;A<D;A++)if(b=B[A],y=b.fontFamily,!(b.type.indexOf("text")===-1||g[y]||!M[y])&&(g[y]=!0,!!b.styles)){w=b.styles;for(C in w){x=w[C];for(E in x)S=x[E],y=S.fontFamily,!g[y]&&M[y]&&(g[y]=!0)}}for(var O in g)m+=[`		@font-face {
`,"			font-family: '",O,`';
`,"			src: url('",M[O],`');
`,`		}
`].join("");return m&&(m=['	<style type="text/css">',`<![CDATA[
`,m,"]]>",`</style>
`].join("")),m},_setSVGObjects:function(m,g){var b,y,w,x=this._objects;for(y=0,w=x.length;y<w;y++)b=x[y],!b.excludeFromExport&&this._setSVGObject(m,b,g)},_setSVGObject:function(m,g,b){m.push(g.toSVG(b))},_setSVGBgOverlayImage:function(m,g,b){this[g]&&!this[g].excludeFromExport&&this[g].toSVG&&m.push(this[g].toSVG(b))},_setSVGBgOverlayColor:function(m,g){var b=this[g+"Color"],y=this.viewportTransform,w=this.width,x=this.height;if(!!b)if(b.toLive){var C=b.repeat,S=t.util.invertTransform(y),E=this[g+"Vpt"],A=E?t.util.matrixToSVG(S):"";m.push('<rect transform="'+A+" translate(",w/2,",",x/2,')"',' x="',b.offsetX-w/2,'" y="',b.offsetY-x/2,'" ','width="',C==="repeat-y"||C==="no-repeat"?b.source.width:w,'" height="',C==="repeat-x"||C==="no-repeat"?b.source.height:x,'" fill="url(#SVGID_'+b.id+')"',`></rect>
`)}else m.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',b,'"',`></rect>
`)},sendToBack:function(m){if(!m)return this;var g=this._activeObject,b,y,w;if(m===g&&m.type==="activeSelection")for(w=g._objects,b=w.length;b--;)y=w[b],u(this._objects,y),this._objects.unshift(y);else u(this._objects,m),this._objects.unshift(m);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(m){if(!m)return this;var g=this._activeObject,b,y,w;if(m===g&&m.type==="activeSelection")for(w=g._objects,b=0;b<w.length;b++)y=w[b],u(this._objects,y),this._objects.push(y);else u(this._objects,m),this._objects.push(m);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(m,g){if(!m)return this;var b=this._activeObject,y,w,x,C,S,E=0;if(m===b&&m.type==="activeSelection")for(S=b._objects,y=0;y<S.length;y++)w=S[y],x=this._objects.indexOf(w),x>0+E&&(C=x-1,u(this._objects,w),this._objects.splice(C,0,w)),E++;else x=this._objects.indexOf(m),x!==0&&(C=this._findNewLowerIndex(m,x,g),u(this._objects,m),this._objects.splice(C,0,m));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(m,g,b){var y,w;if(b)for(y=g,w=g-1;w>=0;--w){var x=m.intersectsWithObject(this._objects[w])||m.isContainedWithinObject(this._objects[w])||this._objects[w].isContainedWithinObject(m);if(x){y=w;break}}else y=g-1;return y},bringForward:function(m,g){if(!m)return this;var b=this._activeObject,y,w,x,C,S,E=0;if(m===b&&m.type==="activeSelection")for(S=b._objects,y=S.length;y--;)w=S[y],x=this._objects.indexOf(w),x<this._objects.length-1-E&&(C=x+1,u(this._objects,w),this._objects.splice(C,0,w)),E++;else x=this._objects.indexOf(m),x!==this._objects.length-1&&(C=this._findNewUpperIndex(m,x,g),u(this._objects,m),this._objects.splice(C,0,m));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(m,g,b){var y,w,x;if(b)for(y=g,w=g+1,x=this._objects.length;w<x;++w){var C=m.intersectsWithObject(this._objects[w])||m.isContainedWithinObject(this._objects[w])||this._objects[w].isContainedWithinObject(m);if(C){y=w;break}}else y=g+1;return y},moveTo:function(m,g){return u(this._objects,m),this._objects.splice(g,0,m),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(m){m.dispose&&m.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),t.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),h(t.StaticCanvas.prototype,t.Observable),h(t.StaticCanvas.prototype,t.Collection),h(t.StaticCanvas.prototype,t.DataURLExporter),h(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(m){var g=d();if(!g||!g.getContext)return null;var b=g.getContext("2d");if(!b)return null;switch(m){case"setLineDash":return typeof b.setLineDash<"u";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var m=c(this.lowerCanvasEl);return m&&m.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(m){var g=c(this.lowerCanvasEl);return g&&g.createJPEGStream(m)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(h){h.strokeStyle=this.color,h.lineWidth=this.width,h.lineCap=this.strokeLineCap,h.miterLimit=this.strokeMiterLimit,h.lineJoin=this.strokeLineJoin,h.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(h){var n=this.canvas.viewportTransform;h.save(),h.transform(n[0],n[1],n[2],n[3],n[4],n[5])},_setShadow:function(){if(!!this.shadow){var h=this.canvas,n=this.shadow,u=h.contextTop,o=h.getZoom();h&&h._isRetinaScaling()&&(o*=t.devicePixelRatio),u.shadowColor=n.color,u.shadowBlur=n.blur*o,u.shadowOffsetX=n.offsetX*o,u.shadowOffsetY=n.offsetY*o}},needsFullRender:function(){var h=new t.Color(this.color);return h.getAlpha()<1||!!this.shadow},_resetShadow:function(){var h=this.canvas.contextTop;h.shadowColor="",h.shadowBlur=h.shadowOffsetX=h.shadowOffsetY=0},_isOutSideCanvas:function(h){return h.x<0||h.x>this.canvas.getWidth()||h.y<0||h.y>this.canvas.getHeight()}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(h){this.canvas=h,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(h,n,u){var o=n.midPointFrom(u);return h.quadraticCurveTo(n.x,n.y,o.x,o.y),o},onMouseDown:function(h,n){!this.canvas._isMainEvent(n.e)||(this.drawStraightLine=n.e[this.straightLineKey],this._prepareForDrawing(h),this._captureDrawingPath(h),this._render())},onMouseMove:function(h,n){if(!!this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h))&&this._captureDrawingPath(h)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var u=this._points,o=u.length,i=this.canvas.contextTop;this._saveAndTransform(i),this.oldEnd&&(i.beginPath(),i.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(i,u[o-2],u[o-1],!0),i.stroke(),i.restore()}},onMouseUp:function(h){return this.canvas._isMainEvent(h.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(h){var n=new t.Point(h.x,h.y);this._reset(),this._addPoint(n),this.canvas.contextTop.moveTo(n.x,n.y)},_addPoint:function(h){return this._points.length>1&&h.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(h),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(h){var n=new t.Point(h.x,h.y);return this._addPoint(n)},_render:function(h){var n,u,o=this._points[0],i=this._points[1];if(h=h||this.canvas.contextTop,this._saveAndTransform(h),h.beginPath(),this._points.length===2&&o.x===i.x&&o.y===i.y){var l=this.width/1e3;o=new t.Point(o.x,o.y),i=new t.Point(i.x,i.y),o.x-=l,i.x+=l}for(h.moveTo(o.x,o.y),n=1,u=this._points.length;n<u;n++)this._drawSegment(h,o,i),o=this._points[n],i=this._points[n+1];h.lineTo(o.x,o.y),h.stroke(),h.restore()},convertPointsToSVGPath:function(h){var n=this.width/1e3;return t.util.getSmoothPathFromPoints(h,n)},_isEmptySVGPath:function(h){var n=t.util.joinPath(h);return n==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(h){var n=new t.Path(h,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,n.shadow=new t.Shadow(this.shadow)),n},decimatePoints:function(h,n){if(h.length<=2)return h;var u=this.canvas.getZoom(),o=Math.pow(n/u,2),i,l=h.length-1,c=h[0],d=[c],p;for(i=1;i<l-1;i++)p=Math.pow(c.x-h[i].x,2)+Math.pow(c.y-h[i].y,2),p>=o&&(c=h[i],d.push(c));return d.push(h[l]),d},_finalizeAndAddPath:function(){var h=this.canvas.contextTop;h.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var n=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(n)){this.canvas.requestRenderAll();return}var u=this.createPath(n);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:u}),this.canvas.add(u),this.canvas.requestRenderAll(),u.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:u})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(h){this.canvas=h,this.points=[]},drawDot:function(h){var n=this.addPoint(h),u=this.canvas.contextTop;this._saveAndTransform(u),this.dot(u,n),u.restore()},dot:function(h,n){h.fillStyle=n.fill,h.beginPath(),h.arc(n.x,n.y,n.radius,0,Math.PI*2,!1),h.closePath(),h.fill()},onMouseDown:function(h){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(h)},_render:function(){var h=this.canvas.contextTop,n,u,o=this.points;for(this._saveAndTransform(h),n=0,u=o.length;n<u;n++)this.dot(h,o[n]);h.restore()},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(h),this._render()):this.drawDot(h))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove,n,u;this.canvas.renderOnAddRemove=!1;var o=[];for(n=0,u=this.points.length;n<u;n++){var i=this.points[n],l=new t.Circle({radius:i.radius,left:i.x,top:i.y,originX:"center",originY:"center",fill:i.fill});this.shadow&&(l.shadow=new t.Shadow(this.shadow)),o.push(l)}var c=new t.Group(o);c.canvas=this.canvas,this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},addPoint:function(h){var n=new t.Point(h.x,h.y),u=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,o=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return n.radius=u,n.fill=o,this.points.push(n),n}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(h){this.canvas=h,this.sprayChunks=[]},onMouseDown:function(h){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(h),this.render(this.sprayChunkPoints)},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.addSprayChunk(h),this.render(this.sprayChunkPoints))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var n=[],u=0,o=this.sprayChunks.length;u<o;u++)for(var i=this.sprayChunks[u],l=0,c=i.length;l<c;l++){var d=new t.Rect({width:i[l].width,height:i[l].width,left:i[l].x+1,top:i[l].y+1,originX:"center",originY:"center",fill:this.color});n.push(d)}this.optimizeOverlapping&&(n=this._getOptimizedRects(n));var p=new t.Group(n);this.shadow&&p.set("shadow",new t.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:p}),this.canvas.add(p),this.canvas.fire("path:created",{path:p}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},_getOptimizedRects:function(h){var n={},u,o,i;for(o=0,i=h.length;o<i;o++)u=h[o].left+""+h[o].top,n[u]||(n[u]=h[o]);var l=[];for(u in n)l.push(n[u]);return l},render:function(h){var n=this.canvas.contextTop,u,o;for(n.fillStyle=this.color,this._saveAndTransform(n),u=0,o=h.length;u<o;u++){var i=h[u];typeof i.opacity<"u"&&(n.globalAlpha=i.opacity),n.fillRect(i.x,i.y,i.width,i.width)}n.restore()},_render:function(){var h=this.canvas.contextTop,n,u;for(h.fillStyle=this.color,this._saveAndTransform(h),n=0,u=this.sprayChunks.length;n<u;n++)this.render(this.sprayChunks[n]);h.restore()},addSprayChunk:function(h){this.sprayChunkPoints=[];var n,u,o,i=this.width/2,l;for(l=0;l<this.density;l++){n=t.util.getRandomInt(h.x-i,h.x+i),u=t.util.getRandomInt(h.y-i,h.y+i),this.dotWidthVariance?o=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):o=this.dotWidth;var c=new t.Point(n,u);c.width=o,this.randomOpacity&&(c.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(c)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var h=20,n=5,u=t.util.createCanvasElement(),o=u.getContext("2d");return u.width=u.height=h+n,o.fillStyle=this.color,o.beginPath(),o.arc(h/2,h/2,h/2,0,Math.PI*2,!1),o.closePath(),o.fill(),u},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(h){return h.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(h){this.callSuper("_setBrushStyles",h),h.strokeStyle=this.getPattern(h)},createPath:function(h){var n=this.callSuper("createPath",h),u=n._getLeftTopCoords().scalarAdd(n.strokeWidth/2);return n.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-u.x,offsetY:-u.y}),n}}),function(){var h=t.util.getPointer,n=t.util.degreesToRadians,u=t.util.isTouchEvent;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(i,l){l||(l={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(i,l),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var i=this.getActiveObjects(),l,c,d;if(i.length>0&&!this.preserveObjectStacking){c=[],d=[];for(var p=0,m=this._objects.length;p<m;p++)l=this._objects[p],i.indexOf(l)===-1?c.push(l):d.push(l);i.length>1&&(this._activeObject._objects=d),c.push.apply(c,d)}else c=this._objects;return c},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var i=this.contextContainer;return this.renderCanvas(i,this._chooseObjectsToRender()),this},renderTopLayer:function(i){i.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(i),this.contextTopDirty=!0),i.restore()},renderTop:function(){var i=this.contextTop;return this.clearContext(i),this.renderTopLayer(i),this.fire("after:render"),this},_normalizePointer:function(i,l){var c=i.calcTransformMatrix(),d=t.util.invertTransform(c),p=this.restorePointerVpt(l);return t.util.transformPoint(p,d)},isTargetTransparent:function(i,l,c){if(i.shouldCache()&&i._cacheCanvas&&i!==this._activeObject){var d=this._normalizePointer(i,{x:l,y:c}),p=Math.max(i.cacheTranslationX+d.x*i.zoomX,0),m=Math.max(i.cacheTranslationY+d.y*i.zoomY,0),w=t.util.isTransparent(i._cacheContext,Math.round(p),Math.round(m),this.targetFindTolerance);return w}var g=this.contextCache,b=i.selectionBackgroundColor,y=this.viewportTransform;i.selectionBackgroundColor="",this.clearContext(g),g.save(),g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),i.render(g),g.restore(),i.selectionBackgroundColor=b;var w=t.util.isTransparent(g,l,c,this.targetFindTolerance);return w},_isSelectionKeyPressed:function(i){var l=!1;return Array.isArray(this.selectionKey)?l=!!this.selectionKey.find(function(c){return i[c]===!0}):l=i[this.selectionKey],l},_shouldClearSelection:function(i,l){var c=this.getActiveObjects(),d=this._activeObject;return!l||l&&d&&c.length>1&&c.indexOf(l)===-1&&d!==l&&!this._isSelectionKeyPressed(i)||l&&!l.evented||l&&!l.selectable&&d&&d!==l},_shouldCenterTransform:function(i,l,c){if(!!i){var d;return l==="scale"||l==="scaleX"||l==="scaleY"||l==="resizing"?d=this.centeredScaling||i.centeredScaling:l==="rotate"&&(d=this.centeredRotation||i.centeredRotation),d?!c:c}},_getOriginFromCorner:function(i,l){var c={x:i.originX,y:i.originY};return l==="ml"||l==="tl"||l==="bl"?c.x="right":(l==="mr"||l==="tr"||l==="br")&&(c.x="left"),l==="tl"||l==="mt"||l==="tr"?c.y="bottom":(l==="bl"||l==="mb"||l==="br")&&(c.y="top"),c},_getActionFromCorner:function(i,l,c,d){if(!l||!i)return"drag";var p=d.controls[l];return p.getActionName(c,p,d)},_setupCurrentTransform:function(i,l,c){if(!!l){var d=this.getPointer(i),p=l.__corner,m=l.controls[p],g=c&&p?m.getActionHandler(i,l,m):t.controlsUtils.dragHandler,b=this._getActionFromCorner(c,p,i,l),y=this._getOriginFromCorner(l,p),w=i[this.centeredKey],x={target:l,action:b,actionHandler:g,corner:p,scaleX:l.scaleX,scaleY:l.scaleY,skewX:l.skewX,skewY:l.skewY,offsetX:d.x-l.left,offsetY:d.y-l.top,originX:y.x,originY:y.y,ex:d.x,ey:d.y,lastX:d.x,lastY:d.y,theta:n(l.angle),width:l.width*l.scaleX,shiftKey:i.shiftKey,altKey:w,original:t.util.saveObjectTransform(l)};this._shouldCenterTransform(l,b,w)&&(x.originX="center",x.originY="center"),x.original.originX=y.x,x.original.originY=y.y,this._currentTransform=x,this._beforeTransform(i)}},setCursor:function(i){this.upperCanvasEl.style.cursor=i},_drawSelection:function(i){var l=this._groupSelector,c=new t.Point(l.ex,l.ey),d=t.util.transformPoint(c,this.viewportTransform),p=new t.Point(l.ex+l.left,l.ey+l.top),m=t.util.transformPoint(p,this.viewportTransform),g=Math.min(d.x,m.x),b=Math.min(d.y,m.y),y=Math.max(d.x,m.x),w=Math.max(d.y,m.y),x=this.selectionLineWidth/2;this.selectionColor&&(i.fillStyle=this.selectionColor,i.fillRect(g,b,y-g,w-b)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(i.lineWidth=this.selectionLineWidth,i.strokeStyle=this.selectionBorderColor,g+=x,b+=x,y-=x,w-=x,t.Object.prototype._setLineDash.call(this,i,this.selectionDashArray),i.strokeRect(g,b,y-g,w-b))},findTarget:function(i,l){if(!this.skipTargetFind){var c=!0,d=this.getPointer(i,c),p=this._activeObject,m=this.getActiveObjects(),g,b,y=u(i),w=m.length>1&&!l||m.length===1;if(this.targets=[],w&&p._findTargetCorner(d,y)||m.length>1&&!l&&p===this._searchPossibleTargets([p],d))return p;if(m.length===1&&p===this._searchPossibleTargets([p],d))if(this.preserveObjectStacking)g=p,b=this.targets,this.targets=[];else return p;var x=this._searchPossibleTargets(this._objects,d);return i[this.altSelectionKey]&&x&&g&&x!==g&&(x=g,this.targets=b),x}},_checkTarget:function(i,l,c){if(l&&l.visible&&l.evented&&l.containsPoint(i))if((this.perPixelTargetFind||l.perPixelTargetFind)&&!l.isEditing){var d=this.isTargetTransparent(l,c.x,c.y);if(!d)return!0}else return!0},_searchPossibleTargets:function(i,l){for(var c,d=i.length,p;d--;){var m=i[d],g=m.group?this._normalizePointer(m.group,l):l;if(this._checkTarget(g,m,l)){c=i[d],c.subTargetCheck&&c instanceof t.Group&&(p=this._searchPossibleTargets(c._objects,l),p&&this.targets.push(p));break}}return c},restorePointerVpt:function(i){return t.util.transformPoint(i,t.util.invertTransform(this.viewportTransform))},getPointer:function(i,l){if(this._absolutePointer&&!l)return this._absolutePointer;if(this._pointer&&l)return this._pointer;var c=h(i),d=this.upperCanvasEl,p=d.getBoundingClientRect(),m=p.width||0,g=p.height||0,b;(!m||!g)&&("top"in p&&"bottom"in p&&(g=Math.abs(p.top-p.bottom)),"right"in p&&"left"in p&&(m=Math.abs(p.right-p.left))),this.calcOffset(),c.x=c.x-this._offset.left,c.y=c.y-this._offset.top,l||(c=this.restorePointerVpt(c));var y=this.getRetinaScaling();return y!==1&&(c.x/=y,c.y/=y),m===0||g===0?b={width:1,height:1}:b={width:d.width/m,height:d.height/g},{x:c.x*b.width,y:c.y*b.height}},_createUpperCanvas:function(){var i=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),l=this.lowerCanvasEl,c=this.upperCanvasEl;c?c.className="":(c=this._createCanvasElement(),this.upperCanvasEl=c),t.util.addClass(c,"upper-canvas "+i),this.wrapperEl.appendChild(c),this._copyCanvasStyle(l,c),this._applyCanvasStyle(c),this.contextTop=c.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(i){var l=this.width||i.width,c=this.height||i.height;t.util.setStyle(i,{position:"absolute",width:l+"px",height:c+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),i.width=l,i.height=c,t.util.makeElementUnselectable(i)},_copyCanvasStyle:function(i,l){l.style.cssText=i.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var i=this._activeObject;return i?i.type==="activeSelection"&&i._objects?i._objects.slice(0):[i]:[]},_onObjectRemoved:function(i){i===this._activeObject&&(this.fire("before:selection:cleared",{target:i}),this._discardActiveObject(),this.fire("selection:cleared",{target:i}),i.fire("deselected")),i===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",i)},_fireSelectionEvents:function(i,l){var c=!1,d=this.getActiveObjects(),p=[],m=[];i.forEach(function(g){d.indexOf(g)===-1&&(c=!0,g.fire("deselected",{e:l,target:g}),m.push(g))}),d.forEach(function(g){i.indexOf(g)===-1&&(c=!0,g.fire("selected",{e:l,target:g}),p.push(g))}),i.length>0&&d.length>0?c&&this.fire("selection:updated",{e:l,selected:p,deselected:m}):d.length>0?this.fire("selection:created",{e:l,selected:p}):i.length>0&&this.fire("selection:cleared",{e:l,deselected:m})},setActiveObject:function(i,l){var c=this.getActiveObjects();return this._setActiveObject(i,l),this._fireSelectionEvents(c,l),this},_setActiveObject:function(i,l){return this._activeObject===i||!this._discardActiveObject(l,i)||i.onSelect({e:l})?!1:(this._activeObject=i,!0)},_discardActiveObject:function(i,l){var c=this._activeObject;if(c){if(c.onDeselect({e:i,object:l}))return!1;this._activeObject=null}return!0},discardActiveObject:function(i){var l=this.getActiveObjects(),c=this.getActiveObject();return l.length&&this.fire("before:selection:cleared",{target:c,e:i}),this._discardActiveObject(i),this._fireSelectionEvents(l,i),this},dispose:function(){var i=this.wrapperEl;return this.removeListeners(),i.removeChild(this.upperCanvasEl),i.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(l){t.util.cleanUpJsdomNode(this[l]),this[l]=void 0}.bind(this)),i.parentNode&&i.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(i){var l=this._activeObject;l&&l._renderControls(i)},_toObject:function(i,l,c){var d=this._realizeGroupTransformOnObject(i),p=this.callSuper("_toObject",i,l,c);return this._unwindGroupTransformOnObject(i,d),p},_realizeGroupTransformOnObject:function(i){if(i.group&&i.group.type==="activeSelection"&&this._activeObject===i.group){var l=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],c={};return l.forEach(function(d){c[d]=i[d]}),t.util.addTransformToObject(i,this._activeObject.calcOwnMatrix()),c}else return null},_unwindGroupTransformOnObject:function(i,l){l&&i.set(l)},_setSVGObject:function(i,l,c){var d=this._realizeGroupTransformOnObject(l);this.callSuper("_setSVGObject",i,l,c),this._unwindGroupTransformOnObject(l,d)},setViewportTransform:function(i){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,i)}});for(var o in t.StaticCanvas)o!=="prototype"&&(t.Canvas[o]=t.StaticCanvas[o])}(),function(){var h=t.util.addListener,n=t.util.removeListener,u=3,o=2,i=1,l={passive:!1};function c(d,p){return d.button&&d.button===p-1}t.util.object.extend(t.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(h,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(d,p){var m=this.upperCanvasEl,g=this._getEventPrefix();d(t.window,"resize",this._onResize),d(m,g+"down",this._onMouseDown),d(m,g+"move",this._onMouseMove,l),d(m,g+"out",this._onMouseOut),d(m,g+"enter",this._onMouseEnter),d(m,"wheel",this._onMouseWheel),d(m,"contextmenu",this._onContextMenu),d(m,"dblclick",this._onDoubleClick),d(m,"dragover",this._onDragOver),d(m,"dragenter",this._onDragEnter),d(m,"dragleave",this._onDragLeave),d(m,"drop",this._onDrop),this.enablePointerEvents||d(m,"touchstart",this._onTouchStart,l),typeof eventjs<"u"&&p in eventjs&&(eventjs[p](m,"gesture",this._onGesture),eventjs[p](m,"drag",this._onDrag),eventjs[p](m,"orientation",this._onOrientationChange),eventjs[p](m,"shake",this._onShake),eventjs[p](m,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(n,"remove");var d=this._getEventPrefix();n(t.document,d+"up",this._onMouseUp),n(t.document,"touchend",this._onTouchEnd,l),n(t.document,d+"move",this._onMouseMove,l),n(t.document,"touchmove",this._onMouseMove,l)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(d,p){this.__onTransformGesture&&this.__onTransformGesture(d,p)},_onDrag:function(d,p){this.__onDrag&&this.__onDrag(d,p)},_onMouseWheel:function(d){this.__onMouseWheel(d)},_onMouseOut:function(d){var p=this._hoveredTarget;this.fire("mouse:out",{target:p,e:d}),this._hoveredTarget=null,p&&p.fire("mouseout",{e:d});var m=this;this._hoveredTargets.forEach(function(g){m.fire("mouse:out",{target:p,e:d}),g&&p.fire("mouseout",{e:d})}),this._hoveredTargets=[]},_onMouseEnter:function(d){!this._currentTransform&&!this.findTarget(d)&&(this.fire("mouse:over",{target:null,e:d}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(d,p){this.__onOrientationChange&&this.__onOrientationChange(d,p)},_onShake:function(d,p){this.__onShake&&this.__onShake(d,p)},_onLongPress:function(d,p){this.__onLongPress&&this.__onLongPress(d,p)},_onDragOver:function(d){d.preventDefault();var p=this._simpleEventHandler("dragover",d);this._fireEnterLeaveEvents(p,d)},_onDrop:function(d){return this._simpleEventHandler("drop:before",d),this._simpleEventHandler("drop",d)},_onContextMenu:function(d){return this.stopContextMenu&&(d.stopPropagation(),d.preventDefault()),!1},_onDoubleClick:function(d){this._cacheTransformEventData(d),this._handleEvent(d,"dblclick"),this._resetTransformEventData(d)},getPointerId:function(d){var p=d.changedTouches;return p?p[0]&&p[0].identifier:this.enablePointerEvents?d.pointerId:-1},_isMainEvent:function(d){return d.isPrimary===!0?!0:d.isPrimary===!1?!1:d.type==="touchend"&&d.touches.length===0?!0:d.changedTouches?d.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(d){d.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(d)),this.__onMouseDown(d),this._resetTransformEventData();var p=this.upperCanvasEl,m=this._getEventPrefix();h(t.document,"touchend",this._onTouchEnd,l),h(t.document,"touchmove",this._onMouseMove,l),n(p,m+"down",this._onMouseDown)},_onMouseDown:function(d){this.__onMouseDown(d),this._resetTransformEventData();var p=this.upperCanvasEl,m=this._getEventPrefix();n(p,m+"move",this._onMouseMove,l),h(t.document,m+"up",this._onMouseUp),h(t.document,m+"move",this._onMouseMove,l)},_onTouchEnd:function(d){if(!(d.touches.length>0)){this.__onMouseUp(d),this._resetTransformEventData(),this.mainTouchId=null;var p=this._getEventPrefix();n(t.document,"touchend",this._onTouchEnd,l),n(t.document,"touchmove",this._onMouseMove,l);var m=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){h(m.upperCanvasEl,p+"down",m._onMouseDown),m._willAddMouseDown=0},400)}},_onMouseUp:function(d){this.__onMouseUp(d),this._resetTransformEventData();var p=this.upperCanvasEl,m=this._getEventPrefix();this._isMainEvent(d)&&(n(t.document,m+"up",this._onMouseUp),n(t.document,m+"move",this._onMouseMove,l),h(p,m+"move",this._onMouseMove,l))},_onMouseMove:function(d){!this.allowTouchScrolling&&d.preventDefault&&d.preventDefault(),this.__onMouseMove(d)},_onResize:function(){this.calcOffset()},_shouldRender:function(d){var p=this._activeObject;return!!p!=!!d||p&&d&&p!==d?!0:(p&&p.isEditing,!1)},__onMouseUp:function(d){var p,m=this._currentTransform,g=this._groupSelector,b=!1,y=!g||g.left===0&&g.top===0;if(this._cacheTransformEventData(d),p=this._target,this._handleEvent(d,"up:before"),c(d,u)){this.fireRightClick&&this._handleEvent(d,"up",u,y);return}if(c(d,o)){this.fireMiddleClick&&this._handleEvent(d,"up",o,y),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(d);return}if(!!this._isMainEvent(d)){if(m&&(this._finalizeCurrentTransform(d),b=m.actionPerformed),!y){var w=p===this._activeObject;this._maybeGroupObjects(d),b||(b=this._shouldRender(p)||!w&&p===this._activeObject)}var x,C;if(p){if(x=p._findTargetCorner(this.getPointer(d,!0),t.util.isTouchEvent(d)),p.selectable&&p!==this._activeObject&&p.activeOn==="up")this.setActiveObject(p,d),b=!0;else{var S=p.controls[x],E=S&&S.getMouseUpHandler(d,p,S);E&&(C=this.getPointer(d),E(d,m,C.x,C.y))}p.isMoving=!1}if(m&&(m.target!==p||m.corner!==x)){var A=m.target&&m.target.controls[m.corner],D=A&&A.getMouseUpHandler(d,p,S);C=C||this.getPointer(d),D&&D(d,m,C.x,C.y)}this._setCursorFromEvent(d,p),this._handleEvent(d,"up",i,y),this._groupSelector=null,this._currentTransform=null,p&&(p.__corner=0),b?this.requestRenderAll():y||this.renderTop()}},_simpleEventHandler:function(d,p){var m=this.findTarget(p),g=this.targets,b={e:p,target:m,subTargets:g};if(this.fire(d,b),m&&m.fire(d,b),!g)return m;for(var y=0;y<g.length;y++)g[y].fire(d,b);return m},_handleEvent:function(d,p,m,g){var b=this._target,y=this.targets||[],w={e:d,target:b,subTargets:y,button:m||i,isClick:g||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};p==="up"&&(w.currentTarget=this.findTarget(d),w.currentSubTargets=this.targets),this.fire("mouse:"+p,w),b&&b.fire("mouse"+p,w);for(var x=0;x<y.length;x++)y[x].fire("mouse"+p,w)},_finalizeCurrentTransform:function(d){var p=this._currentTransform,m=p.target,g={e:d,target:m,transform:p,action:p.action};m._scaling&&(m._scaling=!1),m.setCoords(),(p.actionPerformed||this.stateful&&m.hasStateChanged())&&this._fire("modified",g)},_onMouseDownInDrawingMode:function(d){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(d).requestRenderAll();var p=this.getPointer(d);this.freeDrawingBrush.onMouseDown(p,{e:d,pointer:p}),this._handleEvent(d,"down")},_onMouseMoveInDrawingMode:function(d){if(this._isCurrentlyDrawing){var p=this.getPointer(d);this.freeDrawingBrush.onMouseMove(p,{e:d,pointer:p})}this.setCursor(this.freeDrawingCursor),this._handleEvent(d,"move")},_onMouseUpInDrawingMode:function(d){var p=this.getPointer(d);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:d,pointer:p}),this._handleEvent(d,"up")},__onMouseDown:function(d){this._cacheTransformEventData(d),this._handleEvent(d,"down:before");var p=this._target;if(c(d,u)){this.fireRightClick&&this._handleEvent(d,"down",u);return}if(c(d,o)){this.fireMiddleClick&&this._handleEvent(d,"down",o);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(d);return}if(!!this._isMainEvent(d)&&!this._currentTransform){var m=this._pointer;this._previousPointer=m;var g=this._shouldRender(p),b=this._shouldGroup(d,p);if(this._shouldClearSelection(d,p)?this.discardActiveObject(d):b&&(this._handleGrouping(d,p),p=this._activeObject),this.selection&&(!p||!p.selectable&&!p.isEditing&&p!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),p){var y=p===this._activeObject;p.selectable&&p.activeOn==="down"&&this.setActiveObject(p,d);var w=p._findTargetCorner(this.getPointer(d,!0),t.util.isTouchEvent(d));if(p.__corner=w,p===this._activeObject&&(w||!b)){this._setupCurrentTransform(d,p,y);var x=p.controls[w],m=this.getPointer(d),C=x&&x.getMouseDownHandler(d,p,x);C&&C(d,this._currentTransform,m.x,m.y)}}this._handleEvent(d,"down"),(g||b)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(d){this._resetTransformEventData(),this._pointer=this.getPointer(d,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(d)||null},_beforeTransform:function(d){var p=this._currentTransform;this.stateful&&p.target.saveState(),this.fire("before:transform",{e:d,transform:p})},__onMouseMove:function(d){this._handleEvent(d,"move:before"),this._cacheTransformEventData(d);var p,m;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(d);return}if(!!this._isMainEvent(d)){var g=this._groupSelector;g?(m=this._absolutePointer,g.left=m.x-g.ex,g.top=m.y-g.ey,this.renderTop()):this._currentTransform?this._transformObject(d):(p=this.findTarget(d)||null,this._setCursorFromEvent(d,p),this._fireOverOutEvents(p,d)),this._handleEvent(d,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(d,p){var m=this._hoveredTarget,g=this._hoveredTargets,b=this.targets,y=Math.max(g.length,b.length);this.fireSyntheticInOutEvents(d,p,{oldTarget:m,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var w=0;w<y;w++)this.fireSyntheticInOutEvents(b[w],p,{oldTarget:g[w],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=d,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(d,p){var m=this._draggedoverTarget,g=this._hoveredTargets,b=this.targets,y=Math.max(g.length,b.length);this.fireSyntheticInOutEvents(d,p,{oldTarget:m,evtOut:"dragleave",evtIn:"dragenter"});for(var w=0;w<y;w++)this.fireSyntheticInOutEvents(b[w],p,{oldTarget:g[w],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=d},fireSyntheticInOutEvents:function(d,p,m){var g,b,y=m.oldTarget,w,x,C=y!==d,S=m.canvasEvtIn,E=m.canvasEvtOut;C&&(g={e:p,target:d,previousTarget:y},b={e:p,target:y,nextTarget:d}),x=d&&C,w=y&&C,w&&(E&&this.fire(E,b),y.fire(m.evtOut,b)),x&&(S&&this.fire(S,g),d.fire(m.evtIn,g))},__onMouseWheel:function(d){this._cacheTransformEventData(d),this._handleEvent(d,"wheel"),this._resetTransformEventData()},_transformObject:function(d){var p=this.getPointer(d),m=this._currentTransform;m.reset=!1,m.shiftKey=d.shiftKey,m.altKey=d[this.centeredKey],this._performTransformAction(d,m,p),m.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(d,p,m){var g=m.x,b=m.y,y=p.action,w=!1,x=p.actionHandler;x&&(w=x(d,p,g,b)),y==="drag"&&w&&(p.target.isMoving=!0,this.setCursor(p.target.moveCursor||this.moveCursor)),p.actionPerformed=p.actionPerformed||w},_fire:t.controlsUtils.fireEvent,_setCursorFromEvent:function(d,p){if(!p)return this.setCursor(this.defaultCursor),!1;var m=p.hoverCursor||this.hoverCursor,g=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,b=(!g||!g.contains(p))&&p._findTargetCorner(this.getPointer(d,!0));b?this.setCursor(this.getCornerCursor(b,p,d)):(p.subTargetCheck&&this.targets.concat().reverse().map(function(y){m=y.hoverCursor||m}),this.setCursor(m))},getCornerCursor:function(d,p,m){var g=p.controls[d];return g.cursorStyleHandler(m,g,p)}})}(),function(){var h=Math.min,n=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(u,o){var i=this._activeObject;return i&&this._isSelectionKeyPressed(u)&&o&&o.selectable&&this.selection&&(i!==o||i.type==="activeSelection")&&!o.onSelect({e:u})},_handleGrouping:function(u,o){var i=this._activeObject;i.__corner||o===i&&(o=this.findTarget(u,!0),!o||!o.selectable)||(i&&i.type==="activeSelection"?this._updateActiveSelection(o,u):this._createActiveSelection(o,u))},_updateActiveSelection:function(u,o){var i=this._activeObject,l=i._objects.slice(0);i.contains(u)?(i.removeWithUpdate(u),this._hoveredTarget=u,this._hoveredTargets=this.targets.concat(),i.size()===1&&this._setActiveObject(i.item(0),o)):(i.addWithUpdate(u),this._hoveredTarget=i,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(l,o)},_createActiveSelection:function(u,o){var i=this.getActiveObjects(),l=this._createGroup(u);this._hoveredTarget=l,this._setActiveObject(l,o),this._fireSelectionEvents(i,o)},_createGroup:function(u){var o=this._objects,i=o.indexOf(this._activeObject)<o.indexOf(u),l=i?[this._activeObject,u]:[u,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(l,{canvas:this})},_groupSelectedObjects:function(u){var o=this._collectObjects(u),i;o.length===1?this.setActiveObject(o[0],u):o.length>1&&(i=new t.ActiveSelection(o.reverse(),{canvas:this}),this.setActiveObject(i,u))},_collectObjects:function(u){for(var o=[],i,l=this._groupSelector.ex,c=this._groupSelector.ey,d=l+this._groupSelector.left,p=c+this._groupSelector.top,m=new t.Point(h(l,d),h(c,p)),g=new t.Point(n(l,d),n(c,p)),b=!this.selectionFullyContained,y=l===d&&c===p,w=this._objects.length;w--&&(i=this._objects[w],!(!(!i||!i.selectable||!i.visible)&&(b&&i.intersectsWithRect(m,g,!0)||i.isContainedWithinRect(m,g,!0)||b&&i.containsPoint(m,null,!0)||b&&i.containsPoint(g,null,!0))&&(o.push(i),y))););return o.length>1&&(o=o.filter(function(x){return!x.onSelect({e:u})})),o},_maybeGroupObjects:function(u){this.selection&&this._groupSelector&&this._groupSelectedObjects(u),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(h){h||(h={});var n=h.format||"png",u=h.quality||1,o=(h.multiplier||1)*(h.enableRetinaScaling?this.getRetinaScaling():1),i=this.toCanvasElement(o,h);return t.util.toDataURL(i,n,u)},toCanvasElement:function(h,n){h=h||1,n=n||{};var u=(n.width||this.width)*h,o=(n.height||this.height)*h,i=this.getZoom(),l=this.width,c=this.height,d=i*h,p=this.viewportTransform,m=(p[4]-(n.left||0))*h,g=(p[5]-(n.top||0))*h,b=this.interactive,y=[d,0,0,d,m,g],w=this.enableRetinaScaling,x=t.util.createCanvasElement(),C=this.contextTop;return x.width=u,x.height=o,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=y,this.width=u,this.height=o,this.calcViewportBoundaries(),this.renderCanvas(x.getContext("2d"),this._objects),this.viewportTransform=p,this.width=l,this.height=c,this.calcViewportBoundaries(),this.interactive=b,this.enableRetinaScaling=w,this.contextTop=C,x}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromJSON:function(h,n,u){if(!!h){var o=typeof h=="string"?JSON.parse(h):t.util.object.clone(h),i=this,l=o.clipPath,c=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete o.clipPath,this._enlivenObjects(o.objects,function(d){i.clear(),i._setBgOverlay(o,function(){l?i._enlivenObjects([l],function(p){i.clipPath=p[0],i.__setupCanvas.call(i,o,d,c,n)}):i.__setupCanvas.call(i,o,d,c,n)})},u),this}},__setupCanvas:function(h,n,u,o){var i=this;n.forEach(function(l,c){i.insertAt(l,c)}),this.renderOnAddRemove=u,delete h.objects,delete h.backgroundImage,delete h.overlayImage,delete h.background,delete h.overlay,this._setOptions(h),this.renderAll(),o&&o()},_setBgOverlay:function(h,n){var u={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!h.backgroundImage&&!h.overlayImage&&!h.background&&!h.overlay){n&&n();return}var o=function(){u.backgroundImage&&u.overlayImage&&u.backgroundColor&&u.overlayColor&&n&&n()};this.__setBgOverlay("backgroundImage",h.backgroundImage,u,o),this.__setBgOverlay("overlayImage",h.overlayImage,u,o),this.__setBgOverlay("backgroundColor",h.background,u,o),this.__setBgOverlay("overlayColor",h.overlay,u,o)},__setBgOverlay:function(h,n,u,o){var i=this;if(!n){u[h]=!0,o&&o();return}h==="backgroundImage"||h==="overlayImage"?t.util.enlivenObjects([n],function(l){i[h]=l[0],u[h]=!0,o&&o()}):this["set"+t.util.string.capitalize(h,!0)](n,function(){u[h]=!0,o&&o()})},_enlivenObjects:function(h,n,u){if(!h||h.length===0){n&&n([]);return}t.util.enlivenObjects(h,function(o){n&&n(o)},null,u)},_toDataURL:function(h,n){this.clone(function(u){n(u.toDataURL(h))})},_toDataURLWithMultiplier:function(h,n,u){this.clone(function(o){u(o.toDataURLWithMultiplier(h,n))})},clone:function(h,n){var u=JSON.stringify(this.toJSON(n));this.cloneWithoutData(function(o){o.loadFromJSON(u,function(){h&&h(o)})})},cloneWithoutData:function(h){var n=t.util.createCanvasElement();n.width=this.width,n.height=this.height;var u=new t.Canvas(n);this.backgroundImage?(u.setBackgroundImage(this.backgroundImage.src,function(){u.renderAll(),h&&h(u)}),u.backgroundImageOpacity=this.backgroundImageOpacity,u.backgroundImageStretch=this.backgroundImageStretch):h&&h(u)}}),function(h){var n=h.fabric||(h.fabric={}),u=n.util.object.extend,o=n.util.object.clone,i=n.util.toFixed,l=n.util.string.capitalize,c=n.util.degreesToRadians,d=!n.isLikelyNode,p=2;n.Object||(n.Object=n.util.createClass(n.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:d,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(m){m&&this.setOptions(m)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=n.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(m){var g=n.perfLimitSizeTotal,b=m.width,y=m.height,w=n.maxCacheSideLimit,x=n.minCacheSideLimit;if(b<=w&&y<=w&&b*y<=g)return b<x&&(m.width=x),y<x&&(m.height=x),m;var C=b/y,S=n.util.limitDimsByArea(C,g),E=n.util.capValue,A=E(x,S.x,w),D=E(x,S.y,w);return b>A&&(m.zoomX/=b/A,m.width=A,m.capped=!0),y>D&&(m.zoomY/=y/D,m.height=D,m.capped=!0),m},_getCacheCanvasDimensions:function(){var m=this.getTotalObjectScaling(),g=this._getTransformedDimensions(0,0),b=g.x*m.scaleX/this.scaleX,y=g.y*m.scaleY/this.scaleY;return{width:b+p,height:y+p,zoomX:m.scaleX,zoomY:m.scaleY,x:b,y}},_updateCacheCanvas:function(){var m=this.canvas;if(this.noScaleCache&&m&&m._currentTransform){var g=m._currentTransform.target,b=m._currentTransform.action;if(this===g&&b.slice&&b.slice(0,5)==="scale")return!1}var y=this._cacheCanvas,w=this._limitCacheSize(this._getCacheCanvasDimensions()),x=n.minCacheSideLimit,C=w.width,S=w.height,E,A,D=w.zoomX,M=w.zoomY,B=C!==this.cacheWidth||S!==this.cacheHeight,O=this.zoomX!==D||this.zoomY!==M,F=B||O,z=0,N=0,T=!1;if(B){var q=this._cacheCanvas.width,_=this._cacheCanvas.height,I=C>q||S>_,U=(C<q*.9||S<_*.9)&&q>x&&_>x;T=I||U,I&&!w.capped&&(C>x||S>x)&&(z=C*.1,N=S*.1)}return this instanceof n.Text&&this.path&&(F=!0,T=!0,z+=this.getHeightOfLine(0)*this.zoomX,N+=this.getHeightOfLine(0)*this.zoomY),F?(T?(y.width=Math.ceil(C+z),y.height=Math.ceil(S+N)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,y.width,y.height)),E=w.x/2,A=w.y/2,this.cacheTranslationX=Math.round(y.width/2-E)+E,this.cacheTranslationY=Math.round(y.height/2-A)+A,this.cacheWidth=C,this.cacheHeight=S,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(D,M),this.zoomX=D,this.zoomY=M,!0):!1},setOptions:function(m){this._setOptions(m),this._initGradient(m.fill,"fill"),this._initGradient(m.stroke,"stroke"),this._initPattern(m.fill,"fill"),this._initPattern(m.stroke,"stroke")},transform:function(m){var g=this.group&&!this.group._transformDone||this.group&&this.canvas&&m===this.canvas.contextTop,b=this.calcTransformMatrix(!g);m.transform(b[0],b[1],b[2],b[3],b[4],b[5])},toObject:function(m){var g=n.Object.NUM_FRACTION_DIGITS,b={type:this.type,version:n.version,originX:this.originX,originY:this.originY,left:i(this.left,g),top:i(this.top,g),width:i(this.width,g),height:i(this.height,g),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:i(this.strokeWidth,g),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:i(this.strokeMiterLimit,g),scaleX:i(this.scaleX,g),scaleY:i(this.scaleY,g),angle:i(this.angle,g),flipX:this.flipX,flipY:this.flipY,opacity:i(this.opacity,g),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:i(this.skewX,g),skewY:i(this.skewY,g)};return this.clipPath&&!this.clipPath.excludeFromExport&&(b.clipPath=this.clipPath.toObject(m),b.clipPath.inverted=this.clipPath.inverted,b.clipPath.absolutePositioned=this.clipPath.absolutePositioned),n.util.populateWithProperties(this,b,m),this.includeDefaultValues||(b=this._removeDefaultValues(b)),b},toDatalessObject:function(m){return this.toObject(m)},_removeDefaultValues:function(m){var g=n.util.getKlass(m.type).prototype,b=g.stateProperties;return b.forEach(function(y){y==="left"||y==="top"||(m[y]===g[y]&&delete m[y],Array.isArray(m[y])&&Array.isArray(g[y])&&m[y].length===0&&g[y].length===0&&delete m[y])}),m},toString:function(){return"#<fabric."+l(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var m=n.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(m.scaleX),scaleY:Math.abs(m.scaleY)}},getTotalObjectScaling:function(){var m=this.getObjectScaling(),g=m.scaleX,b=m.scaleY;if(this.canvas){var y=this.canvas.getZoom(),w=this.canvas.getRetinaScaling();g*=y*w,b*=y*w}return{scaleX:g,scaleY:b}},getObjectOpacity:function(){var m=this.opacity;return this.group&&(m*=this.group.getObjectOpacity()),m},_set:function(m,g){var b=m==="scaleX"||m==="scaleY",y=this[m]!==g,w=!1;return b&&(g=this._constrainScale(g)),m==="scaleX"&&g<0?(this.flipX=!this.flipX,g*=-1):m==="scaleY"&&g<0?(this.flipY=!this.flipY,g*=-1):m==="shadow"&&g&&!(g instanceof n.Shadow)?g=new n.Shadow(g):m==="dirty"&&this.group&&this.group.set("dirty",g),this[m]=g,y&&(w=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(m)>-1?(this.dirty=!0,w&&this.group.set("dirty",!0)):w&&this.stateProperties.indexOf(m)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:n.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(m){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(m.save(),this._setupCompositeOperation(m),this.drawSelectionBackground(m),this.transform(m),this._setOpacity(m),this._setShadow(m,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(m)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(m),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),m.restore())},renderCache:function(m){m=m||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,m.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(m,g){if(m.save(),g.inverted?m.globalCompositeOperation="destination-out":m.globalCompositeOperation="destination-in",g.absolutePositioned){var b=n.util.invertTransform(this.calcTransformMatrix());m.transform(b[0],b[1],b[2],b[3],b[4],b[5])}g.transform(m),m.scale(1/g.zoomX,1/g.zoomY),m.drawImage(g._cacheCanvas,-g.cacheTranslationX,-g.cacheTranslationY),m.restore()},drawObject:function(m,g){var b=this.fill,y=this.stroke;g?(this.fill="black",this.stroke="",this._setClippingProperties(m)):this._renderBackground(m),this._render(m),this._drawClipPath(m,this.clipPath),this.fill=b,this.stroke=y},_drawClipPath:function(m,g){!g||(g.canvas=this.canvas,g.shouldCache(),g._transformDone=!0,g.renderCache({forClipping:!0}),this.drawClipPathOnCache(m,g))},drawCacheOnCanvas:function(m){m.scale(1/this.zoomX,1/this.zoomY),m.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(m){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!m&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!m){var g=this.cacheWidth/this.zoomX,b=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-g/2,-b/2,g,b)}return!0}return!1},_renderBackground:function(m){if(!!this.backgroundColor){var g=this._getNonTransformedDimensions();m.fillStyle=this.backgroundColor,m.fillRect(-g.x/2,-g.y/2,g.x,g.y),this._removeShadow(m)}},_setOpacity:function(m){this.group&&!this.group._transformDone?m.globalAlpha=this.getObjectOpacity():m.globalAlpha*=this.opacity},_setStrokeStyles:function(m,g){var b=g.stroke;b&&(m.lineWidth=g.strokeWidth,m.lineCap=g.strokeLineCap,m.lineDashOffset=g.strokeDashOffset,m.lineJoin=g.strokeLineJoin,m.miterLimit=g.strokeMiterLimit,b.toLive?b.gradientUnits==="percentage"||b.gradientTransform||b.patternTransform?this._applyPatternForTransformedGradient(m,b):(m.strokeStyle=b.toLive(m,this),this._applyPatternGradientTransform(m,b)):m.strokeStyle=g.stroke)},_setFillStyles:function(m,g){var b=g.fill;b&&(b.toLive?(m.fillStyle=b.toLive(m,this),this._applyPatternGradientTransform(m,g.fill)):m.fillStyle=b)},_setClippingProperties:function(m){m.globalAlpha=1,m.strokeStyle="transparent",m.fillStyle="#000000"},_setLineDash:function(m,g){!g||g.length===0||(1&g.length&&g.push.apply(g,g),m.setLineDash(g))},_renderControls:function(m,g){var b=this.getViewportTransform(),y=this.calcTransformMatrix(),w,x,C;g=g||{},x=typeof g.hasBorders<"u"?g.hasBorders:this.hasBorders,C=typeof g.hasControls<"u"?g.hasControls:this.hasControls,y=n.util.multiplyTransformMatrices(b,y),w=n.util.qrDecompose(y),m.save(),m.translate(w.translateX,w.translateY),m.lineWidth=1*this.borderScaleFactor,this.group||(m.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(w.angle-=180),m.rotate(c(this.group?w.angle:this.angle)),g.forActiveSelection||this.group?x&&this.drawBordersInGroup(m,w,g):x&&this.drawBorders(m,g),C&&this.drawControls(m,g),m.restore()},_setShadow:function(m){if(!!this.shadow){var g=this.shadow,b=this.canvas,y,w=b&&b.viewportTransform[0]||1,x=b&&b.viewportTransform[3]||1;g.nonScaling?y={scaleX:1,scaleY:1}:y=this.getObjectScaling(),b&&b._isRetinaScaling()&&(w*=n.devicePixelRatio,x*=n.devicePixelRatio),m.shadowColor=g.color,m.shadowBlur=g.blur*n.browserShadowBlurConstant*(w+x)*(y.scaleX+y.scaleY)/4,m.shadowOffsetX=g.offsetX*w*y.scaleX,m.shadowOffsetY=g.offsetY*x*y.scaleY}},_removeShadow:function(m){!this.shadow||(m.shadowColor="",m.shadowBlur=m.shadowOffsetX=m.shadowOffsetY=0)},_applyPatternGradientTransform:function(m,g){if(!g||!g.toLive)return{offsetX:0,offsetY:0};var b=g.gradientTransform||g.patternTransform,y=-this.width/2+g.offsetX||0,w=-this.height/2+g.offsetY||0;return g.gradientUnits==="percentage"?m.transform(this.width,0,0,this.height,y,w):m.transform(1,0,0,1,y,w),b&&m.transform(b[0],b[1],b[2],b[3],b[4],b[5]),{offsetX:y,offsetY:w}},_renderPaintInOrder:function(m){this.paintFirst==="stroke"?(this._renderStroke(m),this._renderFill(m)):(this._renderFill(m),this._renderStroke(m))},_render:function(){},_renderFill:function(m){!this.fill||(m.save(),this._setFillStyles(m,this),this.fillRule==="evenodd"?m.fill("evenodd"):m.fill(),m.restore())},_renderStroke:function(m){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(m),m.save(),this.strokeUniform&&this.group){var g=this.getObjectScaling();m.scale(1/g.scaleX,1/g.scaleY)}else this.strokeUniform&&m.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(m,this.strokeDashArray),this._setStrokeStyles(m,this),m.stroke(),m.restore()}},_applyPatternForTransformedGradient:function(m,g){var b=this._limitCacheSize(this._getCacheCanvasDimensions()),y=n.util.createCanvasElement(),w,x=this.canvas.getRetinaScaling(),C=b.x/this.scaleX/x,S=b.y/this.scaleY/x;y.width=C,y.height=S,w=y.getContext("2d"),w.beginPath(),w.moveTo(0,0),w.lineTo(C,0),w.lineTo(C,S),w.lineTo(0,S),w.closePath(),w.translate(C/2,S/2),w.scale(b.zoomX/this.scaleX/x,b.zoomY/this.scaleY/x),this._applyPatternGradientTransform(w,g),w.fillStyle=g.toLive(m),w.fill(),m.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),m.scale(x*this.scaleX/b.zoomX,x*this.scaleY/b.zoomY),m.strokeStyle=w.createPattern(y,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var m=n.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",m.scaleX),this.set("scaleY",m.scaleY),this.angle=m.angle,this.skewX=m.skewX,this.skewY=0}},_removeTransformMatrix:function(m){var g=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),g=n.util.transformPoint(g,this.transformMatrix)),this.transformMatrix=null,m&&(this.scaleX*=m.scaleX,this.scaleY*=m.scaleY,this.cropX=m.cropX,this.cropY=m.cropY,g.x+=m.offsetLeft,g.y+=m.offsetTop,this.width=m.width,this.height=m.height),this.setPositionByOrigin(g,"center","center")},clone:function(m,g){var b=this.toObject(g);this.constructor.fromObject?this.constructor.fromObject(b,m):n.Object._fromObject("Object",b,m)},cloneAsImage:function(m,g){var b=this.toCanvasElement(g);return m&&m(new n.Image(b)),this},toCanvasElement:function(m){m||(m={});var g=n.util,b=g.saveObjectTransform(this),y=this.group,w=this.shadow,x=Math.abs,C=(m.multiplier||1)*(m.enableRetinaScaling?n.devicePixelRatio:1);delete this.group,m.withoutTransform&&g.resetObjectTransform(this),m.withoutShadow&&(this.shadow=null);var S=n.util.createCanvasElement(),E=this.getBoundingRect(!0,!0),A=this.shadow,D,M={x:0,y:0},B,O,F;A&&(B=A.blur,A.nonScaling?D={scaleX:1,scaleY:1}:D=this.getObjectScaling(),M.x=2*Math.round(x(A.offsetX)+B)*x(D.scaleX),M.y=2*Math.round(x(A.offsetY)+B)*x(D.scaleY)),O=E.width+M.x,F=E.height+M.y,S.width=Math.ceil(O),S.height=Math.ceil(F);var z=new n.StaticCanvas(S,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});m.format==="jpeg"&&(z.backgroundColor="#fff"),this.setPositionByOrigin(new n.Point(z.width/2,z.height/2),"center","center");var N=this.canvas;z.add(this);var T=z.toCanvasElement(C||1,m);return this.shadow=w,this.set("canvas",N),y&&(this.group=y),this.set(b).setCoords(),z._objects=[],z.dispose(),z=null,T},toDataURL:function(m){return m||(m={}),n.util.toDataURL(this.toCanvasElement(m),m.format||"png",m.quality||1)},isType:function(m){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===m},complexity:function(){return 1},toJSON:function(m){return this.toObject(m)},rotate:function(m){var g=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return g&&this._setOriginToCenter(),this.set("angle",m),g&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(m,g){g=g||this.canvas.getPointer(m);var b=new n.Point(g.x,g.y),y=this._getLeftTopCoords();return this.angle&&(b=n.util.rotatePoint(b,y,c(-this.angle))),{x:b.x-y.x,y:b.y-y.y}},_setupCompositeOperation:function(m){this.globalCompositeOperation&&(m.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){n.runningAnimations&&n.runningAnimations.cancelByTarget(this)}}),n.util.createAccessors&&n.util.createAccessors(n.Object),u(n.Object.prototype,n.Observable),n.Object.NUM_FRACTION_DIGITS=2,n.Object.ENLIVEN_PROPS=["clipPath"],n.Object._fromObject=function(m,g,b,y){var w=n[m];g=o(g,!0),n.util.enlivenPatterns([g.fill,g.stroke],function(x){typeof x[0]<"u"&&(g.fill=x[0]),typeof x[1]<"u"&&(g.stroke=x[1]),n.util.enlivenObjectEnlivables(g,g,function(){var C=y?new w(g[y],g):new w(g);b&&b(C)})})},n.Object.__uid=0)}(e),function(){var h=t.util.degreesToRadians,n={left:-.5,center:0,right:.5},u={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(o,i,l,c,d){var p=o.x,m=o.y,g,b,y;return typeof i=="string"?i=n[i]:i-=.5,typeof c=="string"?c=n[c]:c-=.5,g=c-i,typeof l=="string"?l=u[l]:l-=.5,typeof d=="string"?d=u[d]:d-=.5,b=d-l,(g||b)&&(y=this._getTransformedDimensions(),p=o.x+g*y.x,m=o.y+b*y.y),new t.Point(p,m)},translateToCenterPoint:function(o,i,l){var c=this.translateToGivenOrigin(o,i,l,"center","center");return this.angle?t.util.rotatePoint(c,o,h(this.angle)):c},translateToOriginPoint:function(o,i,l){var c=this.translateToGivenOrigin(o,"center","center",i,l);return this.angle?t.util.rotatePoint(c,o,h(this.angle)):c},getCenterPoint:function(){var o=new t.Point(this.left,this.top);return this.translateToCenterPoint(o,this.originX,this.originY)},getPointByOrigin:function(o,i){var l=this.getCenterPoint();return this.translateToOriginPoint(l,o,i)},toLocalPoint:function(o,i,l){var c=this.getCenterPoint(),d,p;return typeof i<"u"&&typeof l<"u"?d=this.translateToGivenOrigin(c,"center","center",i,l):d=new t.Point(this.left,this.top),p=new t.Point(o.x,o.y),this.angle&&(p=t.util.rotatePoint(p,c,-h(this.angle))),p.subtractEquals(d)},setPositionByOrigin:function(o,i,l){var c=this.translateToCenterPoint(o,i,l),d=this.translateToOriginPoint(c,this.originX,this.originY);this.set("left",d.x),this.set("top",d.y)},adjustPosition:function(o){var i=h(this.angle),l=this.getScaledWidth(),c=t.util.cos(i)*l,d=t.util.sin(i)*l,p,m;typeof this.originX=="string"?p=n[this.originX]:p=this.originX-.5,typeof o=="string"?m=n[o]:m=o-.5,this.left+=c*(m-p),this.top+=d*(m-p),this.setCoords(),this.originX=o},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var o=this.getCenterPoint();this.originX="center",this.originY="center",this.left=o.x,this.top=o.y},_resetOrigin:function(){var o=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=o.x,this.top=o.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function h(l){return[new t.Point(l.tl.x,l.tl.y),new t.Point(l.tr.x,l.tr.y),new t.Point(l.br.x,l.br.y),new t.Point(l.bl.x,l.bl.y)]}var n=t.util,u=n.degreesToRadians,o=n.multiplyTransformMatrices,i=n.transformPoint;n.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(l,c){return c?l?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),l?this.aCoords:this.lineCoords)},getCoords:function(l,c){return h(this._getCoords(l,c))},intersectsWithRect:function(l,c,d,p){var m=this.getCoords(d,p),g=t.Intersection.intersectPolygonRectangle(m,l,c);return g.status==="Intersection"},intersectsWithObject:function(l,c,d){var p=t.Intersection.intersectPolygonPolygon(this.getCoords(c,d),l.getCoords(c,d));return p.status==="Intersection"||l.isContainedWithinObject(this,c,d)||this.isContainedWithinObject(l,c,d)},isContainedWithinObject:function(l,c,d){for(var p=this.getCoords(c,d),m=c?l.aCoords:l.lineCoords,g=0,b=l._getImageLines(m);g<4;g++)if(!l.containsPoint(p[g],b))return!1;return!0},isContainedWithinRect:function(l,c,d,p){var m=this.getBoundingRect(d,p);return m.left>=l.x&&m.left+m.width<=c.x&&m.top>=l.y&&m.top+m.height<=c.y},containsPoint:function(l,g,d,p){var m=this._getCoords(d,p),g=g||this._getImageLines(m),b=this._findCrossPoints(l,g);return b!==0&&b%2===1},isOnScreen:function(l){if(!this.canvas)return!1;var c=this.canvas.vptCoords.tl,d=this.canvas.vptCoords.br,p=this.getCoords(!0,l);return p.some(function(m){return m.x<=d.x&&m.x>=c.x&&m.y<=d.y&&m.y>=c.y})||this.intersectsWithRect(c,d,!0,l)?!0:this._containsCenterOfCanvas(c,d,l)},_containsCenterOfCanvas:function(l,c,d){var p={x:(l.x+c.x)/2,y:(l.y+c.y)/2};return!!this.containsPoint(p,null,!0,d)},isPartiallyOnScreen:function(l){if(!this.canvas)return!1;var c=this.canvas.vptCoords.tl,d=this.canvas.vptCoords.br;if(this.intersectsWithRect(c,d,!0,l))return!0;var p=this.getCoords(!0,l).every(function(m){return(m.x>=d.x||m.x<=c.x)&&(m.y>=d.y||m.y<=c.y)});return p&&this._containsCenterOfCanvas(c,d,l)},_getImageLines:function(l){var c={topline:{o:l.tl,d:l.tr},rightline:{o:l.tr,d:l.br},bottomline:{o:l.br,d:l.bl},leftline:{o:l.bl,d:l.tl}};return c},_findCrossPoints:function(l,c){var d,p,m,g,b,y=0,w;for(var x in c)if(w=c[x],!(w.o.y<l.y&&w.d.y<l.y)&&!(w.o.y>=l.y&&w.d.y>=l.y)&&(w.o.x===w.d.x&&w.o.x>=l.x?b=w.o.x:(d=0,p=(w.d.y-w.o.y)/(w.d.x-w.o.x),m=l.y-d*l.x,g=w.o.y-p*w.o.x,b=-(m-g)/(d-p)),b>=l.x&&(y+=1),y===2))break;return y},getBoundingRect:function(l,c){var d=this.getCoords(l,c);return n.makeBoundingBoxFromPoints(d)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(l){return Math.abs(l)<this.minScaleLimit?l<0?-this.minScaleLimit:this.minScaleLimit:l===0?1e-4:l},scale:function(l){return this._set("scaleX",l),this._set("scaleY",l),this.setCoords()},scaleToWidth:function(l,c){var d=this.getBoundingRect(c).width/this.getScaledWidth();return this.scale(l/this.width/d)},scaleToHeight:function(l,c){var d=this.getBoundingRect(c).height/this.getScaledHeight();return this.scale(l/this.height/d)},calcLineCoords:function(){var l=this.getViewportTransform(),c=this.padding,d=u(this.angle),p=n.cos(d),m=n.sin(d),g=p*c,b=m*c,y=g+b,w=g-b,x=this.calcACoords(),C={tl:i(x.tl,l),tr:i(x.tr,l),bl:i(x.bl,l),br:i(x.br,l)};return c&&(C.tl.x-=w,C.tl.y-=y,C.tr.x+=y,C.tr.y-=w,C.bl.x-=y,C.bl.y+=w,C.br.x+=w,C.br.y+=y),C},calcOCoords:function(){var l=this._calcRotateMatrix(),c=this._calcTranslateMatrix(),d=this.getViewportTransform(),p=o(d,c),m=o(p,l),m=o(m,[1/d[0],0,0,1/d[3],0,0]),g=this._calculateCurrentDimensions(),b={};return this.forEachControl(function(y,w,x){b[w]=y.positionHandler(g,m,x)}),b},calcACoords:function(){var l=this._calcRotateMatrix(),c=this._calcTranslateMatrix(),d=o(c,l),p=this._getTransformedDimensions(),m=p.x/2,g=p.y/2;return{tl:i({x:-m,y:-g},d),tr:i({x:m,y:-g},d),bl:i({x:-m,y:g},d),br:i({x:m,y:g},d)}},setCoords:function(l){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),l?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return n.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var l=this.getCenterPoint();return[1,0,0,1,l.x,l.y]},transformMatrixKey:function(l){var c="_",d="";return!l&&this.group&&(d=this.group.transformMatrixKey(l)+c),d+this.top+c+this.left+c+this.scaleX+c+this.scaleY+c+this.skewX+c+this.skewY+c+this.angle+c+this.originX+c+this.originY+c+this.width+c+this.height+c+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(l){var c=this.calcOwnMatrix();if(l||!this.group)return c;var d=this.transformMatrixKey(l),p=this.matrixCache||(this.matrixCache={});return p.key===d?p.value:(this.group&&(c=o(this.group.calcTransformMatrix(!1),c)),p.key=d,p.value=c,c)},calcOwnMatrix:function(){var l=this.transformMatrixKey(!0),c=this.ownMatrixCache||(this.ownMatrixCache={});if(c.key===l)return c.value;var d=this._calcTranslateMatrix(),p={angle:this.angle,translateX:d[4],translateY:d[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return c.key=l,c.value=n.composeMatrix(p),c.value},_getNonTransformedDimensions:function(){var l=this.strokeWidth,c=this.width+l,d=this.height+l;return{x:c,y:d}},_getTransformedDimensions:function(l,c){typeof l>"u"&&(l=this.skewX),typeof c>"u"&&(c=this.skewY);var d,p,m,g=l===0&&c===0;if(this.strokeUniform?(p=this.width,m=this.height):(d=this._getNonTransformedDimensions(),p=d.x,m=d.y),g)return this._finalizeDimensions(p*this.scaleX,m*this.scaleY);var b=n.sizeAfterTransform(p,m,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:l,skewY:c});return this._finalizeDimensions(b.x,b.y)},_finalizeDimensions:function(l,c){return this.strokeUniform?{x:l+this.strokeWidth,y:c+this.strokeWidth}:{x:l,y:c}},_calculateCurrentDimensions:function(){var l=this.getViewportTransform(),c=this._getTransformedDimensions(),d=i(c,l,!0);return d.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(h){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,h):this.canvas&&this.canvas.sendBackwards(this,h),this},bringForward:function(h){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,h):this.canvas&&this.canvas.bringForward(this,h),this},moveTo:function(h){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,h):this.canvas&&this.canvas.moveTo(this,h),this}}),function(){function h(u,o){if(o){if(o.toLive)return u+": url(#SVGID_"+o.id+"); ";var i=new t.Color(o),l=u+": "+i.toRgb()+"; ",c=i.getAlpha();return c!==1&&(l+=u+"-opacity: "+c.toString()+"; "),l}else return u+": none; "}var n=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(u){var o=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",l=this.strokeDashArray?this.strokeDashArray.join(" "):"none",c=this.strokeDashOffset?this.strokeDashOffset:"0",d=this.strokeLineCap?this.strokeLineCap:"butt",p=this.strokeLineJoin?this.strokeLineJoin:"miter",m=this.strokeMiterLimit?this.strokeMiterLimit:"4",g=typeof this.opacity<"u"?this.opacity:"1",b=this.visible?"":" visibility: hidden;",y=u?"":this.getSvgFilter(),w=h("fill",this.fill),x=h("stroke",this.stroke);return[x,"stroke-width: ",i,"; ","stroke-dasharray: ",l,"; ","stroke-linecap: ",d,"; ","stroke-dashoffset: ",c,"; ","stroke-linejoin: ",p,"; ","stroke-miterlimit: ",m,"; ",w,"fill-rule: ",o,"; ","opacity: ",g,";",y,b].join("")},getSvgSpanStyles:function(u,o){var i="; ",c=u.fontFamily?"font-family: "+(u.fontFamily.indexOf("'")===-1&&u.fontFamily.indexOf('"')===-1?"'"+u.fontFamily+"'":u.fontFamily)+i:"",l=u.strokeWidth?"stroke-width: "+u.strokeWidth+i:"",c=c,d=u.fontSize?"font-size: "+u.fontSize+"px"+i:"",p=u.fontStyle?"font-style: "+u.fontStyle+i:"",m=u.fontWeight?"font-weight: "+u.fontWeight+i:"",g=u.fill?h("fill",u.fill):"",b=u.stroke?h("stroke",u.stroke):"",y=this.getSvgTextDecoration(u),w=u.deltaY?"baseline-shift: "+-u.deltaY+"; ":"";return y&&(y="text-decoration: "+y+i),[b,l,c,d,p,m,y,g,w,o?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(u){return["overline","underline","line-through"].filter(function(o){return u[o.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(u,o){var i=u?this.calcTransformMatrix():this.calcOwnMatrix(),l='transform="'+t.util.matrixToSVG(i);return l+(o||"")+'" '},_setSVGBg:function(u){if(this.backgroundColor){var o=t.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',n(-this.width/2,o),'" y="',n(-this.height/2,o),'" width="',n(this.width,o),'" height="',n(this.height,o),`"></rect>
`)}},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(u),{reviver:u})},toClipPathSVG:function(u){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(u),{reviver:u})},_createBaseClipPathSVGMarkup:function(u,o){o=o||{};var i=o.reviver,l=o.additionalTransform||"",c=[this.getSvgTransform(!0,l),this.getSvgCommons()].join(""),d=u.indexOf("COMMON_PARTS");return u[d]=c,i?i(u.join("")):u.join("")},_createBaseSVGMarkup:function(u,o){o=o||{};var i=o.noStyle,l=o.reviver,c=i?"":'style="'+this.getSvgStyles()+'" ',d=o.withShadow?'style="'+this.getSvgFilter()+'" ':"",p=this.clipPath,m=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=p&&p.absolutePositioned,b=this.stroke,y=this.fill,w=this.shadow,x,C=[],S,E=u.indexOf("COMMON_PARTS"),A=o.additionalTransform;return p&&(p.clipPathId="CLIPPATH_"+t.Object.__uid++,S='<clipPath id="'+p.clipPathId+`" >
`+p.toClipPathSVG(l)+`</clipPath>
`),g&&C.push("<g ",d,this.getSvgCommons(),` >
`),C.push("<g ",this.getSvgTransform(!1),g?"":d+this.getSvgCommons(),` >
`),x=[c,m,i?"":this.addPaintOrder()," ",A?'transform="'+A+'" ':""].join(""),u[E]=x,y&&y.toLive&&C.push(y.toSVG(this)),b&&b.toLive&&C.push(b.toSVG(this)),w&&C.push(w.toSVG(this)),p&&C.push(S),C.push(u.join("")),C.push(`</g>
`),g&&C.push(`</g>
`),l?l(C.join("")):C.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var h=t.util.object.extend,n="stateProperties";function u(i,l,c){var d={},p=!0;c.forEach(function(m){d[m]=i[m]}),h(i[l],d,p)}function o(i,l,c){if(i===l)return!0;if(Array.isArray(i)){if(!Array.isArray(l)||i.length!==l.length)return!1;for(var d=0,p=i.length;d<p;d++)if(!o(i[d],l[d]))return!1;return!0}else if(i&&typeof i=="object"){var m=Object.keys(i),g;if(!l||typeof l!="object"||!c&&m.length!==Object.keys(l).length)return!1;for(var d=0,p=m.length;d<p;d++)if(g=m[d],!(g==="canvas"||g==="group")&&!o(i[g],l[g]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(i){i=i||n;var l="_"+i;return Object.keys(this[l]).length<this[i].length?!0:!o(this[l],this,!0)},saveState:function(i){var l=i&&i.propertySet||n,c="_"+l;return this[c]?(u(this,c,this[l]),i&&i.stateProperties&&u(this,c,i.stateProperties),this):this.setupState(i)},setupState:function(i){i=i||{};var l=i.propertySet||n;return i.propertySet=l,this["_"+l]={},this.saveState(i),this}})}(),function(){var h=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_findTargetCorner:function(n,u){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var o=n.x,i=n.y,l,c,d=Object.keys(this.oCoords),p=d.length-1,m;for(this.__corner=0;p>=0;p--)if(m=d[p],!!this.isControlVisible(m)&&(c=this._getImageLines(u?this.oCoords[m].touchCorner:this.oCoords[m].corner),l=this._findCrossPoints({x:o,y:i},c),l!==0&&l%2===1))return this.__corner=m,m;return!1},forEachControl:function(n){for(var u in this.controls)n(this.controls[u],u,this)},_setCornerCoords:function(){var n=this.oCoords;for(var u in n){var o=this.controls[u];n[u].corner=o.calcCornerCoords(this.angle,this.cornerSize,n[u].x,n[u].y,!1),n[u].touchCorner=o.calcCornerCoords(this.angle,this.touchCornerSize,n[u].x,n[u].y,!0)}},drawSelectionBackground:function(n){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;n.save();var u=this.getCenterPoint(),o=this._calculateCurrentDimensions(),i=this.canvas.viewportTransform;return n.translate(u.x,u.y),n.scale(1/i[0],1/i[3]),n.rotate(h(this.angle)),n.fillStyle=this.selectionBackgroundColor,n.fillRect(-o.x/2,-o.y/2,o.x,o.y),n.restore(),this},drawBorders:function(n,u){u=u||{};var o=this._calculateCurrentDimensions(),i=this.borderScaleFactor,l=o.x+i,c=o.y+i,d=typeof u.hasControls<"u"?u.hasControls:this.hasControls,p=!1;return n.save(),n.strokeStyle=u.borderColor||this.borderColor,this._setLineDash(n,u.borderDashArray||this.borderDashArray),n.strokeRect(-l/2,-c/2,l,c),d&&(n.beginPath(),this.forEachControl(function(m,g,b){m.withConnection&&m.getVisibility(b,g)&&(p=!0,n.moveTo(m.x*l,m.y*c),n.lineTo(m.x*l+m.offsetX,m.y*c+m.offsetY))}),p&&n.stroke()),n.restore(),this},drawBordersInGroup:function(n,u,o){o=o||{};var i=t.util.sizeAfterTransform(this.width,this.height,u),l=this.strokeWidth,c=this.strokeUniform,d=this.borderScaleFactor,p=i.x+l*(c?this.canvas.getZoom():u.scaleX)+d,m=i.y+l*(c?this.canvas.getZoom():u.scaleY)+d;return n.save(),this._setLineDash(n,o.borderDashArray||this.borderDashArray),n.strokeStyle=o.borderColor||this.borderColor,n.strokeRect(-p/2,-m/2,p,m),n.restore(),this},drawControls:function(n,u){u=u||{},n.save();var o=this.canvas.getRetinaScaling(),i,l;return n.setTransform(o,0,0,o,0,0),n.strokeStyle=n.fillStyle=u.cornerColor||this.cornerColor,this.transparentCorners||(n.strokeStyle=u.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(n,u.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(i=this.group.calcTransformMatrix()),this.forEachControl(function(c,d,p){l=p.oCoords[d],c.getVisibility(p,d)&&(i&&(l=t.util.transformPoint(l,i)),c.render(n,l.x,l.y,u,p))}),n.restore(),this},isControlVisible:function(n){return this.controls[n]&&this.controls[n].getVisibility(this,n)},setControlVisible:function(n,u){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[n]=u,this},setControlsVisibility:function(n){n||(n={});for(var u in n)this.setControlVisible(u,n[u]);return this},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(h,n){n=n||{};var u=function(){},o=n.onComplete||u,i=n.onChange||u,l=this;return t.util.animate({target:this,startValue:h.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(c){h.set("left",c),l.requestRenderAll(),i()},onComplete:function(){h.setCoords(),o()}})},fxCenterObjectV:function(h,n){n=n||{};var u=function(){},o=n.onComplete||u,i=n.onChange||u,l=this;return t.util.animate({target:this,startValue:h.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(c){h.set("top",c),l.requestRenderAll(),i()},onComplete:function(){h.setCoords(),o()}})},fxRemove:function(h,n){n=n||{};var u=function(){},o=n.onComplete||u,i=n.onChange||u,l=this;return t.util.animate({target:this,startValue:h.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(c){h.set("opacity",c),l.requestRenderAll(),i()},onComplete:function(){l.remove(h),o()}})}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var h=[],n,u,o=[];for(n in arguments[0])h.push(n);for(var i=0,l=h.length;i<l;i++)n=h[i],u=i!==l-1,o.push(this._animate(n,arguments[0][n],arguments[1],u));return o}else return this._animate.apply(this,arguments)},_animate:function(h,n,u,o){var i=this,l;n=n.toString(),u?u=t.util.object.clone(u):u={},~h.indexOf(".")&&(l=h.split("."));var c=i.colorProperties.indexOf(h)>-1||l&&i.colorProperties.indexOf(l[1])>-1,d=l?this.get(l[0])[l[1]]:this.get(h);"from"in u||(u.from=d),c||(~n.indexOf("=")?n=d+parseFloat(n.replace("=","")):n=parseFloat(n));var p={target:this,startValue:u.from,endValue:n,byValue:u.by,easing:u.easing,duration:u.duration,abort:u.abort&&function(m,g,b){return u.abort.call(i,m,g,b)},onChange:function(m,g,b){l?i[l[0]][l[1]]=m:i.set(h,m),!o&&u.onChange&&u.onChange(m,g,b)},onComplete:function(m,g,b){o||(i.setCoords(),u.onComplete&&u.onComplete(m,g,b))}};return c?t.util.animateColor(p.startValue,p.endValue,p.duration,p):t.util.animate(p)}}),function(h){var n=h.fabric||(h.fabric={}),u=n.util.object.extend,o=n.util.object.clone,i={x1:1,x2:1,y1:1,y2:1};if(n.Line){n.warn("fabric.Line is already defined");return}n.Line=n.util.createClass(n.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:n.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(c,d){c||(c=[0,0,0,0]),this.callSuper("initialize",d),this.set("x1",c[0]),this.set("y1",c[1]),this.set("x2",c[2]),this.set("y2",c[3]),this._setWidthHeight(d)},_setWidthHeight:function(c){c||(c={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in c?c.left:this._getLeftToOriginX(),this.top="top"in c?c.top:this._getTopToOriginY()},_set:function(c,d){return this.callSuper("_set",c,d),typeof i[c]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:l({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:l({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(c){c.beginPath();var d=this.calcLinePoints();c.moveTo(d.x1,d.y1),c.lineTo(d.x2,d.y2),c.lineWidth=this.strokeWidth;var p=c.strokeStyle;c.strokeStyle=this.stroke||c.fillStyle,this.stroke&&this._renderStroke(c),c.strokeStyle=p},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(c){return u(this.callSuper("toObject",c),this.calcLinePoints())},_getNonTransformedDimensions:function(){var c=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(c.y-=this.strokeWidth),this.height===0&&(c.x-=this.strokeWidth)),c},calcLinePoints:function(){var c=this.x1<=this.x2?-1:1,d=this.y1<=this.y2?-1:1,p=c*this.width*.5,m=d*this.height*.5,g=c*this.width*-.5,b=d*this.height*-.5;return{x1:p,x2:g,y1:m,y2:b}},_toSVG:function(){var c=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,`" />
`]}}),n.Line.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),n.Line.fromElement=function(c,d,p){p=p||{};var m=n.parseAttributes(c,n.Line.ATTRIBUTE_NAMES),g=[m.x1||0,m.y1||0,m.x2||0,m.y2||0];d(new n.Line(g,u(m,p)))},n.Line.fromObject=function(c,d){function p(g){delete g.points,d&&d(g)}var m=o(c,!0);m.points=[c.x1,c.y1,c.x2,c.y2],n.Object._fromObject("Line",m,p,"points")};function l(c,d){var p=c.origin,m=c.axis1,g=c.axis2,b=c.dimension,y=d.nearest,w=d.center,x=d.farthest;return function(){switch(this.get(p)){case y:return Math.min(this.get(m),this.get(g));case w:return Math.min(this.get(m),this.get(g))+.5*this.get(b);case x:return Math.max(this.get(m),this.get(g))}}}}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.util.degreesToRadians;if(n.Circle){n.warn("fabric.Circle is already defined.");return}n.Circle=n.util.createClass(n.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:n.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(i,l){return this.callSuper("_set",i,l),i==="radius"&&this.setRadius(l),this},toObject:function(i){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(i))},_toSVG:function(){var i,l=0,c=0,d=(this.endAngle-this.startAngle)%360;if(d===0)i=["<circle ","COMMON_PARTS",'cx="'+l+'" cy="'+c+'" ','r="',this.radius,`" />
`];else{var p=u(this.startAngle),m=u(this.endAngle),g=this.radius,b=n.util.cos(p)*g,y=n.util.sin(p)*g,w=n.util.cos(m)*g,x=n.util.sin(m)*g,C=d>180?"1":"0";i=['<path d="M '+b+" "+y," A "+g+" "+g," 0 ",+C+" 1"," "+w+" "+x,'" ',"COMMON_PARTS",` />
`]}return i},_render:function(i){i.beginPath(),i.arc(0,0,this.radius,u(this.startAngle),u(this.endAngle),!1),this._renderPaintInOrder(i)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(i){return this.radius=i,this.set("width",i*2).set("height",i*2)}}),n.Circle.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),n.Circle.fromElement=function(i,l){var c=n.parseAttributes(i,n.Circle.ATTRIBUTE_NAMES);if(!o(c))throw new Error("value of `r` attribute is required and can not be negative");c.left=(c.left||0)-c.radius,c.top=(c.top||0)-c.radius,l(new n.Circle(c))};function o(i){return"radius"in i&&i.radius>=0}n.Circle.fromObject=function(i,l){n.Object._fromObject("Circle",i,l)}}(e),function(h){var n=h.fabric||(h.fabric={});if(n.Triangle){n.warn("fabric.Triangle is already defined");return}n.Triangle=n.util.createClass(n.Object,{type:"triangle",width:100,height:100,_render:function(u){var o=this.width/2,i=this.height/2;u.beginPath(),u.moveTo(-o,i),u.lineTo(0,-i),u.lineTo(o,i),u.closePath(),this._renderPaintInOrder(u)},_toSVG:function(){var u=this.width/2,o=this.height/2,i=[-u+" "+o,"0 "+-o,u+" "+o].join(",");return["<polygon ","COMMON_PARTS",'points="',i,'" />']}}),n.Triangle.fromObject=function(u,o){return n.Object._fromObject("Triangle",u,o)}}(e),function(h){var n=h.fabric||(h.fabric={}),u=Math.PI*2;if(n.Ellipse){n.warn("fabric.Ellipse is already defined.");return}n.Ellipse=n.util.createClass(n.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(o){this.callSuper("initialize",o),this.set("rx",o&&o.rx||0),this.set("ry",o&&o.ry||0)},_set:function(o,i){switch(this.callSuper("_set",o,i),o){case"rx":this.rx=i,this.set("width",i*2);break;case"ry":this.ry=i,this.set("height",i*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(o){return this.callSuper("toObject",["rx","ry"].concat(o))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(o){o.beginPath(),o.save(),o.transform(1,0,0,this.ry/this.rx,0,0),o.arc(0,0,this.rx,0,u,!1),o.restore(),this._renderPaintInOrder(o)}}),n.Ellipse.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),n.Ellipse.fromElement=function(o,i){var l=n.parseAttributes(o,n.Ellipse.ATTRIBUTE_NAMES);l.left=(l.left||0)-l.rx,l.top=(l.top||0)-l.ry,i(new n.Ellipse(l))},n.Ellipse.fromObject=function(o,i){n.Object._fromObject("Ellipse",o,i)}}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.util.object.extend;if(n.Rect){n.warn("fabric.Rect is already defined");return}n.Rect=n.util.createClass(n.Object,{stateProperties:n.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(o){this.callSuper("initialize",o),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(o){var i=this.rx?Math.min(this.rx,this.width/2):0,l=this.ry?Math.min(this.ry,this.height/2):0,c=this.width,d=this.height,p=-this.width/2,m=-this.height/2,g=i!==0||l!==0,b=1-.5522847498;o.beginPath(),o.moveTo(p+i,m),o.lineTo(p+c-i,m),g&&o.bezierCurveTo(p+c-b*i,m,p+c,m+b*l,p+c,m+l),o.lineTo(p+c,m+d-l),g&&o.bezierCurveTo(p+c,m+d-b*l,p+c-b*i,m+d,p+c-i,m+d),o.lineTo(p+i,m+d),g&&o.bezierCurveTo(p+b*i,m+d,p,m+d-b*l,p,m+d-l),o.lineTo(p,m+l),g&&o.bezierCurveTo(p,m+b*l,p+b*i,m,p+i,m),o.closePath(),this._renderPaintInOrder(o)},toObject:function(o){return this.callSuper("toObject",["rx","ry"].concat(o))},_toSVG:function(){var o=-this.width/2,i=-this.height/2;return["<rect ","COMMON_PARTS",'x="',o,'" y="',i,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),n.Rect.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),n.Rect.fromElement=function(o,i,l){if(!o)return i(null);l=l||{};var c=n.parseAttributes(o,n.Rect.ATTRIBUTE_NAMES);c.left=c.left||0,c.top=c.top||0,c.height=c.height||0,c.width=c.width||0;var d=new n.Rect(u(l?n.util.object.clone(l):{},c));d.visible=d.visible&&d.width>0&&d.height>0,i(d)},n.Rect.fromObject=function(o,i){return n.Object._fromObject("Rect",o,i)}}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.util.object.extend,o=n.util.array.min,i=n.util.array.max,l=n.util.toFixed,c=n.util.projectStrokeOnPoints;if(n.Polyline){n.warn("fabric.Polyline is already defined");return}n.Polyline=n.util.createClass(n.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:n.Object.prototype.cacheProperties.concat("points"),initialize:function(d,p){p=p||{},this.points=d||[],this.callSuper("initialize",p),this._setPositionDimensions(p)},_projectStrokeOnPoints:function(){return c(this.points,this,!0)},_setPositionDimensions:function(d){var p=this._calcDimensions(d),m,g=this.exactBoundingBox?this.strokeWidth:0;this.width=p.width-g,this.height=p.height-g,d.fromSVG||(m=this.translateToGivenOrigin({x:p.left-this.strokeWidth/2+g/2,y:p.top-this.strokeWidth/2+g/2},"left","top",this.originX,this.originY)),typeof d.left>"u"&&(this.left=d.fromSVG?p.left:m.x),typeof d.top>"u"&&(this.top=d.fromSVG?p.top:m.y),this.pathOffset={x:p.left+this.width/2+g/2,y:p.top+this.height/2+g/2}},_calcDimensions:function(){var d=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,p=o(d,"x")||0,m=o(d,"y")||0,g=i(d,"x")||0,b=i(d,"y")||0,y=g-p,w=b-m;return{left:p,top:m,width:y,height:w}},toObject:function(d){return u(this.callSuper("toObject",d),{points:this.points.concat()})},_toSVG:function(){for(var d=[],p=this.pathOffset.x,m=this.pathOffset.y,g=n.Object.NUM_FRACTION_DIGITS,b=0,y=this.points.length;b<y;b++)d.push(l(this.points[b].x-p,g),",",l(this.points[b].y-m,g)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',d.join(""),`" />
`]},commonRender:function(d){var p,m=this.points.length,g=this.pathOffset.x,b=this.pathOffset.y;if(!m||isNaN(this.points[m-1].y))return!1;d.beginPath(),d.moveTo(this.points[0].x-g,this.points[0].y-b);for(var y=0;y<m;y++)p=this.points[y],d.lineTo(p.x-g,p.y-b);return!0},_render:function(d){!this.commonRender(d)||this._renderPaintInOrder(d)},complexity:function(){return this.get("points").length}}),n.Polyline.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polyline.fromElementGenerator=function(d){return function(p,m,g){if(!p)return m(null);g||(g={});var b=n.parsePointsAttribute(p.getAttribute("points")),y=n.parseAttributes(p,n[d].ATTRIBUTE_NAMES);y.fromSVG=!0,m(new n[d](b,u(y,g)))}},n.Polyline.fromElement=n.Polyline.fromElementGenerator("Polyline"),n.Polyline.fromObject=function(d,p){return n.Object._fromObject("Polyline",d,p,"points")}}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.util.projectStrokeOnPoints;if(n.Polygon){n.warn("fabric.Polygon is already defined");return}n.Polygon=n.util.createClass(n.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return u(this.points,this)},_render:function(o){!this.commonRender(o)||(o.closePath(),this._renderPaintInOrder(o))}}),n.Polygon.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polygon.fromElement=n.Polyline.fromElementGenerator("Polygon"),n.Polygon.fromObject=function(o,i){n.Object._fromObject("Polygon",o,i,"points")}}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.util.array.min,o=n.util.array.max,i=n.util.object.extend,l=n.util.object.clone,c=n.util.toFixed;if(n.Path){n.warn("fabric.Path is already defined");return}n.Path=n.util.createClass(n.Object,{type:"path",path:null,cacheProperties:n.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:n.Object.prototype.stateProperties.concat("path"),initialize:function(d,p){p=l(p||{}),delete p.path,this.callSuper("initialize",p),this._setPath(d||[],p)},_setPath:function(d,p){this.path=n.util.makePathSimpler(Array.isArray(d)?d:n.util.parsePath(d)),n.Polyline.prototype._setPositionDimensions.call(this,p||{})},_renderPathCommands:function(d){var p,m=0,g=0,b=0,y=0,w=0,x=0,C=-this.pathOffset.x,S=-this.pathOffset.y;d.beginPath();for(var E=0,A=this.path.length;E<A;++E)switch(p=this.path[E],p[0]){case"L":b=p[1],y=p[2],d.lineTo(b+C,y+S);break;case"M":b=p[1],y=p[2],m=b,g=y,d.moveTo(b+C,y+S);break;case"C":b=p[5],y=p[6],w=p[3],x=p[4],d.bezierCurveTo(p[1]+C,p[2]+S,w+C,x+S,b+C,y+S);break;case"Q":d.quadraticCurveTo(p[1]+C,p[2]+S,p[3]+C,p[4]+S),b=p[3],y=p[4],w=p[1],x=p[2];break;case"z":case"Z":b=m,y=g,d.closePath();break}},_render:function(d){this._renderPathCommands(d),this._renderPaintInOrder(d)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(d){return i(this.callSuper("toObject",d),{path:this.path.map(function(p){return p.slice()})})},toDatalessObject:function(d){var p=this.toObject(["sourcePath"].concat(d));return p.sourcePath&&delete p.path,p},_toSVG:function(){var d=n.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',d,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var d=n.Object.NUM_FRACTION_DIGITS;return" translate("+c(-this.pathOffset.x,d)+", "+c(-this.pathOffset.y,d)+")"},toClipPathSVG:function(d){var p=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:d,additionalTransform:p})},toSVG:function(d){var p=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:d,additionalTransform:p})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var d=[],p=[],m,g=0,b=0,y=0,w=0,x,C=0,S=this.path.length;C<S;++C){switch(m=this.path[C],m[0]){case"L":y=m[1],w=m[2],x=[];break;case"M":y=m[1],w=m[2],g=y,b=w,x=[];break;case"C":x=n.util.getBoundsOfCurve(y,w,m[1],m[2],m[3],m[4],m[5],m[6]),y=m[5],w=m[6];break;case"Q":x=n.util.getBoundsOfCurve(y,w,m[1],m[2],m[1],m[2],m[3],m[4]),y=m[3],w=m[4];break;case"z":case"Z":y=g,w=b;break}x.forEach(function(F){d.push(F.x),p.push(F.y)}),d.push(y),p.push(w)}var E=u(d)||0,A=u(p)||0,D=o(d)||0,M=o(p)||0,B=D-E,O=M-A;return{left:E,top:A,width:B,height:O}}}),n.Path.fromObject=function(d,p){if(typeof d.sourcePath=="string"){var m=d.sourcePath;n.loadSVGFromURL(m,function(g){var b=g[0];b.setOptions(d),d.clipPath?n.util.enlivenObjects([d.clipPath],function(y){b.clipPath=y[0],p&&p(b)}):p&&p(b)})}else n.Object._fromObject("Path",d,p,"path")},n.Path.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(["d"]),n.Path.fromElement=function(d,p,m){var g=n.parseAttributes(d,n.Path.ATTRIBUTE_NAMES);g.fromSVG=!0,p(new n.Path(g.d,i(g,m)))}}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.util.array.min,o=n.util.array.max;n.Group||(n.Group=n.util.createClass(n.Object,n.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(i,l,c){l=l||{},this._objects=[],c&&this.callSuper("initialize",l),this._objects=i||[];for(var d=this._objects.length;d--;)this._objects[d].group=this;if(c)this._updateObjectsACoords();else{var p=l&&l.centerPoint;l.originX!==void 0&&(this.originX=l.originX),l.originY!==void 0&&(this.originY=l.originY),p||this._calcBounds(),this._updateObjectsCoords(p),delete l.centerPoint,this.callSuper("initialize",l)}this.setCoords()},_updateObjectsACoords:function(){for(var i=!0,l=this._objects.length;l--;)this._objects[l].setCoords(i)},_updateObjectsCoords:function(l){for(var l=l||this.getCenterPoint(),c=this._objects.length;c--;)this._updateObjectCoords(this._objects[c],l)},_updateObjectCoords:function(i,l){var c=i.left,d=i.top,p=!0;i.set({left:c-l.x,top:d-l.y}),i.group=this,i.setCoords(p)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(i){var l=!!this.group;return this._restoreObjectsState(),n.util.resetObjectTransform(this),i&&(l&&n.util.removeTransformFromObject(i,this.group.calcTransformMatrix()),this._objects.push(i),i.group=this,i._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,l?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(i){return this._restoreObjectsState(),n.util.resetObjectTransform(this),this.remove(i),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(i){this.dirty=!0,i.group=this,i._set("canvas",this.canvas)},_onObjectRemoved:function(i){this.dirty=!0,delete i.group},_set:function(i,l){var c=this._objects.length;if(this.useSetOnGroup)for(;c--;)this._objects[c].setOnGroup(i,l);if(i==="canvas")for(;c--;)this._objects[c]._set(i,l);n.Object.prototype._set.call(this,i,l)},toObject:function(i){var l=this.includeDefaultValues,c=this._objects.filter(function(p){return!p.excludeFromExport}).map(function(p){var m=p.includeDefaultValues;p.includeDefaultValues=l;var g=p.toObject(i);return p.includeDefaultValues=m,g}),d=n.Object.prototype.toObject.call(this,i);return d.objects=c,d},toDatalessObject:function(i){var l,c=this.sourcePath;if(c)l=c;else{var d=this.includeDefaultValues;l=this._objects.map(function(m){var g=m.includeDefaultValues;m.includeDefaultValues=d;var b=m.toDatalessObject(i);return m.includeDefaultValues=g,b})}var p=n.Object.prototype.toDatalessObject.call(this,i);return p.objects=l,p},render:function(i){this._transformDone=!0,this.callSuper("render",i),this._transformDone=!1},shouldCache:function(){var i=n.Object.prototype.shouldCache.call(this);if(i){for(var l=0,c=this._objects.length;l<c;l++)if(this._objects[l].willDrawShadow())return this.ownCaching=!1,!1}return i},willDrawShadow:function(){if(n.Object.prototype.willDrawShadow.call(this))return!0;for(var i=0,l=this._objects.length;i<l;i++)if(this._objects[i].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(i){for(var l=0,c=this._objects.length;l<c;l++)this._objects[l].render(i);this._drawClipPath(i,this.clipPath)},isCacheDirty:function(i){if(this.callSuper("isCacheDirty",i))return!0;if(!this.statefullCache)return!1;for(var l=0,c=this._objects.length;l<c;l++)if(this._objects[l].isCacheDirty(!0)){if(this._cacheCanvas){var d=this.cacheWidth/this.zoomX,p=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-d/2,-p/2,d,p)}return!0}return!1},_restoreObjectsState:function(){var i=this.calcOwnMatrix();return this._objects.forEach(function(l){n.util.addTransformToObject(l,i),delete l.group,l.setCoords()}),this},destroy:function(){return this._objects.forEach(function(i){i.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(i){i.dispose&&i.dispose()}),this._objects=[]},toActiveSelection:function(){if(!!this.canvas){var i=this._objects,l=this.canvas;this._objects=[];var c=this.toObject();delete c.objects;var d=new n.ActiveSelection([]);return d.set(c),d.type="activeSelection",l.remove(this),i.forEach(function(p){p.group=d,p.dirty=!0,l.add(p)}),d.canvas=l,d._objects=i,l._activeObject=d,d.setCoords(),d}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var i=!0;return this.forEachObject(function(l){l.setCoords(i)}),this},_calcBounds:function(i){for(var l=[],c=[],d,p,m,g=["tr","br","bl","tl"],b=0,y=this._objects.length,w,x=g.length;b<y;++b){for(d=this._objects[b],m=d.calcACoords(),w=0;w<x;w++)p=g[w],l.push(m[p].x),c.push(m[p].y);d.aCoords=m}this._getBounds(l,c,i)},_getBounds:function(i,l,c){var d=new n.Point(u(i),u(l)),p=new n.Point(o(i),o(l)),m=d.y||0,g=d.x||0,b=p.x-d.x||0,y=p.y-d.y||0;this.width=b,this.height=y,c||this.setPositionByOrigin({x:g,y:m},"left","top")},_toSVG:function(i){for(var l=["<g ","COMMON_PARTS",` >
`],c=0,d=this._objects.length;c<d;c++)l.push("		",this._objects[c].toSVG(i));return l.push(`</g>
`),l},getSvgStyles:function(){var i=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",l=this.visible?"":" visibility: hidden;";return[i,this.getSvgFilter(),l].join("")},toClipPathSVG:function(i){for(var l=[],c=0,d=this._objects.length;c<d;c++)l.push("	",this._objects[c].toClipPathSVG(i));return this._createBaseClipPathSVGMarkup(l,{reviver:i})}}),n.Group.fromObject=function(i,l){var c=i.objects,d=n.util.object.clone(i,!0);if(delete d.objects,typeof c=="string"){n.loadSVGFromURL(c,function(p){var m=n.util.groupSVGElements(p,i,c),g=d.clipPath;delete d.clipPath,m.set(d),g?n.util.enlivenObjects([g],function(b){m.clipPath=b[0],l&&l(m)}):l&&l(m)});return}n.util.enlivenObjects(c,function(p){n.util.enlivenObjectEnlivables(i,d,function(){l&&l(new n.Group(p,d,!0))})})})}(e),function(h){var n=h.fabric||(h.fabric={});n.ActiveSelection||(n.ActiveSelection=n.util.createClass(n.Group,{type:"activeSelection",initialize:function(u,o){o=o||{},this._objects=u||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;o.originX&&(this.originX=o.originX),o.originY&&(this.originY=o.originY),this._calcBounds(),this._updateObjectsCoords(),n.Object.prototype.initialize.call(this,o),this.setCoords()},toGroup:function(){var u=this._objects.concat();this._objects=[];var o=n.Object.prototype.toObject.call(this),i=new n.Group([]);if(delete o.type,i.set(o),u.forEach(function(c){c.canvas.remove(c),c.group=i}),i._objects=u,!this.canvas)return i;var l=this.canvas;return l.add(i),l._activeObject=i,i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(u,o,i){u.save(),u.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",u,o),i=i||{},typeof i.hasControls>"u"&&(i.hasControls=!1),i.forActiveSelection=!0;for(var l=0,c=this._objects.length;l<c;l++)this._objects[l]._renderControls(u,i);u.restore()}}),n.ActiveSelection.fromObject=function(u,o){n.util.enlivenObjects(u.objects,function(i){delete u.objects,o&&o(new n.ActiveSelection(i,u,!0))})})}(e),function(h){var n=t.util.object.extend;if(h.fabric||(h.fabric={}),h.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:t.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(u,o){o||(o={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",o),this._initElement(u,o)},getElement:function(){return this._element||{}},setElement:function(u,o){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=u,this._originalElement=u,this._initConfig(o),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(u){var o=t.filterBackend;o&&o.evictCachesForKey&&o.evictCachesForKey(u)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(u){t.util.cleanUpJsdomNode(this[u]),this[u]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var u=this.getElement();return{width:u.naturalWidth||u.width,height:u.naturalHeight||u.height}},_stroke:function(u){if(!(!this.stroke||this.strokeWidth===0)){var o=this.width/2,i=this.height/2;u.beginPath(),u.moveTo(-o,-i),u.lineTo(o,-i),u.lineTo(o,i),u.lineTo(-o,i),u.lineTo(-o,-i),u.closePath()}},toObject:function(u){var o=[];this.filters.forEach(function(l){l&&o.push(l.toObject())});var i=n(this.callSuper("toObject",["cropX","cropY"].concat(u)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:o});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var u=[],o=[],i,l=this._element,c=-this.width/2,d=-this.height/2,p="",m="";if(!l)return[];if(this.hasCrop()){var g=t.Object.__uid++;u.push('<clipPath id="imageCrop_'+g+`">
`,'	<rect x="'+c+'" y="'+d+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),p=' clip-path="url(#imageCrop_'+g+')" '}if(this.imageSmoothing||(m='" image-rendering="optimizeSpeed'),o.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',c-this.cropX,'" y="',d-this.cropY,'" width="',l.width||l.naturalWidth,'" height="',l.height||l.height,m,'"',p,`></image>
`),this.stroke||this.strokeDashArray){var b=this.fill;this.fill=null,i=["	<rect ",'x="',c,'" y="',d,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=b}return this.paintFirst!=="fill"?u=u.concat(i,o):u=u.concat(o,i),u},getSrc:function(u){var o=u?this._element:this._originalElement;return o?o.toDataURL?o.toDataURL():this.srcFromAttribute?o.getAttribute("src"):o.src:this.src||""},setSrc:function(u,o,i){return t.util.loadImage(u,function(l,c){this.setElement(l,i),this._setWidthHeight(),o&&o(this,c)},this,i&&i.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var u=this.resizeFilter,o=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),l=i.scaleX,c=i.scaleY,d=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!u||l>o&&c>o){this._element=d,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=l,this._lastScaleY=c;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var p=t.util.createCanvasElement(),m=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,g=d.width,b=d.height;p.width=g,p.height=b,this._element=p,this._lastScaleX=u.scaleX=l,this._lastScaleY=u.scaleY=c,t.filterBackend.applyFilters([u],d,g,b,this._element,m),this._filterScalingX=p.width/this._originalElement.width,this._filterScalingY=p.height/this._originalElement.height},applyFilters:function(u){if(u=u||this.filters||[],u=u.filter(function(d){return d&&!d.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),u.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var o=this._originalElement,i=o.naturalWidth||o.width,l=o.naturalHeight||o.height;if(this._element===this._originalElement){var c=t.util.createCanvasElement();c.width=i,c.height=l,this._element=c,this._filteredEl=c}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,l),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(u,this._originalElement,i,l,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(u){t.util.setImageSmoothing(u,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(u),this._renderPaintInOrder(u)},drawCacheOnCanvas:function(u){t.util.setImageSmoothing(u,this.imageSmoothing),t.Object.prototype.drawCacheOnCanvas.call(this,u)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(u){var o=this._element;if(!!o){var i=this._filterScalingX,l=this._filterScalingY,c=this.width,d=this.height,p=Math.min,m=Math.max,g=m(this.cropX,0),b=m(this.cropY,0),y=o.naturalWidth||o.width,w=o.naturalHeight||o.height,x=g*i,C=b*l,S=p(c*i,y-x),E=p(d*l,w-C),A=-c/2,D=-d/2,M=p(c,y/i-g),B=p(d,w/l-b);o&&u.drawImage(o,x,C,S,E,A,D,M,B)}},_needsResize:function(){var u=this.getTotalObjectScaling();return u.scaleX!==this._lastScaleX||u.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(u,o){this.setElement(t.util.getById(u),o),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(u){u||(u={}),this.setOptions(u),this._setWidthHeight(u)},_initFilters:function(u,o){u&&u.length?t.util.enlivenObjects(u,function(i){o&&o(i)},"fabric.Image.filters"):o&&o()},_setWidthHeight:function(u){u||(u={});var o=this.getElement();this.width=u.width||o.naturalWidth||o.width||0,this.height=u.height||o.naturalHeight||o.height||0},parsePreserveAspectRatioAttribute:function(){var u=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),o=this._element.width,i=this._element.height,l=1,c=1,d=0,p=0,m=0,g=0,b,y=this.width,w=this.height,x={width:y,height:w};return u&&(u.alignX!=="none"||u.alignY!=="none")?(u.meetOrSlice==="meet"&&(l=c=t.util.findScaleToFit(this._element,x),b=(y-o*l)/2,u.alignX==="Min"&&(d=-b),u.alignX==="Max"&&(d=b),b=(w-i*c)/2,u.alignY==="Min"&&(p=-b),u.alignY==="Max"&&(p=b)),u.meetOrSlice==="slice"&&(l=c=t.util.findScaleToCover(this._element,x),b=o-y/l,u.alignX==="Mid"&&(m=b/2),u.alignX==="Max"&&(m=b),b=i-w/c,u.alignY==="Mid"&&(g=b/2),u.alignY==="Max"&&(g=b),o=y/l,i=w/c)):(l=y/o,c=w/i),{width:o,height:i,scaleX:l,scaleY:c,offsetLeft:d,offsetTop:p,cropX:m,cropY:g}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(u,o){var i=t.util.object.clone(u);t.util.loadImage(i.src,function(l,c){if(c){o&&o(null,!0);return}t.Image.prototype._initFilters.call(i,i.filters,function(d){i.filters=d||[],t.Image.prototype._initFilters.call(i,[i.resizeFilter],function(p){i.resizeFilter=p[0],t.util.enlivenObjectEnlivables(i,i,function(){var m=new t.Image(l,i);o(m,!1)})})})},null,i.crossOrigin)},t.Image.fromURL=function(u,o,i){t.util.loadImage(u,function(l,c){o&&o(new t.Image(l,i),c)},null,i&&i.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),t.Image.fromElement=function(u,o,i){var l=t.parseAttributes(u,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(l["xlink:href"],o,n(i?t.util.object.clone(i):{},l))}}(e),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var h=this.angle%360;return h>0?Math.round((h-1)/90)*90:Math.round(h/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(h){h=h||{};var n=function(){},u=h.onComplete||n,o=h.onChange||n,i=this;return t.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(l){i.rotate(l),o()},onComplete:function(){i.setCoords(),u()}})}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(h){return h.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(h){return h.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function h(u,o){var i="precision "+o+` float;
void main(){}`,l=u.createShader(u.FRAGMENT_SHADER);return u.shaderSource(l,i),u.compileShader(l),!!u.getShaderParameter(l,u.COMPILE_STATUS)}t.isWebglSupported=function(u){if(t.isLikelyNode)return!1;u=u||t.WebglFilterBackend.prototype.tileSize;var o=document.createElement("canvas"),i=o.getContext("webgl")||o.getContext("experimental-webgl"),l=!1;if(i){t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),l=t.maxTextureSize>=u;for(var c=["highp","mediump","lowp"],d=0;d<3;d++)if(h(i,c[d])){t.webGlPrecision=c[d];break}}return this.isSupported=l,l},t.WebglFilterBackend=n;function n(u){u&&u.tileSize&&(this.tileSize=u.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}n.prototype={tileSize:2048,resources:{},setupGLContext:function(u,o){this.dispose(),this.createWebGLCanvas(u,o),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(u,o)},chooseFastestCopyGLTo2DMethod:function(u,o){var i=typeof window.performance<"u",l;try{new ImageData(1,1),l=!0}catch{l=!1}var c=typeof ArrayBuffer<"u",d=typeof Uint8ClampedArray<"u";if(!!(i&&l&&c&&d)){var p=t.util.createCanvasElement(),m=new ArrayBuffer(u*o*4);if(t.forceGLPutImageData){this.imageBuffer=m,this.copyGLTo2D=v;return}var g={imageBuffer:m,destinationWidth:u,destinationHeight:o,targetCanvas:p},b,y,w;p.width=u,p.height=o,b=window.performance.now(),f.call(g,this.gl,g),y=window.performance.now()-b,b=window.performance.now(),v.call(g,this.gl,g),w=window.performance.now()-b,y>w?(this.imageBuffer=m,this.copyGLTo2D=v):this.copyGLTo2D=f}},createWebGLCanvas:function(u,o){var i=t.util.createCanvasElement();i.width=u,i.height=o;var l={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},c=i.getContext("webgl",l);c||(c=i.getContext("experimental-webgl",l)),c&&(c.clearColor(0,0,0,0),this.canvas=i,this.gl=c)},applyFilters:function(u,o,i,l,c,d){var p=this.gl,m;d&&(m=this.getCachedTexture(d,o));var g={originalWidth:o.width||o.originalWidth,originalHeight:o.height||o.originalHeight,sourceWidth:i,sourceHeight:l,destinationWidth:i,destinationHeight:l,context:p,sourceTexture:this.createTexture(p,i,l,!m&&o),targetTexture:this.createTexture(p,i,l),originalTexture:m||this.createTexture(p,i,l,!m&&o),passes:u.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:c},b=p.createFramebuffer();return p.bindFramebuffer(p.FRAMEBUFFER,b),u.forEach(function(y){y&&y.applyTo(g)}),s(g),this.copyGLTo2D(p,g),p.bindTexture(p.TEXTURE_2D,null),p.deleteTexture(g.sourceTexture),p.deleteTexture(g.targetTexture),p.deleteFramebuffer(b),c.getContext("2d").setTransform(1,0,0,1,0,0),g},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(u,o,i,l){var c=u.createTexture();return u.bindTexture(u.TEXTURE_2D,c),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),l?u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,l):u.texImage2D(u.TEXTURE_2D,0,u.RGBA,o,i,0,u.RGBA,u.UNSIGNED_BYTE,null),c},getCachedTexture:function(u,o){if(this.textureCache[u])return this.textureCache[u];var i=this.createTexture(this.gl,o.width,o.height,o);return this.textureCache[u]=i,i},evictCachesForKey:function(u){this.textureCache[u]&&(this.gl.deleteTexture(this.textureCache[u]),delete this.textureCache[u])},copyGLTo2D:f,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var u=this.gl,o={renderer:"",vendor:""};if(!u)return o;var i=u.getExtension("WEBGL_debug_renderer_info");if(i){var l=u.getParameter(i.UNMASKED_RENDERER_WEBGL),c=u.getParameter(i.UNMASKED_VENDOR_WEBGL);l&&(o.renderer=l.toLowerCase()),c&&(o.vendor=c.toLowerCase())}return this.gpuInfo=o,o}}}();function s(h){var n=h.targetCanvas,u=n.width,o=n.height,i=h.destinationWidth,l=h.destinationHeight;(u!==i||o!==l)&&(n.width=i,n.height=l)}function f(h,n){var u=h.canvas,o=n.targetCanvas,i=o.getContext("2d");i.translate(0,o.height),i.scale(1,-1);var l=u.height-o.height;i.drawImage(u,0,l,o.width,o.height,0,0,o.width,o.height)}function v(h,n){var u=n.targetCanvas,o=u.getContext("2d"),i=n.destinationWidth,l=n.destinationHeight,c=i*l*4,d=new Uint8Array(this.imageBuffer,0,c),p=new Uint8ClampedArray(this.imageBuffer,0,c);h.readPixels(0,0,i,l,h.RGBA,h.UNSIGNED_BYTE,d);var m=new ImageData(p,i,l);o.putImageData(m,0,0)}(function(){var h=function(){};t.Canvas2dFilterBackend=n;function n(){}n.prototype={evictCachesForKey:h,dispose:h,clearWebGLCaches:h,resources:{},applyFilters:function(u,o,i,l,c){var d=c.getContext("2d");d.drawImage(o,0,0,i,l);var p=d.getImageData(0,0,i,l),m=d.getImageData(0,0,i,l),g={sourceWidth:i,sourceHeight:l,imageData:p,originalEl:o,originalImageData:m,canvasEl:c,ctx:d,filterBackend:this};return u.forEach(function(b){b.applyTo(g)}),(g.imageData.width!==i||g.imageData.height!==l)&&(c.width=g.imageData.width,c.height=g.imageData.height),d.putImageData(g.imageData,0,0),g}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(h){h&&this.setOptions(h)},setOptions:function(h){for(var n in h)this[n]=h[n]},createProgram:function(h,n,u){n=n||this.fragmentSource,u=u||this.vertexSource,t.webGlPrecision!=="highp"&&(n=n.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var o=h.createShader(h.VERTEX_SHADER);if(h.shaderSource(o,u),h.compileShader(o),!h.getShaderParameter(o,h.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+h.getShaderInfoLog(o));var i=h.createShader(h.FRAGMENT_SHADER);if(h.shaderSource(i,n),h.compileShader(i),!h.getShaderParameter(i,h.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+h.getShaderInfoLog(i));var l=h.createProgram();if(h.attachShader(l,o),h.attachShader(l,i),h.linkProgram(l),!h.getProgramParameter(l,h.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+h.getProgramInfoLog(l));var c=this.getAttributeLocations(h,l),d=this.getUniformLocations(h,l)||{};return d.uStepW=h.getUniformLocation(l,"uStepW"),d.uStepH=h.getUniformLocation(l,"uStepH"),{program:l,attributeLocations:c,uniformLocations:d}},getAttributeLocations:function(h,n){return{aPosition:h.getAttribLocation(n,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(h,n,u){var o=n.aPosition,i=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,i),h.enableVertexAttribArray(o),h.vertexAttribPointer(o,2,h.FLOAT,!1,0,0),h.bufferData(h.ARRAY_BUFFER,u,h.STATIC_DRAW)},_setupFrameBuffer:function(h){var n=h.context,u,o;h.passes>1?(u=h.destinationWidth,o=h.destinationHeight,(h.sourceWidth!==u||h.sourceHeight!==o)&&(n.deleteTexture(h.targetTexture),h.targetTexture=h.filterBackend.createTexture(n,u,o)),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,h.targetTexture,0)):(n.bindFramebuffer(n.FRAMEBUFFER,null),n.finish())},_swapTextures:function(h){h.passes--,h.pass++;var n=h.targetTexture;h.targetTexture=h.sourceTexture,h.sourceTexture=n},isNeutralState:function(){var h=this.mainParameter,n=t.Image.filters[this.type].prototype;if(h)if(Array.isArray(n[h])){for(var u=n[h].length;u--;)if(this[h][u]!==n[h][u])return!1;return!0}else return n[h]===this[h];else return!1},applyTo:function(h){h.webgl?(this._setupFrameBuffer(h),this.applyToWebGL(h),this._swapTextures(h)):this.applyTo2d(h)},retrieveShader:function(h){return h.programCache.hasOwnProperty(this.type)||(h.programCache[this.type]=this.createProgram(h.context)),h.programCache[this.type]},applyToWebGL:function(h){var n=h.context,u=this.retrieveShader(h);h.pass===0&&h.originalTexture?n.bindTexture(n.TEXTURE_2D,h.originalTexture):n.bindTexture(n.TEXTURE_2D,h.sourceTexture),n.useProgram(u.program),this.sendAttributeData(n,u.attributeLocations,h.aPosition),n.uniform1f(u.uniformLocations.uStepW,1/h.sourceWidth),n.uniform1f(u.uniformLocations.uStepH,1/h.sourceHeight),this.sendUniformData(n,u.uniformLocations),n.viewport(0,0,h.destinationWidth,h.destinationHeight),n.drawArrays(n.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(h,n,u){h.activeTexture(u),h.bindTexture(h.TEXTURE_2D,n),h.activeTexture(h.TEXTURE0)},unbindAdditionalTexture:function(h,n){h.activeTexture(n),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(h){this[this.mainParameter]=h},sendUniformData:function(){},createHelpLayer:function(h){if(!h.helpLayer){var n=document.createElement("canvas");n.width=h.sourceWidth,n.height=h.sourceHeight,h.helpLayer=n}},toObject:function(){var h={type:this.type},n=this.mainParameter;return n&&(h[n]=this[n]),h},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(h,n){var u=new t.Image.filters[h.type](h);return n&&n(u),u},function(h){var n=h.fabric||(h.fabric={}),u=n.Image.filters,o=n.util.createClass;u.ColorMatrix=o(u.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(i){this.callSuper("initialize",i),this.matrix=this.matrix.slice(0)},applyTo2d:function(i){var l=i.imageData,c=l.data,d=c.length,p=this.matrix,m,g,b,y,w,x=this.colorsOnly;for(w=0;w<d;w+=4)m=c[w],g=c[w+1],b=c[w+2],x?(c[w]=m*p[0]+g*p[1]+b*p[2]+p[4]*255,c[w+1]=m*p[5]+g*p[6]+b*p[7]+p[9]*255,c[w+2]=m*p[10]+g*p[11]+b*p[12]+p[14]*255):(y=c[w+3],c[w]=m*p[0]+g*p[1]+b*p[2]+y*p[3]+p[4]*255,c[w+1]=m*p[5]+g*p[6]+b*p[7]+y*p[8]+p[9]*255,c[w+2]=m*p[10]+g*p[11]+b*p[12]+y*p[13]+p[14]*255,c[w+3]=m*p[15]+g*p[16]+b*p[17]+y*p[18]+p[19]*255)},getUniformLocations:function(i,l){return{uColorMatrix:i.getUniformLocation(l,"uColorMatrix"),uConstants:i.getUniformLocation(l,"uConstants")}},sendUniformData:function(i,l){var c=this.matrix,d=[c[0],c[1],c[2],c[3],c[5],c[6],c[7],c[8],c[10],c[11],c[12],c[13],c[15],c[16],c[17],c[18]],p=[c[4],c[9],c[14],c[19]];i.uniformMatrix4fv(l.uColorMatrix,!1,d),i.uniform4fv(l.uConstants,p)}}),n.Image.filters.ColorMatrix.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.Image.filters,o=n.util.createClass;u.Brightness=o(u.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(i){if(this.brightness!==0){var l=i.imageData,c=l.data,d,p=c.length,m=Math.round(this.brightness*255);for(d=0;d<p;d+=4)c[d]=c[d]+m,c[d+1]=c[d+1]+m,c[d+2]=c[d+2]+m}},getUniformLocations:function(i,l){return{uBrightness:i.getUniformLocation(l,"uBrightness")}},sendUniformData:function(i,l){i.uniform1f(l.uBrightness,this.brightness)}}),n.Image.filters.Brightness.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.util.object.extend,o=n.Image.filters,i=n.util.createClass;o.Convolute=i(o.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(l){var c=Math.sqrt(this.matrix.length),d=this.type+"_"+c+"_"+(this.opaque?1:0),p=this.fragmentSource[d];return l.programCache.hasOwnProperty(d)||(l.programCache[d]=this.createProgram(l.context,p)),l.programCache[d]},applyTo2d:function(l){var c=l.imageData,d=c.data,p=this.matrix,m=Math.round(Math.sqrt(p.length)),g=Math.floor(m/2),b=c.width,y=c.height,w=l.ctx.createImageData(b,y),x=w.data,C=this.opaque?1:0,S,E,A,D,M,B,O,F,z,N,T,q,_;for(T=0;T<y;T++)for(N=0;N<b;N++){for(M=(T*b+N)*4,S=0,E=0,A=0,D=0,_=0;_<m;_++)for(q=0;q<m;q++)O=T+_-g,B=N+q-g,!(O<0||O>=y||B<0||B>=b)&&(F=(O*b+B)*4,z=p[_*m+q],S+=d[F]*z,E+=d[F+1]*z,A+=d[F+2]*z,C||(D+=d[F+3]*z));x[M]=S,x[M+1]=E,x[M+2]=A,C?x[M+3]=d[M+3]:x[M+3]=D}l.imageData=w},getUniformLocations:function(l,c){return{uMatrix:l.getUniformLocation(c,"uMatrix"),uOpaque:l.getUniformLocation(c,"uOpaque"),uHalfSize:l.getUniformLocation(c,"uHalfSize"),uSize:l.getUniformLocation(c,"uSize")}},sendUniformData:function(l,c){l.uniform1fv(c.uMatrix,this.matrix)},toObject:function(){return u(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),n.Image.filters.Convolute.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.Image.filters,o=n.util.createClass;u.Grayscale=o(u.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(i){var l=i.imageData,c=l.data,d,p=c.length,m,g=this.mode;for(d=0;d<p;d+=4)g==="average"?m=(c[d]+c[d+1]+c[d+2])/3:g==="lightness"?m=(Math.min(c[d],c[d+1],c[d+2])+Math.max(c[d],c[d+1],c[d+2]))/2:g==="luminosity"&&(m=.21*c[d]+.72*c[d+1]+.07*c[d+2]),c[d]=m,c[d+1]=m,c[d+2]=m},retrieveShader:function(i){var l=this.type+"_"+this.mode;if(!i.programCache.hasOwnProperty(l)){var c=this.fragmentSource[this.mode];i.programCache[l]=this.createProgram(i.context,c)}return i.programCache[l]},getUniformLocations:function(i,l){return{uMode:i.getUniformLocation(l,"uMode")}},sendUniformData:function(i,l){var c=1;i.uniform1i(l.uMode,c)},isNeutralState:function(){return!1}}),n.Image.filters.Grayscale.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.Image.filters,o=n.util.createClass;u.Invert=o(u.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(i){var l=i.imageData,c=l.data,d,p=c.length;for(d=0;d<p;d+=4)c[d]=255-c[d],c[d+1]=255-c[d+1],c[d+2]=255-c[d+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(i,l){return{uInvert:i.getUniformLocation(l,"uInvert")}},sendUniformData:function(i,l){i.uniform1i(l.uInvert,this.invert)}}),n.Image.filters.Invert.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.util.object.extend,o=n.Image.filters,i=n.util.createClass;o.Noise=i(o.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(l){if(this.noise!==0){var c=l.imageData,d=c.data,p,m=d.length,g=this.noise,b;for(p=0,m=d.length;p<m;p+=4)b=(.5-Math.random())*g,d[p]+=b,d[p+1]+=b,d[p+2]+=b}},getUniformLocations:function(l,c){return{uNoise:l.getUniformLocation(c,"uNoise"),uSeed:l.getUniformLocation(c,"uSeed")}},sendUniformData:function(l,c){l.uniform1f(c.uNoise,this.noise/255),l.uniform1f(c.uSeed,Math.random())},toObject:function(){return u(this.callSuper("toObject"),{noise:this.noise})}}),n.Image.filters.Noise.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.Image.filters,o=n.util.createClass;u.Pixelate=o(u.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(i){var l=i.imageData,c=l.data,d=l.height,p=l.width,m,g,b,y,w,x,C,S,E,A,D;for(g=0;g<d;g+=this.blocksize)for(b=0;b<p;b+=this.blocksize)for(m=g*4*p+b*4,y=c[m],w=c[m+1],x=c[m+2],C=c[m+3],A=Math.min(g+this.blocksize,d),D=Math.min(b+this.blocksize,p),S=g;S<A;S++)for(E=b;E<D;E++)m=S*4*p+E*4,c[m]=y,c[m+1]=w,c[m+2]=x,c[m+3]=C},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(i,l){return{uBlocksize:i.getUniformLocation(l,"uBlocksize"),uStepW:i.getUniformLocation(l,"uStepW"),uStepH:i.getUniformLocation(l,"uStepH")}},sendUniformData:function(i,l){i.uniform1f(l.uBlocksize,this.blocksize)}}),n.Image.filters.Pixelate.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.util.object.extend,o=n.Image.filters,i=n.util.createClass;o.RemoveColor=i(o.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(l){var c=l.imageData,d=c.data,p,m=this.distance*255,g,b,y,w=new n.Color(this.color).getSource(),x=[w[0]-m,w[1]-m,w[2]-m],C=[w[0]+m,w[1]+m,w[2]+m];for(p=0;p<d.length;p+=4)g=d[p],b=d[p+1],y=d[p+2],g>x[0]&&b>x[1]&&y>x[2]&&g<C[0]&&b<C[1]&&y<C[2]&&(d[p+3]=0)},getUniformLocations:function(l,c){return{uLow:l.getUniformLocation(c,"uLow"),uHigh:l.getUniformLocation(c,"uHigh")}},sendUniformData:function(l,c){var d=new n.Color(this.color).getSource(),p=parseFloat(this.distance),m=[0+d[0]/255-p,0+d[1]/255-p,0+d[2]/255-p,1],g=[d[0]/255+p,d[1]/255+p,d[2]/255+p,1];l.uniform4fv(c.uLow,m),l.uniform4fv(c.uHigh,g)},toObject:function(){return u(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),n.Image.filters.RemoveColor.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.Image.filters,o=n.util.createClass,i={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var l in i)u[l]=o(u.ColorMatrix,{type:l,matrix:i[l],mainParameter:!1,colorsOnly:!0}),n.Image.filters[l].fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric,u=n.Image.filters,o=n.util.createClass;u.BlendColor=o(u.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(i){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[i]+`}
}`},retrieveShader:function(i){var l=this.type+"_"+this.mode,c;return i.programCache.hasOwnProperty(l)||(c=this.buildSource(this.mode),i.programCache[l]=this.createProgram(i.context,c)),i.programCache[l]},applyTo2d:function(i){var l=i.imageData,c=l.data,d=c.length,p,m,g,b,y,w,x,C=1-this.alpha;x=new n.Color(this.color).getSource(),p=x[0]*this.alpha,m=x[1]*this.alpha,g=x[2]*this.alpha;for(var S=0;S<d;S+=4)switch(b=c[S],y=c[S+1],w=c[S+2],this.mode){case"multiply":c[S]=b*p/255,c[S+1]=y*m/255,c[S+2]=w*g/255;break;case"screen":c[S]=255-(255-b)*(255-p)/255,c[S+1]=255-(255-y)*(255-m)/255,c[S+2]=255-(255-w)*(255-g)/255;break;case"add":c[S]=b+p,c[S+1]=y+m,c[S+2]=w+g;break;case"diff":case"difference":c[S]=Math.abs(b-p),c[S+1]=Math.abs(y-m),c[S+2]=Math.abs(w-g);break;case"subtract":c[S]=b-p,c[S+1]=y-m,c[S+2]=w-g;break;case"darken":c[S]=Math.min(b,p),c[S+1]=Math.min(y,m),c[S+2]=Math.min(w,g);break;case"lighten":c[S]=Math.max(b,p),c[S+1]=Math.max(y,m),c[S+2]=Math.max(w,g);break;case"overlay":c[S]=p<128?2*b*p/255:255-2*(255-b)*(255-p)/255,c[S+1]=m<128?2*y*m/255:255-2*(255-y)*(255-m)/255,c[S+2]=g<128?2*w*g/255:255-2*(255-w)*(255-g)/255;break;case"exclusion":c[S]=p+b-2*p*b/255,c[S+1]=m+y-2*m*y/255,c[S+2]=g+w-2*g*w/255;break;case"tint":c[S]=p+b*C,c[S+1]=m+y*C,c[S+2]=g+w*C}},getUniformLocations:function(i,l){return{uColor:i.getUniformLocation(l,"uColor")}},sendUniformData:function(i,l){var c=new n.Color(this.color).getSource();c[0]=this.alpha*c[0]/255,c[1]=this.alpha*c[1]/255,c[2]=this.alpha*c[2]/255,c[3]=this.alpha,i.uniform4fv(l.uColor,c)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendColor.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric,u=n.Image.filters,o=n.util.createClass;u.BlendImage=o(u.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(i){var l=this.type+"_"+this.mode,c=this.fragmentSource[this.mode];return i.programCache.hasOwnProperty(l)||(i.programCache[l]=this.createProgram(i.context,c)),i.programCache[l]},applyToWebGL:function(i){var l=i.context,c=this.createTexture(i.filterBackend,this.image);this.bindAdditionalTexture(l,c,l.TEXTURE1),this.callSuper("applyToWebGL",i),this.unbindAdditionalTexture(l,l.TEXTURE1)},createTexture:function(i,l){return i.getCachedTexture(l.cacheKey,l._element)},calculateMatrix:function(){var i=this.image,l=i._element.width,c=i._element.height;return[1/i.scaleX,0,0,0,1/i.scaleY,0,-i.left/l,-i.top/c,1]},applyTo2d:function(i){var l=i.imageData,c=i.filterBackend.resources,d=l.data,p=d.length,m=l.width,g=l.height,b,y,w,x,C,S,E,A,D,M,B=this.image,O;c.blendImage||(c.blendImage=n.util.createCanvasElement()),D=c.blendImage,M=D.getContext("2d"),D.width!==m||D.height!==g?(D.width=m,D.height=g):M.clearRect(0,0,m,g),M.setTransform(B.scaleX,0,0,B.scaleY,B.left,B.top),M.drawImage(B._element,0,0,m,g),O=M.getImageData(0,0,m,g).data;for(var F=0;F<p;F+=4)switch(C=d[F],S=d[F+1],E=d[F+2],A=d[F+3],b=O[F],y=O[F+1],w=O[F+2],x=O[F+3],this.mode){case"multiply":d[F]=C*b/255,d[F+1]=S*y/255,d[F+2]=E*w/255,d[F+3]=A*x/255;break;case"mask":d[F+3]=x;break}},getUniformLocations:function(i,l){return{uTransformMatrix:i.getUniformLocation(l,"uTransformMatrix"),uImage:i.getUniformLocation(l,"uImage")}},sendUniformData:function(i,l){var c=this.calculateMatrix();i.uniform1i(l.uImage,1),i.uniformMatrix3fv(l.uTransformMatrix,!1,c)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendImage.fromObject=function(i,l){n.Image.fromObject(i.image,function(c){var d=n.util.object.clone(i);d.image=c,l(new n.Image.filters.BlendImage(d))})}}(e),function(h){var n=h.fabric||(h.fabric={}),u=Math.pow,o=Math.floor,i=Math.sqrt,l=Math.abs,c=Math.round,d=Math.sin,p=Math.ceil,m=n.Image.filters,g=n.util.createClass;m.Resize=g(m.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(b,y){return{uDelta:b.getUniformLocation(y,"uDelta"),uTaps:b.getUniformLocation(y,"uTaps")}},sendUniformData:function(b,y){b.uniform2fv(y.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),b.uniform1fv(y.uTaps,this.taps)},retrieveShader:function(b){var y=this.getFilterWindow(),w=this.type+"_"+y;if(!b.programCache.hasOwnProperty(w)){var x=this.generateShader(y);b.programCache[w]=this.createProgram(b.context,x)}return b.programCache[w]},getFilterWindow:function(){var b=this.tempScale;return Math.ceil(this.lanczosLobes/b)},getTaps:function(){for(var b=this.lanczosCreate(this.lanczosLobes),y=this.tempScale,w=this.getFilterWindow(),x=new Array(w),C=1;C<=w;C++)x[C-1]=b(C*y);return x},generateShader:function(x){for(var y=new Array(x),w=this.fragmentSourceTOP,x,C=1;C<=x;C++)y[C-1]=C+".0 * uDelta";return w+="uniform float uTaps["+x+`];
`,w+=`void main() {
`,w+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,w+=`  float sum = 1.0;
`,y.forEach(function(S,E){w+="  color += texture2D(uTexture, vTexCoord + "+S+") * uTaps["+E+`];
`,w+="  color += texture2D(uTexture, vTexCoord - "+S+") * uTaps["+E+`];
`,w+="  sum += 2.0 * uTaps["+E+`];
`}),w+=`  gl_FragColor = color / sum;
`,w+="}",w},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(b){b.webgl?(b.passes++,this.width=b.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=b.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),b.destinationWidth=this.dW,this._setupFrameBuffer(b),this.applyToWebGL(b),this._swapTextures(b),b.sourceWidth=b.destinationWidth,this.height=b.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),b.destinationHeight=this.dH,this._setupFrameBuffer(b),this.applyToWebGL(b),this._swapTextures(b),b.sourceHeight=b.destinationHeight):this.applyTo2d(b)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(b){return function(y){if(y>=b||y<=-b)return 0;if(y<11920929e-14&&y>-11920929e-14)return 1;y*=Math.PI;var w=y/b;return d(y)/y*d(w)/w}},applyTo2d:function(b){var y=b.imageData,w=this.scaleX,x=this.scaleY;this.rcpScaleX=1/w,this.rcpScaleY=1/x;var C=y.width,S=y.height,E=c(C*w),A=c(S*x),D;this.resizeType==="sliceHack"?D=this.sliceByTwo(b,C,S,E,A):this.resizeType==="hermite"?D=this.hermiteFastResize(b,C,S,E,A):this.resizeType==="bilinear"?D=this.bilinearFiltering(b,C,S,E,A):this.resizeType==="lanczos"&&(D=this.lanczosResize(b,C,S,E,A)),b.imageData=D},sliceByTwo:function(b,y,w,x,C){var S=b.imageData,E=.5,A=!1,D=!1,M=y*E,B=w*E,O=n.filterBackend.resources,F,z,N=0,T=0,q=y,_=0;for(O.sliceByTwo||(O.sliceByTwo=document.createElement("canvas")),F=O.sliceByTwo,(F.width<y*1.5||F.height<w)&&(F.width=y*1.5,F.height=w),z=F.getContext("2d"),z.clearRect(0,0,y*1.5,w),z.putImageData(S,0,0),x=o(x),C=o(C);!A||!D;)y=M,w=B,x<o(M*E)?M=o(M*E):(M=x,A=!0),C<o(B*E)?B=o(B*E):(B=C,D=!0),z.drawImage(F,N,T,y,w,q,_,M,B),N=q,T=_,_+=B;return z.getImageData(N,T,x,C)},lanczosResize:function(b,y,w,x,C){function S(U){var j,L,P,k,V,Q,ne,re,ie,de,ve;for(_.x=(U+.5)*B,I.x=o(_.x),j=0;j<C;j++){for(_.y=(j+.5)*O,I.y=o(_.y),V=0,Q=0,ne=0,re=0,ie=0,L=I.x-N;L<=I.x+N;L++)if(!(L<0||L>=y)){de=o(1e3*l(L-_.x)),q[de]||(q[de]={});for(var ce=I.y-T;ce<=I.y+T;ce++)ce<0||ce>=w||(ve=o(1e3*l(ce-_.y)),q[de][ve]||(q[de][ve]=M(i(u(de*F,2)+u(ve*z,2))/1e3)),P=q[de][ve],P>0&&(k=(ce*y+L)*4,V+=P,Q+=P*E[k],ne+=P*E[k+1],re+=P*E[k+2],ie+=P*E[k+3]))}k=(j*x+U)*4,D[k]=Q/V,D[k+1]=ne/V,D[k+2]=re/V,D[k+3]=ie/V}return++U<x?S(U):A}var E=b.imageData.data,A=b.ctx.createImageData(x,C),D=A.data,M=this.lanczosCreate(this.lanczosLobes),B=this.rcpScaleX,O=this.rcpScaleY,F=2/this.rcpScaleX,z=2/this.rcpScaleY,N=p(B*this.lanczosLobes/2),T=p(O*this.lanczosLobes/2),q={},_={},I={};return S(0)},bilinearFiltering:function(b,y,w,x,C){var S,E,A,D,M,B,O,F,z,N,T,q,_=0,I,U=this.rcpScaleX,j=this.rcpScaleY,L=4*(y-1),P=b.imageData,k=P.data,V=b.ctx.createImageData(x,C),Q=V.data;for(O=0;O<C;O++)for(F=0;F<x;F++)for(M=o(U*F),B=o(j*O),z=U*F-M,N=j*O-B,I=4*(B*y+M),T=0;T<4;T++)S=k[I+T],E=k[I+4+T],A=k[I+L+T],D=k[I+L+4+T],q=S*(1-z)*(1-N)+E*z*(1-N)+A*N*(1-z)+D*z*N,Q[_++]=q;return V},hermiteFastResize:function(b,y,w,x,C){for(var S=this.rcpScaleX,E=this.rcpScaleY,A=p(S/2),D=p(E/2),M=b.imageData,B=M.data,O=b.ctx.createImageData(x,C),F=O.data,z=0;z<C;z++)for(var N=0;N<x;N++){for(var T=(N+z*x)*4,q=0,_=0,I=0,U=0,j=0,L=0,P=0,k=(z+.5)*E,V=o(z*E);V<(z+1)*E;V++)for(var Q=l(k-(V+.5))/D,ne=(N+.5)*S,re=Q*Q,ie=o(N*S);ie<(N+1)*S;ie++){var de=l(ne-(ie+.5))/A,ve=i(re+de*de);ve>1&&ve<-1||(q=2*ve*ve*ve-3*ve*ve+1,q>0&&(de=4*(ie+V*y),P+=q*B[de+3],I+=q,B[de+3]<255&&(q=q*B[de+3]/250),U+=q*B[de],j+=q*B[de+1],L+=q*B[de+2],_+=q))}F[T]=U/_,F[T+1]=j/_,F[T+2]=L/_,F[T+3]=P/I}return O},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),n.Image.filters.Resize.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.Image.filters,o=n.util.createClass;u.Contrast=o(u.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(i){if(this.contrast!==0){var l=i.imageData,c,p,d=l.data,p=d.length,m=Math.floor(this.contrast*255),g=259*(m+255)/(255*(259-m));for(c=0;c<p;c+=4)d[c]=g*(d[c]-128)+128,d[c+1]=g*(d[c+1]-128)+128,d[c+2]=g*(d[c+2]-128)+128}},getUniformLocations:function(i,l){return{uContrast:i.getUniformLocation(l,"uContrast")}},sendUniformData:function(i,l){i.uniform1f(l.uContrast,this.contrast)}}),n.Image.filters.Contrast.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.Image.filters,o=n.util.createClass;u.Saturation=o(u.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(i){if(this.saturation!==0){var l=i.imageData,c=l.data,d=c.length,p=-this.saturation,m,g;for(m=0;m<d;m+=4)g=Math.max(c[m],c[m+1],c[m+2]),c[m]+=g!==c[m]?(g-c[m])*p:0,c[m+1]+=g!==c[m+1]?(g-c[m+1])*p:0,c[m+2]+=g!==c[m+2]?(g-c[m+2])*p:0}},getUniformLocations:function(i,l){return{uSaturation:i.getUniformLocation(l,"uSaturation")}},sendUniformData:function(i,l){i.uniform1f(l.uSaturation,-this.saturation)}}),n.Image.filters.Saturation.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.Image.filters,o=n.util.createClass;u.Vibrance=o(u.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(i){if(this.vibrance!==0){var l=i.imageData,c=l.data,d=c.length,p=-this.vibrance,m,g,b,y;for(m=0;m<d;m+=4)g=Math.max(c[m],c[m+1],c[m+2]),b=(c[m]+c[m+1]+c[m+2])/3,y=Math.abs(g-b)*2/255*p,c[m]+=g!==c[m]?(g-c[m])*y:0,c[m+1]+=g!==c[m+1]?(g-c[m+1])*y:0,c[m+2]+=g!==c[m+2]?(g-c[m+2])*y:0}},getUniformLocations:function(i,l){return{uVibrance:i.getUniformLocation(l,"uVibrance")}},sendUniformData:function(i,l){i.uniform1f(l.uVibrance,-this.vibrance)}}),n.Image.filters.Vibrance.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.Image.filters,o=n.util.createClass;u.Blur=o(u.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(i){i.webgl?(this.aspectRatio=i.sourceWidth/i.sourceHeight,i.passes++,this._setupFrameBuffer(i),this.horizontal=!0,this.applyToWebGL(i),this._swapTextures(i),this._setupFrameBuffer(i),this.horizontal=!1,this.applyToWebGL(i),this._swapTextures(i)):this.applyTo2d(i)},applyTo2d:function(i){i.imageData=this.simpleBlur(i)},simpleBlur:function(i){var l=i.filterBackend.resources,c,d,p=i.imageData.width,m=i.imageData.height;l.blurLayer1||(l.blurLayer1=n.util.createCanvasElement(),l.blurLayer2=n.util.createCanvasElement()),c=l.blurLayer1,d=l.blurLayer2,(c.width!==p||c.height!==m)&&(d.width=c.width=p,d.height=c.height=m);var g=c.getContext("2d"),b=d.getContext("2d"),y=15,w,x,C,S,E=this.blur*.06*.5;for(g.putImageData(i.imageData,0,0),b.clearRect(0,0,p,m),S=-y;S<=y;S++)w=(Math.random()-.5)/4,x=S/y,C=E*x*p+w,b.globalAlpha=1-Math.abs(x),b.drawImage(c,C,w),g.drawImage(d,0,0),b.globalAlpha=1,b.clearRect(0,0,d.width,d.height);for(S=-y;S<=y;S++)w=(Math.random()-.5)/4,x=S/y,C=E*x*m+w,b.globalAlpha=1-Math.abs(x),b.drawImage(c,w,C),g.drawImage(d,0,0),b.globalAlpha=1,b.clearRect(0,0,d.width,d.height);i.ctx.drawImage(c,0,0);var A=i.ctx.getImageData(0,0,c.width,c.height);return g.globalAlpha=1,g.clearRect(0,0,c.width,c.height),A},getUniformLocations:function(i,l){return{delta:i.getUniformLocation(l,"uDelta")}},sendUniformData:function(i,l){var c=this.chooseRightDelta();i.uniform2fv(l.delta,c)},chooseRightDelta:function(){var i=1,l=[0,0],c;return this.horizontal?this.aspectRatio>1&&(i=1/this.aspectRatio):this.aspectRatio<1&&(i=this.aspectRatio),c=i*this.blur*.12,this.horizontal?l[0]=c:l[1]=c,l}}),u.Blur.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.Image.filters,o=n.util.createClass;u.Gamma=o(u.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(i){this.gamma=[1,1,1],u.BaseFilter.prototype.initialize.call(this,i)},applyTo2d:function(i){var l=i.imageData,c=l.data,d=this.gamma,p=c.length,m=1/d[0],g=1/d[1],b=1/d[2],y;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),y=0,p=256;y<p;y++)this.rVals[y]=Math.pow(y/255,m)*255,this.gVals[y]=Math.pow(y/255,g)*255,this.bVals[y]=Math.pow(y/255,b)*255;for(y=0,p=c.length;y<p;y+=4)c[y]=this.rVals[c[y]],c[y+1]=this.gVals[c[y+1]],c[y+2]=this.bVals[c[y+2]]},getUniformLocations:function(i,l){return{uGamma:i.getUniformLocation(l,"uGamma")}},sendUniformData:function(i,l){i.uniform3fv(l.uGamma,this.gamma)}}),n.Image.filters.Gamma.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.Image.filters,o=n.util.createClass;u.Composed=o(u.BaseFilter,{type:"Composed",subFilters:[],initialize:function(i){this.callSuper("initialize",i),this.subFilters=this.subFilters.slice(0)},applyTo:function(i){i.passes+=this.subFilters.length-1,this.subFilters.forEach(function(l){l.applyTo(i)})},toObject:function(){return n.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(i){return i.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(i){return!i.isNeutralState()})}}),n.Image.filters.Composed.fromObject=function(i,l){var c=i.subFilters||[],d=c.map(function(m){return new n.Image.filters[m.type](m)}),p=new n.Image.filters.Composed({subFilters:d});return l&&l(p),p}}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.Image.filters,o=n.util.createClass;u.HueRotation=o(u.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var i=this.rotation*Math.PI,l=n.util.cos(i),c=n.util.sin(i),d=1/3,p=Math.sqrt(d)*c,m=1-l;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=l+m/3,this.matrix[1]=d*m-p,this.matrix[2]=d*m+p,this.matrix[5]=d*m+p,this.matrix[6]=l+d*m,this.matrix[7]=d*m-p,this.matrix[10]=d*m-p,this.matrix[11]=d*m+p,this.matrix[12]=l+d*m},isNeutralState:function(i){return this.calculateMatrix(),u.BaseFilter.prototype.isNeutralState.call(this,i)},applyTo:function(i){this.calculateMatrix(),u.BaseFilter.prototype.applyTo.call(this,i)}}),n.Image.filters.HueRotation.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(h){var n=h.fabric||(h.fabric={}),u=n.util.object.clone;if(n.Text){n.warn("fabric.Text is already defined");return}var o="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");n.Text=n.util.createClass(n.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:n.Object.prototype.stateProperties.concat(o),cacheProperties:n.Object.prototype.cacheProperties.concat(o),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(i,l){this.styles=l?l.styles||{}:{},this.text=i,this.__skipDimension=!0,this.callSuper("initialize",l),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var i=this.path;i&&(i.segmentsInfo=n.util.getPathSegmentsInfo(i.path))},getMeasuringContext:function(){return n._measuringContext||(n._measuringContext=this.canvas&&this.canvas.contextCache||n.util.createCanvasElement().getContext("2d")),n._measuringContext},_splitText:function(){var i=this._splitTextIntoLines(this.text);return this.textLines=i.lines,this._textLines=i.graphemeLines,this._unwrappedTextLines=i._unwrappedLines,this._text=i.graphemeText,i},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var i,l,c,d,p,m,g,b=0,y=this._textLines.length;b<y;b++)if(!(this.textAlign!=="justify"&&(b===y-1||this.isEndOfWrapping(b)))&&(d=0,p=this._textLines[b],l=this.getLineWidth(b),l<this.width&&(g=this.textLines[b].match(this._reSpacesAndTabs)))){c=g.length,i=(this.width-l)/c;for(var w=0,x=p.length;w<=x;w++)m=this.__charBounds[b][w],this._reSpaceAndTab.test(p[w])?(m.width+=i,m.kernedWidth+=i,m.left+=d,d+=i):m.left+=d}},isEndOfWrapping:function(i){return i===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var i=this.callSuper("_getCacheCanvasDimensions"),l=this.fontSize;return i.width+=l*i.zoomX,i.height+=l*i.zoomY,i},_render:function(i){var l=this.path;l&&!l.isNotVisible()&&l._render(i),this._setTextStyles(i),this._renderTextLinesBackground(i),this._renderTextDecoration(i,"underline"),this._renderText(i),this._renderTextDecoration(i,"overline"),this._renderTextDecoration(i,"linethrough")},_renderText:function(i){this.paintFirst==="stroke"?(this._renderTextStroke(i),this._renderTextFill(i)):(this._renderTextFill(i),this._renderTextStroke(i))},_setTextStyles:function(i,l,c){if(i.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":i.textBaseline="middle";break;case"ascender":i.textBaseline="top";break;case"descender":i.textBaseline="bottom";break}i.font=this._getFontDeclaration(l,c)},calcTextWidth:function(){for(var i=this.getLineWidth(0),l=1,c=this._textLines.length;l<c;l++){var d=this.getLineWidth(l);d>i&&(i=d)}return i},_renderTextLine:function(i,l,c,d,p,m){this._renderChars(i,l,c,d,p,m)},_renderTextLinesBackground:function(i){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var l,c,d=i.fillStyle,p,m,g=this._getLeftOffset(),b=this._getTopOffset(),y=0,w=0,x,C,S=this.path,E,A=0,D=this._textLines.length;A<D;A++){if(l=this.getHeightOfLine(A),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",A)){b+=l;continue}p=this._textLines[A],c=this._getLineLeftOffset(A),w=0,y=0,m=this.getValueOfPropertyAt(A,0,"textBackgroundColor");for(var M=0,B=p.length;M<B;M++)x=this.__charBounds[A][M],C=this.getValueOfPropertyAt(A,M,"textBackgroundColor"),S?(i.save(),i.translate(x.renderLeft,x.renderTop),i.rotate(x.angle),i.fillStyle=C,C&&i.fillRect(-x.width/2,-l/this.lineHeight*(1-this._fontSizeFraction),x.width,l/this.lineHeight),i.restore()):C!==m?(E=g+c+y,this.direction==="rtl"&&(E=this.width-E-w),i.fillStyle=m,m&&i.fillRect(E,b,w,l/this.lineHeight),y=x.left,w=x.width,m=C):w+=x.kernedWidth;C&&!S&&(E=g+c+y,this.direction==="rtl"&&(E=this.width-E-w),i.fillStyle=C,i.fillRect(E,b,w,l/this.lineHeight)),b+=l}i.fillStyle=d,this._removeShadow(i)}},getFontCache:function(i){var l=i.fontFamily.toLowerCase();n.charWidthsCache[l]||(n.charWidthsCache[l]={});var c=n.charWidthsCache[l],d=i.fontStyle.toLowerCase()+"_"+(i.fontWeight+"").toLowerCase();return c[d]||(c[d]={}),c[d]},_measureChar:function(i,l,c,d){var p=this.getFontCache(l),m=this._getFontDeclaration(l),g=this._getFontDeclaration(d),b=c+i,y=m===g,w,x,C,S=l.fontSize/this.CACHE_FONT_SIZE,E;if(c&&p[c]!==void 0&&(C=p[c]),p[i]!==void 0&&(E=w=p[i]),y&&p[b]!==void 0&&(x=p[b],E=x-C),w===void 0||C===void 0||x===void 0){var A=this.getMeasuringContext();this._setTextStyles(A,l,!0)}return w===void 0&&(E=w=A.measureText(i).width,p[i]=w),C===void 0&&y&&c&&(C=A.measureText(c).width,p[c]=C),y&&x===void 0&&(x=A.measureText(b).width,p[b]=x,E=x-C),{width:w*S,kernedWidth:E*S}},getHeightOfChar:function(i,l){return this.getValueOfPropertyAt(i,l,"fontSize")},measureLine:function(i){var l=this._measureLine(i);return this.charSpacing!==0&&(l.width-=this._getWidthOfCharSpacing()),l.width<0&&(l.width=0),l},_measureLine:function(i){var l=0,c,d,p=this._textLines[i],m,g,b=0,y=new Array(p.length),w=0,x,C,S=this.path,E=this.pathSide==="right";for(this.__charBounds[i]=y,c=0;c<p.length;c++)d=p[c],g=this._getGraphemeBox(d,i,c,m),y[c]=g,l+=g.kernedWidth,m=d;if(y[c]={left:g?g.left+g.width:0,width:0,kernedWidth:0,height:this.fontSize},S){switch(C=S.segmentsInfo[S.segmentsInfo.length-1].length,x=n.util.getPointOnPath(S.path,0,S.segmentsInfo),x.x+=S.pathOffset.x,x.y+=S.pathOffset.y,this.textAlign){case"left":w=E?C-l:0;break;case"center":w=(C-l)/2;break;case"right":w=E?0:C-l;break}for(w+=this.pathStartOffset*(E?-1:1),c=E?p.length-1:0;E?c>=0:c<p.length;E?c--:c++)g=y[c],w>C?w%=C:w<0&&(w+=C),this._setGraphemeOnPath(w,g,x),w+=g.kernedWidth}return{width:l,numOfSpaces:b}},_setGraphemeOnPath:function(i,l,c){var d=i+l.kernedWidth/2,p=this.path,m=n.util.getPointOnPath(p.path,d,p.segmentsInfo);l.renderLeft=m.x-c.x,l.renderTop=m.y-c.y,l.angle=m.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(i,l,c,d,p){var m=this.getCompleteStyleDeclaration(l,c),g=d?this.getCompleteStyleDeclaration(l,c-1):{},b=this._measureChar(i,m,d,g),y=b.kernedWidth,w=b.width,x;this.charSpacing!==0&&(x=this._getWidthOfCharSpacing(),w+=x,y+=x);var C={width:w,left:0,height:m.fontSize,kernedWidth:y,deltaY:m.deltaY};if(c>0&&!p){var S=this.__charBounds[l][c-1];C.left=S.left+S.width+b.kernedWidth-b.width}return C},getHeightOfLine:function(i){if(this.__lineHeights[i])return this.__lineHeights[i];for(var l=this._textLines[i],c=this.getHeightOfChar(i,0),d=1,p=l.length;d<p;d++)c=Math.max(this.getHeightOfChar(i,d),c);return this.__lineHeights[i]=c*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var i,l=0,c=0,d=this._textLines.length;c<d;c++)i=this.getHeightOfLine(c),l+=c===d-1?i/this.lineHeight:i;return l},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(i,l){i.save();for(var c=0,d=this._getLeftOffset(),p=this._getTopOffset(),m=0,g=this._textLines.length;m<g;m++){var b=this.getHeightOfLine(m),y=b/this.lineHeight,w=this._getLineLeftOffset(m);this._renderTextLine(l,i,this._textLines[m],d+w,p+c+y,m),c+=b}i.restore()},_renderTextFill:function(i){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(i,"fillText")},_renderTextStroke:function(i){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(i),i.save(),this._setLineDash(i,this.strokeDashArray),i.beginPath(),this._renderTextCommon(i,"strokeText"),i.closePath(),i.restore())},_renderChars:function(i,l,c,d,p,m){var g=this.getHeightOfLine(m),b=this.textAlign.indexOf("justify")!==-1,y,w,x="",C,S=0,E,A=this.path,D=!b&&this.charSpacing===0&&this.isEmptyStyles(m)&&!A,M=this.direction==="ltr",B=this.direction==="ltr"?1:-1,O,F=l.canvas.getAttribute("dir");if(l.save(),F!==this.direction&&(l.canvas.setAttribute("dir",M?"ltr":"rtl"),l.direction=M?"ltr":"rtl",l.textAlign=M?"left":"right"),p-=g*this._fontSizeFraction/this.lineHeight,D){this._renderChar(i,l,m,0,c.join(""),d,p,g),l.restore();return}for(var z=0,N=c.length-1;z<=N;z++)E=z===N||this.charSpacing||A,x+=c[z],C=this.__charBounds[m][z],S===0?(d+=B*(C.kernedWidth-C.width),S+=C.width):S+=C.kernedWidth,b&&!E&&this._reSpaceAndTab.test(c[z])&&(E=!0),E||(y=y||this.getCompleteStyleDeclaration(m,z),w=this.getCompleteStyleDeclaration(m,z+1),E=n.util.hasStyleChanged(y,w,!1)),E&&(A?(l.save(),l.translate(C.renderLeft,C.renderTop),l.rotate(C.angle),this._renderChar(i,l,m,z,x,-S/2,0,g),l.restore()):(O=d,this._renderChar(i,l,m,z,x,O,p,g)),x="",y=w,d+=B*S,S=0);l.restore()},_applyPatternGradientTransformText:function(i){var l=n.util.createCanvasElement(),c,d=this.width+this.strokeWidth,p=this.height+this.strokeWidth;return l.width=d,l.height=p,c=l.getContext("2d"),c.beginPath(),c.moveTo(0,0),c.lineTo(d,0),c.lineTo(d,p),c.lineTo(0,p),c.closePath(),c.translate(d/2,p/2),c.fillStyle=i.toLive(c),this._applyPatternGradientTransform(c,i),c.fill(),c.createPattern(l,"no-repeat")},handleFiller:function(i,l,c){var d,p;return c.toLive?c.gradientUnits==="percentage"||c.gradientTransform||c.patternTransform?(d=-this.width/2,p=-this.height/2,i.translate(d,p),i[l]=this._applyPatternGradientTransformText(c),{offsetX:d,offsetY:p}):(i[l]=c.toLive(i,this),this._applyPatternGradientTransform(i,c)):(i[l]=c,{offsetX:0,offsetY:0})},_setStrokeStyles:function(i,l){return i.lineWidth=l.strokeWidth,i.lineCap=this.strokeLineCap,i.lineDashOffset=this.strokeDashOffset,i.lineJoin=this.strokeLineJoin,i.miterLimit=this.strokeMiterLimit,this.handleFiller(i,"strokeStyle",l.stroke)},_setFillStyles:function(i,l){return this.handleFiller(i,"fillStyle",l.fill)},_renderChar:function(i,l,c,d,p,m,g){var b=this._getStyleDeclaration(c,d),y=this.getCompleteStyleDeclaration(c,d),w=i==="fillText"&&y.fill,x=i==="strokeText"&&y.stroke&&y.strokeWidth,C,S;!x&&!w||(l.save(),w&&(C=this._setFillStyles(l,y)),x&&(S=this._setStrokeStyles(l,y)),l.font=this._getFontDeclaration(y),b&&b.textBackgroundColor&&this._removeShadow(l),b&&b.deltaY&&(g+=b.deltaY),w&&l.fillText(p,m-C.offsetX,g-C.offsetY),x&&l.strokeText(p,m-S.offsetX,g-S.offsetY),l.restore())},setSuperscript:function(i,l){return this._setScript(i,l,this.superscript)},setSubscript:function(i,l){return this._setScript(i,l,this.subscript)},_setScript:function(i,l,c){var d=this.get2DCursorLocation(i,!0),p=this.getValueOfPropertyAt(d.lineIndex,d.charIndex,"fontSize"),m=this.getValueOfPropertyAt(d.lineIndex,d.charIndex,"deltaY"),g={fontSize:p*c.size,deltaY:m+p*c.baseline};return this.setSelectionStyles(g,i,l),this},_getLineLeftOffset:function(i){var l=this.getLineWidth(i),c=this.width-l,d=this.textAlign,p=this.direction,g,m=0,g=this.isEndOfWrapping(i);return d==="justify"||d==="justify-center"&&!g||d==="justify-right"&&!g||d==="justify-left"&&!g?0:(d==="center"&&(m=c/2),d==="right"&&(m=c),d==="justify-center"&&(m=c/2),d==="justify-right"&&(m=c),p==="rtl"&&(m-=c),m)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var i=this._forceClearCache;return i||(i=this.hasStateChanged("_dimensionAffectingProps")),i&&(this.dirty=!0,this._forceClearCache=!1),i},getLineWidth:function(i){if(this.__lineWidths[i]!==void 0)return this.__lineWidths[i];var l=this.measureLine(i),c=l.width;return this.__lineWidths[i]=c,c},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(i,l,c){var d=this._getStyleDeclaration(i,l);return d&&typeof d[c]<"u"?d[c]:this[c]},_renderTextDecoration:function(i,l){if(!(!this[l]&&!this.styleHas(l))){for(var c,d,p,m,g,b,y,w,x=this._getLeftOffset(),C=this._getTopOffset(),S,E,A,D,M,B,O,F,z=this.path,N=this._getWidthOfCharSpacing(),T=this.offsets[l],q=0,_=this._textLines.length;q<_;q++){if(c=this.getHeightOfLine(q),!this[l]&&!this.styleHas(l,q)){C+=c;continue}y=this._textLines[q],B=c/this.lineHeight,m=this._getLineLeftOffset(q),E=0,A=0,w=this.getValueOfPropertyAt(q,0,l),F=this.getValueOfPropertyAt(q,0,"fill"),S=C+B*(1-this._fontSizeFraction),d=this.getHeightOfChar(q,0),g=this.getValueOfPropertyAt(q,0,"deltaY");for(var I=0,U=y.length;I<U;I++)if(D=this.__charBounds[q][I],M=this.getValueOfPropertyAt(q,I,l),O=this.getValueOfPropertyAt(q,I,"fill"),p=this.getHeightOfChar(q,I),b=this.getValueOfPropertyAt(q,I,"deltaY"),z&&M&&O)i.save(),i.fillStyle=F,i.translate(D.renderLeft,D.renderTop),i.rotate(D.angle),i.fillRect(-D.kernedWidth/2,T*p+b,D.kernedWidth,this.fontSize/15),i.restore();else if((M!==w||O!==F||p!==d||b!==g)&&A>0){var j=x+m+E;this.direction==="rtl"&&(j=this.width-j-A),w&&F&&(i.fillStyle=F,i.fillRect(j,S+T*d+g,A,this.fontSize/15)),E=D.left,A=D.width,w=M,F=O,d=p,g=b}else A+=D.kernedWidth;var j=x+m+E;this.direction==="rtl"&&(j=this.width-j-A),i.fillStyle=O,M&&O&&i.fillRect(j,S+T*d+g,A-N,this.fontSize/15),C+=c}this._removeShadow(i)}},_getFontDeclaration:function(i,l){var c=i||this,d=this.fontFamily,p=n.Text.genericFonts.indexOf(d.toLowerCase())>-1,m=d===void 0||d.indexOf("'")>-1||d.indexOf(",")>-1||d.indexOf('"')>-1||p?c.fontFamily:'"'+c.fontFamily+'"';return[n.isLikelyNode?c.fontWeight:c.fontStyle,n.isLikelyNode?c.fontStyle:c.fontWeight,l?this.CACHE_FONT_SIZE+"px":c.fontSize+"px",m].join(" ")},render:function(i){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",i))},_splitTextIntoLines:function(i){for(var l=i.split(this._reNewline),c=new Array(l.length),d=[`
`],p=[],m=0;m<l.length;m++)c[m]=n.util.string.graphemeSplit(l[m]),p=p.concat(c[m],d);return p.pop(),{_unwrappedLines:c,lines:l,graphemeText:p,graphemeLines:c}},toObject:function(i){var l=o.concat(i),c=this.callSuper("toObject",l);return c.styles=n.util.stylesToArray(this.styles,this.text),c.path&&(c.path=this.path.toObject()),c},set:function(i,l){this.callSuper("set",i,l);var c=!1,d=!1;if(typeof i=="object")for(var p in i)p==="path"&&this.setPathInfo(),c=c||this._dimensionAffectingProps.indexOf(p)!==-1,d=d||p==="path";else c=this._dimensionAffectingProps.indexOf(i)!==-1,d=i==="path";return d&&this.setPathInfo(),c&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),n.Text.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),n.Text.DEFAULT_SVG_FONT_SIZE=16,n.Text.fromElement=function(i,l,c){if(!i)return l(null);var d=n.parseAttributes(i,n.Text.ATTRIBUTE_NAMES),p=d.textAnchor||"left";if(c=n.util.object.extend(c?u(c):{},d),c.top=c.top||0,c.left=c.left||0,d.textDecoration){var m=d.textDecoration;m.indexOf("underline")!==-1&&(c.underline=!0),m.indexOf("overline")!==-1&&(c.overline=!0),m.indexOf("line-through")!==-1&&(c.linethrough=!0),delete c.textDecoration}"dx"in d&&(c.left+=d.dx),"dy"in d&&(c.top+=d.dy),"fontSize"in c||(c.fontSize=n.Text.DEFAULT_SVG_FONT_SIZE);var g="";"textContent"in i?g=i.textContent:"firstChild"in i&&i.firstChild!==null&&"data"in i.firstChild&&i.firstChild.data!==null&&(g=i.firstChild.data),g=g.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var b=c.strokeWidth;c.strokeWidth=0;var y=new n.Text(g,c),w=y.getScaledHeight()/y.height,x=(y.height+y.strokeWidth)*y.lineHeight-y.height,C=x*w,S=y.getScaledHeight()+C,E=0;p==="center"&&(E=y.getScaledWidth()/2),p==="right"&&(E=y.getScaledWidth()),y.set({left:y.left-E,top:y.top-(S-y.fontSize*(.07+y._fontSizeFraction))/y.lineHeight,strokeWidth:typeof b<"u"?b:1}),l(y)},n.Text.fromObject=function(i,l){var c=u(i),d=i.path;return delete c.path,n.Object._fromObject("Text",c,function(p){p.styles=n.util.stylesFromArray(i.styles,i.text),d?n.Object._fromObject("Path",d,function(m){p.set("path",m),l(p)},"path"):l(p)},"text")},n.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],n.util.createAccessors&&n.util.createAccessors(n.Text)}(e),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(h){if(!this.styles||typeof h<"u"&&!this.styles[h])return!0;var n=typeof h>"u"?this.styles:{line:this.styles[h]};for(var u in n)for(var o in n[u])for(var i in n[u][o])return!1;return!0},styleHas:function(h,n){if(!this.styles||!h||h===""||typeof n<"u"&&!this.styles[n])return!1;var u=typeof n>"u"?this.styles:{0:this.styles[n]};for(var o in u)for(var i in u[o])if(typeof u[o][i][h]<"u")return!0;return!1},cleanStyle:function(h){if(!this.styles||!h||h==="")return!1;var n=this.styles,u=0,o,i,l=!0,c=0,d;for(var p in n){o=0;for(var m in n[p]){var d=n[p][m],g=d.hasOwnProperty(h);u++,g?(i?d[h]!==i&&(l=!1):i=d[h],d[h]===this[h]&&delete d[h]):l=!1,Object.keys(d).length!==0?o++:delete n[p][m]}o===0&&delete n[p]}for(var b=0;b<this._textLines.length;b++)c+=this._textLines[b].length;l&&u===c&&(this[h]=i,this.removeStyle(h))},removeStyle:function(h){if(!(!this.styles||!h||h==="")){var n=this.styles,u,o,i;for(o in n){u=n[o];for(i in u)delete u[i][h],Object.keys(u[i]).length===0&&delete u[i];Object.keys(u).length===0&&delete n[o]}}},_extendStyles:function(h,n){var u=this.get2DCursorLocation(h);this._getLineStyle(u.lineIndex)||this._setLineStyle(u.lineIndex),this._getStyleDeclaration(u.lineIndex,u.charIndex)||this._setStyleDeclaration(u.lineIndex,u.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(u.lineIndex,u.charIndex),n)},get2DCursorLocation:function(h,n){typeof h>"u"&&(h=this.selectionStart);for(var u=n?this._unwrappedTextLines:this._textLines,o=u.length,i=0;i<o;i++){if(h<=u[i].length)return{lineIndex:i,charIndex:h};h-=u[i].length+this.missingNewlineOffset(i)}return{lineIndex:i-1,charIndex:u[i-1].length<h?u[i-1].length:h}},getSelectionStyles:function(h,n,u){typeof h>"u"&&(h=this.selectionStart||0),typeof n>"u"&&(n=this.selectionEnd||h);for(var o=[],i=h;i<n;i++)o.push(this.getStyleAtPosition(i,u));return o},getStyleAtPosition:function(h,n){var u=this.get2DCursorLocation(h),o=n?this.getCompleteStyleDeclaration(u.lineIndex,u.charIndex):this._getStyleDeclaration(u.lineIndex,u.charIndex);return o||{}},setSelectionStyles:function(h,n,u){typeof n>"u"&&(n=this.selectionStart||0),typeof u>"u"&&(u=this.selectionEnd||n);for(var o=n;o<u;o++)this._extendStyles(o,h);return this._forceClearCache=!0,this},_getStyleDeclaration:function(h,n){var u=this.styles&&this.styles[h];return u?u[n]:null},getCompleteStyleDeclaration:function(h,n){for(var u=this._getStyleDeclaration(h,n)||{},o={},i,l=0;l<this._styleProperties.length;l++)i=this._styleProperties[l],o[i]=typeof u[i]>"u"?this[i]:u[i];return o},_setStyleDeclaration:function(h,n,u){this.styles[h][n]=u},_deleteStyleDeclaration:function(h,n){delete this.styles[h][n]},_getLineStyle:function(h){return!!this.styles[h]},_setLineStyle:function(h){this.styles[h]={}},_deleteLineStyle:function(h){delete this.styles[h]}})}(),function(){function h(n){n.textDecoration&&(n.textDecoration.indexOf("underline")>-1&&(n.underline=!0),n.textDecoration.indexOf("line-through")>-1&&(n.linethrough=!0),n.textDecoration.indexOf("overline")>-1&&(n.overline=!0),delete n.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(n,u){this.callSuper("initialize",n,u),this.initBehavior()},setSelectionStart:function(n){n=Math.max(n,0),this._updateAndFire("selectionStart",n)},setSelectionEnd:function(n){n=Math.min(n,this.text.length),this._updateAndFire("selectionEnd",n)},_updateAndFire:function(n,u){this[n]!==u&&(this._fireSelectionChanged(),this[n]=u),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(n){this.clearContextTop(),this.callSuper("render",n),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(n){this.callSuper("_render",n)},clearContextTop:function(n){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var u=this.canvas.contextTop,o=this.canvas.viewportTransform;u.save(),u.transform(o[0],o[1],o[2],o[3],o[4],o[5]),this.transform(u),this._clearTextArea(u),n||u.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var n=this._getCursorBoundaries(),u=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(n,u):this.renderSelection(n,u),u.restore()}},_clearTextArea:function(n){var u=this.width+4,o=this.height+4;n.clearRect(-u/2,-o/2,u,o)},_getCursorBoundaries:function(n){typeof n>"u"&&(n=this.selectionStart);var u=this._getLeftOffset(),o=this._getTopOffset(),i=this._getCursorBoundariesOffsets(n);return{left:u,top:o,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(n){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var u,o,i,l=0,c=0,d,p=this.get2DCursorLocation(n);i=p.charIndex,o=p.lineIndex;for(var m=0;m<o;m++)l+=this.getHeightOfLine(m);u=this._getLineLeftOffset(o);var g=this.__charBounds[o][i];return g&&(c=g.left),this.charSpacing!==0&&i===this._textLines[o].length&&(c-=this._getWidthOfCharSpacing()),d={top:l,left:u+(c>0?c:0)},this.direction==="rtl"&&(d.left*=-1),this.cursorOffsetCache=d,this.cursorOffsetCache},renderCursor:function(n,u){var o=this.get2DCursorLocation(),i=o.lineIndex,l=o.charIndex>0?o.charIndex-1:0,c=this.getValueOfPropertyAt(i,l,"fontSize"),d=this.scaleX*this.canvas.getZoom(),p=this.cursorWidth/d,m=n.topOffset,g=this.getValueOfPropertyAt(i,l,"deltaY");m+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-c*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(n,u),u.fillStyle=this.cursorColor||this.getValueOfPropertyAt(i,l,"fill"),u.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,u.fillRect(n.left+n.leftOffset-p/2,m+n.top+g,p,c)},renderSelection:function(n,u){for(var o=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,l=this.textAlign.indexOf("justify")!==-1,c=this.get2DCursorLocation(o),d=this.get2DCursorLocation(i),p=c.lineIndex,m=d.lineIndex,g=c.charIndex<0?0:c.charIndex,b=d.charIndex<0?0:d.charIndex,y=p;y<=m;y++){var w=this._getLineLeftOffset(y)||0,x=this.getHeightOfLine(y),C=0,S=0,E=0;if(y===p&&(S=this.__charBounds[p][g].left),y>=p&&y<m)E=l&&!this.isEndOfWrapping(y)?this.width:this.getLineWidth(y)||5;else if(y===m)if(b===0)E=this.__charBounds[m][b].left;else{var A=this._getWidthOfCharSpacing();E=this.__charBounds[m][b-1].left+this.__charBounds[m][b-1].width-A}C=x,(this.lineHeight<1||y===m&&this.lineHeight>1)&&(x/=this.lineHeight);var D=n.left+w+S,M=E-S,B=x,O=0;this.inCompositionMode?(u.fillStyle=this.compositionColor||"black",B=1,O=x):u.fillStyle=this.selectionColor,this.direction==="rtl"&&(D=this.width-D-M),u.fillRect(D,n.top+n.topOffset+O,M,B),n.topOffset+=C}},getCurrentCharFontSize:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fontSize")},getCurrentCharColor:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fill")},_getCurrentCharIndex:function(){var n=this.get2DCursorLocation(this.selectionStart,!0),u=n.charIndex>0?n.charIndex-1:0;return{l:n.lineIndex,c:u}}}),t.IText.fromObject=function(n,u){var o=t.util.stylesFromArray(n.styles,n.text),i=Object.assign({},n,{styles:o});if(h(i),i.styles)for(var l in i.styles)for(var c in i.styles[l])h(i.styles[l][c]);t.Object._fromObject("IText",i,u,"text")}}(),function(){var h=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var n=this;this.on("added",function(){var u=n.canvas;u&&(u._hasITextHandlers||(u._hasITextHandlers=!0,n._initCanvasHandlers(u)),u._iTextInstances=u._iTextInstances||[],u._iTextInstances.push(n))})},initRemovedHandler:function(){var n=this;this.on("removed",function(){var u=n.canvas;u&&(u._iTextInstances=u._iTextInstances||[],t.util.removeFromArray(u._iTextInstances,n),u._iTextInstances.length===0&&(u._hasITextHandlers=!1,n._removeCanvasHandlers(u)))})},_initCanvasHandlers:function(n){n._mouseUpITextHandler=function(){n._iTextInstances&&n._iTextInstances.forEach(function(u){u.__isMousedown=!1})},n.on("mouse:up",n._mouseUpITextHandler)},_removeCanvasHandlers:function(n){n.off("mouse:up",n._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(n,u,o,i){var l;return l={isAborted:!1,abort:function(){this.isAborted=!0}},n.animate("_currentCursorOpacity",u,{duration:o,onComplete:function(){l.isAborted||n[i]()},onChange:function(){n.canvas&&n.selectionStart===n.selectionEnd&&n.renderCursorOrSelection()},abort:function(){return l.isAborted}}),l},_onTickComplete:function(){var n=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){n._currentTickCompleteState=n._animateCursor(n,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(n){var u=this,o=n?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){u._tick()},o)},abortCursorAnimation:function(){var n=this._currentTickState||this._currentTickCompleteState,u=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,n&&u&&u.clearContext(u.contextTop||u.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(n){var u=0,o=n-1;if(this._reSpace.test(this._text[o]))for(;this._reSpace.test(this._text[o]);)u++,o--;for(;/\S/.test(this._text[o])&&o>-1;)u++,o--;return n-u},findWordBoundaryRight:function(n){var u=0,o=n;if(this._reSpace.test(this._text[o]))for(;this._reSpace.test(this._text[o]);)u++,o++;for(;/\S/.test(this._text[o])&&o<this._text.length;)u++,o++;return n+u},findLineBoundaryLeft:function(n){for(var u=0,o=n-1;!/\n/.test(this._text[o])&&o>-1;)u++,o--;return n-u},findLineBoundaryRight:function(n){for(var u=0,o=n;!/\n/.test(this._text[o])&&o<this._text.length;)u++,o++;return n+u},searchWordBoundary:function(n,u){for(var o=this._text,i=this._reSpace.test(o[n])?n-1:n,l=o[i],c=t.reNonWord;!c.test(l)&&i>0&&i<o.length;)i+=u,l=o[i];return c.test(l)&&(i+=u===1?0:1),i},selectWord:function(n){n=n||this.selectionStart;var u=this.searchWordBoundary(n,-1),o=this.searchWordBoundary(n,1);this.selectionStart=u,this.selectionEnd=o,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(n){n=n||this.selectionStart;var u=this.findLineBoundaryLeft(n),o=this.findLineBoundaryRight(n);return this.selectionStart=u,this.selectionEnd=o,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(n){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(n),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(n){n._iTextInstances&&n._iTextInstances.forEach(function(u){u.selected=!1,u.isEditing&&u.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(n){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var u=this.getSelectionStartFromPointer(n.e),o=this.selectionStart,i=this.selectionEnd;(u!==this.__selectionStartOnMouseDown||o===i)&&(o===u||i===u)||(u>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=u):(this.selectionStart=u,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==o||this.selectionEnd!==i)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(n,u,o){var i=o.slice(0,n),l=t.util.string.graphemeSplit(i).length;if(n===u)return{selectionStart:l,selectionEnd:l};var c=o.slice(n,u),d=t.util.string.graphemeSplit(c).length;return{selectionStart:l,selectionEnd:l+d}},fromGraphemeToStringSelection:function(n,u,o){var i=o.slice(0,n),l=i.join("").length;if(n===u)return{selectionStart:l,selectionEnd:l};var c=o.slice(n,u),d=c.join("").length;return{selectionStart:l,selectionEnd:l+d}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var n=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=n.selectionStart,this.hiddenTextarea.selectionEnd=n.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var n=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=n.selectionEnd,this.inCompositionMode||(this.selectionStart=n.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var n=this._calcTextareaPosition();this.hiddenTextarea.style.left=n.left,this.hiddenTextarea.style.top=n.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var n=this.inCompositionMode?this.compositionStart:this.selectionStart,u=this._getCursorBoundaries(n),o=this.get2DCursorLocation(n),i=o.lineIndex,l=o.charIndex,c=this.getValueOfPropertyAt(i,l,"fontSize")*this.lineHeight,d=u.leftOffset,p=this.calcTransformMatrix(),m={x:u.left+d,y:u.top+u.topOffset+c},g=this.canvas.getRetinaScaling(),b=this.canvas.upperCanvasEl,y=b.width/g,w=b.height/g,x=y-c,C=w-c,S=b.clientWidth/y,E=b.clientHeight/w;return m=t.util.transformPoint(m,p),m=t.util.transformPoint(m,this.canvas.viewportTransform),m.x*=S,m.y*=E,m.x<0&&(m.x=0),m.x>x&&(m.x=x),m.y<0&&(m.y=0),m.y>C&&(m.y=C),m.x+=this.canvas._offset.left,m.y+=this.canvas._offset.top,{left:m.x+"px",top:m.y+"px",fontSize:c+"px",charHeight:c}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var n=this._textBeforeEdit!==this.text,u=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,u&&(u.blur&&u.blur(),u.parentNode&&u.parentNode.removeChild(u)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),n&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),n&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var n in this.styles)this._textLines[n]||delete this.styles[n]},removeStyleFromTo:function(n,u){var o=this.get2DCursorLocation(n,!0),i=this.get2DCursorLocation(u,!0),l=o.lineIndex,c=o.charIndex,d=i.lineIndex,p=i.charIndex,m,g;if(l!==d){if(this.styles[l])for(m=c;m<this._unwrappedTextLines[l].length;m++)delete this.styles[l][m];if(this.styles[d])for(m=p;m<this._unwrappedTextLines[d].length;m++)g=this.styles[d][m],g&&(this.styles[l]||(this.styles[l]={}),this.styles[l][c+m-p]=g);for(m=l+1;m<=d;m++)delete this.styles[m];this.shiftLineStyles(d,l-d)}else if(this.styles[l]){g=this.styles[l];var b=p-c,y,w;for(m=c;m<p;m++)delete g[m];for(w in this.styles[l])y=parseInt(w,10),y>=p&&(g[y-b]=g[w],delete g[w])}},shiftLineStyles:function(n,u){var o=h(this.styles);for(var i in this.styles){var l=parseInt(i,10);l>n&&(this.styles[l+u]=o[l],o[l-u]||delete this.styles[l])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(n,u,o,i){var l,c={},d=!1,p=this._unwrappedTextLines[n].length===u;o||(o=1),this.shiftLineStyles(n,o),this.styles[n]&&(l=this.styles[n][u===0?u:u-1]);for(var m in this.styles[n]){var g=parseInt(m,10);g>=u&&(d=!0,c[g-u]=this.styles[n][m],p&&u===0||delete this.styles[n][m])}var b=!1;for(d&&!p&&(this.styles[n+o]=c,b=!0),b&&o--;o>0;)i&&i[o-1]?this.styles[n+o]={0:h(i[o-1])}:l?this.styles[n+o]={0:h(l)}:delete this.styles[n+o],o--;this._forceClearCache=!0},insertCharStyleObject:function(n,u,o,i){this.styles||(this.styles={});var l=this.styles[n],c=l?h(l):{};o||(o=1);for(var d in c){var p=parseInt(d,10);p>=u&&(l[p+o]=c[p],c[p-o]||delete l[p])}if(this._forceClearCache=!0,i){for(;o--;)!Object.keys(i[o]).length||(this.styles[n]||(this.styles[n]={}),this.styles[n][u+o]=h(i[o]));return}if(!!l)for(var m=l[u?u-1:1];m&&o--;)this.styles[n][u+o]=h(m)},insertNewStyleBlock:function(n,u,o){for(var i=this.get2DCursorLocation(u,!0),l=[0],c=0,d=0;d<n.length;d++)n[d]===`
`?(c++,l[c]=0):l[c]++;l[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,l[0],o),o=o&&o.slice(l[0]+1)),c&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+l[0],c);for(var d=1;d<c;d++)l[d]>0?this.insertCharStyleObject(i.lineIndex+d,0,l[d],o):o&&this.styles[i.lineIndex+d]&&o[0]&&(this.styles[i.lineIndex+d][0]=o[0]),o=o&&o.slice(l[d]+1);l[d]>0&&this.insertCharStyleObject(i.lineIndex+d,0,l[d],o)},setSelectionStartEndWithShift:function(n,u,o){o<=n?(u===n?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=n),this.selectionStart=o):o>n&&o<u?this._selectionDirection==="right"?this.selectionEnd=o:this.selectionStart=o:(u===n?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=u),this.selectionEnd=o)},setSelectionInBoundaries:function(){var n=this.text.length;this.selectionStart>n?this.selectionStart=n:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>n?this.selectionEnd=n:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(h){if(!!this.canvas){this.__newClickTime=+new Date;var n=h.pointer;this.isTripleClick(n)&&(this.fire("tripleclick",h),this._stopEvent(h.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=n,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(h){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===h.x&&this.__lastPointer.y===h.y},_stopEvent:function(h){h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(h){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(h.e))},tripleClickHandler:function(h){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(h.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(h.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(h){if(this.__isMousedown=!1,!(!this.editable||this.group||h.transform&&h.transform.actionPerformed||h.e.button&&h.e.button!==1)){if(this.canvas){var n=this.canvas._activeObject;if(n&&n!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(h.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(h){var n=this.getSelectionStartFromPointer(h),u=this.selectionStart,o=this.selectionEnd;h.shiftKey?this.setSelectionStartEndWithShift(u,o,n):(this.selectionStart=n,this.selectionEnd=n),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(h){for(var n=this.getLocalPointer(h),u=0,o=0,i=0,l=0,c=0,d,p,m=0,g=this._textLines.length;m<g&&i<=n.y;m++)i+=this.getHeightOfLine(m)*this.scaleY,c=m,m>0&&(l+=this._textLines[m-1].length+this.missingNewlineOffset(m-1));d=this._getLineLeftOffset(c),o=d*this.scaleX,p=this._textLines[c],this.direction==="rtl"&&(n.x=this.width*this.scaleX-n.x+o);for(var b=0,y=p.length;b<y&&(u=o,o+=this.__charBounds[c][b].kernedWidth*this.scaleX,o<=n.x);b++)l++;return this._getNewSelectionStartFromOffset(n,u,o,l,y)},_getNewSelectionStartFromOffset:function(h,n,u,o,i){var l=h.x-n,c=u-h.x,d=c>l||c<0?0:1,p=o+d;return this.flipX&&(p=i-p),p>this._text.length&&(p=this._text.length),p}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var h=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+h.top+"; left: "+h.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+h.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(h){if(!!this.isEditing){var n=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(h.keyCode in n)this[n[h.keyCode]](h);else if(h.keyCode in this.ctrlKeysMapDown&&(h.ctrlKey||h.metaKey))this[this.ctrlKeysMapDown[h.keyCode]](h);else return;h.stopImmediatePropagation(),h.preventDefault(),h.keyCode>=33&&h.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(h){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(h.keyCode in this.ctrlKeysMapUp&&(h.ctrlKey||h.metaKey))this[this.ctrlKeysMapUp[h.keyCode]](h);else return;h.stopImmediatePropagation(),h.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(h){var n=this.fromPaste;if(this.fromPaste=!1,h&&h.stopPropagation(),!!this.isEditing){var u=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,o=this._text.length,i=u.length,l,c,d=i-o,p=this.selectionStart,m=this.selectionEnd,g=p!==m,b,y,w;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var x=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),C=p>x.selectionStart;g?(l=this._text.slice(p,m),d+=m-p):i<o&&(C?l=this._text.slice(m+d,m):l=this._text.slice(p,p-d)),c=u.slice(x.selectionEnd-d,x.selectionEnd),l&&l.length&&(c.length&&(b=this.getSelectionStyles(p,p+1,!1),b=c.map(function(){return b[0]})),g?(y=p,w=m):C?(y=m-l.length,w=m):(y=m,w=m+l.length),this.removeStyleFromTo(y,w)),c.length&&(n&&c.join("")===t.copiedText&&!t.disableStyleCopyPaste&&(b=t.copiedTextStyle),this.insertNewStyleBlock(c,p,b)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(h){this.compositionStart=h.target.selectionStart,this.compositionEnd=h.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(h){return h&&h.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(h,n){var u=this._getLineLeftOffset(h),o;return n>0&&(o=this.__charBounds[h][n-1],u+=o.left+o.width),u},getDownCursorOffset:function(h,n){var u=this._getSelectionForOffset(h,n),o=this.get2DCursorLocation(u),i=o.lineIndex;if(i===this._textLines.length-1||h.metaKey||h.keyCode===34)return this._text.length-u;var l=o.charIndex,c=this._getWidthBeforeCursor(i,l),d=this._getIndexOnLine(i+1,c),p=this._textLines[i].slice(l);return p.length+d+1+this.missingNewlineOffset(i)},_getSelectionForOffset:function(h,n){return h.shiftKey&&this.selectionStart!==this.selectionEnd&&n?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(h,n){var u=this._getSelectionForOffset(h,n),o=this.get2DCursorLocation(u),i=o.lineIndex;if(i===0||h.metaKey||h.keyCode===33)return-u;var l=o.charIndex,c=this._getWidthBeforeCursor(i,l),d=this._getIndexOnLine(i-1,c),p=this._textLines[i].slice(0,l),m=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+d-p.length+(1-m)},_getIndexOnLine:function(h,n){for(var u=this._textLines[h],o=this._getLineLeftOffset(h),i=o,l=0,c,d,p=0,m=u.length;p<m;p++)if(c=this.__charBounds[h][p].width,i+=c,i>n){d=!0;var g=i-c,b=i,y=Math.abs(g-n),w=Math.abs(b-n);l=w<y?p:p-1;break}return d||(l=u.length-1),l},moveCursorDown:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",h)},moveCursorUp:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",h)},_moveCursorUpOrDown:function(h,n){var u="get"+h+"CursorOffset",o=this[u](n,this._selectionDirection==="right");n.shiftKey?this.moveCursorWithShift(o):this.moveCursorWithoutShift(o),o!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(h){var n=this._selectionDirection==="left"?this.selectionStart+h:this.selectionEnd+h;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,n),h!==0},moveCursorWithoutShift:function(h){return h<0?(this.selectionStart+=h,this.selectionEnd=this.selectionStart):(this.selectionEnd+=h,this.selectionStart=this.selectionEnd),h!==0},moveCursorLeft:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",h)},_move:function(h,n,u){var o;if(h.altKey)o=this["findWordBoundary"+u](this[n]);else if(h.metaKey||h.keyCode===35||h.keyCode===36)o=this["findLineBoundary"+u](this[n]);else return this[n]+=u==="Left"?-1:1,!0;if(typeof o<"u"&&this[n]!==o)return this[n]=o,!0},_moveLeft:function(h,n){return this._move(h,n,"Left")},_moveRight:function(h,n){return this._move(h,n,"Right")},moveCursorLeftWithoutShift:function(h){var n=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(n=this._moveLeft(h,"selectionStart")),this.selectionEnd=this.selectionStart,n},moveCursorLeftWithShift:function(h){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(h,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(h,"selectionStart")},moveCursorRight:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",h)},_moveCursorLeftOrRight:function(h,n){var u="moveCursor"+h+"With";this._currentCursorOpacity=1,n.shiftKey?u+="Shift":u+="outShift",this[u](n)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(h){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(h,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(h,"selectionEnd")},moveCursorRightWithoutShift:function(h){var n=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(n=this._moveRight(h,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,n},removeChars:function(h,n){typeof n>"u"&&(n=h+1),this.removeStyleFromTo(h,n),this._text.splice(h,n-h),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(h,n,u,o){typeof o>"u"&&(o=u),o>u&&this.removeStyleFromTo(u,o);var i=t.util.string.graphemeSplit(h);this.insertNewStyleBlock(i,u,n),this._text=[].concat(this._text.slice(0,u),i,this._text.slice(o)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var h=t.util.toFixed,n=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var u=this._getSVGLeftTopOffsets(),o=this._getSVGTextAndBg(u.textTop,u.textLeft);return this._wrapSVGTextAndBg(o)},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(),{reviver:u,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(u){var o=!0,i=this.getSvgTextDecoration(this);return[u.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",i?'text-decoration="'+i+'" ':"",'style="',this.getSvgStyles(o),'"',this.addPaintOrder()," >",u.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(u,o){var i=[],l=[],c=u,d;this._setSVGBg(l);for(var p=0,m=this._textLines.length;p<m;p++)d=this._getLineLeftOffset(p),(this.textBackgroundColor||this.styleHas("textBackgroundColor",p))&&this._setSVGTextLineBg(l,p,o+d,c),this._setSVGTextLineText(i,p,o+d,c),c+=this.getHeightOfLine(p);return{textSpans:i,textBgRects:l}},_createTextCharSpan:function(u,o,i,l){var c=u!==u.trim()||u.match(n),d=this.getSvgSpanStyles(o,c),p=d?'style="'+d+'"':"",m=o.deltaY,g="",b=t.Object.NUM_FRACTION_DIGITS;return m&&(g=' dy="'+h(m,b)+'" '),['<tspan x="',h(i,b),'" y="',h(l,b),'" ',g,p,">",t.util.string.escapeXml(u),"</tspan>"].join("")},_setSVGTextLineText:function(u,o,i,l){var c=this.getHeightOfLine(o),d=this.textAlign.indexOf("justify")!==-1,p,m,g="",b,y,w=0,x=this._textLines[o],C;l+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var S=0,E=x.length-1;S<=E;S++)C=S===E||this.charSpacing,g+=x[S],b=this.__charBounds[o][S],w===0?(i+=b.kernedWidth-b.width,w+=b.width):w+=b.kernedWidth,d&&!C&&this._reSpaceAndTab.test(x[S])&&(C=!0),C||(p=p||this.getCompleteStyleDeclaration(o,S),m=this.getCompleteStyleDeclaration(o,S+1),C=t.util.hasStyleChanged(p,m,!0)),C&&(y=this._getStyleDeclaration(o,S)||{},u.push(this._createTextCharSpan(g,y,i,l)),g="",p=m,i+=w,w=0)},_pushTextBgRect:function(u,o,i,l,c,d){var p=t.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(o),' x="',h(i,p),'" y="',h(l,p),'" width="',h(c,p),'" height="',h(d,p),`"></rect>
`)},_setSVGTextLineBg:function(u,o,i,l){for(var c=this._textLines[o],d=this.getHeightOfLine(o)/this.lineHeight,p=0,m=0,g,b,y=this.getValueOfPropertyAt(o,0,"textBackgroundColor"),w=0,x=c.length;w<x;w++)g=this.__charBounds[o][w],b=this.getValueOfPropertyAt(o,w,"textBackgroundColor"),b!==y?(y&&this._pushTextBgRect(u,y,i+m,l,p,d),m=g.left,p=g.width,y=b):p+=g.kernedWidth;b&&this._pushTextBgRect(u,b,i+m,l,p,d)},_getFillAttributes:function(u){var o=u&&typeof u=="string"?new t.Color(u):"";return!o||!o.getSource()||o.getAlpha()===1?'fill="'+u+'"':'opacity="'+o.getAlpha()+'" fill="'+o.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(u){for(var o=0,i=0,l=0;l<u;l++)o+=this.getHeightOfLine(l);return i=this.getHeightOfLine(l),{lineTop:o,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(u){var o=t.Object.prototype.getSvgStyles.call(this,u);return o+" white-space: pre;"}})}(),function(h){var n=h.fabric||(h.fabric={});n.Textbox=n.util.createClass(n.IText,n.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:n.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(u){for(var o=0,i=0,l=0,c={},d=0;d<u.graphemeLines.length;d++)u.graphemeText[l]===`
`&&d>0?(i=0,l++,o++):!this.splitByGrapheme&&this._reSpaceAndTab.test(u.graphemeText[l])&&d>0&&(i++,l++),c[d]={line:o,offset:i},l+=u.graphemeLines[d].length,i+=u.graphemeLines[d].length;return c},styleHas:function(u,o){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[o];i&&(o=i.line)}return n.Text.prototype.styleHas.call(this,u,o)},isEmptyStyles:function(u){if(!this.styles)return!0;var o=0,i=u+1,l,c,d=!1,p=this._styleMap[u],m=this._styleMap[u+1];p&&(u=p.line,o=p.offset),m&&(i=m.line,d=i===u,l=m.offset),c=typeof u>"u"?this.styles:{line:this.styles[u]};for(var g in c)for(var b in c[g])if(b>=o&&(!d||b<l))for(var y in c[g][b])return!1;return!0},_getStyleDeclaration:function(u,o){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[u];if(!i)return null;u=i.line,o=i.offset+o}return this.callSuper("_getStyleDeclaration",u,o)},_setStyleDeclaration:function(u,o,i){var l=this._styleMap[u];u=l.line,o=l.offset+o,this.styles[u][o]=i},_deleteStyleDeclaration:function(u,o){var i=this._styleMap[u];u=i.line,o=i.offset+o,delete this.styles[u][o]},_getLineStyle:function(u){var o=this._styleMap[u];return!!this.styles[o.line]},_setLineStyle:function(u){var o=this._styleMap[u];this.styles[o.line]={}},_wrapText:function(u,o){var i=[],l;for(this.isWrapping=!0,l=0;l<u.length;l++)i=i.concat(this._wrapLine(u[l],l,o));return this.isWrapping=!1,i},_measureWord:function(u,o,i){var l=0,c,d=!0;i=i||0;for(var p=0,m=u.length;p<m;p++){var g=this._getGraphemeBox(u[p],o,p+i,c,d);l+=g.kernedWidth,c=u[p]}return l},_wrapLine:function(u,o,i,D){var c=0,d=this.splitByGrapheme,p=[],m=[],g=d?n.util.string.graphemeSplit(u):u.split(this._wordJoiners),b="",y=0,w=d?"":" ",x=0,C=0,S=0,E=!0,A=this._getWidthOfCharSpacing(),D=D||0;g.length===0&&g.push([]),i-=D;for(var M=0;M<g.length;M++)b=d?g[M]:n.util.string.graphemeSplit(g[M]),x=this._measureWord(b,o,y),y+=b.length,c+=C+x-A,c>i&&!E?(p.push(m),m=[],c=x,E=!0):c+=A,!E&&!d&&m.push(w),m=m.concat(b),C=d?0:this._measureWord([w],o,y),y++,E=!1,x>S&&(S=x);return M&&p.push(m),S+D>this.dynamicMinWidth&&(this.dynamicMinWidth=S-A+D),p},isEndOfWrapping:function(u){return!this._styleMap[u+1]||this._styleMap[u+1].line!==this._styleMap[u].line},missingNewlineOffset:function(u){return this.splitByGrapheme?this.isEndOfWrapping(u)?1:0:1},_splitTextIntoLines:function(u){for(var o=n.Text.prototype._splitTextIntoLines.call(this,u),i=this._wrapText(o.lines,this.width),l=new Array(i.length),c=0;c<i.length;c++)l[c]=i[c].join("");return o.lines=l,o.graphemeLines=i,o},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var u={};for(var o in this._styleMap)this._textLines[o]&&(u[this._styleMap[o].line]=1);for(var o in this.styles)u[o]||delete this.styles[o]},toObject:function(u){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(u))}}),n.Textbox.fromObject=function(u,o){var i=n.util.stylesFromArray(u.styles,u.text),l=Object.assign({},u,{styles:i});return n.Object._fromObject("Textbox",l,o,"text")}}(e),function(){var h=t.controlsUtils,n=h.scaleSkewCursorStyleHandler,u=h.scaleCursorStyleHandler,o=h.scalingEqually,i=h.scalingYOrSkewingX,l=h.scalingXOrSkewingY,c=h.scaleOrSkewActionName,d=t.Object.prototype.controls;if(d.ml=new t.Control({x:-.5,y:0,cursorStyleHandler:n,actionHandler:l,getActionName:c}),d.mr=new t.Control({x:.5,y:0,cursorStyleHandler:n,actionHandler:l,getActionName:c}),d.mb=new t.Control({x:0,y:.5,cursorStyleHandler:n,actionHandler:i,getActionName:c}),d.mt=new t.Control({x:0,y:-.5,cursorStyleHandler:n,actionHandler:i,getActionName:c}),d.tl=new t.Control({x:-.5,y:-.5,cursorStyleHandler:u,actionHandler:o}),d.tr=new t.Control({x:.5,y:-.5,cursorStyleHandler:u,actionHandler:o}),d.bl=new t.Control({x:-.5,y:.5,cursorStyleHandler:u,actionHandler:o}),d.br=new t.Control({x:.5,y:.5,cursorStyleHandler:u,actionHandler:o}),d.mtr=new t.Control({x:0,y:-.5,actionHandler:h.rotationWithSnapping,cursorStyleHandler:h.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),t.Textbox){var p=t.Textbox.prototype.controls={};p.mtr=d.mtr,p.tr=d.tr,p.br=d.br,p.tl=d.tl,p.bl=d.bl,p.mt=d.mt,p.mb=d.mb,p.mr=new t.Control({x:.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:n,actionName:"resizing"}),p.ml=new t.Control({x:-.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:n,actionName:"resizing"})}}()})(Pr);let da=!1,hr,Ei,_i;const bf=()=>{da=!1},qi=e=>{e.off("mouse:down"),e.off("mouse:move"),e.off("mouse:up")},wW=(e,t)=>r=>{da=!0;let a=t.getPointer(r);hr=new Pr.fabric.Line([a.x,a.y,a.x,a.y],{strokeWidth:e().width,stroke:e().brush,selectable:!1}),t.add(hr),t.requestRenderAll()},xW=e=>t=>{if(da){const r=e.getPointer(t);hr.set({x2:r.x,y2:r.y}),hr.setCoords(),e.requestRenderAll()}};function CW(e,t){return r=>{da=!0;const a=t.getPointer(r);Ei=a.x,_i=a.y,hr=new Pr.fabric.Rect({stroke:e().brush,strokeWidth:e().width,fill:e().fill?e().fill:"transparent",left:Ei,top:_i,width:0,height:0,selectable:!1}),t.add(hr),hr.on("mousedown",s=>{e().tool==="eraser"&&t.remove(s.target)})}}function SW(e){return t=>{if(da){const r=e.getPointer(t);r.x<Ei&&hr.set("left",r.x),r.y<_i&&hr.set("top",r.y),hr.set({width:Math.abs(r.x-Ei),height:Math.abs(r.y-_i)}),hr.setCoords(),e.renderAll()}}}function EW(e,t){return r=>{da=!0;const a=t.getPointer(r);Ei=a.x,_i=a.y,hr=new Pr.fabric.Ellipse({stroke:e().brush,strokeWidth:e().width,fill:e().fill?e().fill:"transparent",left:Ei,top:_i,cornerSize:7,objectCaching:!1,selectable:!1}),t.add(hr)}}function _W(e){return t=>{if(da){const r=e.getPointer(t);r.x<Ei&&hr.set("left",r.x),r.y<_i&&hr.set("top",r.y),hr.set({rx:Math.abs(r.x-Ei)/2,ry:Math.abs(r.y-_i)/2}),hr.setCoords(),e.renderAll()}}}const DW=e=>{e.getActiveObjects().forEach(r=>{e.remove(r)})},AW=(e,t,r)=>{const a=new Pr.fabric.Canvas(e,{height:r,width:t});return Pr.fabric.Object.prototype.transparentCorners=!1,Pr.fabric.Object.prototype.cornerStyle="circle",Pr.fabric.Object.prototype.borderColor=sn.background300,Pr.fabric.Object.prototype.cornerColor=sn.background300,Pr.fabric.Object.prototype.cornerSize=6,Pr.fabric.Object.prototype.padding=10,Pr.fabric.Object.prototype.borderDashArray=[5,5],a},wf=e=>{e.selection=!1,e.hoverCursor="auto",e.isDrawingMode=!1,e.getObjects().map(t=>t.set({selectable:!1})),e.discardActiveObject().requestRenderAll()},Oy=(e,t,r)=>{if(!!t){if(r==="pencil"&&e.wbState().tool!=="pencil")qi(t),t.freeDrawingBrush.width=e.wbState().width,t.isDrawingMode=!0,t.freeDrawingBrush.color=e.wbState().brush;else if(r==="select")t.isDrawingMode=!1,qi(t),t.getObjects().map(a=>a.set({selectable:!0})),t.hoverCursor="all-scroll";else if(r==="line")qi(t),t.on("mouse:down",wW(e.wbState,t)),t.on("mouse:move",xW(t)),t.on("mouse:up",bf),wf(t);else if(r==="rect")qi(t),t.on("mouse:down",CW(e.wbState,t)),t.on("mouse:move",SW(t)),t.on("mouse:up",bf),wf(t);else if(r==="circle")qi(t),t.on("mouse:down",EW(e.wbState,t)),t.on("mouse:move",_W(t)),t.on("mouse:up",bf),wf(t);else if(r==="text"){qi(t),t.isDrawingMode=!1;const a=new Pr.fabric.Textbox("text",{left:100,top:100,fill:e.wbState().brush,editable:!0,fontFamily:"Oxanium",fontSize:16});t.add(a),t.renderAll(),e.setWbState(s=>({...s,tool:"select"}));return}else r==="eraser"&&(qi(t),t.on("mouse:up",()=>DW(t)),t.isDrawingMode=!1,t.getObjects().map(a=>a.set({selectable:!0})),t.hoverCursor="not-allowed");e.setWbState(a=>({...a,tool:r}))}},NW=e=>{!e||e.getObjects().forEach(t=>{!e||t!==e.backgroundImage&&e.remove(t)})},My=(e,t,r)=>{!e||!t||(e.setWbState(a=>({...a,brush:r})),t.freeDrawingBrush.color=r)},ph=[1,2,4,8],Fy=(e,t,r)=>{!e||!t||(e.setWbState(a=>({...a,width:ph[r]})),t.freeDrawingBrush.width=ph[r])},Hi=({tool:e,children:t,canvas:r,title:a})=>{const s=Kt(),f=Re(()=>e==s?.wbState().tool);return $(Or,{get children(){return[$(Ot,{get when(){return f()},get children(){return $(Le,{color:"filled",onClick:()=>Oy(s,r(),e),title:a,children:t})}}),$(Ot,{get when(){return!f()},get children(){return $(Le,{onClick:()=>Oy(s,r(),e),title:a,children:t})}})]}})},Io=({color:e,canvas:t})=>{const r=Kt(),a=Re(()=>e==r?.wbState().brush);return $(Or,{get children(){return[$(Ot,{get when(){return!a()},get children(){return $(Le,{onClick:()=>My(r,t(),e),border:"underline",get children(){return $(B0,{title:e,color:e})}})}}),$(Ot,{get when(){return a()},get children(){return $(Le,{onClick:()=>My(r,t(),e),get children(){return $(B0,{title:e,color:e})}})}})]}})},vu=({index:e,children:t,canvas:r})=>{const a=Kt(),s=Re(()=>a?.wbState().width===ph[e]);return $(Or,{get children(){return[$(Ot,{get when(){return s()},get children(){return $(Le,{onClick:()=>Fy(a,r(),e),children:t})}}),$(Ot,{get when(){return!s()},get children(){return $(Le,{onClick:()=>Fy(a,r(),e),border:"underline",children:t})}})]}})},TW=mt("<div></div>"),OW=mt('<div><canvas id="whiteboardCanvas" width="1920" height="1080"></canvas></div>'),MW=()=>{let[e,t]=nt(),[r,a]=nt();const[s]=jt(),f=Kt(),v=o=>{if(!f)return;const i=r();if(!i)return;const l=i.toJSON();Ut(el,l)};Ir(()=>{if(!e())return;const o=AW("whiteboardCanvas",1920,1080);a(o);const i=Lj();o.loadFromJSON(i,()=>{}),o.on("object:added",v),o.on("object:modified",v),o.on("object:removed",v),o.on("canvas:cleared",v)}),Ir(()=>{const o=f?.drawCache(),i=r();!o||Object.keys(o).length==0||!i||(i.loadFromJSON(o,()=>{}),Ut(el,o))});const h=()=>{Jl(async o=>{r()?.loadFromJSON(o,()=>{})})},n=()=>{const o=r()?.toJSON(),i=`draw-${eo()}.json`;Qi(o,i)},u=()=>{if(!f)return;const o=f.mqttClient();if(!o)return;const i=r();if(!i)return;const l=i.toJSON();Ci(lt().browserID,o,xr(Xx),l),Uo(f,"Drawing published",3e3)};return $(De,{type:"column",get children(){return[(()=>{const o=TW.cloneNode(!0);return ft(o,bW),Ve(o,$(De,{get children(){return[$(Hi,{canvas:r,tool:"select",get title(){return s("Select")},get children(){return $(tq,{})}}),$(Hi,{canvas:r,tool:"pencil",get children(){return $(pd,{title:"Pencil"})}}),$(Hi,{canvas:r,tool:"line",get children(){return $(sq,{title:"Line"})}}),$(Hi,{canvas:r,tool:"rect",get children(){return $(Kj,{title:"Rect"})}}),$(Hi,{canvas:r,tool:"circle",get children(){return $(Xj,{title:"Circle"})}}),$(Hi,{canvas:r,tool:"text",get children(){return $(oq,{title:"Text"})}}),$(Hi,{canvas:r,tool:"eraser",get children(){return $(aq,{title:"Eraser"})}}),$(Le,{onClick:()=>NW(r()),style:{"margin-left":"20px"},get children(){return $(xs,{title:"Clear"})}})]}}),null),Ve(o,$(De,{get children(){return[$(Io,{canvas:r,color:"white"}),$(Io,{canvas:r,get color(){return sn.blue}}),$(Io,{canvas:r,get color(){return sn.yellow}}),$(Io,{canvas:r,get color(){return sn.green}}),$(Io,{canvas:r,get color(){return sn.pink}})]}}),null),Ve(o,$(De,{get children(){return[$(vu,{canvas:r,index:0,get children(){return $(Jj,{})}}),$(vu,{canvas:r,index:1,get children(){return $(Zj,{})}}),$(vu,{canvas:r,index:2,get children(){return $(Qj,{})}}),$(vu,{canvas:r,index:3,get children(){return $(eq,{})}})]}}),null),Ve(o,$(De,{get children(){return[$(Le,{onClick:u,border:"none",get title(){return s("Share")},get children(){return $(mq,{})}}),$(Le,{onClick:h,border:"none",get title(){return s("Import")},get children(){return $(ws,{})}}),$(Le,{onClick:n,border:"none",get title(){return s("Export")},get children(){return $(bs,{})}})]}}),null),o})(),(()=>{const o=OW.cloneNode(!0),i=o.firstChild;return ft(o,yW),Ki(l=>{t(l)},i),o})()]}})};var zr=e=>e?"":void 0,FW=e=>e?"true":void 0;function PW(e){return e.nodeType===Node.DOCUMENT_NODE}function BW(e){return e?.toString()==="[object Window]"}function IW(e){var t;return BW(e)?e.document:PW(e)?e:(t=e?.ownerDocument)!=null?t:document}function RW(e){var t;return(t=e?.ownerDocument.defaultView)!=null?t:window}function kW(e){const t={getRootNode:r=>{var a,s;return(s=(a=r.getRootNode)==null?void 0:a.call(r))!=null?s:document},getDoc:r=>IW(t.getRootNode(r)),getWin:r=>{var a;return(a=t.getDoc(r).defaultView)!=null?a:window},getActiveElement:r=>t.getDoc(r).activeElement,getById:(r,a)=>t.getRootNode(r).getElementById(a),createEmitter:(r,a)=>{const s=t.getWin(r);return function(v,h,n){const{bubbles:u=!0,cancelable:o,composed:i=!0}=n??{},l=`zag:${v}`,c={bubbles:u,cancelable:o,composed:i,detail:h},d=new s.CustomEvent(l,c);a.dispatchEvent(d)}},createListener:r=>function(s,f){const v=`zag:${s}`,h=n=>f(n);return r.addEventListener(v,h),()=>r.removeEventListener(v,h)}};return{...t,...e}}function $W(e,t){return e?e===t||pl(e)&&pl(t)&&e.contains(t):!1}function pl(e){return typeof e=="object"&&e?.nodeType===Node.ELEMENT_NODE&&typeof e?.nodeName=="string"}function LW(e){if(e==null||!pl(e))return!1;try{const t=RW(e);return e instanceof t.HTMLInputElement&&e.selectionStart!=null||/(textarea|select)/.test(e.localName)||e.isContentEditable}catch{return!1}}var Py={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"},zW={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"};function By(e,t={}){var r;const{dir:a="ltr",orientation:s="horizontal"}=t;let{key:f}=e;return f=(r=zW[f])!=null?r:f,a==="rtl"&&s==="horizontal"&&f in Py&&(f=Py[f]),f}function UW(e,t,r){if(!e)return;const a=Array.isArray(t)?t:[t],s=e.ownerDocument.defaultView||window,f=new s.MutationObserver(v=>{for(const h of v)h.type==="attributes"&&h.attributeName&&a.includes(h.attributeName)&&r(h)});return f.observe(e,{attributes:!0,attributeFilter:a}),()=>f.disconnect()}function xf(e){const t=globalThis.requestAnimationFrame(e);return function(){globalThis.cancelAnimationFrame(t)}}function jW(e,t){var r;return Array.from((r=e?.querySelectorAll(t))!=null?r:[])}function Iy(e,t){return e?.querySelector(t)}function qW(e,t){return e.find(r=>r.id===t)}function Cd(e,t){const r=qW(e,t);return r?e.indexOf(r):-1}function HW(e,t,r=!0){let a=Cd(e,t);return a=r?(a+1)%e.length:Math.min(a+1,e.length-1),e[a]}function VW(e,t,r=!0){let a=Cd(e,t);return a===-1?r?e[e.length-1]:null:(a=r?(a-1+e.length)%e.length:Math.max(0,a-1),e[a])}var GW=e=>{var t,r;return(r=(t=e.dataset.valuetext)!=null?t:e.textContent)!=null?r:""},WW=(e,t)=>e.toLowerCase().startsWith(t.toLowerCase()),YW=(e,t)=>e.map((r,a)=>e[(Math.max(t,0)+a)%e.length]);function XW(e,t,r){const a=r?Cd(e,r):-1;let s=r?YW(e,a):e;return t.length===1&&(s=s.filter(v=>v.id!==r)),s.find(v=>WW(GW(v),t))}function KW(e,t){const{state:r,activeId:a,key:s,timeout:f=350}=t,v=r.keysSoFar+s,n=v.length>1&&Array.from(v).every(c=>c===v[0])?v[0]:v;let u=e.slice();const o=XW(u,n,a);function i(){clearTimeout(r.timer),r.timer=-1}function l(c){r.keysSoFar=c,i(),c!==""&&(r.timer=+setTimeout(()=>{l(""),i()},f))}return l(v),o}var ml=Object.assign(KW,{defaultOptions:{keysSoFar:"",timer:-1},isValidEvent:JW});function JW(e){return e.key.length===1&&!e.ctrlKey&&!e.metaKey}var ZW={border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"},je=kW({getMenuId:e=>{var t,r;return(r=(t=e.ids)==null?void 0:t.menu)!=null?r:`${e.id}:menu`},getTriggerId:e=>{var t,r;return(r=(t=e.ids)==null?void 0:t.trigger)!=null?r:`${e.id}:trigger`},getLabelId:e=>{var t,r;return(r=(t=e.ids)==null?void 0:t.label)!=null?r:`${e.id}:label`},getOptionId:(e,t)=>{var r,a,s;return(s=(a=(r=e.ids)==null?void 0:r.option)==null?void 0:a.call(r,t))!=null?s:`${e.id}:option:${t}`},getHiddenSelectId:e=>`${e.id}:select`,getPositionerId:e=>`${e.id}:positioner`,getOptionGroupId:(e,t)=>`${e.id}:option-group:${t}`,getOptionGroupLabelId:(e,t)=>`${e.id}:option-group-label:${t}`,getHiddenSelectElement:e=>je.getById(e,je.getHiddenSelectId(e)),getMenuElement:e=>{const t=je.getById(e,je.getMenuId(e));if(!t)throw new Error("Could not find the menu element.");return t},getTriggerElement:e=>{const t=je.getById(e,je.getTriggerId(e));if(!t)throw new Error("Could not find the trigger element.");return t},getPositionerElement:e=>je.getById(e,je.getPositionerId(e)),getOptionElements:e=>jW(je.getMenuElement(e),"[role=option]:not([data-disabled])"),getFirstOption:e=>Iy(je.getMenuElement(e),"[role=option]:not([data-disabled])"),getLastOption:e=>Iy(je.getMenuElement(e),"[role=option]:not([data-disabled]):last-of-type"),getNextOption:(e,t)=>{const r=je.getOptionElements(e);return HW(r,t,e.loop)},getPreviousOption:(e,t)=>{const r=je.getOptionElements(e);return VW(r,t,e.loop)},getOptionDetails(e){const{label:t,value:r}=e.dataset;return{label:t,value:r}},getMatchingOption(e,t,r){return ml(je.getOptionElements(e),{state:e.typeahead,key:t,activeId:r})},getHighlightedOption(e){return e.highlightedId?je.getById(e,e.highlightedId):null},getClosestOption(e){return pl(e)?e.closest("[data-part=option]"):null}}),QW=e=>Array.isArray(e),j2=e=>!(e==null||typeof e!="object"||QW(e));function q2(e){return e===void 0?e:Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0).map(([t,r])=>[t,j2(r)?q2(r):r]))}function Ry(e){return JSON.parse(JSON.stringify(e))}function eY(e){return j2(e)&&"value"in e&&"label"in e}function ky(e){if(!eY(e))throw new TypeError("Expected an option data object")}function tY(e,t,r){var a;const s=e.context.disabled,f=e.context.invalid,v=e.context.isInteractive,h=e.matches("open"),n=e.context.highlightedOption,u=e.context.selectedOption,o=e.context.isTypingAhead;function i(c){var d;const p=je.getOptionId(e.context,c.value);return{isDisabled:Boolean(c.disabled||s),isHighlighted:e.context.highlightedId===p,isSelected:((d=e.context.selectedOption)==null?void 0:d.value)===c.value}}const l=wV({measured:!!e.context.currentPlacement,placement:e.context.currentPlacement});return{isOpen:h,highlightedOption:n,selectedOption:u,focus(){je.getTriggerElement(e.context).focus()},blur(){je.getTriggerElement(e.context).blur()},open(){t("OPEN")},close(){t("CLOSE")},setSelectedOption(c){ky(c),t({type:"SELECT_OPTION",value:c})},setHighlightedOption(c){ky(c),t({type:"HIGHLIGHT_OPTION",value:c})},clearSelectedOption(){t({type:"CLEAR_SELECTED"})},labelProps:r.label({dir:e.context.dir,id:je.getLabelId(e.context),"data-part":"label","data-disabled":zr(s),"data-invalid":zr(f),"data-readonly":zr(e.context.readOnly),htmlFor:je.getHiddenSelectId(e.context),onClick(){var c;s||(c=je.getTriggerElement(e.context))==null||c.focus()}}),positionerProps:r.element({"data-part":"positioner",id:je.getPositionerId(e.context),style:l.floating}),triggerProps:r.button({id:je.getTriggerId(e.context),disabled:s,dir:e.context.dir,type:"button","aria-controls":je.getMenuId(e.context),"aria-expanded":h,"data-expanded":zr(h),"aria-haspopup":"listbox","aria-labelledby":"label","data-part":"trigger","data-disabled":zr(s),"data-invalid":zr(f),"aria-invalid":f,"data-readonly":zr(e.context.readOnly),"data-placement":e.context.currentPlacement,"data-placeholder-shown":zr(!e.context.hasSelectedOption),onPointerDown(c){c.button||c.ctrlKey||!v||(c.currentTarget.dataset.pointerType=c.pointerType,!(s||c.pointerType==="touch")&&t({type:"TRIGGER_CLICK"}))},onClick(c){!v||c.button||c.currentTarget.dataset.pointerType==="touch"&&t({type:"TRIGGER_CLICK"})},onFocus(){t("TRIGGER_FOCUS")},onBlur(){t("TRIGGER_BLUR")},onKeyDown(c){if(!v)return;const p={ArrowUp(){t({type:"ARROW_UP"})},ArrowDown(){t({type:"ARROW_DOWN"})},ArrowLeft(){t({type:"ARROW_LEFT"})},ArrowRight(){t({type:"ARROW_RIGHT"})},Home(){t({type:"HOME"})},Enter(){t({type:"TRIGGER_CLICK"})},End(){t({type:"END"})},Space(m){t(o?{type:"TYPEAHEAD",key:m.key}:{type:"TRIGGER_KEY"})}}[By(c,e.context)];if(p){p(c),c.preventDefault();return}ml.isValidEvent(c)&&(t({type:"TYPEAHEAD",key:c.key}),c.preventDefault())}}),getOptionState:i,getOptionProps(c){const{value:d,label:p,valueText:m}=c,g=i(c);return r.element({id:je.getOptionId(e.context,d),role:"option","data-part":"option","data-label":p,"data-value":d,"data-valuetext":m??p,"aria-selected":g.isSelected,"data-selected":zr(g.isSelected),"data-focus":zr(g.isHighlighted),"data-disabled":zr(g.isDisabled),"aria-disabled":FW(g.isDisabled)})},getOptionGroupLabelProps(c){const{htmlFor:d}=c;return r.element({id:je.getOptionGroupId(e.context,d),role:"group","data-part":"option-group-label"})},getOptionGroupProps(c){const{id:d}=c;return r.element({"data-disabled":zr(s),id:je.getOptionGroupId(e.context,d),"data-part":"option-group","aria-labelledby":je.getOptionGroupLabelId(e.context,d)})},selectProps:r.select({"data-part":"select",name:e.context.name,form:e.context.form,disabled:!v,"aria-hidden":!0,id:je.getHiddenSelectId(e.context),defaultValue:(a=e.context.selectedOption)==null?void 0:a.value,style:ZW,tabIndex:-1,onFocus(){var c;(c=je.getTriggerElement(e.context))==null||c.focus()},"aria-labelledby":je.getLabelId(e.context)}),menuProps:r.element({hidden:!h,dir:e.context.dir,id:je.getMenuId(e.context),role:"listbox","data-part":"menu","aria-activedescendant":e.context.highlightedId||"","aria-labelledby":je.getLabelId(e.context),tabIndex:-1,onPointerMove(c){if(!v)return;const d=je.getClosestOption(c.target);!d||d.hasAttribute("data-disabled")?t({type:"POINTER_LEAVE"}):t({type:"POINTER_MOVE",id:d.id,target:d})},onPointerUp(c){if(!v)return;const d=je.getClosestOption(c.target);!d||d.hasAttribute("data-disabled")||d?.click()},onPointerLeave(){t({type:"POINTER_LEAVE"})},onClick(c){if(!v)return;const d=je.getClosestOption(c.target);!d||d.hasAttribute("data-disabled")||t({type:"OPTION_CLICK",id:d.id})},onKeyDown(c){if(!v)return;const d={Escape(){t({type:"ESC_KEY"})},ArrowUp(){t({type:"ARROW_UP"})},ArrowDown(){t({type:"ARROW_DOWN"})},Home(){t({type:"HOME"})},End(){t({type:"END"})},Tab(){t({type:"TAB"})},Enter(){t({type:"TRIGGER_KEY"})},Space(m){var g;o?t({type:"TYPEAHEAD",key:m.key}):(g=d.Enter)==null||g.call(d,m)}},p=d[By(c)];if(p){p(c),c.preventDefault();return}LW(c.target)||ml.isValidEvent(c)&&(t({type:"TYPEAHEAD",key:c.key}),c.preventDefault())}})}}function rY(e){var t;return(t=e?.ownerDocument.defaultView)!=null?t:window}function nY(e,t,r){if(!e)return;const a=Array.isArray(t)?t:[t],s=e.ownerDocument.defaultView||window,f=new s.MutationObserver(v=>{for(const h of v)h.type==="attributes"&&h.attributeName&&a.includes(h.attributeName)&&r(h)});return f.observe(e,{attributes:!0,attributeFilter:a}),()=>f.disconnect()}function iY(e,t){var r;const{type:a,property:s="value"}=t,f=rY(e)[a].prototype;return(r=Object.getOwnPropertyDescriptor(f,s))!=null?r:{}}function aY(e,t,r){var a;(a=iY(e,r).set)==null||a.call(e,t)}function oY(e){return sY(e)?e.form:e.closest("form")}function sY(e){return e.matches("textarea, input, select, button")}function uY(e,t){if(!e)return;const r=oY(e);return r?.addEventListener("reset",t,{passive:!0}),()=>{r?.removeEventListener("reset",t)}}function lY(e,t){const r=e?.closest("fieldset");if(!!r)return t(r.disabled),nY(r,["disabled"],()=>t(r.disabled))}function cY(e,t){if(!e)return;const{onFieldsetDisabled:r,onFormReset:a}=t,s=[uY(e,a),lY(e,f=>{f&&r()})];return()=>{s.forEach(f=>f?.())}}function fY(e){const t=q2(e);return Ql({id:"select",context:{selectOnTab:!1,selectedOption:null,highlightedOption:null,loop:!1,closeOnSelect:!0,...t,initialSelectedOption:null,prevSelectedOption:null,prevHighlightedOption:null,typeahead:ml.defaultOptions,positioning:{placement:"bottom-start",gutter:8,...t.positioning}},computed:{hasSelectedOption:r=>r.selectedOption!=null,isTypingAhead:r=>r.typeahead.keysSoFar!=="",isInteractive:r=>!(r.disabled||r.readOnly),selectedId:r=>r.selectedOption?je.getOptionId(r,r.selectedOption.value):null,highlightedId:r=>r.highlightedOption?je.getOptionId(r,r.highlightedOption.value):null,hasSelectedChanged:r=>{var a,s;return((a=r.selectedOption)==null?void 0:a.value)!==((s=r.prevSelectedOption)==null?void 0:s.value)},hasHighlightedChanged:r=>{var a,s;return((a=r.highlightedOption)==null?void 0:a.value)!==((s=r.prevHighlightedOption)==null?void 0:s.value)}},initial:"idle",watch:{selectedOption:["setSelectElementValue","dispatchChangeEvent"]},on:{HIGHLIGHT_OPTION:{actions:["setHighlightedOption","invokeOnHighlight"]},SELECT_OPTION:{actions:["setSelectedOption","invokeOnSelect"]},CLEAR_SELECTED:{actions:["clearSelectedOption","invokeOnSelect"]}},entry:["setInitialSelectedOption"],activities:["trackFormControlState"],states:{idle:{tags:["closed"],on:{TRIGGER_CLICK:{target:"open"},TRIGGER_FOCUS:{target:"focused"},OPEN:{target:"open"}}},focused:{tags:["closed"],entry:["focusTrigger","clearHighlightedOption"],on:{TRIGGER_CLICK:{target:"open"},TRIGGER_BLUR:{target:"idle",actions:["clearHighlightedOption"]},TRIGGER_KEY:{target:"open"},ARROW_UP:{target:"open",actions:["highlightLastOption","invokeOnHighlight"]},ARROW_DOWN:{target:"open",actions:["highlightFirstOption","invokeOnHighlight"]},ARROW_LEFT:[{guard:"hasSelectedOption",actions:["selectPreviousOption","invokeOnSelect"]},{actions:["selectLastOption","invokeOnSelect"]}],ARROW_RIGHT:[{guard:"hasSelectedOption",actions:["selectNextOption","invokeOnSelect"]},{actions:["selectFirstOption","invokeOnSelect"]}],HOME:{actions:["selectFirstOption","invokeOnSelect"]},END:{actions:["selectLastOption","invokeOnSelect"]},TYPEAHEAD:{actions:["selectMatchingOption","invokeOnSelect"]},OPEN:{target:"open"}}},open:{tags:["open"],entry:["focusMenu","highlightSelectedOption","invokeOnOpen"],exit:["scrollMenuToTop"],activities:["trackInteractOutside","computePlacement","scrollToHighlightedOption"],on:{CLOSE:{target:"focused",actions:["invokeOnClose"]},TRIGGER_CLICK:{target:"focused",actions:["invokeOnClose"]},OPTION_CLICK:[{target:"focused",actions:["selectHighlightedOption","invokeOnSelect","invokeOnClose"],guard:"closeOnSelect"},{actions:["selectHighlightedOption","invokeOnSelect"]}],TRIGGER_KEY:[{target:"focused",actions:["selectHighlightedOption","invokeOnSelect","invokeOnClose"],guard:"closeOnSelect"},{actions:["selectHighlightedOption","invokeOnSelect"]}],ESC_KEY:{target:"focused",actions:["invokeOnClose"]},BLUR:{target:"focused",actions:["invokeOnClose"]},HOME:{actions:["highlightFirstOption","invokeOnHighlight"]},END:{actions:["highlightLastOption","invokeOnHighlight"]},ARROW_DOWN:[{guard:"hasHighlightedOption",actions:["highlightNextOption","invokeOnHighlight"]},{actions:["highlightFirstOption","invokeOnHighlight"]}],ARROW_UP:[{guard:"hasHighlightedOption",actions:["highlightPreviousOption","invokeOnHighlight"]},{actions:["highlightLastOption","invokeOnHighlight"]}],TYPEAHEAD:{actions:["highlightMatchingOption","invokeOnHighlight"]},POINTER_MOVE:{actions:["highlightOption","invokeOnHighlight"]},POINTER_LEAVE:{actions:["clearHighlightedOption"]},TAB:[{target:"idle",actions:["selectHighlightedOption","invokeOnClose","invokeOnSelect","clearHighlightedOption"],guard:"selectOnTab"},{target:"idle",actions:["invokeOnClose","clearHighlightedOption"]}]}}}},{guards:{hasHighlightedOption:r=>r.highlightedId!=null,selectOnTab:r=>!!r.selectOnTab,hasSelectedOption:r=>r.hasSelectedOption,closeOnSelect:r=>!!r.closeOnSelect},activities:{trackFormControlState(r){return cY(je.getHiddenSelectElement(r),{onFieldsetDisabled(){r.disabled=!0},onFormReset(){r.prevSelectedOption=r.selectedOption,r.selectedOption=r.initialSelectedOption}})},trackInteractOutside(r,a,{send:s}){return F2(je.getMenuElement(r),{exclude(f){return[je.getTriggerElement(r)].some(h=>$W(h,f))},onInteractOutside(){s({type:"BLUR",src:"interact-outside"})}})},computePlacement(r){return r.currentPlacement=r.positioning.placement,gV(je.getTriggerElement(r),je.getPositionerElement(r),{...r.positioning,onComplete(a){r.currentPlacement=a.placement}})},scrollToHighlightedOption(r,a,{getState:s}){const f=()=>{if(s().event.type==="POINTER_MOVE")return;const h=je.getHighlightedOption(r);h?.scrollIntoView({block:"nearest"})};return xf(()=>{f()}),UW(je.getMenuElement(r),"aria-activedescendant",f)}},actions:{setInitialSelectedOption(r){r.initialSelectedOption=r.selectedOption},highlightPreviousOption(r){if(!r.highlightedId)return;const a=je.getPreviousOption(r,r.highlightedId);Na(r,a)},highlightNextOption(r){if(!r.highlightedId)return;const a=je.getNextOption(r,r.highlightedId);Na(r,a)},highlightFirstOption(r){const a=je.getFirstOption(r);Na(r,a)},highlightLastOption(r){const a=je.getLastOption(r);Na(r,a)},focusMenu(r){xf(()=>{var a;(a=je.getMenuElement(r))==null||a.focus({preventScroll:!0})})},focusTrigger(r){xf(()=>{je.getTriggerElement(r).focus({preventScroll:!0})})},selectHighlightedOption(r,a){var s;const f=(s=a.id)!=null?s:r.highlightedId;if(!f)return;const v=je.getById(r,f);Ta(r,v)},selectFirstOption(r){const a=je.getFirstOption(r);Ta(r,a)},selectLastOption(r){const a=je.getLastOption(r);Ta(r,a)},selectNextOption(r){if(!r.selectedId)return;const a=je.getNextOption(r,r.selectedId);Ta(r,a)},selectPreviousOption(r){if(!r.selectedId)return;const a=je.getPreviousOption(r,r.selectedId);Ta(r,a)},highlightSelectedOption(r){!r.selectedOption||(r.prevHighlightedOption=r.highlightedOption,r.highlightedOption=r.selectedOption)},highlightOption(r,a){var s;const f=(s=a.target)!=null?s:je.getById(r,a.id);Na(r,f)},highlightMatchingOption(r,a){const s=je.getMatchingOption(r,a.key,r.highlightedId);Na(r,s)},selectMatchingOption(r,a){const s=je.getMatchingOption(r,a.key,r.selectedId);Ta(r,s)},setHighlightedOption(r,a){!a.value||(r.prevHighlightedOption=r.highlightedOption,r.highlightedOption=a.value)},clearHighlightedOption(r){r.highlightedOption=null},setSelectedOption(r,a){!a.value||(r.prevSelectedOption=r.selectedOption,r.selectedOption=a.value)},clearSelectedOption(r){r.selectedOption=null},scrollMenuToTop(r){var a;(a=je.getMenuElement(r))==null||a.scrollTo(0,0)},invokeOnOpen(r){var a;(a=r.onOpen)==null||a.call(r)},invokeOnClose(r){var a;(a=r.onClose)==null||a.call(r)},invokeOnHighlight(r){var a;!r.hasHighlightedChanged||(a=r.onHighlight)==null||a.call(r,Ry(r.highlightedOption))},invokeOnSelect(r){var a;!r.hasSelectedChanged||(a=r.onChange)==null||a.call(r,Ry(r.selectedOption))},setSelectElementValue(r){const a=r.selectedOption,s=je.getHiddenSelectElement(r);!s||!a||aY(s,a.value,{type:"HTMLSelectElement"})},dispatchChangeEvent(r){const a=je.getHiddenSelectElement(r);if(!a)return;const s=je.getWin(r),f=new s.Event("change",{bubbles:!0});a.dispatchEvent(f)}}})}function Na(e,t){!t||(e.prevHighlightedOption=e.highlightedOption,e.highlightedOption=je.getOptionDetails(t))}function Ta(e,t){!t||(e.prevSelectedOption=e.selectedOption,e.selectedOption=je.getOptionDetails(t))}var hY="h4ts1a1",dY="h4ts1a0";const pY=mt("<div><div><button><span></span></button></div><div><ul></ul></div></div>"),mY=mt("<li><span></span></li>"),vY=({title:e,data:t,selected:r,setSelected:a})=>{const s=Re(()=>{const n=r();if(!n||n=="")return;const u=t.filter(o=>o.value==n);if(u.length!=0)return u[0]}),[f,v]=tc(fY({id:bl(),selectedOption:s(),onChange:n=>{if(!n)return;const u=t.filter(o=>o.value==n.value);u.length!=0&&a(u[0].value)}})),h=Re(()=>tY(f,v,ec));return(()=>{const n=pY.cloneNode(!0),u=n.firstChild,o=u.firstChild,i=o.firstChild,l=u.nextSibling,c=l.firstChild;return Nr(o,Ar(()=>h().triggerProps,{class:dY}),!1,!0),Ve(i,()=>h().selectedOption?.label??e),Nr(l,Ar(()=>h().positionerProps),!1,!0),Nr(c,Ar(()=>h().menuProps,{class:hY,style:{"list-style-type":"none"}}),!1,!0),Ve(c,()=>t.map(({label:d,value:p})=>(()=>{const m=mY.cloneNode(!0),g=m.firstChild;return cr(m,"id",p),Nr(m,Ar(()=>h().getOptionProps({label:d,value:p})),!1,!0),Ve(g,d),Ve(m,()=>p===h().selectedOption?.value&&"\u2713",null),m})())),n})()},gY={dictCorpoSector_000:"Agriculture",dictCorpoSector_001:"Clothing Industry",dictCorpoSector_002:"Automotive Industry",dictCorpoSector_003:"Aviation Industry",dictCorpoSector_004:"Biotechnology",dictCorpoSector_005:"Chemical Industry",dictCorpoSector_006:"Computer Games",dictCorpoSector_007:"Computer Industry",dictCorpoSector_008:"Construction",dictCorpoSector_009:"Courier Services",dictCorpoSector_010:"Cybertechnology",dictCorpoSector_011:"Education",dictCorpoSector_012:"Electronics",dictCorpoSector_013:"Power Engineering",dictCorpoSector_014:"Entertainment",dictCorpoSector_015:"Financial Services",dictCorpoSector_016:"Food Industry",dictCorpoSector_017:"Genetics",dictCorpoSector_018:"Information Services",dictCorpoSector_019:"Legal Services",dictCorpoSector_020:"Marine Industry",dictCorpoSector_021:"Machinery Industry",dictCorpoSector_022:"Media",dictCorpoSector_023:"Medical Services",dictCorpoSector_024:"Military Services",dictCorpoSector_025:"Mining",dictCorpoSector_026:"Municipal Services",dictCorpoSector_027:"Nanotechnology",dictCorpoSector_028:"Pharmaceutical Industry",dictCorpoSector_029:"Precision Industry",dictCorpoSector_030:"Psychotechnics",dictCorpoSector_031:"Research and Development",dictCorpoSector_032:"Robotics",dictCorpoSector_033:"Security",dictCorpoSector_034:"Software Development",dictCorpoSector_035:"Space Industry",dictCorpoSector_036:"Telecommunications",dictCorpoSector_037:"Transport Services",dictCorpoSector_038:"Waste Disposal",dictCorpoSector_039:"Weapons and Ammunition",dictCorpoGossip_000:"They have developed a way to extend human life",dictCorpoGossip_001:"They have an AI that possesses consciousness",dictCorpoGossip_002:"They are developing a plan to take over administrative power",dictCorpoGossip_003:"They are installing consumer tracking equipment in their products",dictCorpoGossip_004:"They conduct experiments on unaware workers",dictCorpoGossip_005:"They are able to eavesdrop and analyze any data transmission",dictCorpoGossip_006:"They have developed a virus capable of destroying the entire Infosphere",dictCorpoGossip_007:"They will use an unknown bacteriological weapon in an emergency situation",dictCorpoGossip_008:"They have the ability to transfer knowledge directly into the mind",dictCorpoGossip_009:"They are running a project to breed dangerous, genetically modified beasts",dictCorpoGossip_010:"They are planning a hostile takeover of the remaining corporations from their market sector",dictCorpoGossip_011:"They have bred clones of famous politicians and switched some of them",dictCorpoGossip_012:"They are in possession of a mineral that can replace all known fuels",dictCorpoGossip_013:"They have developed a miniaturized EMP weapon",dictCorpoGossip_014:"They have software that broadcasts subliminal messages in their advertisements",dictCorpoGossip_015:"They hide the fact of the mass extermination of one of their own arcologies",dictCorpoGossip_016:"Most of their employees are androids",dictCorpoGossip_017:"They use the bodies of their dead employees for secret experiments",dictCorpoGossip_018:"They have built a secret base on the moon",dictCorpoGossip_019:"They are responsible for a series of epidemics in various places around the world",dictCorpoGossip_020:"They have made contact with an alien civilization in secret",dictCorpoGossip_021:"They dump manufacturing waste in poorer neighbourhoods",dictCorpoGossip_022:"Their official activities are a cover for narco-business",dictCorpoGossip_023:"They harbour and support various eco-terrorist groups",dictCorpoGossip_024:"They maintain groups of hackers who regularly attack the Infosphere",dictCorpoGossip_025:"All their employees are brainwashed fanatics",dictCorpoGossip_026:"They indiscriminately buy up all available works of art and antiques",dictCorpoGossip_027:"No reliable information about them can be found anywhere",dictCorpoGossip_028:"They have carried out tests of tactical nuclear weapons in populated neighbourhoods",dictCorpoGossip_029:"They have tested chemical weapons in poorer parts of the city",dictCorpoGossip_030:"Their official activities are a cover for human organ trafficking",dictCorpoGossip_031:"Their employees are planning a bloody rebellion and intend to destroy the corporation from within",dictCorpoGossip_032:"Their insane management is planning a worldwide apocalypse",dictCorpoGossip_033:"The entire corporation is basically a religious sect",dictCorpoGossip_034:"They have discovered traces of an ancient civilization and unknown technology",dictCorpoGossip_035:"The corporation is run by an AI but no one on the staff or board knows about it",dictCorpoGossip_036:"The corporation's board of directors is dead and a group of mercenaries are impersonating them",dictCorpoGossip_037:"Employees' minds are uploaded to a corporate database after their death",dictCorpoGossip_038:"They have developed nanotechnology, allowing them to produce any thing from any matter",dictCorpoGossip_039:"They have developed technology to remotely control the human mind",dictCorpoResources_000:"Technological resources",dictCorpoResources_001:"Financial resources",dictCorpoResources_002:"Military contacts",dictCorpoResources_003:"Influence in hacker groups",dictCorpoResources_004:"Media credibility",dictCorpoResources_005:"Trust of ordinary people",dictCorpoResources_006:"Smuggler contacts",dictCorpoResources_007:"Control of city gangs",dictCorpoResources_008:"Influence in government institutions",dictCorpoResources_009:"Scientific laboratories",dictCorpoResources_010:"Drug trafficking control",dictCorpoResources_011:"Media control",dictCorpoResources_012:"Control over police and municipal services",dictCorpoResources_013:"Influence in religious sects",dictCorpoResources_014:"Intelligence capabilities",dictCorpoResources_015:"Contacts among runners",dictCorpoResources_016:"Influence among arms dealers",dictCorpoResources_017:"Biotechnology resources",dictCorpoResources_018:"Landscape resources",dictCorpoResources_019:"Entertainment industry control",dictCorpoObjective_000:"Damage the competition",dictCorpoObjective_001:"Discredit the competition publicly",dictCorpoObjective_002:"Take control of a selected public domain",dictCorpoObjective_003:"Maximize sales profits",dictCorpoObjective_004:"Steal competitor data",dictCorpoObjective_005:"Discredit a well-known politician",dictCorpoObjective_006:"Force or persuade a well-known public figure to sign a contract",dictCorpoObjective_007:"Reveal irregularities in government institutions",dictCorpoObjective_008:"Prevent the disclosure of inconvenient truths about a corporation",dictCorpoObjective_009:"Detect and eliminate traitors inside the corporation",dictCorpoObjective_010:"Track down and recover an escaped employee",dictCorpoObjective_011:"Acquire a competitor's employee",dictCorpoObjective_012:"Put your spy on the management board of your competitors",dictCorpoObjective_013:"Test the latest product directly on citizens",dictCorpoObjective_014:"Introduce dangerous product into the market",dictCorpoObjective_015:"Prevent a disaster caused by corporate experiments",dictCorpoObjective_016:"Induce a controlled disaster",dictCorpoObjective_017:"Discreetly contain an uncontrollable disaster within the corporation",dictCorpoObjective_018:"Recover stolen data",dictCorpoObjective_019:"Discreetly get rid of an inconvenient member of your own management",dictCorpoEmployeeProfile_000:"Personal honour and sense of duty",dictCorpoEmployeeProfile_001:"The common good (of the corporation) is the highest value",dictCorpoEmployeeProfile_002:"What you can't see does not exist and everyone has many faces",dictCorpoEmployeeProfile_003:"A good servant must have good wages",dictCorpoEmployeeProfile_004:"One big family",dictCorpoEmployeeProfile_005:"It's just a job, nothing personal",dictCorpoEmployeeProfile_006:"Only the best reach the top",dictCorpoEmployeeProfile_007:"What you gain with your own hands is yours",dictCorpoEmployeeProfile_008:"The less you can be seen, the safer",dictCorpoEmployeeProfile_009:"Success is achieved with patience",dictCorpoEmployeeProfile_010:"The day of retribution will come",dictCorpoEmployeeProfile_011:"Everyone can have their profit",dictCorpoEmployeeProfile_012:"We consciously and responsibly create a better world",dictCorpoEmployeeProfile_013:"A place for everyone, everyone in their place",dictCorpoEmployeeProfile_014:"If one doesn't have what one likes...",dictCorpoEmployeeProfile_015:"United by a common enemy",dictCorpoEmployeeProfile_016:"Common vision",dictCorpoEmployeeProfile_017:"We are better than others",dictCorpoEmployeeProfile_018:"Clearly established rules",dictCorpoEmployeeProfile_019:"Let's talk about it"},yY={dictCorpoSector_000:"Rolnictwo",dictCorpoSector_001:"Przemys\u0142 odzie\u017Cowy",dictCorpoSector_002:"Przemys\u0142 samochodowy",dictCorpoSector_003:"Przemys\u0142 lotniczy",dictCorpoSector_004:"Biotechnologia",dictCorpoSector_005:"Przemys\u0142 chemiczny",dictCorpoSector_006:"Gry komputerowe",dictCorpoSector_007:"Przemys\u0142 komputerowy",dictCorpoSector_008:"Budownictwo",dictCorpoSector_009:"Us\u0142ugi kurierskie",dictCorpoSector_010:"Cybertechnika",dictCorpoSector_011:"Edukacja",dictCorpoSector_012:"Elektronika",dictCorpoSector_013:"Energetyka",dictCorpoSector_014:"Rozrywka",dictCorpoSector_015:"Us\u0142ugi finansowe",dictCorpoSector_016:"Przemys\u0142 spo\u017Cywczy",dictCorpoSector_017:"Genetyka",dictCorpoSector_018:"Us\u0142ugi informacyjne",dictCorpoSector_019:"Us\u0142ugi prawnicze",dictCorpoSector_020:"Przemys\u0142 morski",dictCorpoSector_021:"Przemys\u0142 maszynowy",dictCorpoSector_022:"Media",dictCorpoSector_023:"Przemys\u0142 i us\u0142ugi medyczne",dictCorpoSector_024:"Us\u0142ugi militarne",dictCorpoSector_025:"G\xF3rnictwo",dictCorpoSector_026:"Us\u0142ugi komunalne",dictCorpoSector_027:"Nanotechnologia",dictCorpoSector_028:"Przemys\u0142 farmaceutyczny",dictCorpoSector_029:"Przemys\u0142 precyzyjny",dictCorpoSector_030:"Psychotechnika",dictCorpoSector_031:"Badania i rozw\xF3j",dictCorpoSector_032:"Robotyka",dictCorpoSector_033:"Bezpiecze\u0144stwo",dictCorpoSector_034:"Oprogramowanie",dictCorpoSector_035:"Przemys\u0142 kosmiczny",dictCorpoSector_036:"Telekomunikacja",dictCorpoSector_037:"Us\u0142ugi transportowe",dictCorpoSector_038:"Utylizacja odpad\xF3w",dictCorpoSector_039:"Bro\u0144 i amunicja",dictCorpoGossip_000:"Opracowali spos\xF3b na przed\u0142u\u017Canie ludzkiego \u017Cycia",dictCorpoGossip_001:"Maj\u0105 SI, kt\xF3ra posiada \u015Bwiadomo\u015B\u0107",dictCorpoGossip_002:"Opracowuj\u0105 plan przej\u0119cia w\u0142adzy administracyjnej",dictCorpoGossip_003:"W swoich produktach montuj\u0105 sprz\u0119t do \u015Bledzenia konsument\xF3w",dictCorpoGossip_004:"Przeprowadzaj\u0105 eksperymenty na nie\u015Bwiadomych pracownikach",dictCorpoGossip_005:"S\u0105 w stanie pods\u0142ucha\u0107 i zanalizowa\u0107 dowoln\u0105 transmisj\u0119 danych",dictCorpoGossip_006:"Opracowali wirusa zdolnego zniszczy\u0107 ca\u0142\u0105 Infosfer\u0119",dictCorpoGossip_007:"W sytuacji zagro\u017Cenia wykorzystaj\u0105 nieznan\u0105 bro\u0144 bakteriologiczn\u0105",dictCorpoGossip_008:"Posiadaj\u0105 mo\u017Cliwo\u015Bci transferu wiedzy bezpo\u015Brednio do umys\u0142u",dictCorpoGossip_009:"Prowadz\u0105 program hodowli niebezpiecznych, genetycznie modyfikowanych bestii",dictCorpoGossip_010:"Planuj\u0105 wrogie przej\u0119cie pozosta\u0142ych korporacji ze swojego sektora rynku",dictCorpoGossip_011:"Wyhodowali klony znanych polityk\xF3w i podmienili niekt\xF3rych z nich",dictCorpoGossip_012:"S\u0105 w posiadaniu minera\u0142u, kt\xF3ry mo\u017Ce zast\u0105pi\u0107 wszelkie znane paliwa",dictCorpoGossip_013:"Opracowali zminiaturyzowan\u0105, osobist\u0105 bro\u0144 EMP",dictCorpoGossip_014:"Maj\u0105 oprogramowanie pozwalaj\u0105ce na emisj\u0119 przekazu podprogowego w ich reklamach",dictCorpoGossip_015:"TUkrywaj\u0105 fakt masowej eksterminacji jednej ze swoich w\u0142asnych arkologii",dictCorpoGossip_016:"Wi\u0119kszo\u015B\u0107 ich pracownik\xF3w to androidy",dictCorpoGossip_017:"Wykorzystuj\u0105 cia\u0142a swoich zmar\u0142ych pracownik\xF3w do tajemniczych eksperyment\xF3w",dictCorpoGossip_018:"Zbudowali tajn\u0105 baz\u0119 na Ksi\u0119\u017Cycu",dictCorpoGossip_019:"S\u0105 odpowiedzialni za seri\u0119 epidemii w r\xF3\u017Cnych miejscach na \u015Bwiecie",dictCorpoGossip_020:"Nawi\u0105zali w tajemnicy kontakt z obc\u0105 cywilizacj\u0105",dictCorpoGossip_021:"Sk\u0142aduj\u0105 odpady produkcyjne w biedniejszych dzielnicach",dictCorpoGossip_022:"Ich oficjalna dzia\u0142alno\u015B\u0107 jest przykrywk\u0105 dla narkobiznesu",dictCorpoGossip_023:"Ukrywaj\u0105 i wspieraj\u0105 rozmaite grupy ekoterrorystyczne",dictCorpoGossip_024:"Utrzymuj\u0105 grupy haker\xF3w regularnie atakuj\u0105cych Infosfer\u0119",dictCorpoGossip_025:"Wszyscy ich pracownicy s\u0105 fanatykami o wypranych m\xF3zgach",dictCorpoGossip_026:"Masowo skupuj\u0105 wszystkie dost\u0119pne dzie\u0142a sztuki i antyki",dictCorpoGossip_027:"Nigdzie nie mo\u017Cna znale\u017A\u0107 \u017Cadnych wiarygodnych informacji na ich temat",dictCorpoGossip_028:"Przeprowadzali testy taktycznej broni j\u0105drowej w zamieszkanych dzielnicach",dictCorpoGossip_029:"Testowali bro\u0144 chemiczn\u0105 w biedniejszych cz\u0119\u015Bciach miasta",dictCorpoGossip_030:"Ich oficjalna dzia\u0142alno\u015B\u0107 jest przykrywk\u0105 dla handlu organami ludzkimi",dictCorpoGossip_031:"Ich pracownicy planuj\u0105 krwawy bunt i zamierzaj\u0105 zniszczy\u0107 korporacj\u0119 od wewn\u0105trz",dictCorpoGossip_032:"Ich szalony zarz\u0105d planuje \u015Bwiatow\u0105 apokalips\u0119",dictCorpoGossip_033:"Ca\u0142a korporacja jest w zasadzie religijn\u0105 sekt\u0105",dictCorpoGossip_034:"Odkryli \u015Blady staro\u017Cytnej cywilizacji i nieznanej technologii",dictCorpoGossip_035:"Korporacj\u0105 zarz\u0105dza SI ale nikt z pracownik\xF3w i zarz\u0105du o tym nie wie",dictCorpoGossip_036:"Zarz\u0105d korporacji nie \u017Cyje a podszywa si\u0119 pod niego grupa najemnik\xF3w",dictCorpoGossip_037:"Umys\u0142y pracownik\xF3w po ich \u015Bmierci s\u0105 \u0142adowane do korporacyjnej bazy danych",dictCorpoGossip_038:"Opracowali nanotechnologi\u0119, pozwalaj\u0105c\u0105 produkowa\u0107 dowolne rzeczy z ka\u017Cdej materii",dictCorpoGossip_039:"Opracowali technologi\u0119 zdalnej kontroli ludzkiego umys\u0142u",dictCorpoResources_000:"Zasoby technologiczne",dictCorpoResources_001:"Zasoby finansowe",dictCorpoResources_002:"Kontakty w kr\u0119gach wojskowych",dictCorpoResources_003:"Wp\u0142ywy w grupach hakerskich",dictCorpoResources_004:"Wiarygodno\u015B\u0107 w mediach",dictCorpoResources_005:"Zaufanie zwyk\u0142ych ludzi",dictCorpoResources_006:"Kontakty w\u015Br\xF3d przemytnik\xF3w",dictCorpoResources_007:"Kontrola nad wybranymi gangami",dictCorpoResources_008:"Wp\u0142ywy w urz\u0119dach Administracji",dictCorpoResources_009:"Laboratoria naukowe",dictCorpoResources_010:"Kontrola nad przemytem narkotyk\xF3w",dictCorpoResources_011:"Kontrola nad mediami",dictCorpoResources_012:"Kontrola nad policj\u0105 i s\u0142u\u017Cbami miejskimi",dictCorpoResources_013:"Wp\u0142ywy w sektach religijnych",dictCorpoResources_014:"Mo\u017Cliwo\u015Bci wywiadowcze",dictCorpoResources_015:"Kontakty w\u015Br\xF3d runner\xF3w",dictCorpoResources_016:"Wp\u0142ywy w\u015Br\xF3d handlarzy broni\u0105",dictCorpoResources_017:"Zasoby biotechnologiczne",dictCorpoResources_018:"Zasoby przestrzenne",dictCorpoResources_019:"Kontrola nad przemys\u0142em rozrywkowym",dictCorpoObjective_000:"Zlikwidowa\u0107 fizycznie konkurencj\u0119",dictCorpoObjective_001:"Zdyskredytowa\u0107 konkurencj\u0119 publicznie",dictCorpoObjective_002:"Przej\u0105\u0107 kontrol\u0119 nad wybran\u0105 domen\u0105 publiczn\u0105",dictCorpoObjective_003:"Zmaksymalizowa\u0107 zyski ze sprzeda\u017Cy",dictCorpoObjective_004:"Wykra\u015B\u0107 dane konkurencji",dictCorpoObjective_005:"Zdyskredytowa\u0107 znanego polityka",dictCorpoObjective_006:"Zmusi\u0107/przekona\u0107 znan\u0105 posta\u0107 publiczn\u0105 do podpisania kontraktu",dictCorpoObjective_007:"Ujawni\u0107 nieprawid\u0142owo\u015Bci w instytucjach rz\u0105dowych",dictCorpoObjective_008:"Zapobiec ujawnieniu niewygodnej prawdy o korporacji",dictCorpoObjective_009:"Wykry\u0107 i zlikwidowa\u0107 zdrajc\u0119 wewn\u0105trz korporacji",dictCorpoObjective_010:"Wytropi\u0107 i odzyska\u0107 zbieg\u0142ego pracownika",dictCorpoObjective_011:"Pozyska\u0107 pracownika konkurencji",dictCorpoObjective_012:"Wprowadzi\u0107 w\u0142asnego szpiega na wysokie stanowisko do konkurencji",dictCorpoObjective_013:"Przetestowa\u0107 najnowszy produkt bezpo\u015Brednio na ludziach",dictCorpoObjective_014:"Wprowadzi\u0107 na rynek niebezpieczny produkt",dictCorpoObjective_015:"Zapobiec katastrofie wywo\u0142anej przez eksperymenty korporacji",dictCorpoObjective_016:"Wywo\u0142a\u0107 kontrolowan\u0105 katastrof\u0119",dictCorpoObjective_017:"Dyskretnie opanowa\u0107 niekontrolowan\u0105 katastrof\u0119 wewn\u0105trz korporacji",dictCorpoObjective_018:"Odzyska\u0107 skradzione dane",dictCorpoObjective_019:"Dyskretnie pozby\u0107 si\u0119 niewygodnego cz\u0142onka w\u0142asnego zarz\u0105du",dictCorpoEmployeeProfile_000:"Osobisty honor i poczucie obowi\u0105zku",dictCorpoEmployeeProfile_001:"Wsp\xF3lne dobro (korporacji) warto\u015Bci\u0105 najwy\u017Csz\u0105",dictCorpoEmployeeProfile_002:"Nie istnieje to czego nie wida\u0107 a ka\u017Cdy ma wiele twarzy",dictCorpoEmployeeProfile_003:"Jaka p\u0142aca taka praca",dictCorpoEmployeeProfile_004:"Jedna wielka rodzina",dictCorpoEmployeeProfile_005:"To tylko praca, nic personalnego",dictCorpoEmployeeProfile_006:"Tylko najlepsi osi\u0105gaj\u0105 szczyt",dictCorpoEmployeeProfile_007:"Co zdob\u0119dziesz w\u0142asnor\u0119cznie, jest twoje",dictCorpoEmployeeProfile_008:"Im mniej ci\u0119 wida\u0107, tym bezpieczniej",dictCorpoEmployeeProfile_009:"Sukces odnosi si\u0119 za pomoc\u0105 cierpliwo\u015Bci",dictCorpoEmployeeProfile_010:"Kiedy\u015B nadejdzie dzie\u0144 odp\u0142aty",dictCorpoEmployeeProfile_011:"Ka\u017Cdy mo\u017Ce mie\u0107 sw\xF3j zysk",dictCorpoEmployeeProfile_012:"\u015Awiadomie i odpowiedzialnie tworzymy lepszy \u015Bwiat",dictCorpoEmployeeProfile_013:"Dla ka\u017Cdego miejsce, ka\u017Cdy na swoim miejscu",dictCorpoEmployeeProfile_014:"Jak si\u0119 nie ma co si\u0119 lubi...",dictCorpoEmployeeProfile_015:"Zjednoczeni wsp\xF3lnym wrogiem",dictCorpoEmployeeProfile_016:"Wiara we wsp\xF3ln\u0105 misj\u0119",dictCorpoEmployeeProfile_017:"Jeste\u015Bmy lepsi od innych",dictCorpoEmployeeProfile_018:"Jasno ustalone regu\u0142y",dictCorpoEmployeeProfile_019:"Warto rozmawia\u0107"};var bY=tn({defaultClassName:"_172ep513",variantClassNames:{color:{yellow:"_172ep514",pink:"_172ep515",blue:"_172ep516",green:"_172ep517"}},defaultVariants:{color:"blue"},compoundVariants:[]}),Ro="_172ep51d",wY=tn({defaultClassName:"_172ep518",variantClassNames:{color:{yellow:"_172ep519",pink:"_172ep51a",blue:"_172ep51b",green:"_172ep51c"}},defaultVariants:{color:"blue"},compoundVariants:[]}),xY="_172ep512",CY="_172ep510",SY="_172ep511";const ko=mt("<div></div>"),EY=mt("<div><div></div></div>"),_Y=({item:e})=>{const[t]=jt();return[(()=>{const r=ko.cloneNode(!0);return ft(r,Ro),Ve(r,$(Ie,{size:"small",color:"yellow",get children(){return t("Sector")}}),null),Ve(r,$(Ie,{get children(){return e.sectors.join(", ")}}),null),r})(),(()=>{const r=ko.cloneNode(!0);return ft(r,Ro),Ve(r,$(Ie,{size:"small",color:"yellow",get children(){return t("Gossip")}}),null),Ve(r,$(Ie,{get children(){return e.gossip}}),null),r})(),(()=>{const r=ko.cloneNode(!0);return ft(r,Ro),Ve(r,$(Ie,{size:"small",color:"yellow",get children(){return t("Objective")}}),null),Ve(r,$(Ie,{get children(){return e.objective}}),null),r})(),(()=>{const r=ko.cloneNode(!0);return ft(r,Ro),Ve(r,$(Ie,{size:"small",color:"yellow",get children(){return t("Resources")}}),null),Ve(r,$(Ie,{get children(){return e.resources.join(", ")}}),null),r})(),(()=>{const r=ko.cloneNode(!0);return ft(r,Ro),Ve(r,$(Ie,{size:"small",color:"yellow",get children(){return t("Employee_profile")}}),null),Ve(r,$(Ie,{get children(){return e.employeeProfile}}),null),r})()]},DY=({title:e,subtitle:t,onDelete:r,color:a,titlecolor:s,index:f})=>(jt(),(()=>{const v=EY.cloneNode(!0),h=v.firstChild;return Ve(h,$(xs,{get color(){return xh.colors.pink},style:{height:"12px",width:"12px","align-self":"center"},onClick:r}),null),Ve(h,$(De,{type:"column",get children(){return[$(Ie,{color:s,children:e}),$(Ie,{align:"right",size:"small",color:"blue",children:t})]}}),null),Ve(v,$(Or,{get children(){return $(Ot,{get when(){return li()==="Corporation"},get children(){return $(_Y,{get item(){return Xo()[f]}})}})}}),null),Wt(n=>{const u=bY({color:a}),o=wY({color:s});return u!==n._v$&&ft(v,n._v$=u),o!==n._v$2&&ft(h,n._v$2=o),n},{_v$:void 0,_v$2:void 0}),v})()),AY=new RegExp("mode=[a-zA-Z0-9]+","i"),NY=({open:e,setOpen:t})=>{const[r]=jt(),a=s=>{w1(s),t(!1);let f=window.location.href;window.location.replace(f.replace(AY,`mode=${s}`)),window.location.reload()};return $(Es,{open:e,setOpen:t,get title(){return r("Select_generator")},get children(){return $(De,{type:"column",style:{width:"20%","align-self":"center"},get children(){return[$(Le,{onClick:()=>a("Corporation"),get children(){return $(Ie,{get children(){return r("Corporation")}})}}),$(Le,{onClick:()=>a("Infosphere"),get children(){return $(Ie,{get children(){return r("Infosphere")}})}})]}})}})},TY=mt("<div><div></div><div></div></div>");let H2="Corporation";const Cf=Hx("mode");Cf&&Cf!=""&&(H2=Cf);w1(H2);const OY=()=>{const[e,{add:t}]=jt(),r=Kt(),[a,s]=nt(!1),f={en:gY,pl:yY};Object.keys(f).forEach(o=>{t(o,f[o])}),Ir(()=>{switch(li()){case"Corporation":Rj();break}});const v=()=>{switch(li()){case"Corporation":bq(r,e);break}},h=()=>{switch(li()){case"Corporation":Ko([]),Ut(ns,[]);break}},n=()=>{switch(li()){case"Corporation":const o=`corporation-${eo()}.json`;Qi(Xo(),o);break}},u=()=>{Jl(o=>{switch(li()){case"Corporation":Ko(o),Ut(ns,o);break}})};return[(()=>{const o=TY.cloneNode(!0),i=o.firstChild,l=i.nextSibling;return ft(o,CY),ft(i,SY),Ve(i,$(De,{get children(){return[$(Ie,{color:"pink",weight:700,style:{"align-self":"center"},get children(){return e(li())}}),$(Le,{get title(){return e("Generator")},onClick:()=>s(!0),get children(){return $(uq,{})}})]}}),null),Ve(i,$(De,{style:{gap:"15px"},get children(){return[$(Le,{get title(){return e("Generate")},border:"standard",onClick:v,get children(){return $(Jx,{})}}),$(Le,{get title(){return e("Clean")},onClick:h,get children(){return $(Zx,{})}}),$(Le,{get title(){return e("Export")},onClick:n,get children(){return $(bs,{})}}),$(Le,{get title(){return e("Import")},onClick:u,get children(){return $(ws,{})}})]}}),null),ft(l,xY),Ve(l,$(Or,{get children(){return $(Ot,{get when(){return li()==="Corporation"},get children(){return $(Kn,{get each(){return Xo()},children:(c,d)=>$(DY,{get index(){return d()},titlecolor:"blue",color:"pink",get title(){return c.name},subtitle:"",onDelete:()=>yq(c.id)})})}})}})),o})(),$(NY,{open:a,setOpen:s})]},$y=mt("<br>"),MY=({open:e,setOpen:t})=>{const[r]=jt(),a=Kt();var s,f,v,h,n;const[u,o]=nt(!1),[i,l]=nt(lt()?.lang),c=[{label:"PL",value:"pl"},{label:"EN",value:"en"}];wh(),Ir(()=>{if(!e()||s===void 0||f===void 0)return;const g=lt();!g||(s.value=g.username?g.username:"",f.value=g.color?g.color:"",h.value=g.nats,n.value=g.nats_token,v.value=g.remote,l(g.lang),o(g.hosting))});const d=()=>{if(!s||!f||!a)return;const g={...lt(),username:s.value,color:f.value,nats:h.value,nats_token:n.value,remote:v.value,hosting:u(),lang:i()};Ou(g),Ut(to,g),t(!1),window.location.href="/"},p=()=>{!a||o(!u())},m=Re(()=>Gj());return $(Es,{open:e,setOpen:t,get title(){return r("Configuration")},opacity:"more",get children(){return $(De,{type:"column",center:!0,style:{gap:"10px"},get children(){return[$(Ie,{color:"pink",get children(){return r("Storage")}}),$(De,{get children(){return[$(Ie,{get children(){return r("config_current_storage")}}),$(Ie,{color:"yellow",get children(){return[" ",Re(()=>`${(bE()/1024).toFixed(2)} KB`)]}})]}}),$(Ie,{size:"small",style:{"max-width":"80em"},get children(){return r("config_storage_info")}}),$(Ie,{color:"pink",get children(){return r("Identification")}}),$(De,{get children(){return[$(Ie,{get children(){return r("Browser_ID")}}),$(Ie,{color:"yellow",get children(){return lt()?.browserID}})]}}),$(De,{vcenter:!0,style:{gap:"15px"},get children(){return[$(De,{vcenter:!0,get children(){return[$(Ie,{get children(){return r("Username")}}),$(bt,{ref:g=>s=g})]}}),$(De,{vcenter:!0,get children(){return[$(Ie,{get children(){return`${r("Color")} (${r("HTML_code")})`}}),$(bt,{ref:g=>f=g,style:{width:"7em"}})]}}),$(De,{vcenter:!0,get children(){return $(vY,{title:"Lang",data:c,selected:i,setSelected:l})}})]}}),$(Ie,{color:"pink",get children(){return r("Network_connection")}}),$(Ie,{size:"small",style:{"max-width":"65em","text-align":"center"},get children(){return[Re(()=>r("config_network_desc1")),$y.cloneNode(!0),Re(()=>r("config_network_desc2")),$y.cloneNode(!0)]}}),$(Or,{get children(){return[$(Ot,{get when(){return u()},get children(){return $(De,{get children(){return[$(Le,{onClick:p,get children(){return r("Client")}}),$(Le,{color:"filled",onClick:p,get children(){return r("Host")}})]}})}}),$(Ot,{get when(){return!u()},get children(){return $(De,{get children(){return[$(Le,{color:"filled",onClick:p,get children(){return r("Client")}}),$(Le,{onClick:p,get children(){return r("Host")}})]}})}})]}}),$(De,{type:"column",style:{"align-items":"end"},get children(){return[$(De,{vcenter:!0,get children(){return[$(Ie,{get children(){return r("Server_address")}}),$(bt,{ref:g=>h=g,style:{width:"30em"},placeholder:"ex. ws://hostname:port"})]}}),$(De,{vcenter:!0,get children(){return[$(Ie,{get children(){return r("Credentials")}}),$(bt,{ref:g=>n=g,style:{width:"30em"},placeholder:"username:password"})]}}),$(Wr,{get when(){return!u()},get children(){return $(De,{vcenter:!0,get children(){return[$(Ie,{get children(){return r("Remote_Browser_ID")}}),$(bt,{ref:g=>v=g,style:{width:"30em"},placeholder:"ex. 854a051c-7869-4698-9dfa-4feccb748ce4"})]}})}}),$(Wr,{get when(){return u()},get children(){return $(De,{type:"column",center:!0,style:{"margin-top":"15px"},get children(){return[$(Ie,{color:"pink",get children(){return r("Connection_link")}}),$(Ie,{size:"small",style:{"max-width":"800px","overflow-wrap":"anywhere","align-self":"end"},get children(){return m()}})]}})}})]}}),$(Le,{onClick:d,style:{"margin-top":"15px"},get children(){return r("Save")}})]}})}})},FY=()=>{let e,t;const[r]=jt(),a=Kt(),s=()=>{!t||!e||!a||a.setSelectedDice(`${t.value}d${e.value}`)},f=()=>{if(!t||!e)return;const o=Number.parseInt(t.value);if(Number.isNaN(o)){t.value="1",s();return}t.value=`${o+1}`,s()},v=()=>{if(!t||!e)return;const o=Number.parseInt(t.value);if(Number.isNaN(o)){t.value="1",s();return}o>1&&(t.value=`${o-1}`,s())},h=()=>{if(!t||!e)return;const o=Number.parseInt(e.value);if(Number.isNaN(o)){e.value="1",s();return}e.value=`${o+1}`,s()},n=()=>{if(!t||!e)return;const o=Number.parseInt(e.value);if(Number.isNaN(o)){e.value="1",s();return}o>1&&(e.value=`${o-1}`,s())},u=o=>{!e||(e.value=`${o}`,s())};return $(De,{type:"column",get children(){return[$(De,{center:!0,get children(){return $(De,{get children(){return[$(Le,{size:"small",border:"underline",noupper:!0,onClick:()=>u(4),get children(){return r("d4")}}),$(Le,{size:"small",border:"underline",noupper:!0,onClick:()=>u(6),get children(){return r("d6")}}),$(Le,{size:"small",border:"underline",noupper:!0,onClick:()=>u(8),get children(){return r("d8")}}),$(Le,{size:"small",border:"underline",noupper:!0,onClick:()=>u(10),get children(){return r("d10")}}),$(Le,{size:"small",border:"underline",noupper:!0,onClick:()=>u(12),get children(){return r("d12")}}),$(Le,{size:"small",border:"underline",noupper:!0,onClick:()=>u(20),get children(){return r("d20")}}),$(Le,{size:"small",border:"underline",noupper:!0,onClick:()=>u(100),get children(){return r("d100")}})]}})}}),$(De,{center:!0,get children(){return[$(De,{type:"column",center:!0,get children(){return[$(ea,{onClick:f}),$(ly,{onChange:s,get title(){return r("Scroll to inc/dec")},type:"number",ref:o=>{t=o,t.value="1"},maxLength:2,min:1,style:{"max-width":"2.5em"}}),$(rl,{onClick:v})]}}),$(Ie,{color:"yellow",get children(){return r("dice_letter")}}),$(De,{get children(){return $(De,{type:"column",center:!0,get children(){return[$(ea,{onClick:h}),$(ly,{onChange:s,get title(){return r("Scroll to inc/dec")},type:"number",ref:o=>{e=o,e.value="4"},maxLength:3,min:1,style:{"max-width":"3.5em"}}),$(rl,{onClick:n})]}})}})]}})]}})};var PY="_1ycnn422",BY="_1ycnn421",IY="_1ycnn420",RY="_1ycnn425",kY="_1ycnn424",$Y="_1ycnn423";const LY=mt("<span></span>"),zY=mt("<div><div></div><div></div></div>"),UY=()=>{const[e]=jt(),t=Kt();let r,a=!1,s;const f=(n,u,o,i,l)=>{const c="0123456789#%&^+=-",d=10/n.rolls.length,p=3,m=n.toString().replace("d",e("dice_letter")),g=m;let b=g.length,y=0,w=0,x="",C="";if(!s)return;const S=E=>{if(!(!s||!t)){for(let M=0;M<b-w;M++){var A=Math.floor(c.length*Math.random()),D=c.charAt(A);x=x+D}if(y==p-1&&w++,y==p&&(C=C+g.charAt(w-1),y=0),s.innerHTML=C+x,x="",s.innerHTML==g&&!a){a=!0;const M={id:ti(),user:u,time:xu(),data:m,comment:o,color:i},B=[M,...t.rollHistory()];t.setRollHistory(B),Ut(is,B),l();const O=t.mqttClient();if(!O)return;Ci(lt().browserID,O,xr(Yx),[M])}}};(function E(A){setTimeout(function(){--A&&E(A),S(),y=y+1},d)})(b*p+1)},v=()=>{if(!t)return;const n=rs(t.selectedDice());a=!1;const u=lt();!u||!r||f(n,u.username,r.value,u.color?u.color:"#fff",()=>{!r||(r.value="")})},h=()=>{!t||(t.setRollHistory([]),Ut(is,[]))};return(()=>{const n=zY.cloneNode(!0),u=n.firstChild,o=u.nextSibling;return ft(n,PY),ft(u,kY),Ve(u,$(De,{type:"column",get children(){return[$(Le,{noupper:!0,size:"bigger",border:"underline",onClick:v,get children(){return[Re(()=>e("Roll")),(()=>{const i=LY.cloneNode(!0);return i.style.setProperty("font-weight","bold"),i.style.setProperty("margin-left","0.5em"),Ve(i,()=>t?.selectedDice().replace("d",e("dice_letter"))),i})()]}}),$(bt,{get title(){return e("Input_comment")},ref:i=>r=i,get placeholder(){return`${e("Comment")}...`},small:!0}),$(Ie,{ref:i=>s=i,color:"yellow",style:{overflow:"hidden","text-align":"center"}})]}})),Ve(n,$(De,{style:{position:"relative"},get children(){return[$(FY,{}),$(Zx,{style:{bottom:"0px",right:"0px",position:"absolute",cursor:"pointer"},onClick:h})]}}),o),ft(o,RY),Ve(o,$(Kn,{get each(){return t?.rollHistory()},children:i=>$(De,{get title(){return`${i.time} ${i.comment}`},get children(){return[$(Ie,{get style(){return{color:i.color}},get children(){return i.user}}),$(Ie,{get children(){return i.data}})]}})})),n})()},V2=()=>{const[e]=jt(),t=Ni();var r,a,s,f,v;Ir(()=>{if(!r||!a||!s||!f||!t)return;const n=t.editCharacter();r.value=n.name,a.value=n.credits.toString(),s.value=n.subscription,f.value=n.background,v.innerText=n.notes?n.notes:""});const h=n=>{if(!(!r||!a||!s||!f))switch(n){case"name":t?.setEditCharacter(u=>({...u,name:r.value}));break;case"credits":{const u=Number.parseInt(a.value);t?.setEditCharacter(o=>({...o,credits:u}))}break;case"subscription":t?.setEditCharacter(u=>({...u,subscription:s.value}));break;case"background":t?.setEditCharacter(u=>({...u,background:f.value}));break;case"notes":t?.setEditCharacter(u=>({...u,notes:v.innerText}));break}};return $(De,{style:{width:"90%",gap:"10px","align-self":"center","justify-content":"space-evenly","flex-wrap":"wrap"},get children(){return[$(De,{get children(){return $(De,{type:"column",get children(){return[$(Ie,{size:"middle",color:"yellow",get children(){return e("Name")}}),$(bt,{ref:n=>r=n,style:{width:"18em"},onBlur:()=>h("name")})]}})}}),$(De,{type:"column",get children(){return[$(Ie,{size:"middle",color:"yellow",get children(){return e("Background")}}),$(bt,{ref:n=>f=n,style:{width:"18em"},onBlur:()=>h("background")})]}}),$(De,{type:"column",get children(){return[$(Ie,{size:"middle",color:"yellow",get children(){return e("Subscription")}}),$(bt,{ref:n=>s=n,style:{width:"12em"},onBlur:()=>h("subscription")})]}}),$(De,{type:"column",get children(){return[$(Ie,{size:"middle",color:"yellow",get children(){return e("Credits")}}),$(bt,{ref:n=>a=n,style:{width:"9em"},onBlur:()=>h("credits")})]}}),$(De,{type:"column",get children(){return[$(Ie,{size:"middle",color:"yellow",get children(){return e("Notes")}}),$(ic,{contentEditable:!0,ref:n=>v=n,style:{"min-width":"350px",height:"130px",overflow:"auto"},onBlur:()=>h("notes")})]}})]}})};var jY="_1h9rehr0",Sd=tn({defaultClassName:"_1h9rehr1",variantClassNames:{selected:{true:"_1h9rehr2"}},defaultVariants:{},compoundVariants:[]}),qY="_1h9rehr3";const HY=mt("<div></div>"),G2=()=>{const[e,t]=nt(-1),[r]=jt(),a=Ni(),s=()=>{!a||a?.setEditCharacter(n=>n&&{...n,inventory:[...n.inventory,{description:"new item",fatigue:!1}]})},f=()=>{const n=e();n<0||a?.setEditCharacter(u=>{if(!u)return u;const o=[...u.inventory];return o.splice(n,1),{...u,inventory:o}})},v=n=>{const u=e();if(u<0)return;const o=n.target.value;a?.setEditCharacter(i=>{if(!i)return i;const l=[...i.inventory];return l[u]={...l[u],description:o},{...i,inventory:[...l]}})},h=(n,u)=>{a?.setEditCharacter(o=>{if(!o)return o;const i=[...o.inventory];return i[n]={...i[n],fatigue:u},{...o,inventory:[...i]}})};return $(De,{type:"column",center:!0,style:{width:"90%","align-self":"center"},get children(){return[$(De,{vcenter:!0,style:{"margin-bottom":"10px"},get children(){return[$(Le,{border:"underline",onClick:f,get children(){return $(rl,{})}}),$(Ie,{color:"yellow",size:"middle",get children(){return[Re(()=>`${r("Inventory")} (`),Re(()=>a?.editCharacter()?.inventory.length),")"]}}),$(Le,{border:"underline",onClick:s,get children(){return $(ea,{})}})]}}),$(De,{type:"column",style:{width:"70%","min-width":"350px","align-self":"center","max-height":"calc(100vh - 300px)",overflow:"auto"},get children(){return $(Kn,{get each(){return a?.editCharacter()?.inventory},children:(n,u)=>$(De,{vcenter:!0,get children(){const o=HY.cloneNode(!0);return o.$$click=()=>t(u()),Ve(o,$(bt,{onBlur:v,middle:!0,style:{"background-color":"transparent",width:"100%"},underline:"blue",get value(){return n.description}}),null),Ve(o,$(Or,{get children(){return[$(Ot,{get when(){return n.fatigue===!0},get children(){return $(Le,{onClick:()=>h(u(),!1),border:"none",get children(){return $(cq,{get style(){return{cursor:"pointer",fill:sn.pink}}})}})}}),$(Ot,{get when(){return n.fatigue===!1},get children(){return $(Le,{onClick:()=>h(u(),!0),border:"none",get children(){return $(lq,{style:{cursor:"pointer"}})}})}})]}}),null),Wt(()=>ft(o,Sd({selected:e()===u()}))),o}})})}})]}})};fn(["click"]);const VY=mt("<div></div>"),vl=({isDeck:e})=>{const[t]=jt(),r=Ni(),[a,s]=nt(-1),f=()=>{e?r?.setEditCharacter(d=>({...d,cyberdeck:[...d.cyberdeck,R0()]})):r?.setEditCharacter(d=>({...d,cybermods:[...d.cybermods,R0()]}))},v=()=>{const d=a();d<0||r?.setEditCharacter(p=>{if(e){const m=[...p.cyberdeck];return m.splice(d,1),{...p,cyberdeck:[...m]}}else{const m=[...p.cybermods];return m.splice(d,1),{...p,cybermods:[...m]}}})},h=d=>{const p=a();if(p<0)return;const m=d.target.value;r?.setEditCharacter(g=>{if(e){const b=g.cyberdeck;return b[p]={...b[p],name:m},{...g,cyberdeck:[...b]}}else{const b=g.cybermods;return b[p]={...b[p],name:m},{...g,cybermods:[...b]}}})},n=d=>{const p=a();if(p<0)return;const m=d.target.value;r?.setEditCharacter(g=>{if(e){const b=g.cyberdeck;return b[p]={...b[p],description:m},{...g,cyberdeck:[...b]}}else{const b=g.cybermods;return b[p]={...b[p],description:m},{...g,cybermods:[...b]}}})},u=(d,p)=>{r?.setEditCharacter(m=>{if(e){const g=[...m.cyberdeck];return g[d]={...g[d],need_activation:p},{...m,cyberdeck:[...g]}}else{const g=[...m.cybermods];return g[d]={...g[d],need_activation:p},{...m,cybermods:[...g]}}})},o=(d,p)=>{const m=r?.editCharacter();if(!m)return;let g=-1;for(let w=0;w<m.inventory.length;w++)if(m.inventory[w].fatigue===!1){g=w;break}const b=m.inventory.filter(w=>w.fatigue===!1);if(g<0&&p===!0){alert("Cyberware overuse! Cannot activate mod or program because character does not have free inventory slots.");return}let y=!1;b?.length===1&&p===!0&&(alert("Marking last inventory slot requires reducing PSY ability because of cyberware overuse."),y=!0),r?.setEditCharacter(w=>{const x=w.psy[0]>0?w.psy[0]-1:0,C=[...w.inventory];if(p===!0&&(C[g]={...C[g],fatigue:!0}),e){const S=[...w.cyberdeck];return S[d]={...S[d],activated:p},y===!0?{...w,cyberdeck:[...S],psy:[x,w.psy[1]],inventory:[...C]}:{...w,cyberdeck:[...S],inventory:[...C]}}else{const S=[...w.cybermods];return S[d]={...S[d],activated:p},y===!0?{...w,cybermods:[...S],psy:[x,w.psy[1]],inventory:[...C]}:{...w,cybermods:[...S],inventory:[...C]}}})},i=()=>{r?.setEditCharacter(d=>{if(e){const m=[...d.cyberdeck].map(g=>({...g,activated:!1}));return{...d,cyberdeck:m}}else{const m=[...d.cybermods].map(g=>({...g,activated:!1}));return{...d,cybermods:m}}})},l=["neuroprocessor","neuroprocesor","neuroproc"],c=Re(()=>{if(!e)return"";let d="";return r?.editCharacter().cybermods.forEach(p=>{l.forEach(m=>{p.name.toLowerCase().includes(m)&&(d=`[${p.description}]`)})}),d});return $(De,{type:"column",center:!0,style:{width:"90%","align-self":"center"},get children(){return[$(De,{vcenter:!0,style:{"margin-bottom":"10px"},get children(){return[$(Le,{border:"underline",onClick:v,get children(){return $(rl,{})}}),$(Ie,{color:"yellow",size:"middle",get children(){return[Re(()=>e?`${t("Cyberdeck")} (`:`${t("Cybermods")} (`),Re(()=>r&&(e?Object.keys(r.editCharacter().cyberdeck).length:Object.keys(r.editCharacter().cybermods).length)),")"]}}),$(Tu,{component:"Texte",get style(){return{"align-self":"center",color:xh.colors.pink}},get children(){return c()}}),$(Le,{border:"underline",onClick:f,get children(){return $(ea,{})}}),$(Le,{border:"underline",onClick:i,style:{"margin-left":"15px"},title:"Reset activation",get children(){return $(hq,{})}})]}}),$(De,{type:"column",style:{width:"70%","align-self":"center","min-width":"350px","max-height":"calc(100vh - 300px)",overflow:"auto"},get children(){return $(Kn,{get each(){return e?r?.editCharacter().cyberdeck:r?.editCharacter().cybermods},children:(d,p)=>$(De,{vcenter:!0,get children(){const m=VY.cloneNode(!0);return m.$$click=()=>s(p()),m.style.setProperty("flex-wrap","wrap"),Ve(m,$(De,{style:{width:"100%"},get children(){return[$(bt,{onBlur:h,middle:!0,style:{"background-color":"transparent",width:"100%"},underline:"blue",get value(){return d.name}}),$(Or,{get children(){return[$(Ot,{get when(){return d.need_activation===!0},get children(){return $(Le,{onClick:()=>u(p(),!1),border:"none",get children(){return $(Kx,{get style(){return{cursor:"pointer",fill:sn.pink}}})}})}}),$(Ot,{get when(){return d.need_activation===!1},get children(){return $(Le,{border:"none",onClick:()=>u(p(),!0),get children(){return $(dq,{get style(){return{cursor:"pointer",fill:sn.green}}})}})}})]}})]}}),null),Ve(m,$(De,{style:{width:"100%"},get children(){return[$(bt,{onBlur:n,middle:!0,style:{"background-color":"transparent",width:"100%"},underline:"blue",get value(){return d.description}}),$(Wr,{get when(){return d.need_activation===!0},get children(){return $(Or,{get children(){return[$(Ot,{get when(){return d.activated===!0},get children(){return $(Le,{border:"none",onClick:()=>o(p(),!1),get children(){return $(rq,{get style(){return{cursor:"pointer",fill:sn.pink}}})}})}}),$(Ot,{get when(){return d.activated===!1},get children(){return $(Le,{border:"none",onClick:()=>o(p(),!0),get children(){return $(Jx,{get style(){return{cursor:"pointer",fill:sn.green}}})}})}})]}})}})]}}),null),Wt(()=>ft(m,Sd({selected:a()===p()}))),m}})})}})]}})};fn(["click"]);const GY=mt("<div></div>"),WY=()=>GY.cloneNode(!0),W2=()=>{const[e]=jt(),t=Ni();var r,a,s,f,v,h,n,u,o;const i=(l,c)=>{let d=0;switch(l){case"bio":c==0?(d=Number.parseInt(r.value),d!==NaN&&t?.setEditCharacter(p=>({...p,bio:[d,p.bio[1]]}))):(d=Number.parseInt(a.value),d!==NaN&&t?.setEditCharacter(p=>({...p,bio:[p.bio[0],d]})));break;case"psy":c==0?(d=Number.parseInt(s.value),d!==NaN&&t?.setEditCharacter(p=>({...p,psy:[d,p.psy[1]]}))):(d=Number.parseInt(f.value),d!==NaN&&t?.setEditCharacter(p=>({...p,psy:[p.psy[0],d]})));break;case"inf":c==0?(d=Number.parseInt(v.value),d!==NaN&&t?.setEditCharacter(p=>({...p,inf:[d,p.inf[1]]}))):(d=Number.parseInt(h.value),d!==NaN&&t?.setEditCharacter(p=>({...p,inf:[p.inf[0],d]})));break;case"hp":c==0?(d=Number.parseInt(n.value),d!==NaN&&t?.setEditCharacter(p=>({...p,hp:[d,p.hp[1]]}))):(d=Number.parseInt(u.value),d!==NaN&&t?.setEditCharacter(p=>({...p,hp:[p.hp[0],d]})));break;case"armor":d=Number.parseInt(o.value),d!==NaN&&t?.setEditCharacter(p=>({...p,armor:d}));break;case"deprived":c==0?t?.setEditCharacter(p=>({...p,deprived:!1})):t?.setEditCharacter(p=>({...p,deprived:!0}));break;case"shared":c==0?t?.setEditCharacter(p=>({...p,shared:!1})):t?.setEditCharacter(p=>({...p,shared:!0}));break}};return Ir(()=>{!r||!a||!s||!f||!v||!h||!n||!u||!o||!t||(r.value=t.editCharacter().bio[0].toString(),a.value=t.editCharacter().bio[1].toString(),s.value=t.editCharacter().psy[0].toString(),f.value=t.editCharacter().psy[1].toString(),v.value=t.editCharacter().inf[0].toString(),h.value=t.editCharacter().inf[1].toString(),n.value=t.editCharacter().hp[0].toString(),u.value=t.editCharacter().hp[1].toString(),o.value=t.editCharacter().armor.toString())}),$(De,{style:{width:"90%",gap:"10px","align-self":"center","justify-content":"center"},get children(){return $(De,{center:!0,style:{gap:"35px","flex-wrap":"wrap"},get children(){return[$(De,{type:"column",get children(){return[$(Ie,{size:"middle",color:"yellow",style:{"align-self":"center"},get children(){return e("BIO")}}),$(De,{vcenter:!0,get children(){return[$(bt,{ref:l=>r=l,center:!0,style:{width:"2em"},onBlur:()=>i("bio",0)}),"/",$(bt,{center:!0,ref:l=>a=l,style:{width:"2em"},onBlur:()=>i("bio",1)})]}})]}}),$(De,{type:"column",get children(){return[$(Ie,{size:"middle",color:"yellow",style:{"align-self":"center"},get children(){return e("PSY")}}),$(De,{vcenter:!0,get children(){return[$(bt,{ref:l=>s=l,center:!0,style:{width:"2em"},onBlur:()=>i("psy",0)}),"/",$(bt,{center:!0,ref:l=>f=l,style:{width:"2em"},onBlur:()=>i("psy",1)})]}})]}}),$(De,{type:"column",get children(){return[$(Ie,{size:"middle",color:"yellow",style:{"align-self":"center"},get children(){return e("INF")}}),$(De,{vcenter:!0,get children(){return[$(bt,{ref:l=>v=l,center:!0,style:{width:"2em"},onBlur:()=>i("inf",0)}),"/",$(bt,{center:!0,ref:l=>h=l,style:{width:"2em"},onBlur:()=>i("inf",1)})]}})]}}),$(De,{type:"column",get children(){return[$(Ie,{size:"middle",color:"yellow",style:{"align-self":"center"},get children(){return e("HP")}}),$(De,{vcenter:!0,get children(){return[$(bt,{ref:l=>n=l,center:!0,style:{width:"2em"},onBlur:()=>i("hp",0)}),"/",$(bt,{center:!0,ref:l=>u=l,style:{width:"2em"},onBlur:()=>i("hp",1)})]}})]}}),$(De,{type:"column",get children(){return[$(Ie,{size:"middle",color:"yellow",style:{"align-self":"center"},get children(){return e("Armor")}}),$(De,{get children(){return $(bt,{ref:l=>o=l,center:!0,style:{width:"2em"},onBlur:()=>i("armor",0)})}})]}}),$(De,{type:"column",style:{"align-self":"end"},get children(){return $(Or,{get children(){return[$(Ot,{get when(){return t?.editCharacter().deprived},get children(){return $(Le,{style:{"align-self":"end"},color:"filled",onClick:()=>i("deprived",0),get children(){return e("Deprived")}})}}),$(Ot,{get when(){return!t?.editCharacter().deprived},get children(){return $(Le,{style:{"align-self":"end"},onClick:()=>i("deprived",1),get children(){return e("Deprived")}})}})]}})}}),$(De,{type:"column",style:{"align-self":"end"},get children(){return $(Or,{get children(){return[$(Ot,{get when(){return t?.editCharacter().shared},get children(){return $(Le,{style:{"align-self":"end"},color:"filled",size:"small",onClick:()=>i("shared",0),get children(){return e("Shared")}})}}),$(Ot,{get when(){return!t?.editCharacter().shared},get children(){return $(Le,{size:"small",style:{"align-self":"end"},onClick:()=>i("shared",1),get children(){return e("Shared")}})}})]}})}})]}})}})},YY=({open:e,setOpen:t})=>{const[r]=jt(),a=Ni(),s=Kt(),f=()=>{if(!a||!s)return;const h=a.editCharacter(),n={...s.charData,[h.id]:a.editCharacter()};if(s.setCharData(n),s.setSelectedChar(Cl),Ut(xo,n),t(!1),h.shared){const u=s.mqttClient();u!==void 0&&Ci(lt().browserID,u,xr(tl),[h])}},v=Re(()=>a?.editCharacter()?.id);return $(Es,{open:e,setOpen:t,get title(){return`${r("Character")} ${v()}`},opacity:"more",get children(){return $(De,{type:"column",center:!0,get children(){return[$(De,{type:"column",style:{height:"calc(100vh - 120px)",width:"calc(100vw - 30px)",overflow:"auto",gap:"25px","margin-bottom":"20px","align-self":"center"},get children(){return[$(V2,{}),$(W2,{}),$(G2,{}),$(vl,{isDeck:!1}),$(vl,{isDeck:!0}),$(WY,{})]}}),$(De,{center:!0,get children(){return $(Le,{onClick:f,get children(){return r("Save")}})}})]}})}})},XY=mt("<div></div>"),KY=({id:e})=>{const t=Kt(),r=Ni(),a=Re(()=>{if(!!t)return t.charData[e]}),s=Re(()=>{if(!t)return;const n=t.selectedChar(),u=a();return!n||!u?!1:u.id===n.id}),[f]=jt(),v=()=>{!t||t.setSelectedChar(t.charData[e])},h=n=>{const u=a();!t||!u||!r||u?.id.trim()===""||(r.setEditCharacter({...u}),t.setSubeditOpen(n))};return(()=>{const n=XY.cloneNode(!0);return n.$$click=v,Ve(n,$(De,{type:"column",style:{width:"100%"},get children(){return[$(De,{style:{"justify-content":"space-between"},get children(){return[$(Ie,{color:"green",size:"bigger",onClick:()=>h("basic"),get children(){return a()?.name}}),$(Wr,{get when(){return a()?.shared===!0},get children(){return $(iq,{get style(){return{"align-self":"center",fill:xh.colors.blue,"margin-right":"10px"}}})}})]}}),$(De,{style:{gap:"25px"},get children(){return[$(De,{get children(){return[$(Ie,{color:"yellow",onClick:()=>h("stat"),get children(){return[Re(()=>f("BIO")),":"]}}),$(Ie,{get children(){return[Re(()=>a()?.bio[0]),"/",Re(()=>a()?.bio[1])]}})]}}),$(De,{get children(){return[$(Ie,{color:"yellow",onClick:()=>h("stat"),get children(){return[Re(()=>f("PSY")),":"]}}),$(Ie,{get children(){return[Re(()=>a()?.psy[0]),"/",Re(()=>a()?.psy[1])]}})]}}),$(De,{get children(){return[$(Ie,{color:"yellow",onClick:()=>h("stat"),get children(){return[Re(()=>f("INF")),":"]}}),$(Ie,{get children(){return[Re(()=>a()?.inf[0]),"/",Re(()=>a()?.inf[1])]}})]}}),$(De,{get children(){return[$(Ie,{color:"yellow",onClick:()=>h("stat"),get children(){return[Re(()=>f("HP")),":"]}}),$(Ie,{get children(){return[Re(()=>a()?.hp[0]),"/",Re(()=>a()?.hp[1])]}})]}}),$(De,{get children(){return[$(Ie,{color:"yellow",onClick:()=>h("stat"),get children(){return[Re(()=>f("Armor")),":"]}}),$(Ie,{get children(){return a()?.armor}})]}}),$(De,{get children(){return $(Wr,{get when(){return a()?.deprived},get children(){return $(Ie,{color:"pink",onClick:()=>h("stat"),get children(){return f("Deprived")}})}})}})]}}),$(De,{style:{gap:"25px"},get children(){return[$(De,{get children(){return[$(Ie,{color:"yellow",onClick:()=>h("basic"),get children(){return[Re(()=>f("Credits")),":"]}}),$(Ie,{get children(){return a()?.credits}})]}}),$(De,{get children(){return[$(Ie,{color:"yellow",onClick:()=>h("inv"),get children(){return[Re(()=>f("Inventory")),":"]}}),$(Ie,{get children(){return[Re(()=>a()?.inventory.filter(u=>u.fatigue).length)," ",Re(()=>f("inventory_fatigued"))," /"]}}),$(Ie,{get children(){return[Re(()=>a()?.inventory.length)," ",Re(()=>f("inventory_total"))]}})]}})]}}),$(De,{style:{gap:"25px"},get children(){return[$(De,{get children(){return[$(Ie,{color:"yellow",onClick:()=>h("cybermods"),get children(){return[Re(()=>f("Cybermods")),":"]}}),$(Ie,{get children(){return[Re(()=>a()?.cybermods.filter(u=>u.activated).length)," ",Re(()=>f("activated"))," /"]}}),$(Ie,{get children(){return[Re(()=>a()?.cybermods.length)," ",Re(()=>f("total"))]}})]}}),$(De,{get children(){return[$(Ie,{color:"yellow",onClick:()=>h("cyberdeck"),get children(){return[Re(()=>f("Programs")),":"]}}),$(Ie,{get children(){return[Re(()=>a()?.cyberdeck.filter(u=>u.activated).length)," ",Re(()=>f("activated"))," /"]}}),$(Ie,{get children(){return[Re(()=>a()?.cyberdeck.length)," ",Re(()=>f("total"))]}})]}})]}})]}})),Wt(()=>ft(n,Sd({selected:s()}))),n})()};fn(["click"]);const JY=mt("<div></div>"),ZY=()=>{const e=Kt(),[t]=jt(),r=Ni(),a=()=>{if(!r||!e)return;const s=r.editCharacter(),f={...e.charData,[s.id]:r.editCharacter()};if(e.setCharData(f),e.setSelectedChar(Cl),Ut(xo,f),e.setSubeditOpen(""),s.shared){const v=e.mqttClient();v!==void 0&&Ci(lt().browserID,v,xr(tl),[s])}};return(()=>{const s=JY.cloneNode(!0);return ft(s,qY),Ve(s,$(De,{type:"column",center:!0,get children(){return[$(De,{style:{"justify-content":"space-between",width:"100%",padding:"5px","padding-left":"15px","align-items":"center"},get children(){return[$(Ie,{color:"green",size:"bigger",get children(){return $(Tu,{component:"span",get children(){return r?.editCharacter().name}})}}),$(Le,{border:"none",onClick:()=>e?.setSubeditOpen(""),get children(){return $(Ie,{color:"pink",size:"bigger",children:"\xD7"})}})]}}),$(De,{center:!0,style:{"margin-top":"20px","margin-bottom":"20px",padding:"10px",flex:1,height:"calc(100vh - 120px)"},get children(){return $(Or,{get children(){return[$(Ot,{get when(){return e?.subeditOpen()==="stat"},get children(){return $(W2,{})}}),$(Ot,{get when(){return e?.subeditOpen()==="basic"},get children(){return $(V2,{})}}),$(Ot,{get when(){return e?.subeditOpen()==="inv"},get children(){return $(G2,{})}}),$(Ot,{get when(){return e?.subeditOpen()==="cybermods"},get children(){return $(vl,{isDeck:!1})}}),$(Ot,{get when(){return e?.subeditOpen()==="cyberdeck"},get children(){return $(vl,{isDeck:!0})}})]}})}}),$(Le,{onClick:a,get children(){return t("Save")}})]}})),s})()},QY=mt("<div></div>"),eX=()=>{const[e,t]=nt(!1),[r,a]=nt(""),[s]=jt(),f=Ni(),v=Kt();let h;const[n,u]=nt(!1),o=()=>{const y=_q(!0);f?.setEditCharacter(y),t(!0)},i=()=>{if(!v)return;const y=v.selectedChar();!y||!f||y.id.trim()===""||(f.setEditCharacter({...y}),t(!0))},l=y=>{a(y.target.value)},c=()=>{!h||(a(""),h.value="")},d=Re(()=>`${s("Really_delete_character")} ${v?.selectedChar()?.name}?`),p=()=>{if(!v)return;const y=v.selectedChar();if(!y||y.id==="")return;const w={...v.charData,[y.id]:void 0};Ut(xo,w),v.setCharData(w)},m=Re(()=>v?Object.values(v.charData):[]),g=()=>{const y=`characters-${eo()}.json`;Qi(v?.charData,y)},b=()=>{Jl(y=>{v?.setCharData(y)})};return $(De,{type:"column",center:!0,style:{width:"100%",height:"calc(100vh - 100px)","margin-top":"10px"},get children(){return[$(De,{style:{width:"95%"},get children(){return[$(Le,{get title(){return s("Add")},onClick:o,get children(){return $(ea,{})}}),$(bt,{onInput:l,underline:"blue",style:{flex:1},ref:y=>h=y}),$(Le,{get title(){return s("Clear")},onClick:c,get children(){return $(dd,{})}}),$(Le,{get title(){return s("Edit")},style:{"margin-left":"15px"},onClick:i,get children(){return $(pd,{})}}),$(Le,{get title(){return s("Delete_selected")},style:{"margin-left":"15px"},onClick:()=>{v?.selectedChar().id!==""&&u(!0)},get children(){return $(xs,{})}}),$(Le,{get title(){return s("Export")},style:{"margin-left":"15px"},onClick:g,get children(){return $(bs,{})}}),$(Le,{get title(){return s("Import")},onClick:b,get children(){return $(ws,{})}})]}}),(()=>{const y=QY.cloneNode(!0);return ft(y,jY),Ve(y,$(Kn,{get each(){return m().filter(w=>r()===""||w.name.includes(r())).sort((w,x)=>w.name.localeCompare(x.name))},children:w=>$(KY,{get id(){return w.id}})})),y})(),$(YY,{setOpen:t,open:e}),$(Wr,{get when(){return v?.subeditOpen()!==""},get children(){return $(ZY,{})}}),$(xd,{get title(){return s("Delete_character")},open:n,setOpen:u,accept:p,get children(){return $(Ie,{children:d})}})]}})},tX=({isShared:e,open:t,setOpen:r,item:a})=>{var s,f;const v=Kt();Ir(()=>{const u=a();!t()||!u||!s||!f||(s.value=u.title,f.innerText=u.content)});const h=()=>{if(!v)return;const u=a();if(!s||!f||!u)return;const o=e?{...v.boardData()}:{...v.noteData()};if(u.title=s.value,u.content=f.innerText,o[u.id]={...u},e){v.setBoardData(o),Ut(ys,o);const i=v.mqttClient();i!==void 0&&Ci(lt().browserID,i,xr(th),Object.values(v.boardData()))}else v.setNoteData(o),Ut(Zl,o);v.setSelectedNote(void 0),r(!1)},[n]=jt();return $(Es,{open:t,setOpen:r,get title(){return n("Note")},opacity:"more",get children(){return $(De,{type:"column",style:{width:"80%","align-self":"center",gap:"10px"},get children(){return[$(Ie,{size:"small",color:"yellow",get children(){return n("Title")}}),$(bt,{ref:u=>{s=u},style:{flex:1}}),$(Ie,{size:"small",color:"yellow",get children(){return n("Content")}}),$(ic,{ref:u=>{f=u},small:!0,contentEditable:!0,border:"none",style:{flex:1,"white-space":"pre-wrap","min-height":"400px","max-height":"400px"}}),$(Le,{style:{"align-self":"end"},onClick:h,get children(){return n("Save")}})]}})}})};var rX=tn({defaultClassName:"_12ljcn32",variantClassNames:{selected:{true:"_12ljcn33"}},defaultVariants:{},compoundVariants:[]}),nX="_12ljcn30",iX="_12ljcn31";const aX=mt("<div></div>"),oX=({item:e,onClick:t})=>{const r=Kt(),a=Re(()=>e?.id===r?.selectedNote()?.id);return(()=>{const s=aX.cloneNode(!0);return Br(s,"click",t,!0),Ve(s,$(Ie,{get children(){return e?.title}})),Wt(()=>ft(s,rX({selected:a()}))),s})()};fn(["click"]);const Ly=mt("<div></div>"),zy=({isShared:e})=>{const[t,r]=nt(!1),[a,s]=nt(""),[f]=jt(),[v,h]=nt();let n;const[u,o]=nt(!1),i=Kt();Ir(()=>{!i||(e?Object.values(i.boardData()).length>0&&i.setSelectedNote(Object.values(i.boardData())[0]):Object.values(i.noteData()).length>0&&i.setSelectedNote(Object.values(i.noteData())[0]))});const l=S=>{!i||i.setSelectedNote(S)},c=S=>{s(S.target.value)},d=()=>{!n||(s(""),n.value="")},p=()=>{const S=Cq();h(S),r(!0)},m=()=>{if(!i)return;const S=i.selectedNote();!S||(h(S),r(!0))},g=()=>{if(!i)return;const S=i.selectedNote();if(!S)return;const E=e?Eq(i,S):Sq(i,S);Ut(e?ys:Zl,E)},b=Re(()=>i?`${f("Really_delete_message")} ${i.selectedNote()?.title}?`:""),y=Re(()=>i?i.selectedNote()?.content:""),w=Re(()=>i?Object.values(e?i.boardData():i.noteData()).filter(S=>a()===""||S.title.includes(a())).sort((S,E)=>S.title.localeCompare(E.title)):[]),x=()=>{if(e){const S=`board-${eo()}.json`;Qi(i?.boardData(),S)}else{const S=`notes-${eo()}.json`;Qi(i?.noteData(),S)}},C=()=>{};return $(De,{type:"column",center:!0,style:{width:"100%",height:"calc(100vh - 100px)","margin-top":"10px"},get children(){return[$(De,{style:{width:"95%"},get children(){return[$(Le,{get title(){return f("Add")},onClick:p,get children(){return $(ea,{})}}),$(bt,{onInput:c,underline:"blue",style:{flex:1},ref:S=>n=S}),$(Le,{get title(){return f("Clear")},onClick:d,get children(){return $(dd,{})}}),$(Le,{get title(){return f("Edit")},style:{"margin-left":"15px"},onClick:m,get children(){return $(pd,{})}}),$(Le,{get title(){return f("Delete_selected")},style:{"margin-left":"15px"},onClick:()=>o(!0),get children(){return $(xs,{})}}),$(Le,{get title(){return f("Export")},style:{"margin-left":"15px"},onClick:x,get children(){return $(bs,{})}}),$(Le,{get title(){return f("Import")},onClick:C,get children(){return $(ws,{})}})]}}),(()=>{const S=Ly.cloneNode(!0);return ft(S,nX),Ve(S,$(Kn,{get each(){return w()},children:E=>$(oX,{item:E,onClick:()=>l(E)})})),S})(),(()=>{const S=Ly.cloneNode(!0);return ft(S,iX),Ve(S,$(Wr,{get when(){return i?.selectedNote()},get children(){return $(ic,{contentEditable:!1,border:"none",style:{flex:1,"white-space":"pre-wrap","background-color":"transparent"},children:y})}})),S})(),$(tX,{isShared:e,open:t,setOpen:r,item:v}),$(xd,{get title(){return f("Delete_item")},open:u,setOpen:o,accept:g,get children(){return $(Ie,{children:b})}})]}})};var sX=tn({defaultClassName:"ooocel1",variantClassNames:{selected:{true:"ooocel2"}},defaultVariants:{},compoundVariants:[]}),uX="ooocel0";const lX=mt("<div></div>"),cX=({item:e,onClick:t})=>{const r=Kt(),a={};let s;const f=Re(()=>e?.id===r?.selectedTrack()?.id),[v]=jt(),h=u=>{const o=a[u];if(!r||!e||!o)return;switch(u){case"name":e.name=o.value;break;case"symbol":e.symbol=o.value;break;case"dmgdice":e.dmgdice=Number.parseInt(o.value);break;case"hp":e.hp=Number.parseInt(o.value);break;case"bio":e.bio=Number.parseInt(o.value);break;case"psy":e.psy=Number.parseInt(o.value);break;case"inf":e.inf=Number.parseInt(o.value);break;case"armor":e.armor=Number.parseInt(o.value);break}const i={...r.trackData(),[e.id]:{...e}};r.setTrackData(i),Ut(Xi,i)},n=()=>{if(!r||!s||!e)return;e.description=s.innerText;const u={...r.trackData(),[e.id]:{...e}};r.setTrackData(u),Ut(Xi,u)};return(()=>{const u=lX.cloneNode(!0);return Br(u,"click",t,!0),Ve(u,$(De,{style:{gap:"15px",width:"100%"},get children(){return[$(De,{type:"column",style:{gap:"15px"},get children(){return[$(De,{vcenter:!0,style:{gap:"10px","flex-wrap":"wrap","justify-content":"space-between"},get children(){return[$(bt,{underline:"blue",get value(){return e?.name},transparent:!0,onBlur:()=>h("name"),ref:o=>a.name=o}),$(Ie,{size:"small",color:"blue",children:"Symbol"}),$(bt,{transparent:!0,center:!0,middle:!0,underline:"blue",get value(){return e?.symbol},style:{width:"2em"},onBlur:()=>h("symbol"),ref:o=>a.symbol=o}),$(Ie,{size:"small",color:"blue",get children(){return v("dmg_dice").toUpperCase()}}),$(bt,{transparent:!0,center:!0,middle:!0,underline:"blue",get value(){return e?.dmgdice},style:{width:"2em"},onBlur:()=>h("dmgdice"),ref:o=>a.dmgdice=o})]}}),$(De,{style:{"flex-wrap":"wrap",gap:"25px"},get children(){return[$(De,{vcenter:!0,get children(){return[$(Ie,{color:"yellow",size:"small",get children(){return v("HP")}}),$(bt,{transparent:!0,middle:!0,center:!0,underline:"blue",get value(){return e?.hp},style:{width:"2em"},onBlur:()=>h("hp"),ref:o=>a.hp=o})]}}),$(De,{vcenter:!0,get children(){return[$(Ie,{color:"yellow",size:"small",children:"BIO"}),$(bt,{middle:!0,transparent:!0,center:!0,underline:"blue",get value(){return e?.bio},style:{width:"2em"},onBlur:()=>h("bio"),ref:o=>a.bio=o})]}}),$(De,{vcenter:!0,get children(){return[$(Ie,{color:"yellow",size:"small",children:"PSY"}),$(bt,{middle:!0,transparent:!0,center:!0,underline:"blue",get value(){return e?.psy},style:{width:"2em"},onBlur:()=>h("psy"),ref:o=>a.psy=o})]}}),$(De,{vcenter:!0,get children(){return[$(Ie,{color:"yellow",size:"small",children:"INF"}),$(bt,{middle:!0,transparent:!0,center:!0,underline:"blue",get value(){return e?.inf},style:{width:"2em"},onBlur:()=>h("inf"),ref:o=>a.inf=o})]}}),$(De,{vcenter:!0,get children(){return[$(Ie,{color:"yellow",size:"small",get children(){return v("Armor").toUpperCase()}}),$(bt,{middle:!0,transparent:!0,center:!0,underline:"blue",get value(){return e?.armor},style:{width:"2em"},onBlur:()=>h("armor"),ref:o=>a.armor=o})]}})]}})]}}),$(ic,{contentEditable:!0,border:"none",small:!0,style:{"max-height":"4em",flex:1},ref:o=>s=o,onBlur:n,get children(){return e?.description}})]}})),Wt(()=>ft(u,sX({selected:f()}))),u})()};fn(["click"]);const fX=mt("<div></div>"),hX=()=>{const e=Kt(),[t]=jt(),[r,a]=nt("");let s;const[f,v]=nt(!1),h=Re(()=>e?Object.values(e.trackData()).filter(g=>r().trim()===""||g.name.toLowerCase().includes(r().toLowerCase())):[]),n=g=>{!e||e.setSelectedTrack(g)},u=()=>{if(!e)return;const g=Mf(!0),b={...e.trackData(),[g.id]:g};e.setTrackData(b),Ut(Xi,b)},o=()=>{if(!e)return;const g=e.selectedTrack();if(!g||g.id.trim()==="")return;const b=xq(e,g);Ut(Xi,b),e.setSelectedTrack(Mf())},i=()=>{if(!e)return;const g=e.selectedTrack();if(!g||g.id.trim()==="")return;const b={...g,id:ti()},y={...e.trackData(),[b.id]:b};e.setTrackData(y),Ut(Xi,y)},l=()=>{!s||(a(""),s.value="")},c=()=>{if(!e)return;const g=e.selectedTrack();!g||g.id.trim()===""||v(!0)},d=Re(()=>e?`${t("Really_delete_track")} ${e.selectedTrack()?.name}?`:""),p=()=>{const g=`trackers-${eo()}.json`;Qi(e?.trackData(),g)},m=()=>{Jl(g=>{e?.setTrackData(g)})};return $(De,{center:!0,type:"column",get children(){return[$(De,{style:{width:"95%"},get children(){return[$(Le,{get title(){return t("Add")},onClick:u,get children(){return $(ea,{})}}),$(bt,{onInput:()=>a(s.value),underline:"blue",style:{flex:1},ref:g=>s=g}),$(Le,{get title(){return t("Clear")},onClick:l,get children(){return $(dd,{})}}),$(Le,{get title(){return t("Copy")},style:{"margin-left":"15px"},onClick:i,get children(){return $(nq,{})}}),$(Le,{get title(){return t("Delete_selected")},style:{"margin-left":"15px"},onClick:c,get children(){return $(xs,{})}}),$(Le,{get title(){return t("Export")},style:{"margin-left":"15px"},onClick:p,get children(){return $(bs,{})}}),$(Le,{get title(){return t("Import")},onClick:m,get children(){return $(ws,{})}})]}}),(()=>{const g=fX.cloneNode(!0);return ft(g,uX),Ve(g,$(Kn,{get each(){return h()},children:b=>$(cX,{item:b,onClick:()=>n(b)})})),g})(),$(xd,{get title(){return t("Delete_item")},open:f,setOpen:v,accept:o,get children(){return $(Ie,{children:d})}})]}})},dX=mt("<div></div>"),pX=()=>{const[e]=jt(),t=Kt(),r=[{label:e("Characters"),value:"characters",content:$(eX,{})},{label:e("Draw"),value:"draw",content:$(MW,{})},{label:e("Messages"),value:"messages",content:$(zy,{isShared:!0})},{label:e("Notes"),value:"notes",content:$(zy,{isShared:!1})},{label:e("Tracker"),value:"tracker",content:$(hX,{})}];return(()=>{const a=dX.cloneNode(!0);return ft(a,$Y),Ve(a,$(JV,{items:r,onTabChange:s=>{t?.setSelectedNote(void 0)}})),a})()},Uy=mt("<div></div>"),mX=()=>{const e=Kt(),[t]=jt(),[r,a]=nt(!1);kj(e),F0(e,!1),F0(e,!0),zj(e),$j(e),Ir(()=>{if(!e)return;const h=lt();!h||h.browserID.trim()==""||Vj(e)});const s=Re(()=>e?e.notification().msg:""),f=Re(()=>e?lt().color:"#fff"),v=Re(()=>{if(!e)return"";const h=[];return Object.keys(e.connections()).forEach(n=>{h.push(`${e.connections()[n].username} [${e.connections()[n].connected_at},${e.connections()[n].last_seen_at}]`)}),h.join(`
`)});return $(xE,{get children(){const h=Uy.cloneNode(!0);return ft(h,IY),Ve(h,$(De,{type:"column",get children(){return[(()=>{const n=Uy.cloneNode(!0);return ft(n,BY),Ve(n,$(De,{get children(){return[$(Tu,{component:"Texte",get title(){return v()},color:"blue",style:{"align-self":"center","margin-right":"10px"},children:"Cyber RPG"}),$(Or,{get children(){return $(Ot,{get when(){return Uj()===!0},get children(){return $(fq,{style:{"align-self":"center"}})}})}}),$(Wr,{get when(){return lt().hosting},get children(){return $(pq,{style:{"align-self":"center"}})}})]}}),null),Ve(n,$(Wr,{get when(){return lt().username!=="Noname"},get children(){return $(Tu,{component:"Texte",get style(){return{"align-self":"center",color:`${f()}`}},get children(){return lt().username}})}}),null),Ve(n,$(De,{vcenter:!0,get children(){return[$(Ie,{color:"pink",size:"small",style:{"margin-right":"10px",opacity:.7},get children(){return[Re(()=>s())," "]}}),$(Le,{get title(){return t("Configuration")},onClick:()=>a(!0),get children(){return $(Kx,{})}})]}}),null),n})(),$(De,{get children(){return[$(UY,{}),$(pX,{})]}})]}}),null),Ve(h,$(MY,{open:r,setOpen:a}),null),h}})},vX=()=>{Kt();const[e]=tE();let t=e.data;if(t.trim()!==""){const r=Gx(t),a={...lt(),nats:r.nats,nats_token:r.token,remote:r.remote,hosting:!1};Ou(a),Ut(to,a)}return $(fE,{href:"/"})},gX=()=>{const e=wq();return Qi(e,"corporation.json"),"Translation"},yX=mt("<div><div></div></div>"),bX=({children:e})=>(()=>{const t=yX.cloneNode(!0),r=t.firstChild;return ft(t,dE),ft(r,hE),Ve(r,e),t})(),wX=()=>$(CE,{get children(){return $(bX,{get children(){return $(lE,{get children(){return[$($s,{path:"/",component:mX}),$($s,{path:"/gen",component:OY}),$($s,{path:"/trans",component:gX}),$($s,{path:"/connect",component:vX})]}})}})}}),xX={activated:"activated",Add:"Add",Armor:"Armor",Background:"Background",BIO:"BIO",bytes:"bytes",Browser_ID:"Browser ID",Character:"Character",Characters:"Characters",Clean:"Clean",Clear:"Clear",Client:"Client",Close:"Close",Color:"Color",Comment:"Comment",Configuration:"Configuration",config_current_storage:"Current storage is",config_storage_info:`Please remember that this app is using local browser storage instead
  of a database. The most popular limit for such a storage is about 5MB.`,config_network_desc1:`If you have an access to some MQTT server with Websockets, you can
  share dice rolls and board notes with other users. Please select
  'Host' or 'Client' mode below.`,config_network_desc2:`In 'Host' mode, you need only a MQTT server address and credentials
  (if needed), for 'Client' there should be also provided an ID of the
  hosting browser.`,Connection_link:"Connection link",Content:"Content",Corporation:"Corporation",Credits:"Credits",Credentials:"Credentials",Cyberdeck:"Cyberdeck",Cybermods:"Cybermods",d10:"d10",d100:"d100",d12:"d12",d20:"d20",d4:"d4",d6:"d6",d8:"d8",Delete_character:"Delete character",Delete_item:"Delete item",Delete_selected:"Delete selected",Deprived:"Deprived",dice_letter:"d",dmg_dice:"dmg dice",Draw:"Draw",Edit:"Edit",Employee_profile:"Employee profile",Export:"Export",Generate:"Generate",Generator:"Generator",Gossip:"Gossip",Host:"Host",HP:"HP",HTML_code:"HTML code",Identification:"Identification",Import:"Import",INF:"INF",Infosphere:"Infosphere",Infosphere_node:"Infosphere node",Input_comment:"Input comment for a roll",inventory_fatigued:"fatigued",inventory_total:"total",Inventory:"Inventory",Items:"Items",Messages:"Messages",Name:"Name",Network_connection:"Network connection",No:"No",Note:"Note",Notes:"Notes",NPC:"NPC",Objective:"Objective",Programs:"Programs",PSY:"PSY",Really_delete_character:"Really delete character",Really_delete_message:"Really delete message",Really_delete_track:"Really delete track",Remote_Browser_ID:"Remote browser ID",Resources:"Resources",Roll:"Roll",Save:"Save",Sector:"Sector",Select:"Select",Select_generator:"Select generator",Server_address:"Server address",Share:"Share",Shared:"Shared",Storage:"Storage",Subscription:"Subscription",Title:"Title",total:"total",Tracker:"Tracker",Username:"Username",Yes:"Yes"},CX={activated:"aktywnych",Add:"Dodaj",Armor:"Pancerz",Background:"Przesz\u0142o\u015B\u0107",BIO:"BIO",bytes:"bajt\xF3w",Browser_ID:"ID przegl\u0105darki",Character:"Posta\u0107",Characters:"Postacie",Clean:"Wyczy\u015B\u0107",Clear:"Wyczy\u015B\u0107",Client:"Klient",Close:"Zamknij",Color:"Kolor",Comment:"Komentarz",Configuration:"Konfiguracja",config_current_storage:"Aktualna zaj\u0119to\u015B\u0107 danych wynosi oko\u0142o",config_storage_info:`Prosz\u0119 pami\u0119ta\u0107, \u017Ce aplikacja u\u017Cywa lokalnych danych przegl\u0105darki
  a nie bazy danych. Popularny limit takiej pami\u0119ci dla przegl\u0105darek wynosi oko\u0142o 5MB.`,config_network_desc1:`Je\u015Bli masz dost\u0119p do serwera MQTT z komunikacj\u0105 Websocket, mo\u017Cesz
  wsp\xF3\u0142dzieli\u0107 rzuty ko\u015B\u0107mi, wiadomo\u015Bci i rysunki z innymi u\u017Cytkownikami. Wybierz poni\u017Cej
  tryb 'Gospodarz' lub 'Klient'.`,config_network_desc2:`W trybie 'Gospodarz', potrzebujesz adresu serwera MQTT i danych do
  autentykacji (je\u015Bli s\u0105 potrzebne), 'Klient' powinien poda\u0107 dodatkowo identyfikator przegl\u0105darki gospodarza.`,Connection_link:"Link",Content:"Zawarto\u015B\u0107",Corporation:"Korporacja",Credits:"Kredyty",Credentials:"Dane logowania",Cyberdeck:"Infodek",Cybermods:"Cybermody",d10:"k10",d100:"k100",d12:"k12",d20:"k20",d4:"k4",d6:"k6",d8:"k8",Delete_character:"Usu\u0144 posta\u0107",Delete_item:"Usu\u0144 element",Delete_selected:"Usu\u0144 wybrany",Deprived:"Dyskomfort",dice_letter:"k",dmg_dice:"ko\u015B\u0107 obra\u017C.",Draw:"Rysunek",Edit:"Edytuj",Employee_profile:"Profil pracownika",Export:"Eksport",Generate:"Generuj",Generator:"Generator",Gossip:"Plotka",Host:"Gospodarz",HP:"OCHR",HTML_code:"kod HTML",Identification:"Identyfikacja",Import:"Import",INF:"INF",Infosphere:"Infosfera",Infosphere_node:"W\u0119ze\u0142 Infospfery",Input_comment:"Komentarz do rzutu",inventory_fatigued:"zm\u0119czenie",inventory_total:"og\xF3\u0142em",Inventory:"Ekwipunek",Items:"Przedmioty",Messages:"Wiadomo\u015Bci",Name:"Imi\u0119",Network_connection:"Po\u0142\u0105czenie sieciowe",No:"Nie",Note:"Notatka",Notes:"Notatki",NPC:"BN",Objective:"Cel",Programs:"Programy",PSY:"PSY",Really_delete_character:"Naprawd\u0119 usun\u0105\u0107 posta\u0107",Really_delete_message:"Naprawd\u0119 usun\u0105\u0107 wiadomo\u015B\u0107",Really_delete_track:"Naprawd\u0119 usun\u0105\u0107 element",Remote_Browser_ID:"ID przegl\u0105darki gospodarza",Resources:"Zasoby",Roll:"Rzut",Save:"Zapisz",Sector:"Bran\u017Ca",Select:"Wybierz",Select_generator:"Wybierz generator",Server_address:"Adres serwera",Share:"Wsp\xF3\u0142dziel",Shared:"Wsp\xF3\u0142dzielony",Storage:"Dane",Subscription:"Abonament",Title:"Tytu\u0142",total:"og\xF3\u0142em",Tracker:"Monitor",Username:"Nazwa u\u017Cytkownika",Yes:"Tak"},SX={en:xX,pl:CX};let Ed="en";const jy=Ij();fd();jy.lang&&(Ed=jy.lang);const Sf=Hx("lang");Sf&&Sf!=""&&(Ed=Sf);const EX=zS(SX,Ed);SS(()=>$(o1.Provider,{value:EX,get children(){return $(uE,{get source(){return VS()},get children(){return $(wX,{})}})}}),document.getElementById("root"));
